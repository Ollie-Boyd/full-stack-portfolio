function SurveyManager(a){function b(){for(var a=0;a<Q.length;a++){var b=Q[a];try{i(b.e,b.ev,b.cb)}catch(c){}}Q=[]}function c(){this.dispose();for(var a=0;a<R.length;a++)try{R[a].innerHTML="";R[a].parentNode&&R[a].parentNode.removeChild(R[a])}catch(b){}R=[]}function d(){if(N.childNodes)for(var a=0;a<N.childNodes.length;a++)N.removeChild(N.childNodes[a]);N.className=V.info;N.style.display="none"}function e(b){u(b||a.successText,V.success)}function f(b){u(b||a.errorText,V.error)}function g(){var b,c=S.validateSurvey(!0);if(c.surveyValid){d();b=S.getJSONSurvey();if(a.callback&&"function"==typeof a.callback)try{a.callback(b)}catch(e){}}else{t(c.questionsNeeded);f()}return b}function h(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c);Q.push({e:a,ev:b,cb:c})}function i(a,b,c){a.addEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c)}function j(a,b){var c=document.getElementById(a);if(c&&k(b,c.className)){for(var d=c.className.split(" "),e="",f=0;f<d.length;f++){d[f]=d[f].replace(/^[\s*\n*\r*\t\*]$[\s*\n*\r*\t\*]/g,"");if(d[f]!=b&&d){f>0&&(e+=" ");e+=d[f]}}c.className=e}}function k(a,b){var c=b.split(" "),d=!1;a=a.replace(/^[\s*\n*\r*\t\*]$[\s*\n*\r*\t\*]/g,"");for(var e=0;e<c.length;e++)d||a!=c[e]||(d=!0);return d}function l(a){for(var b=0;b<a.length;b++)m(a[b])}function m(a){var b=document.getElementById(T.question+a);b&&(b.style.display="block")}function n(a){for(var b=0;b<a.length;b++)m(a[b].id)}function o(a){for(var b=0;b<a.length;b++)p(a[b].id)}function p(a){var b=document.getElementById(T.question+a);b&&(b.style.display="none")}function q(a){return a+Math.floor(1e4*Math.random())+"_"+Math.floor(1e4*Math.random())}function r(a,b){S.submitTextAnswer(b,a.value);j(T.question+b,U)}function s(a,b){var c=S.submitAnswerGetNextQuestions(a,b);c.questionsToShow&&n(c.questionsToShow);c.questionIdsToHide&&o(c.questionIdsToHide);j(T.question+a,U)}function t(a){for(var b=0;b<a.length;b++){var c=document.getElementById(T.question+a[b].id),d=c.className;k(U,d)||(c.className+=" "+U)}}function u(a,b){N.className=V.info+" "+b;if(N.childNodes)for(var c=0;c<N.childNodes.length;c++)N.removeChild(N.childNodes[c]);N.appendChild(document.createTextNode(a));N.style.display="block";N.focus()}function v(){a.rootElem&&1!==a.rootElem.nodeType&&"string"==typeof a.rootElem&&(M=document.getElementById(a.rootElem));B(S.header);x();y(a.buttonText||"Submit",a.buttonContainer);A();l(S.getActiveQuestionsIds());setTimeout(w,100)}function w(){var a=S.getQuestionByIndex(0);if(a&&a.id){var b=document.getElementById(T.question+a.id);switch(a.type){case S.questionTypes.SELECT:b.getElementsByTagName("SELECT")[0].focus();break;case S.questionTypes.RADIOH:case S.questionTypes.RADIO:case S.questionTypes.CHECKBOX:case S.questionTypes.TEXTF:b.getElementsByTagName("INPUT")[0].focus();break;case S.questionTypes.TEXT:b.getElementsByTagName("TEXTAREA")[0].focus()}b=null}}function x(){N=M.querySelector("."+V.info);N.setAttribute("tabIndex",P);N.style.display="none"}function y(a,b){b&&1!==b&&"string"==typeof b&&(b=document.getElementById(b));var c=b.getElementsByTagName("BUTTON")[0];c.setAttribute("tabIndex",z());c.innerHTML=a;h(c,"click",g);R.push(c)}function z(){var a=O;O+=1;return a}function A(){M.appendChild(W)}function B(a){if("undefined"!=typeof a){var b=M.getElementsByTagName("H2")[0];b.innerHTML=a}}function C(b){var c=document.createElement("SELECT");c.className="select-field";c.setAttribute("tabIndex",z());c.setAttribute("aria-labelledby",T.label+b.id);if(b.mandatory){c.setAttribute("aria-required","true");c.setAttribute("required","true")}var d=[{value:a.defaultSelect||"pick one..."}];d=d.concat(b.entry);for(var e=0;e<d.length;e++){var f=d[e],g=document.createElement("OPTION");g.setAttribute("value",f.value);g.innerHTML=this.sanitizeText(f.value).text;(f.checked===!0||"true"==f.checked)&&g.setAttribute("selected","selected");c.appendChild(g)}h(c,"change",function(a){D(a,c,b.id)});return c}function D(a,b,c){var d=b.value;s(c,d)}function E(a,b){for(var c=0;c<a.entry.length;c++){var d=a.entry[c],e=document.createElement("div");e.className="radio-button";var f=q("rb"),g=document.createElement("input");g.setAttribute("type","radio");g.setAttribute("value",d.value);g.setAttribute("name",T.radioButton+a.id);g.setAttribute("id",f);g.setAttribute("aria-describedby",T.label+a.id);g.setAttribute("tabIndex",z());(d.checked===!0||"true"==d.checked)&&g.setAttribute("checked","checked");if(a.mandatory){g.setAttribute("aria-required","true");g.setAttribute("required","true")}e.appendChild(g);var i=document.createElement("LABEL");void 0!==d.displayValue?i.innerHTML=d.displayValue:i.innerHTML=this.sanitizeText(d.value).text;i.setAttribute("for",f);e.appendChild(i);b.appendChild(e)}h(b,"click",function(b){F(b,a.id)});return b}function F(a,b){a=a||event;var c,d=a.target||a.srcElement;d.value?c=d.value:"LABEL"===d.nodeName&&(c=document.getElementById(d.getAttribute("for")).value);c&&s(b,c)}function G(a){var b=document.createElement("TEXTAREA");b.className="textarea-field";b.setAttribute("tabIndex",z());b.setAttribute("aria-labelledby",T.label+a.id);if(a.mandatory){b.setAttribute("aria-required","true");b.setAttribute("required","true")}a.lastKnownValue&&(b.value=a.lastKnownValue);h(b,"keyup",function(){r(b,a.id)});return b}function H(a){var b=document.createElement("INPUT");b.className="input-field";b.setAttribute("tabIndex",z());b.setAttribute("aria-labelledby",T.label+a.id);if(a.mandatory){b.setAttribute("aria-required","true");b.setAttribute("required","true")}a.validationType===S.validationTypes.EMAIL?b.setAttribute("type","email"):b.setAttribute("type","text");a.lastKnownValue&&(b.value=a.lastKnownValue);h(b,"keyup",function(){r(b,a.id)});return b}function I(a,b){for(var c=0;c<a.entry.length;c++){var d=a.entry[c],e=document.createElement("div");e.className="checkbox-button";var f=q("cb"),g=document.createElement("input");g.setAttribute("type","checkbox");g.setAttribute("value",d.value);g.setAttribute("name",T.checkbox+a.id);g.setAttribute("id",f);g.setAttribute("aria-describedby",T.label+a.id);g.setAttribute("tabIndex",z());if(a.mandatory){g.setAttribute("aria-required","true");g.setAttribute("required","true")}(d.checked===!0||"true"==d.checked)&&g.setAttribute("checked","checked");e.appendChild(g);var i=document.createElement("LABEL");i.innerHTML=this.sanitizeText(d.value).text;i.setAttribute("for",f);e.appendChild(i);b.appendChild(e)}h(b,"click",function(b){J(a.id)});return b}function J(a){for(var b=[],c=document.getElementsByName(T.checkbox+a),d=0;d<c.length;d++)(c[d].checked||c[d].getAttribute("checked")===!0||"checked"==c[d].getAttribute("checked"))&&b.push(c[d].value);s(a,b)}function K(a){var b=document.createElement("DIV");b.style.display="none";b.className="lp_question";b.setAttribute("id",T.question+a.id);var c=document.createElement("LABEL");c.setAttribute("id",T.label+a.id);c.className="lp_question_label";c.appendChild(document.createTextNode(a.label));if(a.mandatory){var d=document.createElement("SPAN");d.innerHTML="*";d.className="mandatory";c.appendChild(d)}b.appendChild(c);R.push(b);return b}function L(a){for(var b=document.createDocumentFragment(),c=0;c<a.length;c++){var d=a[c],e=K(d);switch(d.type){case S.questionTypes.SELECT:e.appendChild(C(d));break;case S.questionTypes.CHECKBOX:I(d,e);break;case S.questionTypes.RADIO:case S.questionTypes.RADIOH:E(d,e);break;case S.questionTypes.TEXT:e.appendChild(G(d));break;case S.questionTypes.TEXTF:e.appendChild(H(d))}b.appendChild(e)}return b}if(this===window||!a||!a.rootElem||!a.survey)return!1;var M,N,O=a&&a.startTabIndex||500,P=z(),Q=[],R=[],S=new lpTag.taglets.SurveyLogic(a.survey),T={question:"q_",checkbox:"cb_",radioButton:"rb_",select:"sel_",textArea:"txar_",input:"txt_",label:"lbl_"},U="error",V={info:"lp_survey_info",error:"lp_error",success:"lp_success"},W=L(S.getAllQuestions());document&&"complete"===document.readyState?v():h(window,"load",v);return{validateSurvey:g,showErrorMessage:f,showSuccessMessage:e,hideMessage:d,dispose:b,clearSurveyDOM:c}}function _stateChanged(a){var b=this.getFirstElement(this.LPViewMap.confirmButton),c=a.newValue;c===lpTag.unifiedWindow.State.CONNECTION_ISSUE?b.setAttribute("disabled","disabled"):b.removeAttribute("disabled")}window.lpTag=window.lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.log=lpTag.unifiedWindow.log||function(){function a(a){i=lpTag.taglets.lpUtil;var c=i.getURLParams(window.location.search),d=c.lpDebug;if(d){g(Object.keys(k).reduce(function(a,b){k[b]===+d&&(a=b);return a},m));b()}else if(a.debug){g("INFO");b()}}function b(){window.lpTaglogListeners=window.lpTaglogListeners||[];window.lpTaglogListeners.push(function(a,b,d){window.console&&b&&k[b]<=m&&-1===i.indexOf(l,d)&&console.log(c()+" "+d+" : "+a+" LEVEL: "+b)})}function c(){var a=new Date;return a.getHours()+":"+(a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes())+":"+(a.getSeconds()<10?"0"+a.getSeconds():a.getSeconds())}function d(a,b){h(a,"ERROR",b||j)}function e(a,b){h(a,"INFO",b||j)}function f(a,b){h(a,"DEBUG",b||j)}function g(a){k[a]&&(m=k[a])}function h(a,b,c){window.lpTag&&lpTag.log&&a&&lpTag.log(a,b,c||j)}var i,j="UnifiedWindowLogger",k={ERROR:1,INFO:2,DEBUG:3},l=["lp_SMT","lp_monitoringSDK","LP_OFFER"],m=k.ERROR;return{init:a,error:d,info:e,debug:f,setLogLevel:g,logLevels:k}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.apps={AUTHENTICATION:"authenticationDelegate",STEP_UP:"stepUpManager",CHAT:"API",CHAT_STATE:"ChatStateManager",APPLICATION:"EmbeddedWindowApplication",HEARTBEAT:"HeartBeatManager",UISTATE:"UIStateManager",UNIFIED_WINDOW:"lpUnifiedWindow",SECURE_FORM:"leSecureForm",WINDOW_SDK:"windowSDK",COBROWSE:"cobrowse",RICH_CONTENT:"richContent",FILE_SHARE:"fileShare",QUICK_REPLIES:"quickReplies"};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.events={chat:{ERROR:"error",INITIALIZED:"initialized",BLOD:"blueLightOfDeath(Ended)",CHATTING:"chatting",STATE:"state",CONVERSATION_STATE:"conversationState",DIALOG_STATE:"dialogState",CONVERSATION_CLOSED:"conversationClosed",CHAT_INFO:"chatInfo",USER_INFO:"userInfo",USER_LEFT:"userLeft",ENGAGEMENT_DATA:"engagementData",LINE:"line",COLLABORATION:"collaboration",SECURE_FORM:"leSecureForm",FINISHED_EVENTS_BULK:"finishEventsBulk",AGENT_TYPING:"agentIsTyping",AVAILABILITY:"availability",SURVEY_ERROR:"surveyError",EMAIL_TRANSCRIPT_SUCCESS:"emailTranscriptSuccess",EMAIL_TRANSCRIPT_ERROR:"emailTranscriptError",AUTHENTICATION_ERROR:"authenticationError",START_CHAT_INFO:"startChatInfo",TTR_INFO:"ttrInfo",CSAT_INFO:"csatInfo",BRAND_INFO:"brandInfoReceived",CONVERSATION_CONTENT:"conversationContent",SUBSCRIBE_MESSAGING_EVENTS_RESPONSE:"subscribeMessagingEventsResponse",CONVERSATION_HISTORY:"conversationHistory",NEW_CONVERSATION_REQUESTED:"newConversationRequested",NEW_CONVERSATION_CREATED:"newConversationCreated",MULTIPLE_CHANNELS_REQUESTED:"multipleChannelsRequested",SESSION_DATA:"sessionData",NO_SESSION:"noSession",FAILED_START_CONVERSATION:"failedStartConversation",FORGET_ME:"forgetMe",SET_REFRESH_MODEL_DELAY:"setRefreshModelDelaySec",CLOSE_WINDOW_FORGET_ME:"closeWindowForgetMe"},socket:{CONNECTED:"socketConnected",INITIALIZED:"socketInitialized",DISCONNECTED:"socketDisconnected",NON_RESPONSIVE:"socketNonResponsive",PING_SUCCESS:"pingSuccess"},application:{PROCESSING:"processing",OFFLINE_SURVEY:"offlineSurvey",PRE_CHAT_SURVEY:"preChatSurvey",POST_CHAT_SURVEY:"postChatSurvey",PRE_SMS_FORM:"preSmsForm",PRE_SMS_FORM_EXIT:"preSmsFormExit",END_CHAT:"endChat",END_SURVEY:"endSurvey",ENDED:"appEnded",DO_HARAKIRI:"doHaraKiri(Seppuku)"},heartBeat:{INIT:"init",FAILED:"failed",RESUMED:"resumed"},uiState:{POP_OUT:"popOut",EMBEDDED_CHANGED:"embeddedChanged",MAXIMIZED:"maximized",MINIMIZED:"minimized",ACTIONS_TOGGLE:"actionsToggle",SEND_BUTTON:"sendButton",PAPER_PLANE_BUTTON:"paperPlaneButton",FOCUS_CHANGE_EVENT:"focusChanged",EMOJI_FOCUS_ON_CLICK:"emojiFocus"},chatState:{ENDED:"ended"},unifiedWindow:{MAXIMIZE:"maximize"},viewController:{INITIATE_END_CHAT:"endChatInitiate",CLICKED:"clicked",DIALOG:"dialog",DIALOG_CLOSED:"dialogClosed",DIALOG_STATE_CHANGED:"dialogStateChanged",SLIDER_CLOSED:"sliderClosed",PREPARE_SLIDER_CLOSED_TIMEOUT:"prepareSliderCloseTimeout",SLIDER_VIEW_CHANGE:"sliderViewChange",CLOSE_ACTIONS:"closeActions",VISITOR_HAS_TYPED:"visitorHasTyped",MAXIMIZE_VISIBLE:"maximizeVisible",MINIMIZE_VISIBLE:"minimizeVisible",LINE_ADDED:"lineAdded",LINES_VIEWED:"linesViewed",CONVERSATIONS_VIEWED:"conversationsViewed",RETRY_GET_HISTORY:"retryGetHistory",CB_OFFER:"cbOffer",THANK_YOU_PAGE:"thankYouPage",SHOW_FORGET_ME:"forgetMeDialog",CLOSE_WINDOW_FORGET_ME:"closeWindowForgetMe",LINE_UPDATE:"lineUpdate",UPDATE_TIME_STAMP:"updateTimeStamp"},coBrowseEvents:{OFFERED:"cobrowseOffered",ACCEPTED:"cobrowseAccepted",DECLINE:"cobrowseDeclined",TIMEOUT:"cobrowseTimeout",INVITED:"cobrowseInvited",STARTED:"sessionStarted",RESUME:"sessionResume",ERROR:"sessionError",CANCELED:"cobrowseCanceled",DIALOG_CREATED:"cobrowseDialogCreated",RENDER_CALL_SCREEN:"cobrowseRenderCallScreen",SLIDER_OPENED:"sliderOpened",MAXIMIZE:"maximize"},widgetSDK:{INIT:"init",PARTICIPANTS:"participants",MESSAGES:"messages",WIDGET_AREA_STATE:"widgetAreaState",CONVERSATION_STATE:"conversationState",CONVERSATION_INFO:"conversationInfo",ENGAGEMENT_INFO:"engagementInfo",NOTIFICATION:"notification",VISITOR_TYPING:"visitorTyping",AGENT_TYPING:"agentTyping",DISPOSED_WIDGET_ID:"disposedWidgetID",INITIATED_WIDGET_ID:"initiatedWidgetID",WIDGET_NOTIFICATION:"widgetNotification"},imageShare:{IMAGE_SELECTED:"imageSelected",FILE_UPLOAD_URL_READY:"fileUrlGenerated",FILE_DONE_UPLOADED:"fileUploaded",FILE_UPLOAD_RETRY:"fileUploadRetry",FILE_DOWNLOAD_REQUEST:"fileDownloadRequest",SHOW_PREVIEW:"showPreview",OVERLAY_CLOSED:"overlayClosed",IMAGE_PREVIEW_CLOSED:"ImagePreviewClosed",IMAGE_PREVIEW_SHOW:"ImagePreviewShow",FILE_VALIDATION:"fileValidation"},richContent:{DISABLE_RICH_CONTENT:"disableRichContent",UPDATE_RICH_CONTENT_LINE:"updateRCLine"}};lpTag.unifiedWindow.publicEvents=lpTag.unifiedWindow.publicEvents||{API:{state:[{appName:"lpUnifiedWindow",eventName:"state",data:{state:"data"}},{appName:"ChatAPIV3",eventName:"state",data:"data"}],chatInfo:{appName:"lpUnifiedWindow",eventName:"conversationInfo",data:{agentName:"data.agentName",agentId:"data.agentId",conversationId:"data.rtSessionId",state:"data.chatState",monitoringSessionId:"data.monitoringSessionId",visitorId:"data.visitorId",skill:"data.skill",skillName:"data.skillName",engagementId:"data.engagementId",campaignId:"data.campaignId",language:"data.language",engagementName:"data.engagementName"}}}};lpTag.unifiedWindow.SurveyType={PRE_CHAT:"PreChatSurvey",EXIT_CHAT:"ExitSurvey",OFFLINE:"OfflineSurvey",CSAT:"CSAT",PRE_SMS:"PreSmsSurvey"};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.consts={dialog:{actions:{CONFIRM:"confirm",CANCEL:"cancel"}},views:{TOP_MENU:"topMenu",ACTION_MENU:"actionMenu"},chatEvents:{LINE:"line",INFO:"info",COBROWSE:"cobrowse",SECURE_FORM:"leSecureForm",RICH_CONTENT:"richContent",FILE_SHARING:"hosted/file"},errorTypes:{CONNECTION_UNAVAILABLE:"CONNECTION_UNAVAILABLE",AUTH_ERROR:"AUTH_ERROR",FAILED_START_CONVERSATION_ERROR:"FAILED_START_CONVERSATION_ERROR"},authErrorsTypes:{EXPIRED:"expired",INVALID_SESSION:"invalidSession",LOGOUT:"logout"},SecureForm:{LINK_CLICKED:"secureFormClicked",HIDE_CONVO:"hideMessagingConversation"},RichContent:{ACTION:"richContentAction",RICH_CONTENT_LINE:"rich-content",RICH_CONTENT_TYPE:"richcontent",LINK_CLICKED:"richContentLinkClicked"},engagementContainerClass:"LPMcontainer",reCaptchaContainerClass:"reCaptchaContainer",authConnectorTypes:{S2S:0,OAUTH_IMPLICIT:1,OAUTH_CODE:2,STEP_UP:3},defaultRedirectUri:"https://liveperson.net",slider:{viewType:{widgetSDKView:"widgetSDKView",PCIFormView:"pciFormView",CoBrowseInvite:"cobrowseInviteView",CoBrowseCallConnecting:"cobrowseCallConnectingView",RichContentLinkAction:"richContentLinkAction"}},widgetSDK:{WIDGET_NAME:"widgetName",AGENT:"agent",AGENT_ID:"agentId",VISITOR:"visitor",VISITOR_ID:"visitorId",SESSION_ID:"sessionId",MONTORING_SESSION_ID:"monitoringSessionId",ACCOUNT_ID:"accountId",CHANNEL_TYPE_MESSAGING:"messaging",CHANNEL_TYPE_CHAT:"chat",contentType:{text:"text/message",richContent:"text/richContent"}},csatStatus:{FILLED:"FILLED",PARTIALLY_FILLED:"PARTIALLY_FILLED",SKIPPED:"SKIPPED",EMPTY:"EMPTY"},coBrowse:{acceptedCoBrowseModes:["view","shared","follow","VIDEO_CALL","VOICE_CALL"],coBrowseChannelName:"COBROWSE"},engagementTypes:{CHAT_ENGAGEMENT:"chat",MESSAGING_ENGAGEMENT:"messaging"},richContentActionTypes:{LINK:"link",NAVIGATE:"navigate",PUBLISH_TEXT:"publishText",CAROUSEL_OFFSET_CHANGE:"carouselOffsetChange",CHECKED:"checked",SUBMIT_AS_TEXT:"submitAsText"},fileSharing:{fileAttributes:{TYPE:"type",SIZE:"size"},fallbackThumbnail:{URI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABaCAYAAAAFOiBkAAAAAXNSR0IArs4c6QAACf9JREFUeAHtXelzFMcVf7u6FnQAlkDoQAe7qwuBHISQQSIFCGRIikDssp2kqLjs2FWO+ZB/If9CPqeKipNUOR9CiEOEAVsWBowBGxuD0YEudEvoAq/uA/J+rZ3JaLSjnVnNrIw0jxptT0/P6+5fv37d/fpN4yAVNTU1Fc7MzLzL0ceePXuWwpdLlWRF3Docjgm+ergy5yIjI//s8Xi+V1bMId0wAFENDQ1/4vu3ExMTI+Pj4yOio6OJX5aSrKhfri9NTU2Rz+ebHRwcnOHKnc7Nzf0D13caFRW19oNS7XK5StLS0lyM4IoCIVhluIdQV1fXBNNXDE4FwHHiJUgKQMnMzFx1oKD+EATUHRj4ew05/Drla7fbHbPaJAWgKAmS09zcPMk47HJC0UKnrHZQABAwABbABF3pGBStErnVHPZjcczJijcFo49NcwgAC2ACYFwrdUgOpbGBBTARo1IoDFb6OzYwGi1sA2MDo4GARrQtMTYwGghoRNsSowGMZcvop0+f0hfXv6Ta2loaGRnVyD706Li4WCooKKCyvXvI6TS/fS0DBqDcuvVV6DUP8ibAlvjvKy8Lktr4Y/Oh9pcBkhIOsiofy4CxovsEAtqqfCzrSoEqoY7LyMigA/t/KqJrLl+h9vZ2dZJlu7dMYvTUCKDExcWJSwJIz3vhSLOswISjgqHmsazAoPuMjIyIC+EfEy2rjoFO+eCvf/8x4SGXZVmBkUsRIBAREUGvvnJC7Gv988xZmp2dDZDKuqhl6UpZWZm0YcOGRWu1c+dPaOPGjZSUlEQIh5vCDozX66Gf/+wovf7aq7R169aA9U1IiKdiBRgIIy6cFFZg0D32vFQq6oetiqNHKqm4eOeC+u7bV05IKxHCiAsnhRWYF4t2EG9PzKvfS6W7qeLgAXkhmJWZSbjUpBWvTmfWfdiAWbNmjaauyMvLpePHj1FsbOyikqGWJLNACMQnbMCU7i6hxfavUlNS6Ne/emNRXaLWPYEqZFZcWIBBhQoK8oOWOSYm+MYfRiiXKyYor6UmCAsws7NPaWxsbKllFe+PjY+bwicYE8smeLCwSSaB0dFR+ssHfwtWlpCeIx8ryDKJgdkxHGRVPpZJDGyxoHDYfK1oAMuAgYEatlgr7LFWAKHmaVlXUmf0vN3bwGi0mA2MDYwGAhrRtsTYwGggoBFtS4wNjAYCGtG2xNjAaCCgEW1LjAYwpq+VsLPY3d1DcBzasiVdmCuRd29vH01MTgS058Is0ffoEW1OTqa1a9fKRTXCq7X1ofgWAHmaQaYCc+fOd3T58yvzNscqKg4SjODXv7xBPT09dOr99xaUu6Ozk6qqPqZfnjjOWyrZ4rkRXjfZQenatS+o8vAh0RgLMgghwjRgWlpaqfqzGsrI2EIAIyY6hh62PSSvx2O4WEZ4QRKvs/dWbk4Obd9eaDgvrRdMA+YqtxjoyMuV8hbJthCNVXp5TU9PU9X5j4UbyeHDFVp1DCneFOU7MzNL/F2h2E5V7xsZLZURXpDQx48fU2XlIYqJMddAbgow4+Nj+GKDkpM3GcVhQXq9vCYnJ+n+/Tk/v+am5gV8lhphCjDwioLFrrOza6nlEd1CDy80BHQKlPWd7+7iY88l561kYAow+MYnmYfaJ0+eiC4lZYDCQw8YIb28oqKi6OCB/XToUAUhfPHSp4RuaBZFnDp16o9wt1gqJSQkUG1dHTXz6ORg6RkYGKDPr1ylwYFBys7Oorr6BqEPIA1d3d3ylZSUKOIbG5soPy9PuIfo4YW5D/a9Y/iLNGzA1dbWiWlCoH1vo3VD2U0blTIzM+jE8V/QZzWXqYYvEBRxEc9hJMJXqlevXpNuxW9ujnfePW708FK+VLRjB9Uz8Ldvf8PDtpc2b96sfBxS2MHbG8/y84Nvnxrhzh92c3KHKVupZvLSW4c6lnzTJEaZKX/YrbxdUthMXkYKYoryNZLh85LWBkajpWxgNIDRpWM6OjppeibwfCQ6KprS09MEe5gaunkoHhwcYgegBEpNTdGcqrexj6+D/2HRqSQM5VOTU2KIb2ltpXiePGI64WNzRn9/vzKpCK9ft46POhkRJoe0tFT5OcwYL7BnKOY4ILih9Pb10Ub2AtWzbNEFzMVLn4jJm5yrIgB30zd/e5Iwr/j3R+fY7tIrP4XrGDw0A9lI7t69Rw8eNNK777wtQMRLOM/lzJl/UQp7V8Hl9ezZj4TD0dEjL1N7WztduHhJ5i0FdhUX09DwEHV0dND7v39PAIRn/+Gy7C3bQ9JC9ls2idy4cZNOnvyNecDA9XSWpQH04Yf/4EnYC3SEPS5BkX7vygsXLtHQ0JCwqUAK+rh1qs5foP9Wnad3fveW3HLiJf6DAgOYhoYHVFKyS0Rjkjc9PUPbC7XNB8g3NfX/kuHixWNzSwvBVPGwrY08brew+/zg8wneEjB8yodogORN+tZzunQMusWG9evF5XA4KYpdUaV7iGVf3yNRKLd7q1i7wFWVD+ihMm4xiHA9V15NkAhY65TPMHPG8Oz1etTJ5fv4uHg5b5QBTo8AAzPqJv9iEmCD2ljKMA/CUqW/f4BtQ26ZT7CArq4UjEn/wFzfT0+fb1ZElwA9Hh5ewAIVyWdvzdvffEvD/DySdQF0GWbK8OvFOisQwVYDMEClu3eJBgCYWzhvSA303IPGRtEdYTFsZLCmpiZF+sUAFwkUf3RJjCJ9wODkxFzGUJRKkhTf1FRgxS15Q0Fq6urqBRiFhduULBaEcWSWdPlPkhJpvDkeGmf/PHwnCWVcWloilDafICQkCdIJKdZLpkiMpOWh9bOzs+S8fT/4RHjdugQ5ThnYtAnfCiQKXYB43AfTAeVlZQtGMrzrcXuourqGbty8JUZCLCaxgMVHq5C+7UEABw8lmSIxMDnAXKC2iXx//77Ia7GWgnKE9Q9X4bbFpUVZcHU4NnatmB7gKxXoOnRHPohLdC0AY6QbgbcpEgOJyONC1NXX0yefVlM6iyzmKbCwQTGmpGivdvPz8+gKr7hRET2L2XruGpBMiTCHgvM0KMfr5cbpphz/ih3lQt5DQ8MsZRnSK7p+TQEGOVVWHiZnhFPYRTBHgRf4i0VFtN//MahWaTDXgdjDZqvHsfnevXnn+FF5+V4ZGEgFtmmUNpnc3Bzq630kf6ugVQ51vOlmB4jt6OgYmyhj1Xlp3sN+i664mEu95suqB5geKDft0LVwGeFtidkBFTQCCuplpoVfCQp4o4viMkqmKF+jmT4P6W1gNFrJBsYGRgMBjWhbYmxgNBDQiHby8DqBuYdNcwgAC2ACYHpgObNpDgFgAUygY875+HhoG5g5BPxYnHNG8kHiODMb26ernYABsAAmTv/p6qdxZvZqB8aPwWlgYh+mztIASQEoTPJh6gIYSAprY/v4ffXx+8ouZP+HDXNo/A/VKuq403VhBwAAAABJRU5ErkJggg==",TYPE:"image/png",HEIGHT:90,WIDTH:70}},googleMapsUrl:"https://www.google.com/maps/search/?api=1&",externalTargets:{SMS:0}};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.hooks={BEFORE_SUBMIT_SURVEY:"BEFORE_SUBMIT_SURVEY",AFTER_GET_SURVEY:"AFTER_GET_SURVEY",BEFORE_SEND_VISITOR_LINE:"BEFORE_SEND_VISITOR_LINE",AFTER_GET_LINES:"AFTER_GET_LINES",AFTER_LOAD_SURVEY:"AFTER_LOAD_SURVEY",AFTER_SUBMIT_SURVEY:"AFTER_SUBMIT_SURVEY",AFTER_ABANDONED_SURVEY:"AFTER_ABANDONED_SURVEY",ON_WINDOW_CLOSED:"ON_WINDOW_CLOSED"};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.CsatDataGenerator=function(a){return{id:0,title:"",header:"",questions:{question:[{type:"CSAT",validationType:"csat",label:a.translate("csatRatingQuestion"),id:0,order:0,mandatory:!1}]}}};lpTag.unifiedWindow.contentTypes={TEXT_PLAIN:"text/plain",EXTERNAL_FILE:"external/file",HOSTED_FILE:"hosted/file",SECURE_FORM_INVITATION:"forms/secure-invitation",SECURE_FORM_SUBMISSION:"forms/secure-submission",SECURE_FORM_UPDATE:"forms/secure-update"};lpTag.unifiedWindow.MessageTypes={CONTENT:"ContentEvent",RICH_CONTENT:"RichContentEvent"};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.structuredContentTypes=lpTag.unifiedWindow.structuredContentTypes||{QUICK_REPLIES:"quickReplies",BUTTON:"button",LIST:"list"};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.State={INIT:"init",INITIALIZED:"initialised",PRE_CHAT:"preChat",REQUESTED:"startChat",CHATTING:"chatting",POST_CHAT:"postChat",PRE_SMS:"preSms",OFFLINE:"offline",WAITING:"waiting",PENDING:"pending",ENDED:"ended",NOT_FOUND:"notfound",APP_ENDED:"applicationEnded",ERROR:"error",RESUME:"resume",PAUSED:"paused",RESUME_PAUSED:"resumepaused",AUTH_ERROR:"authenticationError",CONNECTION_ISSUE:"connectionIssue",RESTART_AUTHENTICATION:"restartAuthentication",STEP_UP_AUTH:"stepUpAuth",INTERACTIVE:"interactive"};lpTag.unifiedWindow.Priority=function(){var a=lpTag.unifiedWindow.State,b={},c=0;b[a.INIT]=c++;b[a.INITIALIZED]=c++;b[a.PRE_CHAT]=c;b[a.OFFLINE]=c++;b[a.REQUESTED]=c++;b[a.WAITING]=c;b[a.PENDING]=c;b[a.RESUME]=c;b[a.PAUSED]=c;b[a.RESUME_PAUSED]=c;b[a.CHATTING]=c++;b[a.ENDED]=c++;b[a.POST_CHAT]=c++;b[a.NOT_FOUND]=c++;b[a.ERROR]=c++;b[a.APP_ENDED]=c;return b}();lpTag.unifiedWindow.MessageState={ERROR:"ERROR",PENDING:"PENDING",SENT:"SENT",VIEWED:"VIEWED",ACCEPT:"ACCEPT",READ:"READ",FAILED:"FAILED"};lpTag.unifiedWindow.MessagePriority=function(){var a=lpTag.unifiedWindow.MessageState,b={},c=0;b[a.ERROR]=c;b[a.PENDING]=c++;b[a.SENT]=c++;b[a.VIEWED]=c++;b[a.ACCEPT]=c++;b[a.READ]=c++;b[a.READ]=c++;b[a.FAILED]=c++;return b}();lpTag.unifiedWindow.secureFormStates={SEND:"send",RECEIVED:"received",VIEWED:"viewed",VIEWED_ON_ANOTHER_TAB:"viewedOnAnotherTab",ABORTED:"aborted",SUBMIT:"submit",ERROR:"error"};lpTag.unifiedWindow.richContentStates={ACTION_EVENT:"actionEvent",PUBLISH_TEXT:"publishText",DISPLAYED:"contentDisplayed",SUBMIT_AS_TEXT:"submitAsText"};lpTag.unifiedWindow.quickRepliesStates={ACTION_EVENT:"actionEvent",PUBLISH_TEXT:"publishText"};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.welcomeMessageStates=lpTag.unifiedWindow.welcomeMessageStates||{showTiming:{FIRST_TIME:"FIRST_TIME",EVERY_TIME:"EVERY_TIME"}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.ChatModelPath=lpTag.unifiedWindow.ChatModelPath||function(){if(!lpTag.unifiedWindow.chatModelPath){var a={name:"chatModel"},b=window.liveperson.uiframework.latest.LPModel;a.LINES=b.createPath("chat.lines",null,a.name);a.SECURE_FORMS=b.createPath("chat.secureForms",null,a.name);a.AGENT_NAME=b.createPath("chat.agentName",null,a.name);a.VISITOR_NAME=b.createPath("chat.visitorName",null,a.name);a.PARTICIPANTS=b.createPath("chat.participants",null,a.name);a.AGENT_ID=b.createPath("chat.agentId",null,a.name);a.CHAT_ID=b.createPath("chat.chatId",null,a.name);a.CURRENT_DIALOG_TYPE=b.createPath("chat.currentDialogType",null,a.name);a.AGENT_IS_TYPING=b.createPath("chat.agentIsTyping",null,a.name);a.SURVEYS_PRECHAT=b.createPath("chat.surveys.preChat",null,a.name);a.SURVEYS_EXIT=b.createPath("chat.surveys.exit",null,a.name);a.SURVEYS_OFFLINE=b.createPath("chat.surveys.offline",null,a.name);a.TTR=b.createPath("chat.ttr",null,a.name);a.TRANSCRIPT_LOADED=b.createPath("chat.transcriptLoaded",null,a.name);a.SDK_NOTIFICATIONS=b.createPath("windowsdk.notifications",null,a.name);a.SDK_BUTTON_ENABLE=b.createPath("windowsdk.buttonEnable",null,a.name);a.SURVEYS_PRESMS=b.createPath("chat.surveys.preSms",null,a.name);lpTag.unifiedWindow.chatModelPath=a}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.UIModelPath=lpTag.unifiedWindow.UIModelPath||function(){if(!lpTag.unifiedWindow.uiModelPath){var a={name:"uiModel"},b=window.liveperson.uiframework.latest.LPModel;a.STATE=b.createPath("chat.state",null,a.name);a.CONVERSATION_DATA=b.createPath("chat.conversationData",null,a.name);a.AGENT_PICTURE_URL=b.createPath("chat.agentPicUrl",null,a.name);a.VISITOR_TYPING=b.createPath("chat.isVisitorTyping",null,a.name);a.WINDOW_MAXIMIZED=b.createPath("window.maximized",null,a.name);a.ACTIONS_VISIBLE=b.createPath("window.actionsVisible",null,a.name);a.EMOJI_VISIBLE=b.createPath("window.emojisVisible",null,a.name);a.TOP_MENU_VISIBLE=b.createPath("window.topMenuVisible",null,a.name);a.WINDOW_POSITION=b.createPath("window.position",null,a.name);a.WINDOW_SOUND=b.createPath("window.sound",null,a.name);a.EMOJI_MENU=b.createPath("window.emojiMenu",null,a.name);a.WINDOW_EMBEDDED=b.createPath("window.embedded",null,a.name);a.LAST_LINE_VIEWED=b.createPath("window.lastLineViewed",null,a.name);a.ACTION_POPOUT_ENABLE=b.createPath("popout.enable",null,a.name);a.SECURE_FORMS_TAB_HANDLER=b.createPath("collaboration.secureFormsTabHandler",null,a.name);a.IDNV_DATA=b.createPath("collaboration.idnvData",null,a.name);a.WIDGET_SLIDER_VISIBLE=b.createPath("windowsdk.sliderVisible",null,a.name);a.SELECTED_WIDGET_ID=b.createPath("windowsdk.selectedWidgetId",null,a.name);a.DISPOSED_WIDGETS_IDS=b.createPath("windowsdk.disposedWidgetsIds",null,a.name);a.INITIATED_WIDGETS_IDS=b.createPath("windowsdk.InitiatedWidgetsIds",null,a.name);a.WIDGETS_NOTIICATIONS=b.createPath("windowsdk.widgetsNotifications",null,a.name);a.STEP_UP_STATE=b.createPath("chat.stepUpState",null,a.name);a.PRE_SMS_CONTEXT=b.createPath("chat.preSmsContext",null,a.name);a.LAST_VIEWED_TAB=b.createPath("tabs.lastViewedTab",null,a.name);a.TAB_LIST=b.createPath("tabs.list",null,a.name);lpTag.unifiedWindow.uiModelPath=a}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.WidgetModelPath=lpTag.unifiedWindow.WidgetModelPath||function(){if(!lpTag.unifiedWindow.widgetModelPath){var a={name:"WidgetModelPath"},b=window.liveperson.uiframework.latest.LPModel;a.CONVERSATION_ID=b.createPath("conversation.id",null,a.name);a.SESSION_ID=b.createPath("conversation.sessionId",null,a.name);a.DIALOGS=b.createPath("conversation.dialogs",null,a.name);a.WINDOW_UI=b.createPath("ui.window",null,a.name);lpTag.unifiedWindow.widgetModelPath=a}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.ChatDelegate=lpTag.unifiedWindow.ChatDelegate||function(a,b){function c(){var b=window.location.hostname.indexOf("liveperson.net")>0?["xhr","postmessage","rest2jsonp"]:["postmessage","rest2jsonp"],c={transportOrder:b,lpNumber:a.accountId,appKey:a.appKey,domain:a.domain||"",secureStorageLocation:a.secureStorageLocation,sessionUID:a.sessionId,useSecureStorage:a.useSecureStorage,failureTolerance:a.failureTolerance,reconnectTimeout:a.reconnectTimeout,onInfo:G,onInit:I,onState:O,onEventList:J,onSessionData:L,onAgentTyping:K,onAuthentication:h,onAuthenticationFail:i};M();V=new lpTag.taglets.ChatOverRestAPI(c);aa.info("createChatInstance",Z)}function d(){V=null;ga={}}function e(c,d){var e={};if(a.agent&&"string"==typeof a.agent)e.agent=a.agent;else{a.skill&&"string"==typeof a.skill&&(e.skill=a.skill);a.maxWaitTime&&"number"==typeof a.maxWaitTime&&(e.maxWaitTime=a.maxWaitTime)}e.success=function(a){b.trigger({appName:$,eventName:ca.AVAILABILITY,data:a});c&&c(a)};e.error=P(d);V.getAvailabilty(e)}function f(b,c){var d={};a.preSurveyId?d.surveyApiId=a.preSurveyId:a.visitorProfile?d.visitorProfile=a.visitorProfile:a.surveyName?d.surveyName=a.surveyName:a.visitorIp&&(d.visitorIp=a.visitorIp);a.skill&&(d.skill=a.skill);k(d);aa.info("getPreChatSurvey, configuration="+JSON.stringify(d),Z);d.success=function(a){F(ba.PRE_CHAT,!0);b&&b(a)};d.error=P(c,!0);V.getPreChatSurvey(d)}function g(a,b,c){X=b;Y=c;V.authenticate({authChatConnId:a.connectorId,ssoKey:a.ssoKey,redirectUri:a.redirectUri,engagementId:a.engConf.eid,contextId:a.engConf.scid,sessionId:a.engConf.ssid,visitorId:a.engConf.svid})}function h(a){X&&X(a||{})}function i(a){Y&&Y(a||{})}function j(b,c,d){var e=b&&b.surveyData,f=b&&b.conversationData,g={};if(a||e||f){if(a.agent)g.agent=a.agent;else if(a.skill)g.skill=a.skill;else if(a.serviceQueue&&!isNaN(a.maxWaitTime)){g.serviceQueue=a.serviceQueue;g.maxWaitTime=a.maxWaitTime}a.interactionTimeout&&(g.interactionTimeout=a.interactionTimeout);a.queuePriority&&(g.queuePriority=a.queuePriority);(a.availabilityPolicy===da.OFFLINE||a.availabilityPolicy===da.CHAT)&&(g.availabilityPolicy=a.availabilityPolicy);a.preChatLines&&"object"==typeof a.preChatLines&&(g.preChatLines=Object.keys(a.preChatLines).map(function(b){return a.preChatLines[b]}));"string"==typeof a.ssoKey&&(g.ssoKey=a.ssoKey);e&&"object"==typeof e&&e.survey&&e.survey.question&&e.survey.question.length>0&&(g.survey=e.survey);if(f&&"object"==typeof f){g.participantId=f.participantId;g.conversationId=f.conversationId}k(g);g.engagementId=a.eid;g.campaignId=a.cid;g.language=a.lang;Q()&&T(g)}aa.info("startChat="+JSON.stringify(g),Z);g.success=function(a){c&&c(a)};g.error=P(d);V.requestChat(g)}function k(b){if(a){"string"==typeof a.svid&&(b.LETagVisitorId=a.svid);"string"==typeof a.ssid&&(b.LETagSessionId=a.ssid);"string"==typeof a.scid&&(b.LETagContextId=a.scid)}}function l(a,b,c){V.addLine({text:a.text,success:b,error:c});aa.info("sendLine="+JSON.stringify(ka.excludeAttributes(ka.clone(a),["text"])),Z)}function m(a,b,c,d){var e={subType:ca.SECURE_FORM,command:a,info:c};d&&(e.text=d);S(o).call(this,e)}function n(a,b){lpTag.taglets.lpUtil.runCallback(b,null,{submitOtk:a&&a.submitOtk,formOtk:a&&a.getOtk})}function o(a,b,c){if(a){a.success=b;a.error=c;V.sendCollaboration(a)}aa.info("sendCollaboration="+JSON.stringify(a),Z)}function p(a,b,c){if(W&&(W===ba.CHATTING||W===ba.INTERACTIVE)){V.setVisitorTyping({typing:a,success:b,error:c});aa.info("setVisitorTyping="+a,Z)}}function q(a,b,c,d){var e=6e4*(new Date).getTimezoneOffset();V.requestTranscript({email:a,subject:b,success:c,error:d,timezoneOffset:e});aa.info("emailTranscript="+JSON.stringify(a),Z)}function r(){aa.info("resumingPauseChat",Z);V.getState()===V.chatStates.PAUSECHAT&&V.resumePausedChat()}function s(){aa.info("pausingChat",Z);V.pauseChat()}function t(a,b){V.endChat({success:function(b){a&&a(b)},error:b});aa.info("endChat",Z)}function u(a,b,c){if(a&&a.survey&&a.survey.question&&a.survey.question.length>0)V.submitExitSurvey({survey:a.survey,success:function(a){F(ba.APP_ENDED,!0);b&&b(a)},error:c});else{c({error:"Missing survey data"
});aa.error("submitExitChatSurvey, No Survey Data",Z);v()}}function v(){V.cancelSurvey()}function w(b,c){var d={windowSurveyEnabled:!0,success:function(a){F(ba.OFFLINE,!0);b&&b(a)},error:P(c)};a.surveyOfflineId?d.surveyApiId=a.surveyOfflineId:a.visitorProfile?d.visitorProfile=a.visitorProfile:a.visitorId?d.visitorId=a.visitorId:a.surveyName&&(d.surveyName=a.surveyName);a.skill&&(d.skill=a.skill);a.skillId&&(d.engSkillId=a.skillId);k(d);V.getOfflineSurvey(d)}function x(b,c,d){var e={success:function(a){F(ba.APP_ENDED,!0);c&&c(a)},error:d};if(b&&b.survey&&b.survey.question&&b.survey.question.length>0){"string"==typeof a.svid&&(e.LETagVisitorId=a.svid);"string"==typeof a.ssid&&(e.LETagSessionId=a.ssid);"string"==typeof a.scid&&(e.LETagContextId=a.scid);"string"==typeof a.offsiteEngContext&&(e.offsiteEngContext=a.offsiteEngContext);"string"==typeof a.skill&&(e.skill=a.skill);Q()&&T(e);e.survey=b.survey;V.submitOfflineSurvey(e);aa.info("submitOfflineSurvey, survey"+JSON.stringify(b.survey),Z)}else{d({error:"Missing survey data"});e=null;aa.error("submitOfflineSurvey, ERROR",Z);v()}}function y(b,c,d){var e={windowSurveyEnabled:!!b,success:function(a){F(ba.POST_CHAT,!0);c&&c(a)},error:P(d,!0)};a.exitSurveyId?e.surveyApiId=a.exitSurveyId:a.surveyName&&(e.surveyName=a.surveyName);a.skillId&&(e.engSkillId=a.skillId);V.getExitSurvey(e);aa.info("getExitSurvey, id="+a.exitSurveyId,Z)}function z(){V.disposeVisitor()}function A(){V.reInit()}function B(){return V.getSessionKey()}function C(){return ea}function D(){return fa.visitor}function E(a,b){aa.info("richContentRequest with body: "+JSON.stringify(a)+" and data: "+JSON.stringify(b),Z);a&&a.sequenceId&&a.state&&V.addLineStatusEvent({status:a.state,metadata:b,refSequenceId:a.sequenceId})}function F(c,d){W=c;ba.NOT_FOUND===W&&(W=ba.APP_ENDED);b.trigger({appName:$,eventName:ca.STATE,data:W,global:!0});ba.CHATTING===W&&b.trigger({appName:_,eventName:ca.ENGAGEMENT_DATA,global:!0,data:{engagementName:a.ename,state:W}});if(d||ba.WAITING===W||ba.ENDED===W){ga.chatState=W;H()}ba.ENDED===W&&b.trigger({appName:$,eventName:ca.BLOD,data:{engagementName:a.ename}})}function G(b){if("object"==typeof b){ga=ga||{};ga.agentName=b&&b.agentName||"";ga.agentId=b&&b.agentId||"";ga.agentPictureUrl=b&&b.agentPictureUrl||"";ga.skillName=b&&b.skillName||"";ga.rtSessionId=b&&b.rtSessionId||ga.rtSessionId||"";ga.chatState=b&&b.chatState||ga.chatState||"";ga.monitoringSessionId=a&&a.ssid||ga.monitoringSessionId||"";ga.visitorId=a&&a.svid||ga.visitorId||"";ga.visitorName=b&&b.visitorName||ga.visitorName||"";ga.skill=a&&a.skill||ga.skill||"";ga.engagementId=a&&a.eid||ga.engagementId||"";ga.campaignId=a&&a.cid||ga.campaignId||"";ga.language=a&&a.lang||ga.language||"";ga.engagementName=a&&a.ename||ga.engagementName||"";ga.lastUpdate=b.lastUpdate||ga.lastUpdate||"";H()}}function H(){b.trigger({appName:$,eventName:ca.CHAT_INFO,data:ga})}function I(a){if(!a||a.error||"ERROR"===a)b.trigger({appName:$,eventName:ca.ERROR,data:{errorType:la.CONNECTION_UNAVAILABLE}});else if(!ea){R();F(ba.INIT);b.trigger({appName:$,eventName:ca.INITIALIZED});ea=!0}}function J(a){for(var c,d=Array.isArray(a)?a:[a],e=0;e<d.length;e++){c=d[e];ka.indexOf(ha,c[ia])>=0&&b.trigger({appName:$,eventName:c[ia]===ja?c.subType:c[ia],data:c})}b.trigger({appName:$,eventName:ca.FINISHED_EVENTS_BULK})}function K(a){b.trigger({appName:$,eventName:ca.AGENT_TYPING,data:a})}function L(a){b.trigger({appName:$,eventName:ca.SESSION_DATA,data:a})}function M(){fa.bindId=b.bind({appName:$,eventName:ca.LINE,func:N})}function N(a){switch(a.source){case"visitor":fa.visitor=!0;break;case"agent":fa.agent=!0}if(fa.agent&&fa.visitor){F(fa.state,!0);b.unbind(fa.bindId)}}function O(a){F(a.state)}function P(a,c){return function(d){a&&a(d);c||d&&d.error&&(5===d.error.internalCode||32===d.error.internalCode||Q()&&10===d.error.internalCode)||b.trigger({appName:$,eventName:ca.ERROR,data:{errorType:la.CONNECTION_UNAVAILABLE}})}}function Q(){return window.recaptchaRenderer}function R(){if(window.recaptchaRendererV2&&V.isCaptchaV2Supported&&V.isCaptchaV2Supported()){window.recaptchaRenderer=window.recaptchaRendererV2;window.recaptchaRenderer.renderCaptcha(a);window.recaptchaRendererV1.removeFromPage()}else window.recaptchaRendererV1&&(window.recaptchaRenderer=window.recaptchaRendererV1)}function S(a){return function(){V&&a.apply(null,arguments)}}function T(a){var b=window.recaptchaRenderer.getRecaptchaProps()||{};Object.keys(b).forEach(function(c){a[c]=b[c]})}function U(){}var V,W,X,Y,Z="ChatDelegate",$=lpTag.unifiedWindow.apps.CHAT,_=lpTag.unifiedWindow.apps.UNIFIED_WINDOW,aa=lpTag.unifiedWindow.log,ba=lpTag.unifiedWindow.State,ca=lpTag.unifiedWindow.events.chat,da=(lpTag.taglets.postmessage,{OFFLINE:0,CHAT:1}),ea=!1,fa={state:ba.INTERACTIVE,agent:!1,visitor:!1,bindId:null},ga={},ha=["line","leCollaboration"],ia="@type",ja="leCollaboration",ka=lpTag.unifiedWindow.applicationUtils,la=lpTag.unifiedWindow.consts.errorTypes;return{createChatInstance:c,isInitialized:C,isInteractive:D,dispose:d,resumePolling:S(r),stopPolling:S(s),getAvailability:S(e),getPreChatSurvey:S(f),startConversation:S(g),startChat:S(j),sendLine:S(l),sendCollaboration:S(o),sendStatesUpdate:S(U),setVisitorTyping:S(p),emailTranscript:S(q),endChat:S(t),getExitSurvey:S(y),submitExitChatSurvey:S(u),getOfflineSurvey:S(w),submitOfflineSurvey:S(x),cancelSurvey:S(v),disposeVisitor:S(z),reInit:S(A),getSessionKey:B,secureFormRequest:m,getSecureFormOTKs:n,richContentRequest:S(E)}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.MessagingDelegate=lpTag.unifiedWindow.MessagingDelegate||function(a,b){function c(a,b,c,d,e,f){var g=u(a,b,c,d,f);ia=!0;if(e){A();ha=new lpTag.UMSClientAPI(g)}else ha?ha.reInit(g):ha=new lpTag.UMSClientAPI(g);la.info("createMessagingInstance",ja)}function d(){var a={};a.success=function(){};a.error=function(){};ha.getMyUserProfile(a);la.info("getMyUserProfile, configuration="+JSON.stringify(a),ja)}function e(a,b){la.info("getOTK "+JSON.stringify(a),ja);var c={uploadable:{dialogId:Da.id}};"object"==typeof a&&(c.uploadable=va.cloneExtend(c.uploadable,a));ha.generateUploadToken({success:b,error:b},c)}function f(b){if(b)if(b.contentType){ha.sendPCIMessage(b);"submit"===b.state&&a.connectorsSfConfig&&(a.connectorsSfConfig.isFormSubmitted=!0)}else ha.markMessagesState(b)}function g(a){la.info("richContentRequest with body: "+JSON.stringify(a),ja);a&&ha.markMessagesState(a)}function h(a){la.info("quickRepliesRequest with body: "+JSON.stringify(a),ja);a&&ha.markMessagesState(a)}function i(a){la.info("imageShareGenerateUrlRequest with body: "+JSON.stringify(a),ja);a&&ha.generateURLForUploadFile(a)}function j(a){la.info("imageShareDownloadUrlRequest with body: "+JSON.stringify(a),ja);a&&ha.generateURLForDownloadFile(a)}function k(){var b={brandId:a.accountId};ha.getBrandProfile(b);la.info("getBrandProfile, brandId= "+a.accountId,ja)}function l(a){la.info("_onBrandProfile, info="+JSON.stringify(a),ja);b.trigger({appName:ka,eventName:ta.BRAND_INFO,data:a})}function m(a,b){var c={};c.success=a;c.error=b;ha.subscribeConversations(c);la.info("subscribeConversations, configuration="+JSON.stringify(c),ja)}function n(a){ha.updateConversationParticipantForStepUp(a)}function o(a,b,c){var d={};d.subscriptionId=a;d.success=b;d.error=c;ha.unsubscribeConversations(d);la.info("unsubscribeConversations, configuration="+JSON.stringify(d),ja)}function p(a){var b={};if(Da.isActive){b.dialogId=Da.id;b.success=a;b.error=a;ha.closeDialog(b)}else va.runCallback(a);la.info("closeDialog, configuration="+JSON.stringify(b),ja)}function q(a,b,c){var d={};d.conversationId=Ca.id;d.success=function(){s(a,b,c)};d.error=function(){};ha.closeConversation(d);la.info("_closeConversation, configuration="+JSON.stringify(d),ja)}function r(a,b,c){Ca.isActive?Ca.isActive&&!Da.isActive?q(a,b,c):t(a,b,c):s(a,b,c)}function s(c,d,e){var f={conversationContext:{type:"SharkContext",lang:a.lang||za},campaignInfo:{}};f.channelType=sa.MESSAGING;if(a.skillId&&"number"==typeof a.skillId){f.skillId=a.skillId;Ba.skill=a.skillId}if("string"==typeof a.svid){f.conversationContext.visitorId=a.svid;Ba.visitorId=a.svid}"string"==typeof a.ssid&&(f.conversationContext.sessionId=a.ssid);"string"==typeof a.scid&&(f.conversationContext.interactionContextId=a.scid);f.conversationContext.subscription=a.subscription;f.campaignInfo.campaignId=a.cid;Ba.campaignId=a.cid;f.campaignInfo.engagementId=a.eid;f.success=function(a){b.trigger({appName:ka,eventName:ta.NEW_CONVERSATION_CREATED,data:a});if(Ca&&a&&Ca.id===a.conversationId)t(c,d,e);else{_(a&&a.conversationId);Ea.push({line:c,success:d,error:e})}};f.error=e;b.trigger({appName:ka,eventName:ta.NEW_CONVERSATION_REQUESTED});ha.createConversation(f);la.info("createConversation, configuration="+JSON.stringify(f),ja)}function t(a,b,c){if(a){var d={};d.dialogId=Da.id;d.success=v(b);d.error=c;d.text=a.text;if(a.contentType&&a.contentType==lpTag.unifiedWindow.consts.chatEvents.FILE_SHARING){d.text=a.fileData;d.contentType=a.contentType}a.metadata&&(d.metadata=a.metadata);ha.sendMessage(d);la.info("_sendLine="+JSON.stringify(a),ja)}}function u(b,c,d,e,f){return{connectorsSfConfig:a.connectorsSfConfig,domain:a.asyncMessagingDomain,IDPDomain:a.idpDomain,connectorId:a.connectorId,historyDomain:a.messagingHistoryDomain,blockHistory:f,authCode:b,redirect_uri:c||a.redirect_uri,authType:d,hasAuthentication:!0,accountId:a.subscription?a.subscription.conversationowneraccountid||a.accountId:a.accountId,subscription:a.subscription,memberType:na.USER||"",storageConf:{useSecureStorage:a.useSecureStorage,secureStorageLocation:a.secureStorageLocation,lpNumber:a.accountId,appName:ja},queryParameters:{appName:"webAsync",features:["AUTO_MESSAGES","RICH_CONTENT","CO_BROWSE","PHOTO_SHARING","QUICK_REPLIES","MULTI_DIALOG","FILE_SHARING","MARKDOWN_HYPERLINKS"]},isStepUpEnabled:a.isStepUpEnabled,onSocketConnected:B,onSocketInitialized:C,onConversationStepUp:D,onSubscribeMessagingResponse:P,onUserInfo:J,onConversationList:L,onParticipantJoined:M,onParticipantLeft:N,onContent:O,onConversationState:R,onDialogChatStateChanged:S,onDialogUpdated:T,onTTRUpdated:V,onCSATUpdated:W,onBrandProfile:l,onSessionInvalidated:F,onSocketClosed:E,onAuthenticationError:G,onServiceNonResponsive:H,onPingSuccess:I,pingTimeout:e,resendTimedOutRequests:!0,appVersion:lpTag.unifiedWindow.Application.v}}function v(a){return function(b){var c;"function"==typeof a&&b&&!isNaN(b.sequence)&&(c={"@id":b.sequence,convId:Da.id});a(c)}}function w(a){var b={dialogId:Da.id,chatState:a?ra.COMPOSING:ra.ACTIVE};ha.setDialogChatState(b)}function x(a){ha.setTTR({conversationId:Ca.id,ttrType:a?qa.urgent:qa.normal})}function y(a){return ha.subscribeMessagingEvents(a)}function z(a,b,c){var d,e={success:b,error:c,conversationId:Ca.id||a.convId,CSAT:{}};a=a||{};e.CSAT.status=a.status;d=a.survey&&a.survey.question[0]&&a.survey.question[0].answer;d&&(e.CSAT.csatRate=+d||0);ha.setCSAT(e)}function A(){ha&&ha.dispose();ha=null}function B(a){if(a&&200===a.statusCode){ia=!1;b.trigger({appName:ka,eventName:ua.CONNECTED,data:a})}else K();la.info("_onSocketConnected, data="+JSON.stringify(a),ja)}function C(a){if(a&&200===a.code){b.trigger({appName:ka,eventName:ua.INITIALIZED,data:a});b.trigger({appName:ka,eventName:ta.STATE,data:ma.INIT,global:!0})}else K();la.info("_onSocketInitialized, data="+JSON.stringify(a),ja)}function D(a){b.trigger({appName:"AMSClient",eventName:"onConversationStepUp",data:a});la.info("_onConversationStepUp, data="+JSON.stringify(a),ja)}function E(a){ia=!0;la.info("_onSocketClosed, data="+JSON.stringify(a),ja);b.trigger({appName:ka,eventName:ua.DISCONNECTED,data:a})}function F(a){b.trigger({appName:ka,eventName:ta.AUTHENTICATION_ERROR,data:{error:xa.EXPIRED,data:a}});la.info("_onSessionInvalidated, data="+JSON.stringify(a),ja)}function G(a){b.trigger({appName:"*",eventName:ta.AUTHENTICATION_ERROR,data:{error:xa.INVALID_SESSION,data:a}});la.info("_onAuthenticationError, data="+JSON.stringify(a),ja)}function H(a){la.info("_onServiceNonResponsive, data="+JSON.stringify(a),ja);b.trigger({appName:ka,eventName:ua.NON_RESPONSIVE,data:a})}function I(a){b.trigger({appName:ka,eventName:ua.PING_SUCCESS,data:a})}function J(a){b.trigger({appName:ka,eventName:ta.USER_INFO,data:a});la.info("_onUserInfo, info="+JSON.stringify(a),ja)}function K(){b.trigger({appName:ka,eventName:ta.ERROR,data:{errorType:wa.CONNECTION_UNAVAILABLE}})}function L(c){var d=c&&c.data||c,e=d.filter(function(a){return a.conversationDetails.state===oa.OPEN}),f=e[0]&&e[0].convId;if(f){_(f,e[0]);aa({conversation:e[0]});ba()}else ya!=c.subscriptionId&&(Ca={id:null,isActive:!1});b.trigger({appName:ka,eventName:ta.CONVERSATION_HISTORY,data:d});Ba.language=a.lang||za;b.trigger({appName:ka,eventName:ta.CHAT_INFO,data:Ba})}function M(a){for(var c=a.data||a,d=0;d<c.length;d++)b.trigger({appName:ka,eventName:ta.USER_INFO,data:c[d]})}function N(a){for(var c=a.data||a,d=0;d<c.length;d++)b.trigger({appName:ka,eventName:ta.USER_LEFT,data:c[d]})}function O(a){b.trigger({appName:ka,eventName:ta.CONVERSATION_CONTENT,data:a})}function P(a){b.trigger({appName:ka,eventName:ta.SUBSCRIBE_MESSAGING_EVENTS_RESPONSE,data:a})}function Q(b,c){var d=va.groupByKeyValue(b,"convId");for(var e in d)"undefined"!==e&&(a.connectorsSfConfig||Z(d[e],c,e))}function R(a){var c;a=a&&a.data||a;for(var d=0;d<a.length;d++)if(a[d].convId===Ca.id){if(a[d].state===oa.OPEN)c=ma.CHATTING;else{c=ma.ENDED;Ca.isActive=!1}b.trigger({appName:ka,eventName:ta.CONVERSATION_STATE,data:{state:a[d].state,time:a[d].ts,closeReason:a[d].closeReason,convId:a[d].convId}});b.trigger({appName:ka,eventName:ta.STATE,data:c,global:!0})}}function S(a){var c;a=Array.isArray(a)?a:[];for(var d=0;d<a.length;d++)if(a[d].dialogId===Da.id){c=va.getPropertyFromObject(a[d],"event.chatState");b.trigger({appName:ka,eventName:ta.AGENT_TYPING,data:{agentTyping:c===ra.COMPOSING.toUpperCase(),originatorId:a[d].originatorId}})}}function T(a){if(a&&a.data)for(var c=0;c<a.data.length;c++){var d=a.data[c];d&&d.channelType===lpTag.unifiedWindow.consts.coBrowse.coBrowseChannelName?b.trigger({appName:ka,eventName:lpTag.unifiedWindow.events.coBrowseEvents.DIALOG_CREATED,data:d}):U(d)}}function U(a){var c;a&&a.state===pa.OPEN&&a.dialogId!==Da.id&&aa({dialogId:a.dialogId});if(a&&a.dialogId===Da.id){if(a.state===pa.OPEN)c=ma.CHATTING;else{c=ma.ENDED;Da.isActive=!1}b.trigger({appName:ka,eventName:ta.DIALOG_STATE,data:{state:a.state,time:a.metaDataLastUpdateTs,closedBy:a.closedBy,dialogId:a.dialogId,endTime:a.endTs,closeReason:a.closedBy,dialogType:a.dialogType,channelType:a.channelType,participants:a.participants,conversationId:Ca.isActive?Ca.id:null}});b.trigger({appName:ka,eventName:ta.STATE,data:c,global:!0})}}function V(a){Y(a,"ttr","TTR_INFO")}function W(a){var c=X(a.data||a);c&&c.csat&&b.trigger({appName:ka,eventName:ta.CSAT_INFO,data:c})}function X(a){var b,c=0;a=a.data||a;for(var d=0;d<a.length;d++)if(va.getPropertyFromObject(a[d],"csat.endTs")>c){c=a[d].csat.endTs;b=a[d]}return b}function Y(a,c,d){a=a&&a.data||a;for(var e=0;e<a.length;e++)a[e].convId===Ca.id&&b.trigger({appName:ka,eventName:ta[d],data:a[e][c]})}function Z(a,b,c){var d=$(a),e={dialogId:c,state:b,sequenceList:d};ha.markMessagesState(e)}function $(a){var b=a.map(function(a){return a["@id"]});return b}function _(a,b){Ca.id=a;Ca.isActive=!0;Ba.rtSessionId=Ca.id;if(b&&b.conversationDetails){var c=b.conversationDetails.skillId;c&&"-1"!==c?Ba.skill=c:"number"==typeof Ba.skill?Ba.skill=Ba.skill+"":Ba.skill=void 0}}function aa(a){if(a.dialogId){Da.id=a.dialogId;Da.isActive=!0}else if(a.conversation){var b,c=a.conversation.conversationDetails&&a.conversation.conversationDetails.dialogs;if(c&&c.length>0){b=c.filter(function(a){return a.channelType!==lpTag.unifiedWindow.consts.coBrowse.coBrowseChannelName&&a.state===pa.OPEN});Da.id=b.length>0?b[0].dialogId:null;Da.isActive=b.length>0}}}function ba(){if(Ea.length>0){for(var a in Ea)t(Ea[a].line,Ea[a].success,Ea[a].error);Ea=[]}}function ca(a){return function(){return ha?a.apply(null,arguments):void 0}}function da(){return Da&&Da.id}function ea(){return ha.getTimeDiff()}function fa(b){b.skillId=a.skillId&&"number"==typeof a.skillId?a.skillId:Aa;ha.sendShiftStatus(b)}function ga(){return Ca&&Ca.isActive}var ha,ia,ja="MessagingDelegate",ka=lpTag.unifiedWindow.apps.CHAT,la=lpTag.unifiedWindow.log,ma=lpTag.unifiedWindow.State,na=lpTag.AMSStatics.memberTypes,oa=lpTag.AMSStatics.conversation.states,pa=lpTag.AMSStatics.dialog.states,qa=lpTag.AMSStatics.effectiveTTRTypes,ra=lpTag.AMSStatics.chatStates,sa=lpTag.AMSStatics.channelTypes,ta=lpTag.unifiedWindow.events.chat,ua=lpTag.unifiedWindow.events.socket,va=lpTag.unifiedWindow.applicationUtils,wa=lpTag.unifiedWindow.consts.errorTypes,xa=lpTag.unifiedWindow.consts.authErrorsTypes,ya="historyAPI",za="en-US",Aa=-1,Ba={},Ca={id:null,isActive:!1},Da={id:null,isActive:!1},Ea=[];return{createMessagingInstance:c,getMyUserProfile:ca(d),getBrandProfile:ca(k),updateStepUpParticipants:n,subscribeConversations:ca(m),unsubscribeConversations:ca(o),createConversation:ca(s),closeDialog:ca(p),sendLine:ca(r),sendStatesUpdate:ca(Q),setVisitorTyping:w,setConversationUrgency:ca(x),subscribeMessagingEvents:ca(y),submitExitChatSurvey:ca(z),getOTK:ca(e),secureFormRequest:ca(f),richContentRequest:ca(g),quickRepliesRequest:ca(h),getTimeDiff:ca(ea),imageShareGenerateUrlRequest:ca(i),imageShareDownloadUrlRequest:ca(j),getShiftStatus:ca(fa),getSessionKey:da,currentConversationActive:ga,dispose:A}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.SMSDelegate=lpTag.unifiedWindow.SMSDelegate||function(a,b){function c(){setTimeout(function(){b.trigger({appName:i,eventName:k.INITIALIZED})})}function d(){return a.smsPreFormId}function e(b,c){if(a.smsPreFormId)h(n,"loadSMSForm",c)&&n.loadSMSForm(a.smsPreFormId,b,c);else{j.error("SMSDelegate:getPreSMSForm failed: no smsPreFormId on window");c()}}function f(a,b,c){h(n,"submitSMSForm",c)&&n.submitSMSForm(a,b,c,{sessionId:l,connectorId:m})}function g(){}function h(a,b,c){if(!a||"function"!=typeof a[b]){c("taglet not exists or initilized");return!1}return!0}var i=lpTag.unifiedWindow.apps.CHAT,j=lpTag.unifiedWindow.log,k=lpTag.unifiedWindow.events.chat,l=a.sessionId,m=a.connectorId,n=lpTag.taglets.lp_sms_client_api;return{initialize:c,getPreSMSFormId:d,getPreSMSForm:e,submitPreSMSForm:f,dispose:g}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.ChatStateManager=lpTag.unifiedWindow.ChatStateManager||function(a,b,c,d){function e(a,b,c,d){Aa.info("init",ya);ma=c||{};na=ma.engConf||{};x(a);ra=b.uiModel;sa=b.chatModel;o(d);var e=pa.conf.authConf;e&&(Ka=!0);D();C()}function f(){return ta}function g(a,b){a&&qa.emailTranscript(a,b,A,B)}function h(a){if(a){wa=a;var b={surveyData:a};da()?i(b):qa.startChat(b,T,z)}else{t(null,Ea.APP_ENDED);m()}}function i(a){var b=j();if(!b||pa.authenticationManager.isErroneous())W();else{L({context:"prechat"});if(b)qa.startChat(Ca.cloneExtend(a,{conversationData:b}),T,z);else{va=function(b){qa.startChat(Ca.cloneExtend(a,{conversationData:b.newValue}),T,z)};ra.bind(Ha.CONVERSATION_DATA,va)}}}function j(){return ra.get(Ha.CONVERSATION_DATA)}function k(a){if(a)qa.submitExitChatSurvey(a,y,y);else{t(null,Ea.APP_ENDED);m()}}function l(a){if(a)qa.submitOfflineSurvey(a,y,y);else{t(null,Ea.APP_ENDED);m()}}function m(){qa.cancelSurvey()}function n(){ra.unbind(Ha.STATE,u);try{ra.unbind(Ha.CONVERSATION_DATA,va)}catch(a){}oa.unbind({appName:za,eventName:Da.STATE,func:_});oa.unbind({appName:za,eventName:Da.INITIALIZED,func:r});oa.unbind({appName:za,eventName:Da.BLOD,func:s});oa.unbind({appName:"SessionManager",eventName:Da.NO_SESSION,func:p});oa.unbind({appName:Fa.UNIFIED_WINDOW,eventName:Ba.application.END_CHAT,func:ea});oa.unbind({appName:Fa.UNIFIED_WINDOW,eventName:Ba.application.END_SURVEY,func:m});oa.unbind({appName:Fa.UISTATE,eventName:Ba.uiState.EMBEDDED_CHANGED,func:H});oa.unbind({appName:Fa.UNIFIED_WINDOW,eventName:Ba.application.PRE_CHAT_SURVEY,func:h});oa.unbind({appName:Fa.UNIFIED_WINDOW,eventName:Ba.application.POST_CHAT_SURVEY,func:k});oa.unbind({appName:Fa.UNIFIED_WINDOW,eventName:Ba.application.OFFLINE_SURVEY,func:l});oa.unbind({appName:za,eventName:Da.CHAT_INFO,func:I})}function o(a){qa=a.apiDelegate;pa=a.appContext;oa=a.events}function p(){t(null,Ea.APP_ENDED)}function q(a){Aa.info("_tryResume",ya);var b=ra.get(Ha.STATE);(!ua||b&&Ga[b]>Ga[ua])&&a(Ga[b],Ga[Ea.ENDED])&&v(null,b,!0)}function r(){Aa.info("_tryInitResume",ya);q(function(a,b){return b>=a})}function s(){Aa.info("_tryEndResume",ya);q(function(a,b){return a>b})}function t(a,b){Aa.info("_handleNewState newState= "+b+" err= "+JSON.stringify(a),ya);var c=ra.get(Ha.STATE);if(!c||Ga[c]<=Ga[b]&&c!==b){ua=b;ra.modify({splitKey:Ha.STATE,updateData:b,onSuccess:function(){(!ta||Ga[b]>=Ga[ta]&&ta!==b)&&v(a,b)}})}}function u(a){Aa.info("_handleNewStateFromModel newState= "+a.newValue,ya);var b=ta;ua&&ta!==ua&&(b=ua);if(qa.isInitialized()){var c=!1;if(b){if(b!==a.newValue){if(Ga[b]>Ga[a.newValue])return;if(b===Ea.PRE_CHAT){qa.reInit();return}}}else c=!0;v(null,a.newValue,c)}}function v(a,b,c){if(ta!==b){ta=b;switch(b){case Ea.INIT:break;case Ea.INITIALIZED:E();break;case Ea.PRE_CHAT:w(c);break;case Ea.WAITING:case Ea.RESUME:case Ea.PAUSED:case Ea.RESUME_PAUSED:case Ea.CHATTING:break;case Ea.ENDED:ba();break;case Ea.POST_CHAT:c&&ba();break;case Ea.OFFLINE:w(c);break;case Ea.NOT_FOUND:ga(a);break;case Ea.ERROR:ga(a);break;case Ea.APP_ENDED:fa();break;default:w(c)}}}function w(a){a&&E({resuming:!0})}function x(a){Ja=a.surveyPreChatEnabled||!1;La=a.surveyPostChatEnabled||!1;Aa.info("_initSurveyParameters usePreChat= "+Ja+" useExitSurvey= "+La,ya)}function y(a){Aa.info("_submitFinalSurveyCallback: data="+JSON.stringify(a),ya);a&&a.error&&5===a.error.internalCode?oa.trigger({appName:ya,eventName:Ba.chat.SURVEY_ERROR,data:a}):a&&a.error&&10===a.error.internalCode?la()&&F({isInvalid:!0}):t(null,Ea.APP_ENDED)}function z(a){if(a&&a.error){if(32===a.error.internalCode){W();return}if(5===a.error.internalCode){oa.trigger({appName:ya,eventName:Ba.chat.SURVEY_ERROR,data:a});return}if(10===a.error.internalCode){la()&&F({isInvalid:!0});return}}aa(a)}function A(a){oa.trigger({appName:ya,eventName:Ba.chat.EMAIL_TRANSCRIPT_SUCCESS,data:a})}function B(a){oa.trigger({appName:ya,eventName:Ba.chat.EMAIL_TRANSCRIPT_ERROR,data:a})}function C(){Aa.info("_startFlow",ya);qa.createChatInstance()}function D(){oa.bind({appName:za,eventName:Da.STATE,func:_});oa.bind({appName:za,eventName:Da.INITIALIZED,func:r});oa.bind({appName:za,eventName:Da.BLOD,func:s});oa.bind({appName:"SessionManager",eventName:Da.NO_SESSION,func:p});oa.bind({appName:Fa.UNIFIED_WINDOW,eventName:Ba.application.PRE_CHAT_SURVEY,func:h});oa.bind({appName:Fa.UNIFIED_WINDOW,eventName:Ba.application.POST_CHAT_SURVEY,func:k});oa.bind({appName:Fa.UNIFIED_WINDOW,eventName:Ba.application.OFFLINE_SURVEY,func:l});oa.bind({appName:Fa.UNIFIED_WINDOW,eventName:Ba.application.END_CHAT,func:ea});oa.bind({appName:Fa.UNIFIED_WINDOW,eventName:Ba.application.END_SURVEY,func:m});ma.window&&ma.window.embedded&&oa.bind({appName:Fa.UISTATE,eventName:Ba.uiState.EMBEDDED_CHANGED,func:H});oa.bind({appName:za,eventName:Da.CHAT_INFO,func:I});ra.bind(Ha.STATE,u)}function E(a){a=a||{};Aa.info("_handleInit",ya);!a.resuming&&la()?F():G()}function F(a){a=a||{};window.recaptchaRenderer.showCaptcha({isInvalid:a.isInvalid,themer:pa.themer,translator:pa.translator,callback:G})}function G(){c.engConf.isOffline?W():pa.conf.unifiedConf.skipAvailabilityCheck?J({availability:!0}):qa.getAvailability(J,aa)}function H(a){if(a){Aa.info("resumingPolling",ya);qa.resumePolling()}else{Aa.info("stopPolling",ya);qa.stopPolling()}}function I(a){var b;if(a.agentPictureUrl&&a.agentName){b=ra.get(Ha.AGENT_PICTURE_URL)||{};b[a.agentName]=a.agentPictureUrl;ra.modify(Ha.AGENT_PICTURE_URL,b)}a.skillName&&(xa=a.skillName)}function J(a){Aa.info("_availabilitySuccess data="+JSON.stringify(a),ya);a&&a.availability?da()&&!K()?M():Ja?qa.getPreChatSurvey(U,V):qa.startChat(null,T,z):W()}function K(){return ra.get(Ha.STATE)===Ea.PRE_CHAT&&ra.get(Ha.CONVERSATION_DATA)}function L(a){Aa.info("_triggerProcessingEvent data="+JSON.stringify(a),ya);oa.trigger({appName:Fa.UNIFIED_WINDOW,eventName:Ba.application.PROCESSING,data:a})}function M(){Aa.info("_startAuthentication",ya);L({context:"onload"});Ja&&qa.getPreChatSurvey(U,aa);pa.authenticationManager.authenticate(N,P)}function N(a){Aa.info("_startConversation data="+JSON.stringify(a),ya);var b;if(a&&a.ssoKey){var c=j();if(c)qa.startChat({conversationData:c},T,z);else{b={domain:pa.conf.unifiedConf.domain,appKey:pa.keys.appKey,connectorId:pa.conf.authConf.connector.id,ssoKey:a.ssoKey,redirectUri:a.redirect_uri||null,engConf:pa.conf.engConf};qa.startConversation(b,O(),Q)}}}function O(){return Ja?function(a){Aa.info("_startConversationSuccess data="+JSON.stringify(a),ya);ra.modify(Ha.CONVERSATION_DATA,a)}:function(a){Aa.info("_startConversationSuccess data="+JSON.stringify(a),ya);qa.startChat({conversationData:a},T,z)}}function P(a){Aa.info("_ssoKeyError data="+JSON.stringify(a),ya);R()}function Q(a){Aa.info("_startConversationError data="+JSON.stringify(a),ya);R()}function R(){f()!==Ea.PRE_CHAT&&S()}function S(){W()}function T(a){oa.trigger({appName:ya,eventName:Ba.chat.START_CHAT_INFO,data:a.info});Aa.info("_startChatSuccess data="+JSON.stringify(a),ya)}function U(a){Aa.info("_getPreChatSuccess data="+JSON.stringify(a),ya);a&&a.survey?$(Ba.application.PRE_CHAT_SURVEY,Ia.SURVEYS_PRECHAT,a.survey):qa.startChat(null,T,z)}function V(a){Aa.info("_getPreChatError data="+JSON.stringify(a),ya);qa.startChat(null,T,z)}function W(){qa.getOfflineSurvey(X,aa)}function X(a){Aa.info("_getOfflineSurveyCallback data="+JSON.stringify(a),ya);a&&!a.error&&a.survey?$(Ba.application.OFFLINE_SURVEY,Ia.SURVEYS_OFFLINE,a.survey):aa()}function Y(a){Aa.info("_getPostChatSurveyCallback, survey="+JSON.stringify(a),ya);a&&!a.error&&a.survey?$(Ba.application.POST_CHAT_SURVEY,Ia.SURVEYS_EXIT,a.survey):aa()}function Z(a){Aa.info("_getExitSurveyError, survey="+JSON.stringify(a),ya);t(null,Ea.APP_ENDED)}function $(a,b,c){var d;c&&c.questions&&c.questions.question&&c.questions.question.forEach(function(a){a.label=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(a.label).cleanText;a.entry&&a.entry.forEach(function(a){a.displayValue=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(a.displayValue).cleanText})});if(lpTag.hooks&&lpTag.hooks.exec){d=lpTag.hooks.exec({name:lpTag.unifiedWindow.hooks.AFTER_GET_SURVEY,data:{surveyType:a,surveyData:c}});c=d&&d.data&&d.data.surveyData||c}sa.modify(b,c)}function _(a){Aa.info("_stateListener state="+a,ya);t(null,a)}function aa(a){Aa.info("_changeToError err= "+JSON.stringify(a),ya);t(a,Da.ERROR)}function ba(){Aa.info("_checkForPostChatSurvey",ya);ca()?qa.getExitSurvey(La,Y,Z):t(null,Ea.APP_ENDED)}function ca(){var b;b=La||na.skill!==xa?a.postChatSurveyOnNonInteractiveChat===!0||qa.isInteractive():!1;return b}function da(){return Ka}function ea(){qa.setVisitorTyping(!1);qa.endChat(null,aa)}function fa(){Aa.info("_disposeApplication",ya);qa.disposeVisitor();oa.trigger({appName:ya,eventName:Ba.chatState.ENDED});n()}function ga(){Aa.info("_handleError",ya);t(null,Ea.APP_ENDED)}function ha(a,b){return qa.getOTK(a,b)}function ia(a,b,c,d){return qa.secureFormRequest(a,b,c,d)}function ja(a){return JSON.stringify({siteId:lpTag.site,chatId:qa.getSessionKey&&qa.getSessionKey()})}function ka(a,b){Aa.info("richContentRequest info: "+JSON.stringify(a),ya);b=b||[];qa.richContentRequest(a,b)}function la(){return window.recaptchaRenderer}var ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya="ChatStateManager",za=lpTag.unifiedWindow.apps.CHAT,Aa=lpTag.unifiedWindow.log,Ba=lpTag.unifiedWindow.events,Ca=lpTag.unifiedWindow.applicationUtils,Da=Ba.chat,Ea=lpTag.unifiedWindow.State,Fa=lpTag.unifiedWindow.apps,Ga=lpTag.unifiedWindow.Priority,Ha=lpTag.unifiedWindow.uiModelPath,Ia=lpTag.unifiedWindow.chatModelPath,Ja=!1,Ka=!1,La=!1;e(a,b,c,d);this.emailTranscript=g;this.getCurrentState=f;this.getOTK=ha;this.richContentRequest=ka;this.secureFormRequest=ia;this.getOtkJson=ja;this.dispose=n};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.SMSDeflectionManager=lpTag.unifiedWindow.SMSDeflectionManager||function(a,b,c,d){function e(){r=new lpTag.unifiedWindow.helpers.SMSFormHelper;f(d);g();o.initialize()}function f(a){o=a.apiDelegate;p=a.appContext;q=a.events}function g(){q.bind({appName:s,eventName:t.INITIALIZED,func:i});q.bind({appName:w.UNIFIED_WINDOW,eventName:x.application.PRE_SMS_FORM,func:j});q.bind({appName:w.UNIFIED_WINDOW,eventName:x.application.PRE_SMS_FORM_EXIT,func:k})}function h(){q.unbind({appName:s,eventName:t.INITIALIZED,func:i});q.unbind({appName:w.UNIFIED_WINDOW,eventName:x.application.PRE_SMS_FORM,func:j})}function i(){o.getPreSMSForm(function(a){if(a.error)l();else{z.modify(v.STATE,lpTag.unifiedWindow.State.PRE_SMS);y.modify(u.SURVEYS_PRESMS,r.transform(a))}},function(a){l()})}function j(a){if(a&&a.survey){var b=A.externalTargets&&A.externalTargets[B.externalTargets.SMS]&&A.externalTargets[B.externalTargets.SMS].brandIdentifier,c=y.get(u.SURVEYS_PRESMS),d=r.getAnswerOfType(c,a.survey.question,r.TYPES.PHONE_NUMBER),e=r.getAnswerOfType(c,a.survey.question,r.TYPES.FIRST_NAME),f=r.getAnswerOfType(c,a.survey.question,r.TYPES.LAST_NAME),g=r.getAnswerOfType(c,a.survey.question,r.TYPES.MESSAGE);if(!d||!b){l();return}var h={Body:g?C(g.answer).cleanText:"",From:d.answer,To:b,context:{engagementId:A.eid,campaignId:A.cid,visitorId:A.svid,visitorFirstName:C(e).cleanText?e.answer:"",visitorLastName:f?C(f.answer).cleanText:""}};A.skillId&&(h.context.skillId=A.skillId);o.submitPreSMSForm(h,function(b){z.modify(v.PRE_SMS_CONTEXT,h);z.modify(v.STATE,lpTag.unifiedWindow.State.APP_ENDED);n(a.survey,"success");m()},function(){l();n(a.survey,"fail")})}else{z.modify(v.STATE,lpTag.unifiedWindow.State.APP_ENDED);m()}}function k(){q.trigger({appName:s,eventName:x.viewController.INITIATE_END_CHAT})}function l(){z.modify(v.STATE,lpTag.unifiedWindow.State.CONNECTION_ISSUE)}function m(){h()}function n(a,b){lpTag.hooks&&lpTag.hooks.exec&&lpTag.hooks.exec({name:lpTag.unifiedWindow.hooks.AFTER_SUBMIT_SURVEY,data:{context:p,surveyType:lpTag.unifiedWindow.SurveyType.PRE_SMS,surveyData:a,status:b}})}var o,p,q,r,s=lpTag.unifiedWindow.apps.CHAT,t=lpTag.unifiedWindow.events.chat,u=lpTag.unifiedWindow.chatModelPath,v=lpTag.unifiedWindow.uiModelPath,w=lpTag.unifiedWindow.apps,x=lpTag.unifiedWindow.events,y=b.chatModel,z=b.uiModel,A=c.engConf||{},B=lpTag.unifiedWindow.consts,C=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml||function(a){return{cleanText:a}};e()};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.ConversationManager=lpTag.unifiedWindow.ConversationManager||function(a,b,c,d){function e(a){Sb.info("init",Qb);Gb=b.uiModel;Hb=b.chatModel;wb=a.stepUpManager;i(a);j();k();if(Mb){Mb.type=Mb.type||Jc.getPropertyFromObject(a,"appContext.conf.authConf.connector.type");y(Mb)}else Q()}function f(){Eb.unbind({appName:"SessionManager",eventName:Wb.NO_SESSION,func:nb});Eb.unbind({appName:Rb,eventName:ac.CONNECTED,func:l});Eb.unbind({appName:Rb,eventName:ac.INITIALIZED,func:m});Eb.unbind({appName:Rb,eventName:ac.DISCONNECTED,func:p});Eb.unbind({appName:Rb,eventName:ac.NON_RESPONSIVE,func:q});Eb.unbind({appName:Rb,eventName:ac.PING_SUCCESS,func:n});Eb.unbind({appName:Rb,eventName:Wb.USER_INFO,func:z});Eb.unbind({appName:Rb,eventName:Wb.USER_LEFT,func:A});Eb.unbind({appName:Zb.UNIFIED_WINDOW,eventName:Tb.application.POST_CHAT_SURVEY,func:gb});Eb.unbind({appName:Zb.UNIFIED_WINDOW,eventName:Tb.application.END_CHAT,func:jb});Eb.unbind({appName:Rb,eventName:Wb.CONVERSATION_STATE,func:S});Eb.unbind({appName:Rb,eventName:Wb.DIALOG_STATE,func:T});Eb.unbind({appName:Rb,eventName:Wb.CONVERSATION_CONTENT,func:ja});Eb.unbind({appName:Rb,eventName:Wb.SUBSCRIBE_MESSAGING_EVENTS_RESPONSE,
func:la});Eb.unbind({appName:Rb,eventName:Wb.CONVERSATION_HISTORY,func:Xa});Eb.unbind({appName:Rb,eventName:Wb.CSAT_INFO,func:M});Eb.unbind({appName:"*",eventName:Wb.AUTHENTICATION_ERROR,func:P});Eb.unbind({appName:Rb,eventName:Wb.NEW_CONVERSATION_REQUESTED,func:mb});Eb.unbind({appName:"*",eventName:Xb.CONVERSATIONS_VIEWED,func:Ya});Eb.unbind({appName:"*",eventName:Xb.RETRY_GET_HISTORY,func:pa});Eb.unbind({appName:"*",eventName:Wb.FORGET_ME,func:N})}function g(a){Ib.setConversationUrgency(a)}function h(a){var b=Ec[a];return Dc[b]&&Dc[b].dialogs[a].state===cc.states.OPEN}function i(a){Ib=a.apiDelegate;Fb=a.appContext;Eb=a.events;Mb=a.authenticationData;Pb=a.appContext.featureStateManager;Sc=Pb.checkSetting(kc.BLOCK_CONSUMER,"true")}function j(){Eb.bind({appName:"SessionManager",eventName:Wb.NO_SESSION,func:nb});Eb.bind({appName:Rb,eventName:ac.CONNECTED,func:l});Eb.bind({appName:Rb,eventName:ac.INITIALIZED,func:m});Eb.bind({appName:Rb,eventName:ac.DISCONNECTED,func:p});Eb.bind({appName:Rb,eventName:ac.NON_RESPONSIVE,func:q});Eb.bind({appName:Rb,eventName:ac.PING_SUCCESS,func:n});Eb.bind({appName:Rb,eventName:Wb.USER_INFO,func:z});Eb.bind({appName:Rb,eventName:Wb.USER_LEFT,func:A});Eb.bind({appName:Zb.UNIFIED_WINDOW,eventName:Tb.application.POST_CHAT_SURVEY,func:gb});Eb.bind({appName:Zb.UNIFIED_WINDOW,eventName:Tb.application.END_CHAT,func:jb});Eb.bind({appName:Rb,eventName:Wb.CONVERSATION_STATE,func:S});Eb.bind({appName:Rb,eventName:Wb.DIALOG_STATE,func:T});Eb.bind({appName:Rb,eventName:Wb.CSAT_INFO,func:M});Eb.bind({appName:Rb,eventName:Wb.CONVERSATION_CONTENT,func:ja});Eb.bind({appName:Rb,eventName:Wb.SUBSCRIBE_MESSAGING_EVENTS_RESPONSE,func:la});Eb.bind({appName:Rb,eventName:Wb.CONVERSATION_HISTORY,func:Xa});Eb.bind({appName:"*",eventName:Wb.AUTHENTICATION_ERROR,func:P});Eb.bind({appName:Rb,eventName:Wb.NEW_CONVERSATION_REQUESTED,func:mb});Eb.bind({appName:"*",eventName:Xb.CONVERSATIONS_VIEWED,func:Ya});Eb.bind({appName:"*",eventName:Xb.RETRY_GET_HISTORY,func:pa});Eb.bind({appName:"*",eventName:Wb.FORGET_ME,func:N})}function k(){Jb={agent:!1,visitor:!1}}function l(){Sb.info("_handleSocketConnected",Qb);wb.sendStepUp();n();r()}function m(){Sb.info("_handleSocketInitialized",Qb);if(Ac)t(Db);else if(!vc){vc=!0;L()}}function n(){if(uc){uc=!1;o()}}function o(){if(yb&&Gb.get(Ub.STATE)===Yb.CONNECTION_ISSUE){Bb.dialogId=Ab;T(Bb);_(yb)}}function p(){Sb.info("_handleSocketDisconnected",Qb);Oc=!0;Fc={};Db=null;Cb||uc||(Cb=setTimeout(function(){q()},wc))}function q(){if(!uc){uc=!0;Fc={};zb=$();Ab=Z();Dc[zb]&&Dc[zb].dialogs&&Dc[zb].dialogs[Ab]&&(Bb=lpTag.unifiedWindow.applicationUtils.clone(Dc[zb].dialogs[Ab]));S({convId:$(),state:Yb.CONNECTION_ISSUE});T({dialogId:Z(),state:Yb.CONNECTION_ISSUE});r();yb=Gb.get(Ub.STATE);Bc?_(Yb.CONNECTION_ISSUE):R()}}function r(){clearTimeout(Cb);Cb=null}function s(a){var b,c;if(a){b=Ec[a];if(Fb.conf.unifiedConf.connectorsSfConfig&&Fb.conf.unifiedConf.connectorsSfConfig.conversationId&&Fb.conf.unifiedConf.connectorsSfConfig.dialogId){var d=Fb.conf.unifiedConf.connectorsSfConfig.conversationId,e=Fb.conf.unifiedConf.connectorsSfConfig.dialogId;return e===a&&d===b?!0:!1}if(Dc[b].dialogs[a].channelType!==cc.channelTypes.COBROWSE){c=Dc[b].dialogs[a].dialogType;switch(c){case cc.types.MAIN:case cc.types.POST_SURVEY:return!0;default:var f=Dc[b].dialogs[a].participants.some(function(a){return a.role===ec.CONSUMER});if(f)return!0}}}return!1}function t(a){a&&Ib.unsubscribeConversations(a);Ib.subscribeConversations(D)}function u(){!Fb.conf.unifiedConf.poppedOut&&!Fb.conf.unifiedConf.external||Fb.conf.unifiedConf.connectorsSfConfig&&Fb.conf.unifiedConf.connectorsSfConfig.isFormSubmitted?v(y):w()}function v(a){if(oc>=pc)Q();else{oc++;Sb.info("_restartAuthentication",Qb);Fb.authenticationManager.reAuthenticate(a,v.bind(this,a))}}function w(){Ac?_(Yb.RESTART_AUTHENTICATION,null):window.location.href=Fb.appConfigurationManager.getExternalResourceURL(Fb.conf.engConf,Fb.conf.unifiedConf,Fb.conf.unifiedConf.poppedOut,!0)}function x(){oc=0;v(function(){oc=0;var a=Gb.get(Ub.STATE);a===Yb.AUTH_ERROR&&Eb.trigger({appName:"*",eventName:"knockout"})})}function y(a){Sb.info("_ssoKeySuccess data="+JSON.stringify(a),Qb);var b=a&&a.ssoKey||null,c=a&&a.redirect_uri||null,d=a&&a.type||Jc.getPropertyFromObject(Fb,"conf.authConf.connector.type")||null,e=wb&&wb.getStepUpFailedStatus(),f=Jc.getPropertyFromObject(Fb,"conf.engConf.allowUnauthMsg");f?Ib.createMessagingInstance(b,c,d,wc,e,Sc):Ib.createMessagingInstance(b,c,d,wc,e)}function z(a){G(a);if(!Ac){t(Db);Ac=!0;vc=!1}}function A(a){B(a)&&H();if(a&&a.dialogId){var b=Ec[a.dialogId];if(b&&Dc[b]){var c=Dc[b].dialogs[a.dialogId];if(c&&c.participants){var d=c.participants.some(function(b){return b.id===a.pid});if(d){var e=c.participants.indexOf(d);"number"==typeof e&&c.participants.splice(e,1)}}}}}function B(a){return!!a&&(a.type===ec.ASSIGNED_AGENT||a.type===ec.AGENT)&&!!a.dialogId&&h(a.dialogId)}function C(a){var b=Ec[a];return Dc[b].state===bc.OPEN}function D(a){oc=0;Db=a.subscriptionId}function E(){var a=Fb.themer&&Fb.themer.getStyle("openingMessage","text"),b={source:tc.AGENT,by:Fb.translator.translate("info"),isWelcomeMessage:!0};if(Ob){b.text=Ob.text;if(Ob.quickReplies&&Ob.quickReplies.length>0){var c=F(Ob.quickReplies);if(c){b.quickReplies=c;Ob.quickRepliesState={isRequired:!0,isRenedered:!1,isRemoved:!1}}}}else a?b.text=a:b.textKey="welcomeMessage";Ta([b])}function F(a){var b={type:lc.QUICK_REPLIES,itemsPerRow:8,replies:[]};a.forEach(function(a){var c={type:lc.BUTTON,tooltip:a.text,title:a.text,click:{actions:[{type:mc.PUBLISH_TEXT,text:a.text}]}};b.replies.push(c)});return b}function G(a){if(a){var b={id:a.userId,type:I(a),name:a.name,imgUrl:a.imgUrl},c=!1;b.name||(b.type===tc.VISITOR?b.name=a.firstName||a.lastName?a.firstName+" "+a.lastName:Fb.translator.translate("you"):b.name=Fb.translator.translate("agent"));J(b,a);switch(b.type){case tc.VISITOR:Hb.get(Vb.VISITOR_NAME)||(c=!0);break;case tc.AGENT:B(a)&&(c=!0)}c&&K(b)}}function H(){Eb.trigger({appName:Rb,eventName:Wb.CHAT_INFO,data:{resetAgentInfo:!0}})}function I(a){var b,c="CONTROLLER",d="CONSUMER";if("string"==typeof a.type)switch(a.type){case c:b=tc.SYSTEM;break;case d:b=tc.VISITOR;break;default:b=tc.AGENT}else b=a.role?tc.AGENT:tc.VISITOR;return b}function J(a,b){var c=Hb.get(Vb.PARTICIPANTS)||{};c[a.id]=a;Hb.modify(Vb.PARTICIPANTS,c);if(b&&b.dialogId){var d=Ec[b.dialogId];if(d&&Dc[d]){var e=Dc[d].dialogs[b.dialogId];if(e&&e.participants){var f=e.participants.some(function(a){return a.id===b.userId});f||e.participants.push({id:b.userId,role:b.type})}}}}function K(a){var b;if(a&&a.name&&a.id){b={};b[a.type+"Name"]=a.name;b[a.type+"Id"]=a.id;Eb.trigger({appName:Rb,eventName:Wb.CHAT_INFO,data:b})}}function L(){Eb.trigger({appName:Rb,eventName:Wb.INITIALIZED});Bc=!0;Ib.getMyUserProfile();Ib.getBrandProfile();_(Yb.REQUESTED,null)}function M(a){if(!xb||a.convId===xb[0].convId){Lb=a;Hb.get(Vb.SURVEYS_EXIT)&&O(a.csat)&&hb()}}function N(){Nc=!0;var a=Gb.get(Ub.STATE);(a===Yb.WAITING||a===Yb.CONNECTION_ISSUE&&yb===Yb.WAITING)&&lb()}function O(a){return a.csatRate||a.status&&(a.status===$b.csatStatus.SKIPPED||a.status===$b.csatStatus.PARTIALLY_FILLED)}function P(a){switch(a&&a.error){case gc.EXPIRED:u();break;case gc.INVALID_SESSION:Q();break;case gc.LOGOUT:x()}}function Q(a){Sb.info("_endAppOnInvalidSession"+(a?" err="+JSON.stringify(a):""),Qb);var b=Jc.getPropertyFromObject(Fb,"conf.engConf.allowUnauthMsg");if(b){_(Yb.ERROR,null);Eb.trigger({appName:Rb,eventName:Wb.ERROR,data:{errorType:fc.FAILED_START_CONVERSATION_ERROR,keepError:!0}})}else{_(Yb.AUTH_ERROR,null);Eb.trigger({appName:Rb,eventName:Wb.ERROR,data:{errorType:fc.AUTH_ERROR,keepError:!0}})}Ib.dispose()}function R(){Sb.info("_endAppAndShowFailedConnectionError",Qb);_(Yb.ERROR);Jc.isEmpty(Kc)&&Bc?Eb.trigger({appName:Rb,eventName:Wb.FAILED_START_CONVERSATION}):Eb.trigger({appName:Rb,eventName:Wb.ERROR,data:{errorType:fc.FAILED_START_CONVERSATION_ERROR,keepError:!0}});Ib.dispose()}function S(a){if(Dc[a.convId]&&Dc[a.convId].state!==a.state){Dc[a.convId].state=a.state;switch(a.state){case bc.OPEN:Cc=!1;Kb=!1;break;case bc.CLOSE:da(a)}}}function T(a){var b=Ec[a.dialogId]||a.conversationId;if(Dc[b]){if(!Dc[b].dialogs[a.dialogId]){Dc[b].dialogs[a.dialogId]={state:null,endTime:a.endTime,closeReason:a.closeReason,dialogType:a.dialogType,channelType:a.channelType,participants:a.participants,lastMessageId:-1,history:!1};var c=Dc[b].sortedDialogIds;c.push({dialogId:a.dialogId,endTime:a.endTime});Dc[b].sortedDialogIds=eb(c);Ec[a.dialogId]=b;cb(a.dialogId)}if(Dc[b].dialogs[a.dialogId].state!==a.state){Dc[b].dialogs[a.dialogId].state=a.state;switch(a.state){case cc.states.OPEN:Cc=!1;Hb.modify(Vb.CURRENT_DIALOG_TYPE,a.dialogType);Fb.conf.unifiedConf.shouldSkipConfirmationDialog=Dc[b].dialogs[a.dialogId].dialogType===cc.types.POST_SURVEY;ib(a.dialogId);break;case cc.states.CLOSE:ea(a);Hb.removeKey(Vb.CURRENT_DIALOG_TYPE,!1);Nb=!1;if(!Cc&&Dc[b].dialogs[a.dialogId].lastMessageId>=0){Cc=!0;U(a.dialogId)}Eb.trigger({appName:Rb,eventName:Wb.CONVERSATION_CLOSED,data:{convId:a.dialogId}})}}}}function U(a){var b=Ec[a],c=Dc[b].dialogs[a].dialogType;(c===cc.types.MAIN&&!V(b)||c!==cc.types.MAIN)&&Ta([Sa(a)])}function V(a){var b;if(a){b=W(a);return Dc[a].dialogs[b].closeReason===zc.SYSTEM}}function W(a){if(Dc[a]&&Dc[a].dialogs)for(var b in Dc[a].dialogs)if(Dc[a].dialogs[b].dialogType===cc.types.MAIN)return b}function X(a){if(Dc[a]&&Dc[a].dialogs){for(var b in Dc[a].dialogs)if(Dc[a].dialogs[b].dialogType===cc.types.POST_SURVEY)return Dc[a].dialogs[b].lastMessageId<0;return!0}}function Y(a){if(Dc[a]&&Dc[a].dialogs&&Dc[a].sortedDialogIds)for(var b=0;b<Dc[a].sortedDialogIds.length;b++){var c=Dc[a].sortedDialogIds[b].dialogId;if(Dc[a].dialogs[c].lastMessageId>=0)return c}}function Z(){for(var a in Dc)if(Dc.hasOwnProperty(a))for(var b in Dc[a].dialogs)if(Dc[a].dialogs.hasOwnProperty(b)&&Dc[a].dialogs[b].state===cc.states.OPEN)return b}function $(){for(var a in Dc)if(Dc.hasOwnProperty(a)&&Dc[a].state===bc.OPEN)return a}function _(a,b){var c=Gb.get(Ub.STATE),d=c===Yb.POST_CHAT&&a===Yb.WAITING,e=!c||c!==a;if(e&&!d){Gb.modify({splitKey:Ub.STATE,updateData:a,onSuccess:b});Rc.push(a);if(a===Yb.WAITING){H();k();ca(a);var f=Hb&&Hb.getModel();f?aa(f)&&ba():ba()}}}function aa(a){var b=a&&a.attributes&&a.attributes.chat&&a.attributes.chat.currentDialogType!==cc.types.POST_SURVEY,c=!Nb||0===Jc.getPropertyFromObject(a,"attributes.chat.lines",[]).length;return b&&c}function ba(){if(!(Rc&&Rc.length>=3&&Rc[Rc.length-1]===Yb.WAITING&&Rc[Rc.length-2]===Yb.PENDING&&Rc[Rc.length-3]===Yb.WAITING)){Ob=Fb.conf.windowConf&&Fb.conf.windowConf.welcomeMessage;var a=!1;if(Ob){if(Ob.isEnabled){Ob.whenToPresent===nc.showTiming.EVERY_TIME?a=!0:Ob.whenToPresent!==nc.showTiming.FIRST_TIME||xb||Nb||(a=!0);Nb=!0}}else if(!xb&&!Nb){Nb=!0;a=!0}a&&setTimeout(E,0)}}function ca(a){Eb.trigger({appName:Rb,eventName:Wb.STATE,data:a})}function da(a){var b;Dc[a.convId].endTime=a.time;Dc[a.convId].closeReason=a.closeReason;kb(!1);b=ga(a);b||lb()}function ea(a){var b=Ec[a.dialogId],c=Dc[b].sortedDialogIds;Dc[b].dialogs[a.dialogId].endTime=a.endTs||a.time;Dc[b].dialogs[a.dialogId].closeReason=a.closedBy;c[c.length-1].dialogId===a.dialogId&&(c[c.length-1].endTime=Dc[b].dialogs[a.dialogId].endTime);kb(!1);_(Yb.APP_ENDED,function(){var a=Gb.get(Ub.STATE);a!==Yb.APP_ENDED||Nc||_(Yb.WAITING)})}function fa(a){var b=a&&a.convId||Lb&&Lb.convId;if(b&&X(b)&&Dc[b]&&Dc[b].postSurveyDialogWasOpened&&Dc[b].state===bc.CLOSE){H();var c=Dc[b].dialogs[W(b)],d=c.participants.some(function(a){return a.role===ec.ASSIGNED_AGENT});d&&K(Ra({originatorId:d.id}))}}function ga(b){var c,d,e,f=!1;if(a.surveyPostChatEnabled){e=Jc.getPropertyFromObject(Lb,"csat.endTs")+Ib.getTimeDiff()+yc;c=b&&!V(b.convId)&&Ea(W(b.convId))&&X(b.convId);d=Lb&&!ha(Lb)&&Ea(W(Lb.convId))&&X(Lb.convId)&&Date.now()<e&&!$()&&!V(Lb.convId);Jc.getPropertyFromObject(Fb,"conf.engConf.allowUnauthMsg")&&(d=!1);if(c||d){fa(b);_(Yb.POST_CHAT,ia);f=!0;ca(Yb.POST_CHAT)}}return f}function ha(a){return Jc.getPropertyFromObject(a,"csat.csatRate")||"SKIPPED"===Jc.getPropertyFromObject(a,"csat.status")}function ia(){var a,b,c=Hb.get(Vb.AGENT_NAME)||Fb.translator.translate("csatTheAgent");c=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(c).cleanText;Fb.translator.extendDictionary({agentName:c},{locale:Fb.conf.engConf.lang});b=lpTag.unifiedWindow.CsatDataGenerator(Fb.translator);Hb.removeKey(Vb.SURVEYS_EXIT,!1);if(lpTag.hooks&&lpTag.hooks.exec){a=lpTag.hooks.exec({name:lpTag.unifiedWindow.hooks.AFTER_GET_SURVEY,data:{surveyType:Tb.application.POST_CHAT_SURVEY,surveyData:b}});b=a&&a.data&&a.data.surveyData||b}Hb.modify(Vb.SURVEYS_EXIT,b)}function ja(a){var b;if(a&&!Jc.isEmpty(a)){if(a&&a.dialogId){b=Gc[a.dialogId]&&Gc[a.dialogId].resubscribe;oa(a.dialogId)}ta(a,b)}ya(b);ka()}function ka(){var a=$();if(a&&!Kb&&Ea(W(a))){Kb=!0;ca(Yb.INTERACTIVE)}}function la(a){var b,c,d,e;if(a&&a.reqId)if(200!=a.code)ma(a);else{b=Fc[a.reqId].dialogId;d=1;if(!Jc.isEmpty(Ic)&&Ic[b]){d=Ic[b].retries;delete Ic[b]}e=Fc[a.reqId].resubscribe;na(a.reqId);qa(b);c=setTimeout(function(){Ic[b]||(Ic[b]={retries:d});ja({dialogId:b})},xc);Gc[b]={dialogId:b,timeoutId:c,resubscribe:e}}}function ma(a){var b,c=a&&a.reqId;if(c&&Fc[c]){b=Fc[c].dialogId;if(Ic[b]&&Ic[b].retries>=rc){na(c,!0);if(C(b))R();else{ya();if(0===Object.keys(Fc).length&&Hc[W(xb[0].convId)]){Fb.conf.unifiedConf.failedToLoadHistory=!0;ya(!0)}}}else{Ic[b]?Ic[b].retries++:Ic[b]={retries:1};var d=cb(b);d!==c&&na(c)}}}function na(a,b){if(b&&Fc[a]&&Fc[a].dialogId){Hc[Fc[a].dialogId]=Fc[a];ua(Fc[a].dialogId)}delete Fc[a]}function oa(a){if(a&&Gc&&Gc[a]&&Gc[a].timeoutId){clearTimeout(Gc[a].timeoutId);delete Gc[a].timeoutId}delete Gc[a]}function pa(a){if(Jc.isEmpty(Hc))Ya(a);else for(var b in Hc)Hc.hasOwnProperty(b)&&cb(b)}function qa(a){delete Hc[a]}function ra(a,b){var c;for(var d in a){c=a[d].dialogId&&Ec[a[d].dialogId];if(Lc!==d&&a.hasOwnProperty(d)&&!xa(Kc,a[d])){a[d].resubscribed=b;Kc.push(a[d]);!Dc[c].hasContent&&a[d].event&&(Dc[c].hasContent=!0)}"number"==typeof a[d].sequence&&c&&Dc[c].dialogs[a[d].dialogId].lastMessageId<a[d].sequence&&a[d].event&&(Dc[c].dialogs[a[d].dialogId].lastMessageId=a[d].sequence)}sa()}function sa(){if(0===Object.keys(Fc).length&&0===Object.keys(Gc).length&&Object.keys(Dc).length===qc){var a=0;for(var b in Dc)Dc[b].hasContent||a++;var c;a===qc?c=qc:a>0&&qc>a&&(c=qc-a);for(var d=0;c>d;d++)Ya()}}function ta(a,b){var c=a.dialogId,d=va(c,!0),e=Dc[d];e.returnedDialogs[c].content=a;e.returnedDialogs[c].resubscribed=b;if(wa(d))for(c in e.dialogs){var f=e.returnedDialogs[c];if(f&&f.content){ra(f.content,f.resubscribed);delete f.content;delete f.resubscribed}}}function ua(a){var b=va(a,!1);Dc[b].returnedDialogs.allDialogsSuccessful=!1}function va(a,b){if(!a)return null;var c=Ec[a];if(c&&Dc[c]){Dc[c].returnedDialogs||(Dc[c].returnedDialogs={allDialogsSuccessful:!1});Dc[c].returnedDialogs[a]||(Dc[c].returnedDialogs[a]={});Dc[c].returnedDialogs[a].successful=b}return c}function wa(a){var b=Dc[a];if(b.returnedDialogs.allDialogsSuccessful)return!0;for(var c in b.dialogs){var d=b.returnedDialogs[c];if(!d||!d.successful){b.returnedDialogs.allDialogsSuccessful=!1;return!1}}b.returnedDialogs.allDialogsSuccessful=!0;return!0}function xa(a,b){var c=a.filter(function(a){return a.dialogId===b.dialogId&&a.sequence===b.sequence});return!!c&&c.length>0}function ya(a){if(0===Object.keys(Fc).length&&0===Object.keys(Gc).length||a){var b=Z()?Yb.CHATTING:Yb.WAITING,c=za();_(b,null);Ta(c,!0);ga();Kc=[]}}function za(){var a,b=[];Array.isArray(Kc)&&Kc.forEach(function(c,d){a=Ja(c);b.push(a);Kc[d].event&&Ha(c)&&b.push(Sa(c.dialogId));Ua(a);Ca(a)});return b}function Aa(a){return!Pc[a.sequence]||a.state!==hc.VIEWED&&a.state!==hc.ERROR?!1:!0}function Ba(a,b){var c=b===dc.SUBMIT?a.eventId:a.sequence,d=Pc[c]||{};return a.event&&a.event.message||d.info}function Ca(a){Array.isArray(a)||(a=[a]);a.forEach(function(a){if(Da(a)&&h(a.convId))switch(a.source){case tc.VISITOR:Jb.visitor=!0;break;case tc.AGENT:Jb.agent=!0}})}function Da(a){switch(a.type){case _b.LINE:return a.text?!0:!1;case _b.RICH_CONTENT:case _b.SECURE_FORM:return!0;default:return!1}}function Ea(a){for(var b=Hb.get(Vb.LINES)||[],c=!1,d=!1,e=0;e<b.length;e++)if(b[e].convId===a){c=c||b[e].source===tc.VISITOR;d=d||b[e].source===tc.AGENT;if(c&&d)break}return c&&d}function Fa(a){var b=a.dialogId,c=a.conversationId||Ec[a.dialogId];return Dc[c].dialogs[b]&&Dc[c].dialogs[b].history}function Ga(a){var b=Ec[a.dialogId];return Ia(a)&&sc&&xb[sc]&&b===xb[sc].convId&&a.dialogId===Y(b)&&sc!==xb.length-1?!0:!1}function Ha(a){var b=Ec[a.dialogId],c=Dc[b].dialogs[a.dialogId].dialogType;if(Ia(a)&&(c!==cc.types.MAIN||!V(b))){if(a.resubscribed){var d=Hb.get(Vb.LINES)||[],e=Sa(a.dialogId),f=d.filter(function(a){return a.time===e.time&&a.type===e.type&&a.textKey===e.textKey}),g=!!f&&f.length>0;return!g}return!0}return!1}function Ia(a){var b=a.conversationId||Ec[a.dialogId],c=a.dialogId;return Dc[b].dialogs[c]&&Dc[b].dialogs[c].lastMessageId===a.sequence&&Dc[b].dialogs[c].state===cc.states.CLOSE?!0:!1}function Ja(a){var b=Ka(a);Qa(b,a);return b}function Ka(a){var b=a&&a.event||{};switch(b.type){case jc.RICH_CONTENT:return Na(b.content,_b.RICH_CONTENT,b.quickReplies);default:return La(a)}}function La(a){var b=a&&a.event||{};Aa(a)&&(b.contentType=ic.SECURE_FORM_UPDATE);switch(b.contentType){case ic.HOSTED_FILE:return Ma(b.message,ic.HOSTED_FILE);case ic.EXTERNAL_FILE:return Na(Fb.translator.translate("transcriptForPhotoSharingImage"),_b.LINE);case ic.TEXT_PLAIN:return Na(b.message||"",_b.LINE,b.quickReplies);case ic.SECURE_FORM_INVITATION:return Oa(a,dc.SEND);case ic.SECURE_FORM_SUBMISSION:return Oa(a,dc.SUBMIT);case ic.SECURE_FORM_UPDATE:return Oa(a,a.state);default:return Na("string"==typeof b.message?b.message:"",_b.LINE)}}function Ma(a,b){return{type:b,subType:"REGULAR",fileData:a,textType:"file"}}function Na(a,b,c){return{type:b,subType:"REGULAR",text:a,quickReplies:c,textType:"plain"}}function Oa(a,b){var c,d,e=Pa(a,b);c=Ba(a,b);c&&(d={type:_b.SECURE_FORM,subType:_b.SECURE_FORM,formState:e,command:e,info:{secureFormId:c.formId||c.secureFormId,secureFormName:c.title||c.secureFormName,invitationId:c.invitationId,uniqueId:c.invitationId}});return d}function Pa(a,b){var c;switch(a.state){case hc.VIEWED:c=dc.VIEWED;break;case hc.ERROR:c=dc.ERROR;break;default:c=b}return h(a.dialogId)?c:dc.ERROR}function Qa(a,b){var c=Ra(b)||{};a[Mc]=b.sequence;a.sequenceId=b.sequence;a.originatorId=c.id;a.by=c.name;a.source=c.type;a.time=b.serverTimestamp;a.convId=b.dialogId;a.track=Ga(b);a.history=Fa(b);a.resubscribed=b.resubscribed;a.state=b.state}function Ra(a){var b=Hb.get(Vb.PARTICIPANTS)||{};return b[a.originatorId]}function Sa(a){var b,c=Ec[a],d=Dc[c].dialogs[a].dialogType;b=d===cc.types.MAIN?Dc[c].dialogs[a].closeReason===zc.AGENT?"transcriptConvResolvedByAgent":"transcriptConvResolvedByVisitor":"";return{type:_b.INFO,textKey:b,time:Dc[c].dialogs[a].endTime,history:Dc[c].dialogs[a].history,source:"system",hasSeparator:!0,subType:"conversationResolved"}}function Ta(a,b){if(a&&a.length>0){b&&(a=Jc.sortByKeyValue(a,"time"));a.forEach(function(a){Eb.trigger({appName:Rb,eventName:Qc[a.type]?a.type:Wb.LINE,data:a})});Eb.trigger({appName:Rb,eventName:Wb.FINISHED_EVENTS_BULK})}}function Ua(a){a&&a[Mc]&&a.type===_b.SECURE_FORM&&(Pc[a[Mc]]={info:a.info})}function Va(a){return a&&a.conversationDetails&&a.conversationDetails.dialogs||[]}function Wa(a,b){var c=Va(b),d=a.filter(function(a){return a.convId===b.convId?a:void 0})[0]||{},e=Va(d);return Jc.arrayUniqueByKey(e.concat(c),"dialogId")}function Xa(a){if(Array.isArray(a)&&a.length>0){a=db(a);if(xb){var b=Za(a);$a(a);if(Oc){Oc=!1;if((!b||!b.length)&&xb[0]){xb[0].conversationDetails.dialogs=Wa(a,xb[0]);bb(xb,0,0,!1,!0)}}}else{xb=a;Ya()}}else xb||fb()}function Ya(a){var b,c,d=!1,e=a&&a.retry||!1,f=a&&a.changedScroll||!1;if(xb&&!f){if(null===sc){b=0;c=xb.length<qc?xb.length-1:qc-1}else if(sc<xb.length-1){b=sc+1;c=b;d=null===Hb.get(Vb.LINES)?!1:!0;if(e){b=sc;c=sc;xb&&xb[sc]&&xb[sc].convId&&Dc&&Dc[xb[sc].convId]&&delete Dc[xb[b].convId]}}else{if(sc!==xb.length-1||null!==Hb.get(Vb.LINES)){Sb.error("in _loadNextConversationsFromHistory: something went wrong trying to load the history!!!",Qb);return}fb()}sc=c;bb(xb,b,c,d)}}function Za(a){a=_a(a);if(a.length>0){bb(a,0,a.length-1,!1);xb=a.concat(xb);sc+=a.length}return a}function $a(a){a=ab(a);if(a.length>0){xb=xb.concat(a);Ya()}}function _a(a){var b,c,d=[];b=xb&&xb.length>0&&xb[0]&&xb[0].convId;c=b&&xb[0].conversationDetails&&xb[0].conversationDetails.startTs||0;for(var e=0;e<a.length&&(a[e].convId!==b&&a[e].conversationDetails&&a[e].conversationDetails.startTs>c);e++)d.push(a[e]);return d}function ab(a){var b,c,d;b=xb&&xb.length>0&&xb[xb.length-1];c=b&&b.conversationDetails&&b.conversationDetails.startTs;d=a.filter(function(a){return a.conversationDetails&&a.conversationDetails.startTs<c||!c});return d}function bb(a,b,c,d,e){var f,g,h,i,j;a=a||xb;for(var k=b;c>=k;k++){var l=a[k];h=l.convId;if(!Dc[h]||e){f=l.conversationDetails.state!==bc.OPEN?a[k].conversationDetails.state:"";Dc[h]=Dc[h]||{state:f,endTime:a[k].conversationDetails.endTs,closeReason:a[k].conversationDetails.closeReason,dialogs:{},postSurveyDialogWasOpened:!1,hasContent:!1};var m=[];g=a[k].conversationDetails.dialogs;for(var n=0;n<g.length;n++){i=g[n].dialogId;if(g[n].channelType!==lpTag.unifiedWindow.consts.coBrowse.coBrowseChannelName){if(Dc[h].dialogs[i])e&&g[n].state===cc.states.OPEN&&cb(i,!0);else{j=g[n].state!==cc.states.OPEN?g[n].state:"";Dc[h].dialogs[i]={state:j,endTime:g[n].endTs,lastMessageId:-1,closeReason:g[n].closedBy,history:d,dialogType:g[n].dialogType,channelType:g[n].channelType,participants:g[n].participants};Ec[i]=h;ib(i);cb(i)}m.push({dialogId:i,endTime:g[n].endTs})}}Dc[h].sortedDialogIds=eb(m)}}}function cb(a,b){if(s(a)){var c={conversationId:Ec[a],dialogId:a};Fb.conf.unifiedConf.connectorsSfConfig&&Fb.conf.unifiedConf.connectorsSfConfig.seqId&&Fb.conf.unifiedConf.connectorsSfConfig.seqId>0&&(c.fromSeq=Fb.conf.unifiedConf.connectorsSfConfig.seqId);var d=Ib.subscribeMessagingEvents(c);Fc[d]={dialogId:a,resubscribe:b};return d}}function db(a){var b=a.sort(function(a,b){return a.conversationDetails.endTs?b.conversationDetails.endTs?b.conversationDetails.endTs-a.conversationDetails.endTs:1:-1});return b}function eb(a){var b=a.sort(function(a,b){return a.endTime?b.endTime?b.endTime-a.endTime:1:-1});return b}function fb(){_(Yb.WAITING,null)}function gb(a){if(a&&(a.survey&&a.survey.question[0]||a.status)){Lb&&(a.convId=Lb.convId);Ib.submitExitChatSurvey(a,null,q)}Lb=null;hb()}function hb(){Hb.removeKey(Vb.SURVEYS_EXIT,!1);Gb.get(Ub.STATE)!==Yb.CONNECTION_ISSUE?_(Yb.APP_ENDED,lb):Nc?lb():yb=Yb.WAITING}function ib(a){var b=Ec[a];Dc[b].dialogs[a].dialogType===cc.types.POST_SURVEY&&(Dc[b].postSurveyDialogWasOpened=!0)}function jb(){kb(!1);Ib.setVisitorTyping(!1);Ib.closeDialog()}function kb(a){"boolean"==typeof a&&Eb.trigger({appName:Rb,eventName:Wb.AGENT_TYPING,data:{agentTyping:a}})}function lb(){if(Nc){_(Yb.APP_ENDED);Ib.dispose()}else _(Yb.WAITING)}function mb(){_(Yb.PENDING)}function nb(){Sb.info("_disposeApplication",Qb);Eb.trigger({appName:Qb,eventName:Tb.chatState.ENDED});f()}function ob(a){return lpTag.site+":"+(a&&a.invitationId)}function pb(a,b){return Ib.getOTK({formId:a.secureFormId,invitationId:a.invitationId,type:"SecureForm"},b)}function qb(a,b,c){Sb.info("secureFormRequest status: "+a+" info:"+JSON.stringify(c),Qb);Ib.secureFormRequest({dialogId:W($())||Ib.getSessionKey(),state:a,submissionId:c.formUuid,invitationId:b,sequenceList:[c.sequenceId],contentType:a===dc.SUBMIT?ic.SECURE_FORM_SUBMISSION:""})}function rb(a,b){if(a){Sb.info("richContentRequest info: "+JSON.stringify(a),Qb);Ib.richContentRequest({state:a.state,dialogId:Ib.getSessionKey(),sequenceList:[a.sequenceId],metadata:b||[]})}}function sb(a){Ib.imageShareGenerateUrlRequest(a)}function tb(a){Ib.imageShareDownloadUrlRequest(a)}function ub(a,b){if(a){Sb.info("quickRepliesRequest info: "+JSON.stringify(a),Qb);Ib.quickRepliesRequest({state:a.state,dialogId:Ib.getSessionKey(),sequenceList:[a.sequenceId],metadata:b||[]})}}function vb(a){Ib.getShiftStatus({success:a.success,error:a.error})}var wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb,Fb,Gb,Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb="ConversationManager",Rb=lpTag.unifiedWindow.apps.CHAT,Sb=lpTag.unifiedWindow.log,Tb=lpTag.unifiedWindow.events,Ub=lpTag.unifiedWindow.uiModelPath,Vb=lpTag.unifiedWindow.chatModelPath,Wb=Tb.chat,Xb=Tb.viewController,Yb=lpTag.unifiedWindow.State,Zb=lpTag.unifiedWindow.apps,$b=lpTag.unifiedWindow.consts,_b=lpTag.unifiedWindow.consts.chatEvents,ac=lpTag.unifiedWindow.events.socket,bc=lpTag.AMSStatics.conversation.states,cc=lpTag.AMSStatics.dialog,dc=lpTag.unifiedWindow.secureFormStates,ec=lpTag.AMSStatics.participant.roles,fc=lpTag.unifiedWindow.consts.errorTypes,gc=lpTag.unifiedWindow.consts.authErrorsTypes,hc=lpTag.unifiedWindow.MessageState,ic=lpTag.unifiedWindow.contentTypes,jc=lpTag.unifiedWindow.MessageTypes,kc=lpTag.unifiedWindow.settingsIDs,lc=lpTag.unifiedWindow.structuredContentTypes,mc=lpTag.unifiedWindow.quickRepliesStates,nc=lpTag.unifiedWindow.welcomeMessageStates,oc=0,pc=4,qc=2,rc=3,sc=null,tc={SYSTEM:"system",AGENT:"agent",VISITOR:"visitor"},uc=!1,vc=!1,wc=15e3,xc=5e3,yc=3e5,zc=lpTag.AMSStatics.dialog.closeReasons,Ac=!1,Bc=!1,Cc=!1,Dc={},Ec={},Fc={},Gc={},Hc={},Ic={},Jc=lpTag.unifiedWindow.applicationUtils,Kc=[],Lc="dialogId",Mc="@id",Nc=!1,Oc=!1,Pc={},Qc={},Rc=[],Sc=(lpTag.csds,!1);Qc[_b.SECURE_FORM]=!0;e(d);this.setConversationUrgency=g;this.isCurrentConversation=h;this.getOtkJson=ob;this.getOTK=pb;this.secureFormRequest=qb;this.richContentRequest=rb;this.imageShareGenerateUrlRequest=sb;this.imageShareDownloadUrlRequest=tb;this.dispose=f;this.quickRepliesRequest=ub;this.getShiftStatus=vb};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.LineStatesManager=function(a){function b(a){B.info("init",u);if("object"==typeof a){t=a.events;p=a.lpModel;q=a.lppModel;r=a.apiDelegate;s=a.browserStateManager;g()}else B.error("init: missing mandatory dependencies.",u)}function c(a){var b=h(a);d(b);return b}function d(a){var b,c=k(),d=[];a=a||m();Array.isArray(a)&&a.forEach(function(a){if(!o(a)&&l(a,c)){a.state=c;d.push(a)}});b=D.groupByKeyValue(d,"state");for(var e in b)r.sendStatesUpdate(b[e],e)}function e(a){for(var b,c,d=a.length-1;d>=0;d--){b=a[d];if(!o(b)&&n(b)&&!b.history)break;c||!o(b)||b.history||(c=b)}return c||b}function f(){t.unbind({appName:"*",eventName:y.LINES_VIEWED,func:d})}function g(){t.bind({appName:"*",eventName:y.LINES_VIEWED,func:d})}function h(a){var b,c=m(),d=[];Array.isArray(a)&&a.forEach(function(a){b=i(a,c);b&&d.push(b)});return d}function i(a,b){var c,d=a;c=j(b,a);if(c&&"undefined"!=typeof a.state)if(l(c,a.state,a.originatorId,a.source,a.resubscribed)){d=c;d.state=a.state;d.update=!0}else d=null;return d}function j(a,b){var c=null;Array.isArray(a)&&a.some(function(a){if(a[C]===b[C]&&a.convId===b.convId){c=a;return!0}});return c}function k(){var a=q.get(A.WINDOW_MAXIMIZED);return s.isFocus()&&a?w.READ:w.ACCEPT}function l(a,b,c,d,e){var f=d?a.source!==d:!0;if(e){f=!0;c=null}return(a.state!==w.FAILED&&!a.originatorId&&a.source===v.VISITOR||a.originatorId&&a.originatorId!==c)&&a.state!==b&&f&&x[a.state]<x[b]}function m(){return p.get(z.LINES)||[]}function n(a){return a.state===w.READ?!0:!1}function o(a){return a.source===v.VISITOR?!0:!1}var p,q,r,s,t,u="LineStatesManager",v={AGENT:"agent",VISITOR:"visitor"},w=lpTag.unifiedWindow.MessageState,x=lpTag.unifiedWindow.MessagePriority,y=lpTag.unifiedWindow.events.viewController,z=lpTag.unifiedWindow.chatModelPath,A=lpTag.unifiedWindow.uiModelPath,B=lpTag.unifiedWindow.log,C="@id",D=lpTag.unifiedWindow.applicationUtils;b(a);this.verifyLineStates=c;this.sendStatesUpdate=d;this.getLastReadLine=e;this.dispose=f};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.TtrManager=function(a){function b(a){E.info("init",y);if("object"==typeof a){w=a.events;u=a.lpModel;v=a.lppModel;t=a.conversationManager;x=a.features;d()}else E.error("init: missing mandatory dependencies.",y)}function c(){w.unbind({appName:z,eventName:A.BRAND_INFO,func:i});v.unbind(D.STATE,h);u.unbind(C.TRANSCRIPT_LOADED,l);f()}function d(){w.bind({appName:z,eventName:A.BRAND_INFO,func:i});g();v.bind(D.STATE,h);u.bind(C.TRANSCRIPT_LOADED,l)}function e(){G.published=!1;G.urgencyInfo=null;f()}function f(){w.unbind({appName:z,eventName:A.TTR_INFO,func:j});F=!1}function g(){if(!F){F=!0;w.bind({appName:z,eventName:A.TTR_INFO,func:j})}}function h(a){var b=a.newValue;switch(b){case lpTag.unifiedWindow.State.APP_ENDED:case lpTag.unifiedWindow.State.POST_CHAT:e();break;case lpTag.unifiedWindow.State.REQUESTED:case lpTag.unifiedWindow.State.PENDING:case lpTag.unifiedWindow.State.CHATTING:g()}}function i(a){if(!G.brandInfo||!H.isSameObject(a,G.brandInfo)){G.brandInfo=a;q();l()}}function j(a){if(!G.urgencyInfo||!H.isSameObject(a,G.urgencyInfo)){k(a);l()}}function k(a){G.urgencyInfo=G.urgencyInfo||{};var b=a.ttrType!==G.urgencyInfo.ttrType,c=a.manualETTR!==G.urgencyInfo.manualETTR;G.urgencyInfo=a;G.urgencyInfo.hasDataChanged=c||b}function l(){G.brandInfo&&G.urgencyInfo&&u.get(C.TRANSCRIPT_LOADED)&&null!=I&&m()}function m(){var a=n(G.brandInfo,G.shiftStatus),b=p(G.urgencyInfo);s(a,b)}function n(a,b){var c={},d=H.getPropertyFromObject(a,"timeDiff")||0;c.delay=H.getPropertyFromObject(a,"delay.tillWhen")||0;c.onOffHours=o(c.delay,d,b);return c}function o(a,b,c){var d,e,f=(new Date).getTime()-b;if(H.isEmpty(c)){e="number"==typeof a&&a>f;e&&(d=a-f)}else{e=!c.onShift;d=e?c.nextOn&&c.nextOn>f?c.nextOn-f:null:c.nextOff&&c.nextOff>f?c.nextOff-f:null}"number"==typeof d&&setTimeout(H.isEmpty(c)?l:q,d+J);return e}function p(a){return{isUrgent:a.ttrType===B.urgent,isPrioritized:a.ttrType===B.prioritized,isManual:!!a.manualETTR}}function q(){t.getShiftStatus({success:r,error:r})}function r(a){var b=a&&a.body;I=!H.isEmpty(b)&&200===a.statusCode&&200===a.responseCode;I&&(G.shiftStatus=b);l()}function s(a,b){var c={isUrgent:b.isUrgent,markUrgencyEnabled:!a.onOffHours&&!b.isManual&&!b.isPrioritized};u.modify(C.TTR,c)}var t,u,v,w,x,y="TtrManager",z=lpTag.unifiedWindow.apps.CHAT,A=lpTag.unifiedWindow.events.chat,B=lpTag.AMSStatics.effectiveTTRTypes,C=lpTag.unifiedWindow.chatModelPath,D=lpTag.unifiedWindow.uiModelPath,E=lpTag.unifiedWindow.log,F=!1,G={brandInfo:null,urgencyInfo:null,shiftStatus:null,published:!1},H=lpTag.unifiedWindow.applicationUtils,I=null,J=1e4;b(a);this.dispose=c};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.HeartBeatManager=lpTag.unifiedWindow.HeartBeatManager||function(a,b){function c(a,b){S.info("init",U);if("object"==typeof a&&a.accountId&&a.storageKey&&a.secureStorageLocation&&"object"==typeof b){E=a.accountId;I=a.storageKey;F=a.poppedOut;R=a.secureStorageLocation;Q=b.events;P=b.browserStateManager;g();if(F)j();else{s();q()}}else S.error("No configuration received on init",U)}function d(){e();h();E=null;I=null;F=null;R=null;Q=null;P=null}function e(a){S.info("_stop ,preserveTimestamps: "+a,U);L=!0;m();F||a||n();K=!1}function f(a){S.info("_start, preserveTimestamps: "+a,U);D=(new Date).getTime();e(a);o();p()}function g(){Q.bind({appName:T.UISTATE,eventName:V.uiState.EMBEDDED_CHANGED,func:i})}function h(){Q&&Q.unbind&&Q.unbind({appName:T.UISTATE,eventName:V.uiState.EMBEDDED_CHANGED,func:i})}function i(a){S.debug("_handleEmbeddedStateChange: embedded="+a,U);a?e():f(!0)}function j(){f(!0);l(V.heartBeat.INIT)}function k(){l(F?V.heartBeat.FAILED:V.application.DO_HARAKIRI)}function l(a,b){Q.trigger({appName:U,eventName:a,data:b})}function m(){S.info("_clearTimeouts",U);J&&clearTimeout(J);M&&clearTimeout(M)}function n(){S.info("_clearTimestamps",U);r();t()}function o(){S.info("_resolveApps: initializing apps value - poppedOut = "+F,U);if(F){G=W;H=X}else{G=X;H=W}S.info("_resolveApps: resolvedGetApp = "+G+", resolvedSetApp = "+H,U);
}function p(){S.info("_startBeating",U);L=!1;K=!0;w(x);A()}function q(){S.info("_fetchPopOutBeat",U);lpTag.taglets.lpSecureStorage.getValue({key:I,site:E,app:ba,success:r,appName:X,domain:R})}function r(a){S.info("_initPopOutBeat: "+JSON.stringify(a),U);if(!a||!a.timestamp){S.info("_initPopOutBeat: initializing popout beat value",U);lpTag.taglets.lpSecureStorage.setValue({key:I,site:E,app:ba,value:C(0),success:v,error:v,appName:X,domain:R})}}function s(){S.info("_fetchEmbeddedBeat",U);lpTag.taglets.lpSecureStorage.getValue({key:I,site:E,app:ba,success:u,appName:W,domain:R})}function t(){lpTag.taglets.lpSecureStorage.setValue({key:I,site:E,app:ba,value:C(0),success:v,error:v,appName:W,domain:R})}function u(a){S.info("_initEmbeddedBeat: data="+JSON.stringify(a),U);if(!a||!a.timestamp){S.info("_initEmbeddedBeat: initializing embedded beat value",U);t()}}function v(){S.info("_emptyCallback",U)}function w(a){S.info("_getBeat: got beat",U);J&&clearTimeout(J);L||(F||P.visibilitySupported()&&!P.isHidden()?lpTag.taglets.lpSecureStorage.getValue({key:I,site:E,app:ba,success:a,appName:G,domain:R}):J=setTimeout(z(a),aa))}function x(a){S.info("_validateBeat: data="+JSON.stringify(a),U);var b=(new Date).getTime();if(!L)if(F||a&&a.timestamp||!(b-D>Z)){if(F&&(!a||!a.timestamp)||a&&a.timestamp&&y(b,a.timestamp)){S.info("_validateBeat: timed out data= "+JSON.stringify(a)+" session="+I,U);k();K=!1}else if(!K){S.info("_validateBeat: resumed",U);K=!0;l(V.heartBeat.RESUMED)}O=N;J=setTimeout(z(x),aa)}else{S.info("_validateBeat: timed out from start data= "+JSON.stringify(a)+" session="+I,U);k()}}function y(a,b){S.debug("_isTimeout: now="+a+", currentTime="+b+", prevRecordedWriteTime="+O+", lastWriteTime="+N,U);return O===N?a-b>Y:F?a-b>_:a-b>$}function z(a){return function(){w(a)}}function A(){S.info("_setBeat",U);M&&clearTimeout(M);L||(F||P.visibilitySupported()&&!P.isHidden()?lpTag.taglets.lpSecureStorage.setValue({key:I,site:E,app:ba,value:C((new Date).getTime()),success:B,error:v,appName:H,expires:108e5,domain:R}):M=setTimeout(A,aa))}function B(a){S.info("_setBeatCallBack: new data="+JSON.stringify(a),U);N=a.timestamp;M=setTimeout(A,aa)}function C(a){return{timestamp:a}}var D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S=lpTag.unifiedWindow.log,T=lpTag.unifiedWindow.apps,U=T.HEARTBEAT,V=lpTag.unifiedWindow.events,W="UIHeartBeatEmbedded",X="UIHeartBeatPopOut",Y=6e4,Z=15e3,$=15e3,_=2e3,aa=1e3,ba=T.UNIFIED_WINDOW;c(a,b);this.dispose=d};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.SecureFormManager=function(a){function b(a){V.info("init",N);if("object"==typeof a){J=a.lpModel;K=a.lppModel;G=a.events;H=a.apiManager;I=a.browserStateManager;X=a.appContext.conf.engConf.lang||X;L=lpTag.unifiedWindow.helpers.SecureFormStyleHelper(a.appContext);F=a.appContext.conf.unifiedConf.poppedOut?-1:lpTag.storageMethods.getSessionData("lpTabId");M="true"===a.appContext.conf.windowConf.hidePCILogo||a.appContext.conf.windowConf.hidePCILogo===!0;d()}else V.error("init: missing mandatory dependencies.",N)}function c(){G.unbind({appName:R,eventName:U.FINISHED_EVENTS_BULK,func:m});G.unbind({appName:R,eventName:U.SECURE_FORM,func:e});G.unbind({appName:S,eventName:ba.SUBMIT,func:w});G.unbind({appName:S,eventName:ba.VIEWED,func:u});G.unbind({appName:S,eventName:ba.ERROR,func:v});G.unbind({appName:R,eventName:U.CONVERSATION_CLOSED,func:k});$=!0}function d(){G.bind({appName:R,eventName:U.FINISHED_EVENTS_BULK,func:m});G.bind({appName:R,eventName:U.SECURE_FORM,func:e});G.bind({appName:S,eventName:ba.SUBMIT,func:w});G.bind({appName:S,eventName:ba.VIEWED,func:u});G.bind({appName:S,eventName:ba.ERROR,func:v});G.bind({appName:R,eventName:U.CONVERSATION_CLOSED,func:k})}function e(a){var b;if(a&&f(a)){b=o(a);switch(a.command){case ba.SEND:g(a,b);break;case ba.VIEWED:i(b,a.source);Q[b.info.uniqueId].visualState=aa.OPEN;break;case ba.SUBMIT:j(a,b);Q[b.info.uniqueId].visualState=aa.CLOSED;break;case ba.ERROR:h(b,b);Q[b.info.uniqueId].visualState=aa.CLOSED}y(b.info.uniqueId,a.command);$||J.modify(D(b),Q[b.info.uniqueId])}}function f(a){var b=Q[a&&a.info&&a.info.uniqueId],c=b&&a.command===ba.SEND,d=b&&a.command===ba.ERROR,e=b&&b.formState===ba.SUBMIT&&a.command===ba.SUBMIT,f=b&&a.command===ba.VIEWED&&"agent"===a.source;return d||!c&&!e&&!f}function g(a,b){if(b){b.info=a.info;p(b);A(a,b,ba.SEND);t(b)}}function h(a,b){var c=Q[a&&a.info&&a.info.uniqueId];c&&!c.firedLine&&A(a,b,ba.SEND)}function i(a,b){var c=a&&"visitor"===b&&!$&&a.formState!==ba.VIEWED&&a.formState!==ba.ERROR;c&&y(a.info.uniqueId,ba.VIEWED_ON_ANOTHER_TAB)}function j(a,b){b&&A(a,b,ba.SUBMIT)}function k(a){var b;if(a&&a.convId){b=l(a.convId);if(b){Q[b].command=ba.ERROR;Q[b].formState=ba.ERROR;J.modify(D(Q[b]),Q[b])}}}function l(a){for(var b in Q)if(Q[b].visualState===aa.OPEN&&Q[b].convId===a)return Q[b].info.uniqueId}function m(){if($){n();J.modify(T.SECURE_FORMS,Q)}$=!1}function n(){for(var a in Q)if(Q.hasOwnProperty(a))switch(Q[a].formState){case ba.VIEWED:x(Q[a].info.uniqueId,ba.ABORTED);break;case ba.SEND:x(Q[a].info.uniqueId,ba.RECEIVED)}}function o(a){var b=a&&a.info;if(b&&b.uniqueId){Q[b.uniqueId]=Q[b.uniqueId]||a;return Q[b.uniqueId]}}function p(a){a&&a.info&&(_[a.info.uniqueId]=q(a.info))}function q(a){return function(b){var c={siteid:lpTag.site,redirect:encodeURIComponent(P),css:encodeURIComponent(L.getCompressedCSS()),hideLogo:M,otkJson:encodeURIComponent(H.getOtkJson(a)),lang:X};if(a&&a.submitOtk&&a.getOtk){c.otk=a.submitOtk;c.formOtk=a.getOtk;lpTag.taglets.lpUtil.runCallback(b,null,r(O,c))}else a&&a.invitationId&&H.getOTK(a,function(a){var d,e=a&&a.token;if(e&&e.writeOtk&&e.readOtk){c.otk=e.writeOtk;c.formOtk=e.readOtk;d=r(O,c)}lpTag.taglets.lpUtil.runCallback(b,null,d)})}}function r(a,b){return lpTag.taglets.lpUtil.addQueryParams(a,b)}function s(a,b){lpTag.taglets.lpUtil.runCallback(_[a],null,b)}function t(a){$||a.command!==ba.SEND||x(a.info.uniqueId,ba.RECEIVED)}function u(a){if(!B(a.uniqueId)){C(a.uniqueId);z(ba.VIEWED,a.uniqueId);y(a.uniqueId,ba.VIEWED)}}function v(a){z(ba.ERROR,a.uniqueId,{errorReason:a.message.errorReason||"unknown",failedCommand:ba.VIEWED})}function w(a){z(ba.SUBMIT,a.uniqueId,{formUuid:a.message.token,gatewayDomain:a.message.gatewayDomain},a.text);G.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.viewController.PREPARE_SLIDER_CLOSED_TIMEOUT})}function x(a,b){z(b,a);y(a,b)}function y(a,b){if(Q[a]){Q[a].events=Q[a].events||[];if(W.indexOf(Q[a].events,b)<0){Q[a].events.push(b);Q[a].formState=B(a)?ba.VIEWED_ON_ANOTHER_TAB:b}}}function z(a,b,c,d){var e=Q[b];if(e&&!B(b)){c=c||{};c.uniqueId=b;c.secureFormName=e.info.secureFormName;c.secureFormId=e.info.secureFormId;c.sequenceId=e["@id"];H.secureFormRequest(a,b,c,d)}}function A(a,b,c){Q[b.info.uniqueId].firedLine=!0;G.trigger({appName:R,eventName:U.LINE,data:E(a,b,c)})}function B(a){if(Q[a].formState===ba.VIEWED_ON_ANOTHER_TAB)return!0;var b=K.get(Y.SECURE_FORMS_TAB_HANDLER);return b&&"undefined"!=typeof b[a]&&b[a]!==F}function C(a){var b=K.get(Y.SECURE_FORMS_TAB_HANDLER)||{};if("undefined"==typeof b[a]){b[a]=F;K.modify(Y.SECURE_FORMS_TAB_HANDLER,b)}}function D(a){var b=T.SECURE_FORMS;return{name:b.name,path:b.path+"."+a.info.uniqueId}}function E(a,b,c){var d={"@id":a["@id"],source:"agent",by:b.by,time:a.time||new Date,type:U.SECURE_FORM,textKey:Z+c,dictionaryKey:{secureFormName:b.info.secureFormName},uniqueId:b.info.uniqueId,formName:b.info.secureFormName,history:a.history,track:a.track};if(a.state){d.state=a.state;d.convId=a.convId;d.originatorId=a.originatorId}return d}var F,G,H,I,J,K,L,M,N="SecureFormManager",O="https://"+lpTag.csds.getDomain("tokenizer")+"/pcigw/pci_dynamic_le.jsp",P="https://"+lpTag.csds.getDomain("tokenizer")+"/pcigw/pci_dynamic_submitted_le.html",Q={},R=lpTag.unifiedWindow.apps.CHAT,S=lpTag.unifiedWindow.apps.SECURE_FORM,T=lpTag.unifiedWindow.chatModelPath,U=lpTag.unifiedWindow.events.chat,V=lpTag.unifiedWindow.log,W=lpTag.unifiedWindow.applicationUtils,X="en-US",Y=lpTag.unifiedWindow.uiModelPath,Z="secureForm_line_",$=!0,_={},aa={OPEN:"OPEN",CLOSED:"CLOSED"},ba=lpTag.unifiedWindow.secureFormStates;b(a);this.getFormUrl=s;this.dispose=c};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.RichContentManager=function(a){function b(a){p.info("init",m);if("object"==typeof a){k=a.lpModel;l=a.lppModel;i=a.appContext;j=a.apiManager;d()}else p.error("init: missing mandatory dependencies.",m)}function c(){i.events.unbind({appName:o,eventName:n.ACTION_EVENT,func:f});i.events.unbind({appName:o,eventName:n.PUBLISH_TEXT,func:g});i.events.unbind({appName:o,eventName:n.DISPLAYED,func:e});i.events.unbind({appName:o,eventName:n.SUBMIT_AS_TEXT,func:h})}function d(){i.events.bind({appName:o,eventName:n.ACTION_EVENT,func:f});i.events.bind({appName:o,eventName:n.PUBLISH_TEXT,func:g});i.events.bind({appName:o,eventName:n.DISPLAYED,func:e});i.events.bind({appName:o,eventName:n.SUBMIT_AS_TEXT,func:h})}function e(a){if(a){var b={sequenceId:"number"==typeof a.uniqueId?a.uniqueId:a.sequenceId,state:r};j.richContentRequest(b)}}function f(a){if(a){var b={sequenceId:a.uniqueId||a.sequenceId,state:q};j.richContentRequest(b,a.metadata||[])}}function g(a){if(a&&a.actionData&&a.actionData.text){var b={text:a.actionData.text,metadata:a.metadata};i.transcriptManager.sendLine(b)}}function h(a){if(a&&a.actionData){var b={text:a.actionData.join(", ")||"",metadata:a.metadata||[]};i.transcriptManager.sendLine(b)}}var i,j,k,l,m="RichContentManager",n=lpTag.unifiedWindow.richContentStates,o=lpTag.unifiedWindow.apps.RICH_CONTENT,p=lpTag.unifiedWindow.log,q=(lpTag.unifiedWindow.applicationUtils,"ACTION"),r="ACCEPT";b(a);this.dispose=c};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.QuickRepliesManager=function(a){function b(){l.info("dispose",j);e()}function c(a){l.info("init",j);if("object"==typeof a){h=a.appContext;i=a.apiManager;d()}else l.error("init: missing mandatory dependencies.",j)}function d(){h.events.bind({appName:m,eventName:n.ACTION_EVENT,func:f});h.events.bind({appName:m,eventName:n.PUBLISH_TEXT,func:g})}function e(){h.events.unbind({appName:m,eventName:n.ACTION_EVENT,func:f});h.events.unbind({appName:m,eventName:n.PUBLISH_TEXT,func:g})}function f(a){if(a){var b={sequenceId:a.sequenceId,state:k};i.quickRepliesRequest(b,a.payload||[])}}function g(a){if(a&&a.payload&&a.payload.action&&a.payload.action.text){var b={text:a.payload.action.text,metadata:a.payload.metadata};h.transcriptManager.sendLine(b)}}var h,i,j="QuickRepliesManager",k="ACTION",l=lpTag.unifiedWindow.log,m=lpTag.unifiedWindow.apps.QUICK_REPLIES,n=lpTag.unifiedWindow.quickRepliesStates;c(a);this.dispose=b};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.CoBrowseManager=function(a){function b(a){z.info("init",x);if("object"==typeof a){t=a.events;u=a.lpModel;v=a.appContext;w=v.conf.engConf;l()}else z.error("init: missing mandatory dependencies.",x)}function c(a){j(a)&&f(B.INVITED,k(a));a.type=D.INFO;a.text=h(F+I,null,a.by);a.by=v.translator.translate("info");a.source="system";return a}function d(a){return a&&a.text&&a.text.indexOf&&a.text.indexOf(y)>=0?!0:!1}function e(a){return"VIDEO_CALL"===a||"VOICE_CALL"===a}function f(a,b,c,d){d=d||u.get(A.AGENT_ID);t.trigger({appName:E,eventName:a,data:{ssid:w.ssid,svid:w.svid,scid:w.scid,cid:w.cid,eid:w.eid,agentId:d,serviceId:b,chatId:u.get(A.CHAT_ID),visitorName:u.get(A.VISITOR_NAME)||"",mode:c},global:!0});g(a,c,d)}function g(a,b,c){var d=v.conf.unifiedConf.isMessaging;if(a!==B.STARTED&&a!==B.INVITED&&a!==B.CANCELED&&(a!==B.OFFERED||d)){var e;if(c){var f=u.get(A.PARTICIPANTS),g=f&&f[c];g&&(e=g.name)}var i=F+a,j=h(i,b,e);t.trigger({appName:C,eventName:D.LINE,data:{source:"system",by:v.translator.translate("info"),time:new Date,type:D.INFO,text:j}});t.trigger({appName:C,eventName:D.FINISHED_EVENTS_BULK})}}function h(a,b,c){c=c||u.get(A.AGENT_NAME);v.translator.extendDictionary({agentName:c},{locale:w.lang});"VIDEO_CALL"===b?a="video_"+a:"VOICE_CALL"===b&&(a="voice_"+a);var d=v.translator.translate(a),e=i();e&&(d=e[a]||d);return d}function i(){var a=v.conf.unifiedConf,b=v.conf.engConf.lang;return a&&a.cobrowseCustomization&&a.cobrowseCustomization[b]}function j(a){var b=new Date(a.time);return Date.now()-b.getTime()<G}function k(a){var b=a.text.match(/data-lp-serviceid="([\w\d#]*)"/);return b.length>1?b[1]:""}function l(){t.bind({appName:lpTag.unifiedWindow.apps.CHAT,eventName:lpTag.unifiedWindow.events.coBrowseEvents.DIALOG_CREATED,func:n})}function m(){t.unbind({appName:lpTag.unifiedWindow.apps.CHAT,eventName:lpTag.unifiedWindow.events.coBrowseEvents.DIALOG_CREATED,func:n})}function n(a){if(o(a))f(B.INVITED,a.metaData.serviceId,a.metaData.mode,p(a));else if(q(a)){f(B.CANCELED);s(!1)}}function o(a){var b=a&&a.metaData,c="OPEN"===a.state;if(c&&b){var d=-1!==H.indexOf(b.mode),e="INVITED"===b.sessionState,f=Date.now()/1e3<b.expires;c=d&&e&&f}return c}function p(a){for(var b=0;b<a.participants.length;b++)if(a.participants[b]&&"CONSUMER"!==a.participants[b].role)return a.participants[b].id}function q(a){return"CLOSE"===a.state}function r(){return J}function s(a){J=a;a||t.trigger({appName:"tooltip",eventName:"close",global:!0})}var t,u,v,w,x="CoBrowseManager",y='data-lp-point="cb-offer"',z=lpTag.unifiedWindow.log,A=lpTag.unifiedWindow.chatModelPath,B=lpTag.unifiedWindow.events.coBrowseEvents,C=lpTag.unifiedWindow.apps.CHAT,D=lpTag.unifiedWindow.events.chat,E=lpTag.unifiedWindow.apps.UNIFIED_WINDOW,F="cobrowseLine_",G=115e3,H=lpTag.unifiedWindow.consts.coBrowse.acceptedCoBrowseModes,I="cobrowseOffered",J=!1;b(a);this.isCall=e;this.isCoBrowseLineEvent=d;this.processCoBrowseLineObj=c;this.publishCoBrowseEvent=f;this.customizeTranslation=h;this.isInActiveCall=r;this.setActiveCall=s;this.dispose=m;this.COBROWSE_OFFER_TIMEOUT=G};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.TranscriptManager=function(a){function b(a){V.info("init",M);if("object"==typeof a){I=a.events;B=a.lpModel;C=a.lppModel;D=a.apiDelegate;E=a.coBrowseManager;F=a.idnvManager;G=a.browserStateManager;H=a.lineStatesManager;J=a.appContext;h()}else V.error("init: missing mandatory dependencies.",M)}function c(a,b){var c,d;V.info("sendLine: visitor sent line",M);if("object"==typeof a){if(lpTag.hooks&&lpTag.hooks.exec){d=lpTag.hooks.exec({name:lpTag.unifiedWindow.hooks.BEFORE_SEND_VISITOR_LINE,data:{line:a}});a=d&&d.data&&d.data.line||a}i(a);$++;s([a]);Z++;c=r().length-1;var e=q(c,Q.ERROR),f=q(c,Q.SENT),g=q(c,Q.PENDING),h=D.sendLine.bind(D,a,f,e);b?b({callback:h,error:e,retry:g,lineIndex:c}):h()}}function d(a,b){V.info("sendLine: send visitor line: "+JSON.stringify(a),M);if("object"==typeof a){i(a);D.sendLine(a,b&&b.success,b&&b.error)}}function e(a){V.info("setVisitorTyping: isTyping="+a,M);if("boolean"==typeof a&&K!==a&&C.get(U.STATE)===W.CHATTING&&A(a)){K=a;D.setVisitorTyping(a);C.modify(U.VISITOR_TYPING,a)}}function f(){return D.currentConversationActive&&D.currentConversationActive()}function g(){I.unbind({appName:N,eventName:R.LINE,func:k});I.unbind({appName:N,eventName:R.CHAT_INFO,func:w});I.unbind({appName:N,eventName:R.AGENT_TYPING,func:u});I.unbind({appName:N,eventName:R.FINISHED_EVENTS_BULK,func:n});I.unbind({appName:"*",eventName:S.LINES_VIEWED,func:o})}function h(){I.bind({appName:N,eventName:R.LINE,func:k});I.bind({appName:N,eventName:R.CHAT_INFO,func:w});I.bind({appName:N,eventName:R.AGENT_TYPING,func:u});I.bind({appName:N,eventName:R.FINISHED_EVENTS_BULK,func:n});I.bind({appName:"*",eventName:S.LINES_VIEWED,func:o})}function i(a){a.source=P.VISITOR;a.time=(new Date).getTime();a.state=Q.PENDING;a[X]=Z}function j(a){var b=!1,c=B.get(T.TRANSCRIPT_LOADED);a=a||[];if(!c){for(var d=0;d<a.length;d++)if(!isNaN(a[d][Y])){b=!0;break}b&&B.modify(T.TRANSCRIPT_LOADED,!0)}}function k(a){var b,c,d,e=a.lines||a;V.info("_collectLines: lines="+JSON.stringify(_.excludeAttributes(_.clone(e),["text"])));if(a){c=_.isArray(a.lines)?a.lines:[a];for(var f=0;f<c.length;f++){b=c[f];d=l(b);if(!d){b=m(b);b&&aa.push(b)}}}}function l(a){if(a.source===P.VISITOR&&$>0){$--;return!0}return!1}function m(a){E.isCoBrowseLineEvent(a)?a=E.processCoBrowseLineObj(a):F.isIdnvLineObj(a)?a=F.processIdnvLineObj(a):a.type=a.type||O.chatEvents.LINE;return a}function n(){var a;H&&(aa=H.verifyLineStates(aa));s(aa);aa=[];a=r();y(a);j(a)}function o(){var a=r();y(a)}function p(a,b,c){for(var d,e=r(),f=0;f<e.length;f++)if(e[f].localId===b){d=e[f];d.state=c;d.update=!0;if(a&&!isNaN(a[Y])&&a.convId){d[Y]=a[Y];d.convId=a.convId;d.originatorId=L}a&&"undefined"!=typeof a.canRetry&&(d.canRetry=a.canRetry);a&&a.relativePath&&(d.relativePath=a.relativePath);break}s([d])}function q(a,b){return function(c){p(c,a,b)}}function r(){return B.get(T.LINES)||[]}function s(a,b){var c;a=t(a);if(lpTag.hooks&&lpTag.hooks.exec){c=lpTag.hooks.exec({name:lpTag.unifiedWindow.hooks.AFTER_GET_LINES,data:{lines:a}});a=c&&c.data&&c.data.lines||a}V.info("_storeChatLines: store chat lines in the model, lines="+JSON.stringify(_.excludeAttributes(_.clone(a),["text"])),M);B.modify(T.LINES,a,X,b)}function t(a){return a.map(function(a){a[X]="undefined"!=typeof a[X]?a[X]:Z++;return a})}function u(a){if(v(a)){a&&"boolean"==typeof a.agentTyping&&B.modify(T.AGENT_IS_TYPING,a.agentTyping);V.info("_setAgentTyping: data="+JSON.stringify(a),M)}}function v(a){var b=B.get(T.PARTICIPANTS)||[];a=a||{};return!a.originatorId||b[a.originatorId].type===P.AGENT}function w(a){if("object"==typeof a){a.agentName&&B.modify(T.AGENT_NAME,a.agentName);a.agentId&&B.modify(T.AGENT_ID,a.agentId);a.visitorName&&B.modify(T.VISITOR_NAME,a.visitorName);a.rtSessionId&&B.modify(T.CHAT_ID,a.rtSessionId);a.resetAgentInfo&&x();a.visitorId&&(L=a.visitorId)}}function x(){B.removeKey(T.AGENT_NAME,!0);B.removeKey(T.AGENT_ID)}function y(a){var b,c=C.get(U.WINDOW_MAXIMIZED),d=C.get(U.LAST_LINE_VIEWED),e={};H?b=H.getLastReadLine(a):c&&(b=z(a));if(b){e[Y]=b[Y];e[X]=b[X];b.convId&&(e.convId=b.convId)}_.isEmpty(e)||_.isSameObject(d,e)||C.modify(U.LAST_LINE_VIEWED,e)}function z(a){for(var b,c=a.length-1;c>=0;c--){b=a[c];if(!isNaN(b[X]))break}return b}function A(a){return a===!0||a===!1&&"boolean"==typeof C.get(U.VISITOR_TYPING)}var B,C,D,E,F,G,H,I,J,K,L,M="TranscriptManager",N="API",O=lpTag.unifiedWindow.consts,P={AGENT:"agent",VISITOR:"visitor"},Q=lpTag.unifiedWindow.MessageState,R=lpTag.unifiedWindow.events.chat,S=lpTag.unifiedWindow.events.viewController,T=lpTag.unifiedWindow.chatModelPath,U=lpTag.unifiedWindow.uiModelPath,V=lpTag.unifiedWindow.log,W=lpTag.unifiedWindow.State,X="localId",Y="@id",Z=0,$=0,_=lpTag.unifiedWindow.applicationUtils,aa=[];b(a);this.sendLine=c;this.sendLineSkipLocal=d;this.setVisitorTyping=e;this.currentConversationActive=f;this.dispose=g};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.UIStateManager=function(a){function b(a){G.info("init",B);t=a.lpModel;u=a.lppModel;v=a.events;w=a.browserStateManager;A=a.NativeSDK;x=a.appContext;y=lpTag.unifiedWindow.events;K=J.getPropertyFromObject(x,"conf.engConf.async",!1);j()}function c(){u.clear();k();clearTimeout(z)}function d(a){var b=!A;if("boolean"==typeof a&&u.get(F.WINDOW_MAXIMIZED)!==a){G.info("setWindowState: Window maximized="+a,B);b&&u.modify(F.WINDOW_MAXIMIZED,a);u.get(F.STATE)===lpTag.unifiedWindow.State.WAITING&&K&&v.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:y.application.DO_HARAKIRI});v.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:a?D.uiState.MAXIMIZED:D.uiState.MINIMIZED,global:!0})}}function e(a,b){G.info("setWindowPosition: position="+JSON.stringify(a),B);u.modify(F.WINDOW_POSITION,a,null,b)}function f(a){g(F.ACTIONS_VISIBLE,a)}function g(a,b){a&&"boolean"==typeof b&&u.modify(a,b)}function h(a){G.info("setSoundState: enable="+a,B);"boolean"==typeof a&&u.modify(F.WINDOW_SOUND,a)}function i(a){u.modify({splitKey:F.WINDOW_EMBEDDED,updateData:a,onSuccess:r,context:this})}function j(){v.bind({appName:C.HEARTBEAT,eventName:D.heartBeat.FAILED,func:m});v.bind({appName:C.HEARTBEAT,eventName:D.heartBeat.RESUMED,func:n});v.bind({appName:C.UNIFIED_WINDOW,eventName:D.unifiedWindow.MAXIMIZE,func:l});v.bind({appName:C.UNIFIED_WINDOW,eventName:D.chat.SET_REFRESH_MODEL_DELAY,func:s});w.on(w.EVENT_NAME.FOCUS_CHANGE,o,this);w.on(w.EVENT_NAME.VISIBILITY_CHANGE,p,this);u.bind(F.WINDOW_EMBEDDED,q)}function k(){v.unbind({appName:C.HEARTBEAT,eventName:D.heartBeat.FAILED,func:m});v.unbind({appName:C.HEARTBEAT,eventName:D.heartBeat.RESUMED,func:n});v.unbind({appName:C.UNIFIED_WINDOW,eventName:D.unifiedWindow.MAXIMIZE,func:l});v.unbind({appName:C.UNIFIED_WINDOW,eventName:D.chat.SET_REFRESH_MODEL_DELAY,func:s});w.off(w.EVENT_NAME.FOCUS_CHANGE,o);w.off(w.EVENT_NAME.VISIBILITY_CHANGE,p);u.unbind(F.WINDOW_EMBEDDED,q)}function l(){d(E.MAXIMIZED)}function m(){u.modify(F.ACTION_POPOUT_ENABLE,!1)}function n(){u.modify(F.ACTION_POPOUT_ENABLE,!0)}function o(a){if(a.focus){G.info("_refreshModelOnFocusChange: model refreshed",B);u.load()}else{z&&clearTimeout(z);z=setTimeout(p,H)}}function p(){w.isHidden()||u.modify(F.LAST_VIEWED_TAB,lpTag.storageMethods.getSessionData("lpTabId"));if(!w.isFocus()&&!w.isHidden()){G.info("_refreshModelOnVisibility: "+(0===I?"model refreshed":"skip refresh"),B);0===I?u.load():I--;z&&clearTimeout(z);z=setTimeout(p,H)}}function q(a){v.trigger({appName:C.UISTATE,eventName:D.uiState.EMBEDDED_CHANGED,data:a&&a.newValue})}function r(a){v.trigger({appName:C.UISTATE,eventName:D.uiState.POP_OUT,data:{popOut:!a.window.embedded}})}function s(a){I=a.loadModelDelay||0}var t,u,v,w,x,y,z,A,B="UIStateManager",C=lpTag.unifiedWindow.apps,D=lpTag.unifiedWindow.events,E={MAXIMIZED:!0,MINIMIZED:!1},F=lpTag.unifiedWindow.uiModelPath,G=lpTag.unifiedWindow.log,H=1e3,I=0,J=lpTag.taglets.lpUtil,K=!1;b(a);this.WINDOW_STATE=E;this.setWindowState=d;this.setEmbeddedState=i;this.setWindowPosition=e;this.setActionsVisibility=f;this.setVisibility=g;this.setSoundState=h;this.clear=c};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.IdnvManager=function(a){function b(a){w.info("init",v);if("object"==typeof a){t=a.appContext;u=a.lppModel}else w.error("init: missing mandatory dependencies.",v)}function c(a){return a.text&&a.text.indexOf&&(a.text.indexOf(C.attrs.questionType)>-1||a.text.indexOf(C.attrs.answerType)>-1)?!0:!1}function d(a){if("visitor"===a.source){a=h(a);a.source="system"}else a=g(a);return a}function e(a){var b=k(a);p(b);n(z.lineId,C.states.CANCELLED);z={}}function f(a){var b=j(a);p(b);n(z.lineId,C.states.SUBMITTED);z={}}function g(a){var b,c=a["@id"],d=o(c);d||(d=m(c));if(d===C.states.PENDING){b=r(a.text);if(b){z={lineId:c,encodedFields:b.encodedFields};s.call(this,lpTag.unifiedWindow.events.viewController.DIALOG,b)}}return a}function h(a){var b=a.text.indexOf(C.attrs.action)>-1?!0:!1,c=r(a.text);if(c.encodedFields===z.encodedFields){s.call(this,lpTag.unifiedWindow.events.viewController.DIALOG_STATE_CHANGED,{});z={}}b?a.text=i(c.fields):a.text=k(c.encodedFields);return a}function i(a){var b=t.translator.translate("idnvFormSubmitted",!0);return x.injectTextObj(b,{idnvChar1:a.firstChar,idnvChar2:a.secondChar,idnvType:a.typeField})}function j(a){var b=t.translator.translate("idnvAnswer",!0);b=x.injectTextObj(b,{idnvAnswer1:a.firstChar,idnvAnswer2:a.secondChar});return l(b,a.idnvData.encodedFields,!0)}function k(a){return l(t.translator.dictionary.getString("idnvFormCancelled"),a,!1)}function l(a,b,c){var d;c&&(d=C.attrs.action+'="mask"');return x.injectTextObj(B,{payload:b,mask:d,text:a})}function m(a){var b;b=z.lineId&&a!==z.lineId?C.states.SKIPPED:C.states.PENDING;n(a,b);return b}function n(a,b){u.modify(A.IDNV_DATA.path+"."+a+".state",b)}function o(a){return u.get(A.IDNV_DATA.path+"."+a+".state")}function p(a){var b={text:a},c={error:q()};t.transcriptManager.sendLineSkipLocal(b,c)}function q(){return function(){t.events.trigger({appName:"tooltip",eventName:"show",data:{text:t.translator.translate("idnvSendLineError"),tooltipTimeout:y}})}}function r(a){var b,c,d=a.match(/<span.*<\/span>/g);if(d&&d[0]){b=lpTag.lpUtils.getAttrValue(d[0],C.attrs.payload);if(b){c=JSON.parse(decodeURIComponent(b));return{encodedFields:b,fields:c}}}return null}function s(a,b){var c={context:this,data:{ControllerName:lpTag.unifiedWindow.IdnvDialogViewController.ControllerName,idnvData:b,dialogOpenedFrom:this}};t.events.trigger({appName:v,eventName:a,data:c})}var t,u,v="IdnvManager",w=lpTag.unifiedWindow.log,x=lpTag.unifiedWindow.applicationUtils,y=3e3,z={},A=lpTag.unifiedWindow.uiModelPath,B='<span data-lp-collab-type="idnv_answer" data-lp-collab-payload={{payload}} {{mask}}>{{text}}</span>',C={attrs:{type:"data-lp-collab-type",payload:"data-lp-collab-payload",action:"data-lp-action",questionType:"idnv_question",answerType:"idnv_answer"},states:{PENDING:"pending",CANCELLED:"cancelled",SUBMITTED:"submitted",SKIPPED:"skipped"}};b(a);this.isIdnvLineObj=c;this.processIdnvLineObj=d;this.sendIdnvCancelLine=e;this.sendIdnvSubmitLine=f};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow.WidgetManager=window.lpTag.unifiedWindow.WidgetManager||function(a){function b(a){V.info("init",U);J=a.lpModel;K=a.lppModel;L=a.wsdkModel;M=lpTag.LPWidgetSDK.API;N=a.events;O=a.windowSDKEvents;P=a.appContext;Q=lpTag.unifiedWindow.consts.widgetSDK;S=W.getPropertyFromObject(P,"conf.engConf.async");T=lpTag.unifiedWindow.State;d()}function c(){O.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:Y.widgetSDK.INIT})}function d(){N.bind({appName:"*",eventName:Y.widgetSDK.INIT,context:this,func:c});Z.push(N.bind({appName:"*",eventName:Y.widgetSDK.VISITOR_TYPING,context:this,func:A}));Z.push(N.bind({appName:"*",eventName:Y.chat.LINE,context:this,func:C}));Z.push(N.bind({appName:"*",eventName:Y.chat.CHAT_INFO,context:this,func:n}));Z.push(N.bind({appName:"*",eventName:Y.chat.STATE,func:u}));Z.push(N.bind({appName:"slider",eventName:Y.viewController.SLIDER_VIEW_CHANGE,context:this,func:v}));Z.push(N.bind({appName:"slider",eventName:Y.viewController.SLIDER_CLOSED,context:this,func:w}));Z.push(N.bind({appName:"WrapperWindowExtender",eventName:Y.viewController.MINIMIZE_VISIBLE,context:this,func:function(){B(!1)}}));Z.push(N.bind({appName:"WrapperWindowExtender",eventName:Y.viewController.MAXIMIZE_VISIBLE,context:this,func:function(){B(!0)}}));O.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:lpTag.unifiedWindow.events.widgetSDK.NOTIFICATION,context:this,func:i});O.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:lpTag.unifiedWindow.events.widgetSDK.INITIATED_WIDGET_ID,context:this,func:e});J.bind(lpTag.unifiedWindow.chatModelPath.AGENT_IS_TYPING,z)}function e(a){var b=K.get(lpTag.unifiedWindow.uiModelPath.INITIATED_WIDGETS_IDS)||{};b[a]=!0;K.modify(lpTag.unifiedWindow.uiModelPath.INITIATED_WIDGETS_IDS,b);J.modify(lpTag.unifiedWindow.chatModelPath.SDK_BUTTON_ENABLE,!0)}function f(a){var b,c=K.get(lpTag.unifiedWindow.uiModelPath.DISPOSED_WIDGETS_IDS)||{},d=!1;c[a]=!1;K.modify(lpTag.unifiedWindow.uiModelPath.DISPOSED_WIDGETS_IDS,c);b=g();for(var e in b)if(b[e]===!0){d=!0;break}d||J.modify(lpTag.unifiedWindow.chatModelPath.SDK_BUTTON_ENABLE,!1)}function g(){var a=K.get(lpTag.unifiedWindow.uiModelPath.INITIATED_WIDGETS_IDS),b=K.get(lpTag.unifiedWindow.uiModelPath.DISPOSED_WIDGETS_IDS);if(b&&a)for(var c in b)a[c]=!1;return a||{}}function h(){var a=K.get(lpTag.unifiedWindow.uiModelPath.SELECTED_WIDGET_ID),b=K.get(lpTag.unifiedWindow.uiModelPath.WIDGET_SLIDER_VISIBLE);return a&&b?a:void 0}function i(a){"number"==typeof a&&a>=0&&J.modify(lpTag.unifiedWindow.chatModelPath.SDK_NOTIFICATIONS,a)}function j(){return K.get(lpTag.unifiedWindow.uiModelPath.WIDGETS_NOTIICATIONS)||{}}function k(){return K.get(lpTag.unifiedWindow.uiModelPath.WIDGET_SLIDER_VISIBLE)}function l(){return K.get(lpTag.unifiedWindow.uiModelPath.WINDOW_MAXIMIZED)}function m(a){K.removeKey(lpTag.unifiedWindow.uiModelPath.WIDGETS_NOTIICATIONS);K.modify(lpTag.unifiedWindow.uiModelPath.WIDGETS_NOTIICATIONS,a)}function n(a){if(a){a.rtSessionId&&!R&&(R=a.rtSessionId);if(R){o(a);p(a,t(R));(a.agentName&&a.agentId||a.visitorId&&a.visitorName)&&q(a)}}}function o(a){var b=L.get(X.CONVERSATION_ID),c=L.get(X.SESSION_ID);!b&&a.rtSessionId&&L.modify(X.CONVERSATION_ID,a.rtSessionId);!c&&a.monitoringSessionId&&L.modify(X.SESSION_ID,a.monitoringSessionId)}function p(a,b){var c=L.get(X.CONVERSATION_ID),d=L.get(X.SESSION_ID),e=!1;if(b&&a){if(a.state&&b.state!==H(a.state)){b.state=H(a.state);e=!0}if(!b.startTime&&a.lastUpdate){b.startTime=a.lastUpdate;e=!0}if(a.skill&&(!b.skill||b.skill.name!==a.skill&&b.skill.id!==a.skill)){S?b.skill={name:"",id:a.skill}:b.skill={name:a.skill,id:""};e=!0}if(a.typing){b.typing=a.typing;e=!0}if(e){L.modify(X.DIALOGS,[b],"id");O.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:Y.widgetSDK.CONVERSATION_INFO,data:{conversationId:c,sessionId:d,dialogId:b.id,startTime:b.startTime,state:b.state,dialogType:b.dialogType,channelType:b.channelType,skill:b.skill,typing:b.typing}})}}}function q(a){a.agentName&&a.agentId&&r({id:a.agentId,name:a.agentName,type:Q.AGENT,imgPath:W.getPropertyFromObject(P,"conf.windowConf.agentUrl")||"",description:W.getPropertyFromObject(P,"conf.windowConf.description")||""});a.visitorId&&a.visitorName&&r({id:a.visitorId,name:a.visitorName,type:Q.VISITOR})}function r(a){for(var b,c=t(R),d=!1,e=0;e<c.participants.length;e++)if(c.participants[e].id===a.id){b=c.participants[e];break}if(b){if(!b.name){b.name=a.name;d=!0}if(a.type===Q.AGENT){if(!b.imgPath&&a.imgPath){b.imgPath=a.imgPath;d=!0}if(!b.description&&a.description){b.description=a.description;d=!0}}d&&s(c)}else{c.participants.push(a);s(c)}}function s(a){L.modify(X.DIALOGS,[a],"id");O.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:Y.widgetSDK.PARTICIPANTS,data:a.participants})}function t(a){var b,c;if(a){b=L.get(X.DIALOGS);c={id:a,startTime:null,state:null,dialogType:null,channelType:S?Q.CHANNEL_TYPE_MESSAGING:Q.CHANNEL_TYPE_CHAT,messages:[],participants:[],typing:{agent:!1,visitor:!1}};if(b)for(var d=0;d<b.length;d++)b[d].id===a&&(c=b[d]);return c}}function u(a){var b,c;if(a!==lpTag.unifiedWindow.State.INIT&&a!==lpTag.unifiedWindow.State.INITIALIZED){b=H(a);c=t(R);c&&c.state!==b&&p({state:b},c);O.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:Y.widgetSDK.CONVERSATION_STATE,data:b})}}function v(a){var b=a.type===lpTag.unifiedWindow.consts.slider.viewType.widgetSDKView;b?K.modify(lpTag.unifiedWindow.uiModelPath.SELECTED_WIDGET_ID,a.id):K.removeKey(lpTag.unifiedWindow.uiModelPath.SELECTED_WIDGET_ID);x(a,!0)}function w(a){x(a,!1)}function x(a,b){O.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:Y.widgetSDK.WIDGET_AREA_STATE,data:{isOpened:b,type:a.type}})}function y(a){K.modify(lpTag.unifiedWindow.uiModelPath.WIDGET_SLIDER_VISIBLE,a)}function z(a){var b,c;if(a&&"boolean"==typeof a.newValue){b=t(R);c=b.typing;if(c.agent!==a.newValue){c.agent=a.newValue;p({typing:c},b)}}}function A(a){var b,c;if("boolean"==typeof a){b=t(R);c=b.typing;if(c.visitor!==a){c.visitor=a;p({typing:c},b)}}}function B(a){var b=L.get(X.WINDOW_UI),c=b&&b.isMaximized;("boolean"!=typeof c||"boolean"==typeof a&&a!==c)&&L.modify(X.WINDOW_UI,{isMaximized:a})}function C(a){var b,c=D(a,Y.chat.LINE);if(c){G(c);b=t(a.convId);if(b){b.messages.push(c);L.modify(X.DIALOGS,[b],"id")}O.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:Y.widgetSDK.MESSAGES,data:c})}}function D(a,b){var c;if(a)switch(b){case Y.chat.LINE:if(a.type===Y.chat.SECURE_FORM)return null;c={};c.type=E(a.type);c.id=a["@id"]||a.id;c.ts=a.time;c.content=F(a.text);c.originator={type:a.source,name:a.by};c.state=a.state;break;case Y.chat.CHAT_INFO:}return c}function E(a){return a&&a===lpTag.unifiedWindow.consts.chatEvents.RICH_CONTENT?Q.contentType.richContent:Q.contentType.text}function F(a){var b="";if("string"==typeof a){_.lastIndex=null;b=a.replace(_,"<img alt='filteredImg'>")}return b}function G(a){var b=t(R);if(b&&(b.state===lpTag.WindowSDKAPI.states.ACCEPTED||b.state===lpTag.LPWidgetSDK.API.states.IN_QUEUE)){
a.originator&&(a.originator.type===Q.VISITOR?$.visitor=!0:a.originator.type===Q.AGENT&&($.agent=!0));$.agent&&$.visitor&&p({state:lpTag.LPWidgetSDK.API.states.INTERACTIVE},b)}}function H(a){var b=lpTag.unifiedWindow.State,c=lpTag.LPWidgetSDK.API.states;switch(a){case b.PRE_CHAT:return c.PRE_CONVERSATION;case b.WAITING:case b.REQUESTED:return c.PENDING;case b.CHATTING:return S?c.IN_QUEUE:c.ACCEPTED;case b.POST_CHAT:return c.POST_CONVERSATION;case b.ENDED:return c.CONVERSATION_ENDED;case b.OFFLINE:return c.OFFLINE;case b.ERROR:case b.NOT_FOUND:return c.ERROR;default:return a}}function I(){V.info("dispose",U);Z.forEach(function(a){N.unbind(a)});O.unbind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:lpTag.unifiedWindow.events.widgetSDK.NOTIFICATION,context:this,func:i})}var J,K,L,M,N,O,P,Q,R,S,T,U="WidgetManager",V=lpTag.unifiedWindow.log,W=lpTag.taglets.lpUtil,X=lpTag.unifiedWindow.widgetModelPath,Y=lpTag.unifiedWindow.events,Z=[],$={agent:!1,visitor:!1},_=/(<img.*?>)/g;b(a);this.dispose=I;this.getWidgetsStatus=g;this.getLastShownWidgetId=h;this.getWidgetsNotifications=j;this.getLastSliderState=k;this.isWindowMaximized=l;this.setWIdgetsNotifications=m;this.handleWidgetDisposal=f;this.onWidgetStateChanged=y};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow.AuthenticationManager=window.lpTag.unifiedWindow.AuthenticationManager||function(a){function b(a){i=a.appContext}function c(a,b){k.info("authenticate",j);var c=i.conf.unifiedConf.authToken||i.conf.unifiedConf.poppedOut,f=i.conf.engConf.async&&i.conf.authConf&&i.conf.authConf.ssoKey;if(l){var g=d();c?m.runCallback(a,null,{ssoKey:i.conf.unifiedConf.authToken,redirect_uri:g}):f?m.runCallback(a,null,{ssoKey:i.conf.authConf.ssoKey,redirect_uri:g}):l.getSSOKey(i.conf.authConf&&i.conf.authConf.connector,e(a),b)}else{k.error("Not authenticator",j);m.runCallback(b)}}function d(){var a=null,b=i.conf.unifiedConf.useOAuth2Standard||i.conf.authConf&&i.conf.authConf.connector&&i.conf.authConf.connector.configuration&&i.conf.authConf.connector.configuration.rfcCompliance;a=i.conf.authConf&&i.conf.authConf.redirect_uri?i.conf.authConf.redirect_uri:b&&i.conf.unifiedConf.external?lpTag.lpUtils.getCurrentUrlWithoutParams():lpTag.unifiedWindow.consts.defaultRedirectUri;return a}function e(a){return function(b){b&&(b.redirect_uri=b.redirect_uri||d());a(b)}}function f(a,b){k.info("reAuthenticate",j);l&&l.getSSOKey(i.conf.authConf&&i.conf.authConf.connector,e(a),b)}function g(){if(l)return l.isErroneous();k.error("Not authenticator",j);return void 0}function h(){k.info("dispose",j)}var i,j="AuthenticationManager",k=lpTag.unifiedWindow.log,l=lpTag.taglets.authenticator,m=lpTag.taglets.lpUtil;b(a);this.authenticate=c;this.reAuthenticate=f;this.isErroneous=g;this.dispose=h};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow.StepUpManager=window.lpTag.unifiedWindow.StepUpManager||function(a){function b(a){I=a.configs;J=I.uiState.chat&&I.uiState.chat.stepUpState;H=a.appContext;K=H.events;ba.isStepupEnabled=I.unified.isStepUpEnabled||!1;ba.accountId=lpTag&&lpTag.site;ba.secureStorageDomain=lpTag&&lpTag.csds&&lpTag.csds.getDomain(aa.csds.leCdnDomain);ba.idpDomain=lpTag&&lpTag.csds&&lpTag.csds.getDomain(aa.csds.idp);ba.secureStorageLocation=A(ba.secureStorageDomain);x()}function c(a){M=a.lppModel;L=a.apiDelegate}function d(a){var b=null;"OPEN"===a.state&&a.convId&&(b=a.convId);T.setValue({key:aa.storage.stepUpStorage.valueKeys.lastActiveConvo,appName:aa.storage.stepUpStorage.appName,site:ba.accountId,value:b,domain:ba.secureStorageLocation,success:function(a){P.debug("stored last unauth convo data",U)},error:function(a){P.debug("failed to store last unauth convo data",U)}});if("CLOSE"===a.state){J=Z.stepUpEnded;M.modify(lpTag.unifiedWindow.uiModelPath.STEP_UP_STATE,J)}}function e(a){T.getValue({key:aa.storage.stepUpStorage.valueKeys.lastActiveConvo,appName:aa.storage.stepUpStorage.appName,site:ba.accountId,domain:ba.secureStorageLocation,success:a,error:function(){P.debug("failed to get last unauth convo data",U)}})}function f(){var a="https://"+I.unified.acCdnDomain+"/api/account/"+I.unified.accountId+"/configuration/le-connectors/all-connectors";lpTag.taglets.jsonp.issueCall({url:a,timeout:5e3,retries:0,success:function(a){a.forEach(function(a){V[C(a)?"unauthConnector":"authConnector"]=a});w()},error:function(){P.info("_getConfiguration - ERROR FROM SERVER",U)}})}function g(){P.info("dispose",U);y()}function h(a,b){var c=ba.authenticationLocation,d={lp_jwt:a};b.redirect_uri&&(d.redirect_uri=b.redirect_uri);V.authConnector.type===lpTag.unifiedWindow.consts.authConnectorTypes.OAUTH_IMPLICIT?d.id_token=b.ssoKey:d.code=b.ssoKey;var e={url:c,method:"POST",success:function(a){var b=a.body.token,c=z(b,[Y.onBehalf,Y.sub]);$.unAuthConsuemrId=c[Y.onBehalf];$.authConsumerId=c[Y.sub];N=b;X.success(N)},error:function(a){P.error("failed to get onbehalf jwt from IDP",U);X.fallback()},data:d};R.issueCall(e)}function i(a){return function(b){var c={};if("object"==typeof b){c.ssoKey=b.ssoKey;c.redirect_uri=b.redirect_uri}else c.ssoKey=b;h(a,c)}}function j(a){var b=a.body.token;Q.getSSOKey(V.authConnector,i(b),k)}function k(a){P.error("Step up failed to auth with auth connector",U);X.fallback()}function l(a){var b={url:ba.unauthJwtLocation,method:"POST",data:{id_token:a},error:function(a){X.fallback()},success:j};R.issueCall(b)}function m(){n(l)}function n(a,b){var c=aa.storage.unauthStorage.key,d=aa.storage.unauthStorage.name;window.lpTag.taglets.lpSecureStorage.getValue({key:c,site:ba.accountId,app:d,success:a,error:b,appName:d,domain:ba.secureStorageLocation})}function o(){return J}function p(){function a(a){var b={};b.conversationId=a;b.authUserId=$.authConsumerId;b.unAuthUserId=$.unAuthConsuemrId;L.updateStepUpParticipants(b)}e(a)}function q(){if(J===Z.outOfAuthArea||J===Z.failedStepUp||J===Z.alreadySteppedUp)return J;var a=I.uiState.engConf,b=ba.isStepupEnabled,c=C(a.connector),d=I.uiState.chat&&"chatting"===I.uiState.chat.state||!1,e=b&&c&&a.identityData&&"0"!==a.identityData.acr,f=b&&c&&d&&J!==Z.stepUpEnded;return e?Z.alreadySteppedUp:f?J===Z.stepUp?Z.stepUp:lpTag.identities&&2===lpTag.identities.length?Z.stepUp:a.identityData&&"0"!==a.identityData.acr?Z.alreadySteppedUp:Z.noStepUp:Z.noStepUp}function r(){var a=J===Z.stepUp||J===Z.alreadySteppedUp;if(a&&1===lpTag.identities.length){J=Z.outOfAuthArea;X.error()}}function s(){r();J=q();P.info("Stepup state:"+J,U);var a=J===Z.stepUp||J===Z.alreadySteppedUp||J===Z.outOfAuthArea;a&&f();return a}function t(){ba.isStepupEnabled&&J===Z.stepUp&&p()}function u(){P.debug("Failed to stepUp user",U);J=Z.failedStepUp;M.modify(lpTag.unifiedWindow.uiModelPath.STEP_UP_STATE,J);X.error()}function v(a){if(200===a.code){P.debug("Successfully to stepUp user",U);J=Z.alreadySteppedUp;M.modify(lpTag.unifiedWindow.uiModelPath.STEP_UP_STATE,J)}else if(400===a.code){if(J!==Z.alreadySteppedUp){P.debug("Stepup failed to stepUp user",U);J=Z.failedStepUp;M.modify(lpTag.unifiedWindow.uiModelPath.STEP_UP_STATE,J);K.trigger({appName:"*",eventName:"authenticationError",data:{error:"expired"}})}}else{P.debug("Step up failed to stepUp user",U);u()}}function w(){K.trigger({appName:U,eventName:ca.READY,data:!0})}function x(){K.bind({appName:U,eventName:ca.READY,func:function(){W=!0;ba.authenticationLocation=B(ba.idpDomain,{accountId:ba.accountId,connectorId:V.authConnector.id});ba.unauthJwtLocation=B(ba.idpDomain,{accountId:ba.accountId,connectorId:V.unauthConnector.id})}});K.bind({appName:"API",eventName:S.CONVERSATION_STATE,func:d});K.bind({appName:"AMSClient",eventName:"onConversationStepUp",func:v})}function y(){K.unbind({appName:U,evenName:ca.READY});K.unbind({appName:"API",eventName:S.CONVERSATION_STATE});K.unbind({appName:"AMSClient",eventName:"onConversationStepUp"})}function z(a,b){var c={};if(a){var d=a.split(".");if(d.length>=2){var e={};try{e=JSON.parse(window.atob(d[1]));b.forEach(function(a){c[a]=e[a]})}catch(f){P("error parsing jwt","ERROR","getSubFromJWT")}}return c}}function A(a){var b=window.lpTag.taglets.lpSecureStorage.v;return"https://"+a+"/le_secure_storage/"+(b?b:"")}function B(a,b){return"https://"+a+"/api/account/"+b.accountId+"/app/"+b.connectorId+"/authenticate?v="+_.idpVersion}function C(a){var b=a&&a.configuration,c="lpTag.taglets.unAuthMessaging.lpUnauthFunction",d="lpTag.taglets.unAuthMessaging";return b.jsContext===d&&b.jsMethodName===c}function D(){K.trigger({appName:lpTag.unifiedWindow.apps.CHAT,eventName:lpTag.unifiedWindow.events.chat.ERROR,data:{errorType:lpTag.unifiedWindow.consts.errorTypes.AUTH_ERROR,keepError:!0}})}function E(a){return function(){if(W)return a.apply(null,arguments);var b=!1;K.bind({appName:U,eventName:ca.READY,func:function(){b=!0;a.apply(null,arguments)}})}()}function F(a,b){X.success=function(b){P.debug("successful stepup auth",U);a(b)};X.fallback=function(){P.error("failed to stepup, falling back",U);b()};if(ba.isStepupEnabled&&J===Z.outOfAuthArea)P.debug("User is out of auth area with auth convo",U);else if(ba.isStepupEnabled&&J!==Z.failedStepUp){P.debug("begin stepup auth",U);E(m)}else X.fallback()}function G(){return J===Z.failedStepUp}var H,I,J,K,L,M,N,O=lpTag.unifiedWindow,P=O.log,Q=lpTag.taglets.authenticator,R=lpTag.taglets&&lpTag.taglets.postmessage,S=lpTag.unifiedWindow.events.chat,T=window.lpTag.taglets.lpSecureStorage,U="StepUpManager",V={},W=!1,X={success:null,fallback:null,error:function(){P.error("failed to stepup, auth error",U);setTimeout(D,0)}},Y={onBehalf:"onBehalf",sub:"sub"},Z={outOfAuthArea:-1,noStepUp:0,stepUp:1,alreadySteppedUp:2,stepUpEnded:3,failedStepUp:4},$={},_={idpVersion:"3.0"},aa={csds:{idp:"idp",leCdnDomain:"leCdnDomain"},storage:{unauthStorage:{key:"-unAuthJWT",name:"unAuthMessaging"},stepUpStorage:{appName:"StepUP",valueKeys:{lastActiveConvo:"lastActiveConvo",jwt:"-stepUpJWT",lastStepUpState:"lastStepUpState"}}}},ba={},ca={READY:"ready"};this.dispose=g;this.shouldStepUp=s;this.stepUpAuthentication=F;this.configure=c;this.getStepUpState=o;this.sendStepUp=t;this.stepUpState=Z;this.getStepUpFailedStatus=G;b(a)};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.FileSharingManager=function(a){function b(a){if("object"==typeof a){F=a.appContext;G=a.apiManager;H=a.utils;E=a.log;I=a.imageParsingHelper;d();E.info("init",J)}}function c(){F.events.unbind({appName:K,eventName:lpTag.unifiedWindow.events.imageShare.IMAGE_SELECTED,func:e});F.events.unbind({appName:K,eventName:lpTag.unifiedWindow.events.imageShare.FILE_DOWNLOAD_REQUEST,func:B});F.events.unbind({appName:K,eventName:lpTag.unifiedWindow.events.imageShare.OVERLAY_CLOSED,func:D});F.events.unbind({appName:K,eventName:lpTag.unifiedWindow.events.imageShare.IMAGE_PREVIEW_CLOSED,func:g});F.events.unbind({appName:K,eventName:lpTag.unifiedWindow.events.imageShare.FILE_UPLOAD_RETRY,func:z})}function d(){F.events.bind({appName:K,eventName:lpTag.unifiedWindow.events.imageShare.IMAGE_SELECTED,func:e});F.events.bind({appName:K,eventName:lpTag.unifiedWindow.events.imageShare.FILE_DOWNLOAD_REQUEST,func:B});F.events.bind({appName:K,eventName:lpTag.unifiedWindow.events.imageShare.OVERLAY_CLOSED,func:D});F.events.bind({appName:K,eventName:lpTag.unifiedWindow.events.imageShare.IMAGE_PREVIEW_CLOSED,func:g});F.events.bind({appName:K,eventName:lpTag.unifiedWindow.events.imageShare.FILE_UPLOAD_RETRY,func:z})}function e(a){if(a&&!R){var b=i(a&&a.image);if(k(b))switch(b){case"JPG":case"JPEG":case"PNG":case"GIF":I.fixOrientation(a.image,f.bind(this));break;case"PDF":case"DOCX":case"XLSX":case"PPTX":m(j(a))&&f.call(this,a.image,b);break;default:m(j(a))&&f.call(this,a.image,"GENERIC")}}}function f(a,b){R||new lpTag.unifiedWindow.PhotoPreviewViewController({appContext:F,utils:H,image:a,type:b})}function g(a){R=!1;if(a&&a.image){var b=a.image,c=j(a);if(m(c,a)){c.error=c.success=p.bind(this,b,c);G.imageShareGenerateUrlRequest(c)}}}function h(a){if(!a)return!1;var b=a;b.indexOf("/")>-1&&(b=b.split("/")[1]);return b.toUpperCase()}function i(a){var b=a&&a.type;b=h(b);if((!b||b.length>4)&&a&&a.name){var c=a.name.split(".");b=h(c[c.length-1])}return b}function j(a){var b=a&&a.image,c=a&&a.caption||"",d=b&&b.size,e=i(b),f={fileSize:d.toString(),fileType:e,caption:c};return f}function k(a){if(-1===P.indexOf(a)){n(lpTag.unifiedWindow.consts.fileSharing.fileAttributes.TYPE);return!1}return!0}function l(a){return L[a]?L[a]:L.DEFAULT}function m(a){var b=!0,c=a.fileSize/1024/1024,d=l(a.fileType);if(k(a.fileType)){if(c>d){b=!1;n(lpTag.unifiedWindow.consts.fileSharing.fileAttributes.SIZE,d)}}else b=!1;return b}function n(a,b){F.events.trigger({appName:K,eventName:lpTag.unifiedWindow.events.imageShare.FILE_VALIDATION,data:{validation:a,extraData:b}})}function o(a){var b=a;"string"==typeof a&&(b={error:a});a.timeout&&(b={error:a.timeout});return b}function p(a,b,c){var d=o(c),e=q.bind(this,a,b,d);u(a,e,b.fileType)}function q(a,b,c,d){var e=this,f={fileData:{preview:d,caption:b.caption,fileType:b.fileType,relativePath:c.relativePath},contentType:lpTag.unifiedWindow.consts.chatEvents.FILE_SHARING,type:lpTag.unifiedWindow.consts.chatEvents.FILE_SHARING};c.error?F.transcriptManager.sendLine(f):F.transcriptManager.sendLine(f,function(d){if(d&&d.lineIndex&&!Q[d.lineIndex]){Q[d.lineIndex]={send:d.callback,error:d.error,lineRetry:d.retry,state:"pending",details:b};A(d.lineIndex,!1,!0);r.call(e,a,d.lineIndex,c)}})}function r(a,b,c,d){if(Q[b]){Q[b].lineRetry&&Q[b].lineRetry(c);var e=Q[b].details,f=t(c);if(a&&e&&f){Q[b].retry||(Q[b].retry=x.bind(this,a,b));var g=new FileReader;g.onload=function(){var c=this.result,e=new Int8Array(c);s(a,e,f,w.bind(this,b,d||0))};g.readAsArrayBuffer(a)}}}function s(a,b,c,d){if(b){var e=new XMLHttpRequest;e.open("PUT",c);e.onreadystatechange=function(){4===e.readyState&&d(201===e.status,e.status<400||e.status>=500)};e.send(b)}}function t(a){var b=a.relativePath,c=a.queryParams&&a.queryParams.temp_url_sig,d=a.queryParams&&a.queryParams.temp_url_expires;if(b&&c&&d){var e=v()+b;e+="?temp_url_sig="+c;e+="&temp_url_expires="+d;return e}}function u(a,b,c){I.createThumbnail(a,b,c)}function v(){return"https://"+lpTag.csds.getDomain("swift")}function w(a,b,c,d){if(Q[a]&&c&&Q[a].send)Q[a].send();else if(!c){b=b||0;if(d&&M>b){b++;setTimeout(function(){Q[a]&&Q[a].retry?Q[a].retry(b):A(a,!c,!1,d)},N);return}Q[a]&&Q[a].error&&Q[a].error({canRetry:d})}A(a,!c,!1,d)}function x(a,b,c){Q[b].lineRetry&&Q[b].lineRetry();var d=Q[b].details;c=c||0;d.error=d.success=y.bind(this,a,b,c);G.imageShareGenerateUrlRequest(d)}function y(a,b,c,d){var e=o(d);r.call(this,a,b,e,c)}function z(a){a&&a.localId&&Q&&Q[a.localId]&&Q[a.localId].retry&&Q[a.localId].retry(0)}function A(a,b,c,d){F.events.trigger({appName:K,eventName:lpTag.unifiedWindow.events.imageShare.FILE_DONE_UPLOADED+":"+a,data:{showLoader:c,error:b,canRetry:d}})}function B(a){if(!S||H.getPropertyFromObject(a,"download")){S=!0;var b=H.getPropertyFromObject(a,"fileData.relativePath"),c=H.getPropertyFromObject(a,"convId");if(b){var d={relativePath:b,conversationId:c};d.error=d.success=C.bind(this,a);G.imageShareDownloadUrlRequest(d)}}}function C(a,b){var c=H.getPropertyFromObject(b,"body.urlForDownload");!c&&b.relativePath&&(c=t(b));var d=H.getPropertyFromObject(a,"download");if(d)c&&window.open(c,"_blank");else{var e=i({name:H.getPropertyFromObject(a,"fileData.relativePath")}),f=e;if(e)switch(e){case"PNG":case"JPG":case"JPEG":case"GIF":f=null;break;case"PDF":case"DOCX":case"XLSX":case"PPTX":c=F.conf.unifiedConf.imagesRepository+"/"+e.toLowerCase()+".png";break;default:c=F.conf.unifiedConf.imagesRepository+"/generic.png"}c?new lpTag.unifiedWindow.PhotoOverlayViewController({appContext:F,utils:H,imageURL:c,type:f,line:a,timestamp:a.time,caption:a.fileData&&a.fileData.caption||""}):S=!1}}function D(){S=!1}var E,F,G,H,I,J="FileSharingManager",K=lpTag.unifiedWindow.apps.FILE_SHARE,L={DEFAULT:5,PDF:15},M=2,N=1e3,O=["PNG","JPG","GIF","JPEG"],P=O.concat(["PDF","DOCX","PPTX","XLSX"]),Q={},R=!1,S=!1;b(a);this.ALLOWED_IMAGES=O;this.dispose=c};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.BrowserNotificationsManager=function(a,b){function c(a){if(S&&!L)switch(window.Notification.permission){case T.DENIED:E.load(o.bind(this,x.bind(this,v,a)));break;case T.GRANTED:E.load(o.bind(this,v.bind(this,a)));break;default:E.load(o.bind(this,x.bind(this,v,a)))}}function d(){return S&&C.nativeEnabled}function e(){return S&&window.Notification.permission===T.GRANTED}function f(){return S&&window.Notification.permission===T.DENIED}function g(a,b){E=b.uiModel;D=b.chatModel;C=h(a);S=i();U=b.browserStateManager;Q.info("Browser Notifications Supported: "+S,P);B();F=b.secureStorageLocation;G=b.appContext.translator;H=b.appContext.deviceDetector;I=b.events;J=b.appContext.fileSharingManager;K=b.appContext.conf.engConf.lang;M=b.appContext.conf.unifiedConf.jsRepository;L=H.isAndroidChrome();N=H.isMacOS();O=H.isMobile();j();m()}function h(a){return{nativeEnabled:"true"===a.nativeNotification,tabEnabled:"true"===a.tabNotification}}function i(){return!!window.Notification}function j(){if(C.tabEnabled){D.bind(W.LINES,q);E.bind(V.LAST_LINE_VIEWED,q);U.on(U.EVENT_NAME.VISIBILITY_CHANGE,q)}C.nativeEnabled&&p()&&D.bind(W.LINES,r)}function k(){if(C.tabEnabled){D.unbind(W.LINES,q);E.unbind(V.LAST_LINE_VIEWED,q);U.off(U.EVENT_NAME.VISIBILITY_CHANGE,q);if(Z){window.document.title=window.document.title.replace(/^\(\d*\)/,"");Z=!1}}C.nativeEnabled&&p()&&D.unbind(W.LINES,r);clearTimeout(ca)}function l(){ca=setTimeout(o.bind(this,l),da)}function m(){ca=setTimeout(o.bind(this,l),0)}function n(a,b,c){for(var d=Object.keys(a)||[],e=(new Date).getTime(),f=0;f<d.length;f++){var g=a[d[f]];if(e-g.ts>ba){var h=R.clone(V.TAB_LIST);h.path=h.path+"."+d[f];E.removeKey(h);d[f]==b&&E.modify(V.LAST_VIEWED_TAB,"")}}c()}function o(a){E.load(function(){var b=E.get(V.TAB_LIST)||{},c=E.get(V.LAST_VIEWED_TAB)||"",d={active:!0,ts:(new Date).getTime()};b[$]=d;E.modify(V.TAB_LIST,b);n(b,c,a)})}function p(){return _.getStorageType(F).lpUnifiedWindow!==_.storageTypes.SESSIONSTORAGE}function q(){var a=u.call(this),b="undefined"==typeof X||X!==a,c=U&&U.isHidden();if(b)if(c&&a>0){X=a;if(Z)window.document.title=window.document.title.replace(/^\(\d*\)/,"("+X+")");else{Z=!0;window.document.title="("+X+") "+window.document.title}}else if(0>=a){X=0;Z=!1;window.document.title=window.document.title.replace(/^\(\d*\)/,"")}}function r(a){var b=a.newValue,d=E.get(V.LAST_LINE_VIEWED),e=U&&U.isHidden();if(d)for(var f=0;f<b.length;f++)if((t(b[f],d)||s(b[f],d))&&e)if(X>1){b[f].type=aa.LINE;b[f].text=X+" "+G.translate("browserNotifications_newMessages");c(b[f])}else c(b[f])}function s(a,b){if(a.convId===b.convId||"agent"!==a.source||a.update)return!1;0===a["@id"]&&E.modify(V.LAST_LINE_VIEWED,{"@id":a["@id"],localId:a.localId,convId:a.convId});return!0}function t(a,b){return a["@id"]>b["@id"]&&a.convId===b.convId&&"agent"===a.source&&!a.update}function u(){var a=0,b=D.get(W.LINES)||[],c=E.get(V.LAST_LINE_VIEWED);if(c)for(var d=b.length-1;d>=0;d--){if(b[d]["@id"]===c["@id"]&&b[d].convId===c.convId)return a;isNaN(b[d]["@id"])||"agent"!==b[d].source||b[d].history||a++}return 0}function v(a){var b=E.get(V.LAST_VIEWED_TAB),c=E.get(V.TAB_LIST)||{},d=Object.keys(c)||[],e=d.length>0?d[d.length-1]:"",f=y(a);(b&&b===$||e===$)&&w(f.title,f.options)}function w(a,b){if(!N){b.tag=P;O||(b.renotify=!0)}if(L);else{var c=new window.Notification(a,b);c.onclick=function(){window.focus();H.isEdge()||c.close()}}}function x(a,b){window.Notification.requestPermission().then(function(c){c===T.GRANTED&&a(b)})}function y(a){var b=z(a);return{title:G.translate("browserNotifications_newMessageTitle"),options:{body:b,icon:Y}}}function z(a){var b=a.by||G.translate("agent");G.extendDictionary({agentName:b},{locale:K});switch(a.type){case aa.LINE:return a.text;case aa.SECURE_FORM:return G.translate("secureForm_link_title_send");case aa.RICH_CONTENT:return G.translate("browserNotifications_richContent");case aa.COBROWSE:return G.translate("cobrowseInvitation");case aa.FILE_SHARING:return"IMAGE"===A(a.fileData)?G.translate("browserNotifications_image"):G.translate("browserNotifications_file");default:return""}}function A(a){var b=a&&a.fileType||"";return-1!==J.ALLOWED_IMAGES.indexOf(b.toUpperCase())?"IMAGE":void 0}function B(){for(var a="",b=document.getElementsByTagName("link"),c=0;c<b.length;c++)("icon"==b[c].getAttribute("rel")||"shortcut icon"==b[c].getAttribute("rel"))&&(a=b[c].getAttribute("href"));Y=a?a:R.getDomain()+"/favicon.ico"}var C,D,E,F,G,H,I,J,K,L,M,N,O,P="BrowserNotificationsManager",Q=lpTag.unifiedWindow.log,R=lpTag.taglets.lpUtil,S=!1,T={GRANTED:"granted",DENIED:"denied"},U=null,V=lpTag.unifiedWindow.uiModelPath,W=lpTag.unifiedWindow.chatModelPath,X=0,Y="",Z=!1,$=lpTag.storageMethods.getSessionData("lpTabId"),_=lpTag.taglets.lpSecureStorage,aa=lpTag.unifiedWindow.consts.chatEvents,ba=5e3,ca=null,da=5e3;g(a,b);this.isSupported=S;this.nativeEnabled=d;this.permissionGranted=e;this.permissionDenied=f;this.requestPermission=x;this.dispose=k};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.FeatureStateManager=lpTag.unifiedWindow.FeatureStateManager||function(a,b){function c(a){var b=R[a]||{};b.classes=b.classes?b.classes:[];return b}function d(){return E}function e(){return B[L.EMOJI_ENABLED]&&C.isDesktop()}function f(){return d.call(this)&&T}function g(){return"true"===H.getPropertyFromObject(B,L.TIMESTAMP_GROUPING,"false")}function h(){return!!H.getPropertyFromObject(B,L.TIMESTAMP_LOCATION,O.DEFAULT)}function i(){var a=H.getPropertyFromObject(B,L.AGENT_AVATAR,!1);return a===!0||"true"===a}function j(){return{agent:k(Q.AGENT_BUBBLE,"default"),visitor:k(Q.VISITOR_BUBBLE,"default")}}function k(b,c){return H.getPropertyFromObject(a,"customStyle.config."+b,c)}function l(){return H.getPropertyFromObject(B,L.TIMESTAMP_LOCATION,O.DEFAULT)===O.TOP}function m(){return"true"===H.getPropertyFromObject(B,L.BUBBLE_GROUPING,"false")}function n(){return"true"===H.getPropertyFromObject(B,L.ENGAGEMENT_WINDOW_BORDER,"true")}function o(){return B[L.ENGAGEMENT_WINDOW_BOX_SHADOW]}function p(){return"true"===H.getPropertyFromObject(B,L.AGENT_AVATAR_PADDING,"false")}function q(a,b){var c=S.filter(function(b){return b.id===a});return c&&c.length>0&&c[0].propertyValue&&c[0].propertyValue.value===b}function r(a){var b=S.filter(function(b){return b.id===a});return b&&b.length>0&&b[0].propertyValue&&b[0].propertyValue.value||null}function s(){return B[L.SEND_ICON_TYPE]||"arrow"}function t(a,b){B=a;D=a.menuLocation||N.DEFAULT;E=b.appContext.conf.engConf.async;C=b.appContext.deviceDetector;S=I.isArray(b.appContext.conf.accountSettings)?b.appContext.conf.accountSettings:[];T=q(J.FILE_SHARING_ENALBED,"true");x(B);G.debug("Menu Location parsed",F)}function u(a){switch(a){case N.TOP:v(K.ACTIONS_BUTTON,!1);v(K.CLOSE_BUTTON,!1);v(K.TOP_MENU_BUTTON,!0);break;case N.BOTTOM:v(K.ACTIONS_BUTTON,!0);v(K.CLOSE_BUTTON,!0);v(K.TOP_MENU_BUTTON,!1);v(K.ATTACHMENT_ICON,!1);break;default:v(K.ACTIONS_BUTTON,!0);v(K.CLOSE_BUTTON,!0);v(K.TOP_MENU_BUTTON,!1);v(K.ATTACHMENT_ICON,!1)}}function v(a,b){R[a]||(R[a]={value:b})}function w(a,b){R[a]?R[a].classes=b:R[a]={classes:b}}function x(a){if(!E){v(K.ATTACHMENT_ICON,!1);v(K.TOP_MENU_BUTTON,!1);v(K.ACTIONS_BUTTON,!0);v(K.CLOSE_BUTTON,!0)}T||v(K.ATTACHMENT_ICON,!1);C.isDesktop()||v(K.EMOJI_ICON,!1);u(D);y(a);z(a)}function y(a){var b=Object.keys(M);b.forEach(function(b){v([M[b]],!!a[b])})}function z(a){var b=[];if(E||C.isDesktop())if(C.isDesktop()){a[M.attachmentIcon]&&T&&b.push(P.attachmentIcon);a[M.emojiEnabled]&&b.push(P.emojiEnabled);A()&&b.push(P.topMenu);w(K.BOTTOM_AREA,b)}else{a[M.attachmentIcon]&&T&&b.push(P.attachmentIcon);A()&&b.push(P.topMenu);w(K.BOTTOM_AREA,b)}else;}function A(){return D===N.TOP&&E}var B,C,D,E,F="FeatureStateManager",G=lpTag.unifiedWindow.log,H=lpTag.taglets.lpUtil,I=lpTag.unifiedWindow.applicationUtils,J=lpTag.unifiedWindow.settingsIDs,K={EMOJI_ICON:"emojiEnabled",ATTACHMENT_ICON:"attachmentIcon",BOTTOM_AREA:"bottomArea",ACTIONS_BUTTON:"actionsButton",CLOSE_BUTTON:"closeButton",TOP_MENU_BUTTON:"topMenuButton"},L={EMOJI_ENABLED:"emojiEnabled",SEND_ICON_TYPE:"sendIconType",ATTACHMENT_ICON:"attachmentIcon",TIMESTAMP_GROUPING:"timeStampGrouping",TIMESTAMP_LOCATION:"timeStampLocation",AGENT_AVATAR:"agentAvatar",BUBBLE_GROUPING:"bubbleGrouping",AGENT_AVATAR_PADDING:"agentAvatarPadding",ENGAGEMENT_WINDOW_BORDER:"engagementWindowBorder",ENGAGEMENT_WINDOW_BOX_SHADOW:"engagementWindowBoxShadow"},M={emojiEnabled:"emojiEnabled",sendIconType:"sendIconType",attachmentIcon:"attachmentIcon"},N={TOP:"top",BOTTOM:"bottom",DEFAULT:"bottom"},O={TOP:"top",BOTTOM:"bottom",DEFAULT:"top"},P={emojiEnabled:"lp_emoji_supported",attachmentIcon:"lp_attachment_icon",topMenu:"lp_menu_top"},Q={VISITOR_BUBBLE:"transcript_bubble_visitor_parent.options.transcript_bubble_visitor_parent",AGENT_BUBBLE:"transcript_bubble_agent_parent.options.transcript_bubble_agent_parent"},R={},S=[],T=!1;t(a,b);this.getStyleConfig=c;this.renderMap=K;this.isMessaging=d;this.emojiEnabled=e;this.isFileSharingEnabled=f;this.getSendIconType=s;this.isMenuTop=A;this.isLineGroupingEnabled=m;this.locationMap=N;this.checkSetting=q;this.getSettingsValue=r;this.timeStampGroupingEnabled=g;this.avatarEnabled=i;this.getBubbleStyles=j;this.getCustomStyle=k;this.isTimeStampAbove=l;this.timeStampLocationEnabled=h;this.agentAvatarPaddingEnabled=p;this.isEngagementWindowBorderEnabled=n;this.getEngagementWindowBoxShadowConfig=o};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.TimeStampManager=function(a){function b(a,b){return y?r(h(a),b):K+x.translate("at")+" "+F.getTime(a,C,x.translate("dayMonthGap"),x.translate("daySuffix"))+":"}function c(a,b){return r(a,null,b).replace(K+"-"+K,"")}function d(a,b){b=b?b:{};a=h(a)?h(a):(new Date).getTime();if(s(a))return x.translate(H.TODAY);if(t(a))return x.translate(H.YESTERDAY);u(a)?b.weekDay=!0:v(a)||(b.year=!0);return F.getDay(a,C,D,x.translate("dayMonthGap"),x.translate("daySuffix"),b)}function e(a,b){return d(a,b).replace(/(\s|,)/g,"_")}function f(){return y}function g(a,b){if(!a)return!1;b=b?new Date(b):new Date;var c=new Date(a);return b>a&&b.getFullYear()===c.getFullYear()&&b.getMonth()===c.getMonth()&&b.getDate()===c.getDate()}function h(a){return a&&"number"==typeof a?a:a?new Date(a).getTime():null}function i(a){w=a.chatModel;z=a.appContext.featureStateManager;y=z.timeStampGroupingEnabled();A=a.appContext.events;x=a.appContext.translator;B=a.appContext.conf.engConf.lang;C=p();D=q();j()}function j(){y&&w.bind(I.LINES,l)}function k(){y&&w.unbind(I.LINES,l)}function l(a){for(var b=a.newValue,c=b.filter(function(a){var b=(new Date).getTime();return a.time&&b-h(a.time)<G.MINUTE}),d=0;d<c.length;d++)o(c[d])&&m(c[d])}function m(a){setTimeout(function(){A.trigger({appName:"*",eventName:J.UPDATE_TIME_STAMP,data:{line:a,timeStamp:b(a.time,!0)}})},n(a.time))}function n(a){var b=(new Date).getTime(),c=Math.ceil(b/G.MINUTE)*G.MINUTE;return Math.abs(c-h(a))}function o(a){var b=(new Date).getTime();return!a.update&&b-h(a.time)<G.MINUTE}function p(){return[x.translate("monthJanuary"),x.translate("monthFebruary"),x.translate("monthMarch"),x.translate("monthApril"),x.translate("monthMay"),x.translate("monthJune"),x.translate("monthJuly"),x.translate("monthAugust"),x.translate("monthSeptember"),x.translate("monthOctober"),x.translate("monthNovember"),x.translate("monthDecember")]}function q(){return[x.translate("weekDaySunday"),x.translate("weekDayMonday"),x.translate("weekDayTuesday"),x.translate("weekDayWednesday"),x.translate("weekDayThursday"),x.translate("weekDayFriday"),x.translate("weekDaySaturday")]}function r(a,b,c){var d={lang:B};c&&(d.lang=null);var e="",f=(new Date).getTime();e=f-a<G.MINUTE&&!b?x.translate(H.NOW):E.getTime(a,C,x.translate("dayMonthGap"),x.translate("daySuffix"),d);return K+"-"+K+e}function s(a){var b=(new Date).getTime(),c=Math.ceil(b/G.DAY),d=Math.ceil(a/G.DAY);return c-d===0}function t(a){var b=(new Date).getTime(),c=Math.ceil(b/G.DAY),d=Math.ceil(a/G.DAY);return c-d===1}function u(a){var b=(new Date).getTime(),c=Math.ceil(b/G.WEEK),d=Math.ceil(a/G.WEEK);return c-d===0}function v(a){var b=(new Date).getFullYear(),c=new Date(a).getFullYear();return b===c}var w,x,y,z,A,B,C,D,E=(lpTag.unifiedWindow.log,lpTag.lpUtils),F=lpTag.unifiedWindow.applicationUtils,G={MINUTE:6e4,DAY:864e5,WEEK:6048e5},H={NOW:"ts_Now",TODAY:"ts_Today",YESTERDAY:"ts_Yesterday"},I=lpTag.unifiedWindow.chatModelPath,J=lpTag.unifiedWindow.events.viewController,K="&nbsp;";i(a);this.getTimeString=b;this.getDayString=d;this.getDayId=e;this.dispose=k;this.timeStampGroupingEnabled=f;this.isSameDay=g;this.getEpochTime=h;this.getSideTimeString=c};lpTag.unifiedWindow.webViewPlugin=lpTag.unifiedWindow.webViewPlugin||function(a){function b(){if(i&&"function"==typeof i.unbind)for(var b=0;b<p.length;b++)i.unbind(p[b]);a=null;i=null;j=null;p.length=0}function c(){if(i&&"function"==typeof i.bind){d(k.INITIALIZED,"onInit");d(k.STATE,"onConversationStateChanged");d(k.LINE,"onConversationLine");d(k.CHAT_INFO,"onConversationInfo");d(m.DO_HARAKIRI,"onApplicationEnded");d(l.MINIMIZED,"onBackClicked");d(k.SESSION_DATA,"onSessionData")}else j.error("No events object found",g)}function d(b,c){var d,f;a.IOS&&o?d=function(a,b){a=e(b.appName,b.eventName,a);o[c].postMessage(a)}:n&&"function"==typeof n[c]&&(d=function(a,b){a=e(b.appName,b.eventName,a);n[c].call(n,"string"!=typeof a?JSON.stringify(a):a)});if(d){f=i.bind({eventName:b,func:d,context:n,async:!0});p.push(f)}else j.error("No callback defined, missing android object",b)}function e(a,b,c){var d=c,e=c&&r&&r[a]&&r[a][b];if(e){e=Array.isArray(e)?e[0]:e;d=f({data:c},e.data)}return d}function f(a,b){var c={};if("object"==typeof b)for(var d in b)c[d]=q.getPropertyFromObject(a,b[d]);else c=q.getPropertyFromObject(a,b);return c}var g="webViewPlugin",h=lpTag.unifiedWindow.events,i=a&&a.events,j=a&&a.log,k=h.chat,l=h.uiState,m=h.application,n=window.android,o=window.webkit&&window.webkit.messageHandlers,p=[],q=lpTag.taglets.lpUtil,r=q.getPropertyFromObject(lpTag,"unifiedWindow.publicEvents");c();return{dispose:b}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.helpers=lpTag.unifiedWindow.helpers||{};lpTag.unifiedWindow.helpers.LocalizationHelper=lpTag.unifiedWindow.helpers.LocalizationHelper||function(a){function b(a){return i[a]===!0}function c(a,b,c){var d=e(c),i=f(c),k=g(d,b);if(k){h.addClass(a,j[d]);h.removeClass(a,j[i])}else{h.addClass(a,j[i]);h.removeClass(a,j[d])}}function d(a){h=a.util}function e(a){return b(a)?"RTL":"LTR"}function f(a){return b(a)?"LTR":"RTL"}function g(a,b){var c,d="A-Za-z--------",e="---";c="rtl"===a.toLowerCase()?new RegExp("^[^"+e+"]*["+d+"]"):new RegExp("^[^"+d+"]*["+e+"]");return!c.test(b)}var h,i={"he-IL":!0,"ar-AE":!0},j={LTR:"lp_ltr",RTL:"lp_rtl"};d(a);return{applyDirOnElement:c,isLanguageRTL:b}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.helpers=lpTag.unifiedWindow.helpers||{};lpTag.unifiedWindow.helpers.ImageParsingHelper=lpTag.unifiedWindow.helpers.ImageParsingHelper||function(a){function b(a,b){if(a&&a instanceof Blob){var f=c.bind(this,a,d.bind(this,b));try{e(a,f)}catch(g){b(a)}}else b(a)}function c(a,b,c){if(2>c)b(a);else{var d=new FileReader;d.onloadend=function(){var e=new Image;e.onload=function(){var d=e.width,f=e.height,g=document.createElement("canvas"),h=g.getContext("2d");if(c>4&&9>c){g.width=f;g.height=d}else{g.width=d;g.height=f}switch(c){case 2:h.transform(-1,0,0,1,d,0);break;case 3:h.transform(-1,0,0,-1,d,f);break;case 4:h.transform(1,0,0,-1,0,f);break;case 5:h.transform(0,1,1,0,0,0);break;case 6:h.transform(0,1,-1,0,f,0);break;case 7:h.transform(0,-1,-1,0,f,d);break;case 8:h.transform(0,-1,1,0,0,d)}h.drawImage(e,0,0);g.toBlob?g.toBlob(b,a.type):b(a)};e.onerror=function(c){b(a)};d&&d.result&&"data:"!==d.result?e.src=d.result:b(a);
};try{d.readAsDataURL(a)}catch(e){b(a)}}}function d(a,b){var c=new FileReader;c.onloadend=function(){var d=new Image;d.onload=function(){var c,e,f=document.createElement("canvas"),g=f.getContext("2d");f.width=d.width;f.height=d.height;e=k&&k.conf&&k.conf.unifiedConf&&k.conf.unifiedConf.resizeImage||k.featureStateManager.getSettingsValue(l.FILE_SHARING_IMAGE_RESIZE_SIZE)||m.DEFAULT_RESIZE_IMAGE;c=Math.min(e/f.width,e/f.height,1);f.width=f.width*c;f.height=f.height*c;g.drawImage(d,0,0,f.width,f.height);f.toBlob?f.toBlob(a,b.type):a(b)};d.onerror=function(c){a(b)};c&&c.result&&"data:"!==c.result?d.src=c.result:a(b)};try{c.readAsDataURL(b)}catch(d){a(b)}}function e(a,b){f(a,function(a){var c=-1;a&&(c=a[m.TIFF_TAGS.ORIENTATION]);b(c)})}function f(a,b){if(!(a instanceof Blob))return b();var c=new FileReader;c.onload=function(a){var c=new DataView(a.target.result);if(c.buffer.byteLength<16)return b();if(c.getUint16(0,!1)!==m.SOI_MARKER)return b();for(var d=c.byteLength,e=2;d>e;){if(c.getUint16(e+2,!1)<=8)return b();var f=c.getUint16(e,!1);e+=2;if(f===m.APP1_MARKER){if(c.getUint32(e+=2,!1)!==m.EXIF_HEADER_MARKER)return b();var h=c.getUint16(e+=6,!1)===m.TIFF_HEADER_MARKER;e+=c.getUint32(e+4,h);var i=g(c,e,h);return b(i)}if(65280!=(65280&f))break;e+=c.getUint16(e,!1)}b()};try{c.readAsArrayBuffer(a)}catch(d){b()}}function g(a,b,c){var d=a.getUint16(b,c);b+=2;for(var e={},f=0;d>f;f++){var g=b+12*f,h=a.getUint16(g,c),i=a.getUint16(g+8,c);e[h]=i}return e}function h(a,b,c){var d=new FileReader,e=i.bind(this,b);d.onload=e;if(c)switch(c){case"JPG":case"JPEG":case"PNG":case"GIF":d.readAsDataURL(a);break;case"PDF":case"DOCX":case"XLSX":case"PPTX":e(k.conf.unifiedConf.imagesRepository+"/"+c.toLowerCase()+".png");break;default:e(k.conf.unifiedConf.imagesRepository+"/generic.png")}else d.readAsDataURL(a)}function i(a,b){var c=new Image;c.setAttribute("crossOrigin","Anonymous");c.onload=function(){var b,d=document.createElement("canvas"),e=d.getContext("2d"),f=Math.min(m.MAX_THUMB_HEIGHT/c.height,m.MAX_THUMB_WIDTH/c.width);d.height=c.height*f;d.width=c.width*f;e.fillStyle="white";e.fillRect(0,0,d.width,d.height);e.drawImage(c,0,0,d.width,d.height);b=d.toDataURL(m.THUMB_FORMAT);a&&"function"==typeof a&&a(b)};c.onerror=function(){a&&"function"==typeof a&&a()};j.call(this)?a(lpTag.unifiedWindow.consts.fileSharing.fallbackThumbnail.URI):c.src=b&&b.target&&b.target.result||b}function j(){return k.deviceDetector.isIOS13()||k.deviceDetector.isMacOS()&&k.deviceDetector.isSafari()&&13===k.deviceDetector.browserVersion()}var k=a&&a.appContext,l=lpTag.unifiedWindow.settingsIDs,m={TIFF_TAGS:{ORIENTATION:274},SOI_MARKER:65496,APP1_MARKER:65505,EXIF_HEADER_MARKER:1165519206,TIFF_HEADER_MARKER:18761,MAX_THUMB_WIDTH:130,MAX_THUMB_HEIGHT:130,DEFAULT_RESIZE_IMAGE:800,THUMB_FORMAT:"image/jpeg"};return{fixOrientation:b,createThumbnail:h,getImageOrientation:e}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.helpers=lpTag.unifiedWindow.helpers||{};lpTag.unifiedWindow.helpers.SecureFormStyleHelper=lpTag.unifiedWindow.helpers.SecureFormStyleHelper||function(a){function b(a){g=a}function c(){var a=d(),b=e(a),c=JSON.stringify(b);return encodeURIComponent(c)}function d(){var a={};for(var b in h)h.hasOwnProperty(b)&&(a[b]=g.themer.getStyle(b));return a}function e(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[h[c]]=f(a[c],i));return b}function f(a,b){var c={};if(a)for(var d in a)a.hasOwnProperty(d)&&(c[b[d]]=a[d]);return c}var g,h={surveyArea:1,button:2},i={"background-color":"bc",color:"c","font-family":"f"};b(a);return{getCompressedCSS:c}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.helpers=lpTag.unifiedWindow.helpers||{};lpTag.unifiedWindow.helpers.SMSFormHelper=lpTag.unifiedWindow.helpers.SMSFormHelper||function(){function a(a){return h.indexOf(a)>=0?a:"Text Field"}function b(a,b){switch(a){case i.EMAIL:case i.PHONE_NUMBER:case i.IDENTIFIER:case i.FIRST_NAME:case i.LAST_NAME:case i.MESSAGE:return a}switch(b){case"Numeric Field":return i.NUMBER}return i.ALPHA_NUMBERIC}function c(c,d){var e={id:d+1,type:a(c.UDEType),validationType:b(c.type,c.UDEType),logicId:c.logicID,order:d,mandatory:c.required,label:g(c.question).cleanText,lastKnownValue:""};if(c.answersList&&c.answersList.answer&&c.answersList.answer.length){e.entry=[];c.answersList.answer.forEach(function(a){e.entry.push({checked:!1,value:a,displayValue:g(a).cleanText})})}return e}function d(a){if(a&&a.json){var b={header:a.json.heading,footer:a.json.footer,survey:{id:a.id,header:a.json.heading,questions:{question:[]}}},d=b.survey.questions.question,e=a.json.questions&&a.json.questions.surveyQuestion||[];e.forEach(function(a,b){a.displayed&&d.push(c(a,b))});f[a.id]=b;return b}}function e(a,b,c){if(a&&b&&c){var d,e=a.survey.questions.question;e.forEach(function(a){a.validationType===c&&(d=a.id)});if("undefined"!=typeof d){var f=b.filter(function(a){return a.id===d});return f&&f.length?f[0]:void 0}}}var f={},g=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml||function(a){return{cleanText:a}},h=["Text Field","Text Area","Dropdown Box","Radio Button","Radio Button (side by side)","Checkbox"],i={EMAIL:"email",PHONE_NUMBER:"phoneNumber",IDENTIFIER:"identifier",FIRST_NAME:"firstname",LAST_NAME:"lastname",MESSAGE:"message",NUMBER:"numeric",ALPHA_NUMBERIC:"alpha_numeric"};return{TYPES:i,transform:d,getAnswerOfType:e}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.helpers=lpTag.unifiedWindow.helpers||{};lpTag.unifiedWindow.helpers.HyperLinksHelper=lpTag.unifiedWindow.helpers.HyperLinksHelper||function(){function a(a){var b=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9"];return b.slice(0,a).map(function(a){return b[Math.random()*b.length|0]}).join("")}function b(b){if(b){for(var c,d=o.markdownToHtml.regexp,e=b;null!==(c=d.exec(b));){var f=a(5);p.push({key:f,markdown:c[0]});e=e.replace(c[0]," "+f+" ")}b=e}return b}function c(a){a&&p.length>0&&p.forEach(function(b){a=a.replace(" "+b.key+" ",b.markdown)});return a}function d(b){if(b){for(var c,d=o.anchorTagRegex.regexp,e=b;null!==(c=d.exec(b));){var f=a(5);q.push({key:f,aHREF:c[0]});e=e.replace(c[0]," "+f+" ")}b=e}return b}function e(a){a&&q.length>0&&q.forEach(function(b){var c=j(b.aHREF);a=a.replace(" "+b.key+" ",c)});return a}function f(a){if(a)for(var b,c=o.markdownToHtml.regexp;null!==(b=c.exec(a));){var d=b[0],e=b[1]||"";e=i(e);var f=b[2]||"";a=a.replace(d,"<a href='"+e+"'>"+f+"</a>")}return a}function g(a){return a.match(o.markdownToHtml.regexp)}function h(a){return a.match(o.anchorTagRegex.regexp)}function i(a){(a.indexOf("javascript"+String.fromCharCode(58))>-1||-1===a.indexOf("://"))&&(a="");return a}function j(a){var b=o.href.regexp,c=b.exec(a);if(c&&c[1]&&c[1].length>0){var d=i(c[1]);return a.replace(c[1],d)}return a}function k(){return p}function l(a){p=a}function m(){return q}function n(a){q=a}var o={markdownToHtml:{regexp:new RegExp("#md#\\[(.*?)]\\((.*?)\\)#/md#","gim")},anchorTagRegex:{regexp:new RegExp("<a[\\s]+([^>]+)>((?:.(?!</a>))*.)</a>","gim")},href:{regexp:new RegExp('href="(.*?)"',"gim")}},p=[],q=[];return{getMarkDownToTemp:k,setMarkDownToTemp:l,getAHREFToTemp:m,setAHREFToTemp:n,generateTempId:a,convertMarkdownToTempId:b,convertTempIdToMarkdown:c,convertAHREFToTempId:d,convertTempIdToAHREF:e,parseAllMarkdownFormat:f,textContainsMarkDownSyntax:g,textContainsAHREFSyntax:h}};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a,b){for(var d,e=a.getElementsByClass(document.body,a.appConsts.engagementContainerClass,[]),f=0;f<e.length;f++){d=c(e[f],b);if(d)return!0}return!1}function b(a){return document.body.className===a.appConsts.reCaptchaContainerClass}function c(a,b){return b===a||a.contains(b)}var d;lpTag.unifiedWindow.BaseViewController=window.liveperson.uiframework.latest.ViewController.extend({ControllerName:"BaseViewController",logger:lpTag.unifiedWindow.log,util:lpTag.taglets.lpUtil,uiPath:lpTag.unifiedWindow.uiModelPath,chatPath:lpTag.unifiedWindow.chatModelPath,EventName:lpTag.unifiedWindow.events,appConsts:lpTag.unifiedWindow.consts,VCEvents:lpTag.unifiedWindow.events.viewController,State:lpTag.unifiedWindow.State,prefixPlaceHolder:"{{PREFIX}}",customAnimationDurations:{},animationClasses:{bounce:"lpBounceClass",shakeX:"lpShakeXClass",shakeY:"lpShakeYClass"},LPReadNotificationsTypes:{none:{value:"none"},visual:{value:"visual",templates:{PENDING:"<svg class='lp-state-visual lp-pending-notification' viewBox='0 0 20 6' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><g stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' stroke-linecap='round'><g transform='translate(-100.000000, -828.000000)'><g transform='translate(101.000000, 829.000000)'><g id='icon_settings_hover'><g id='Group-5'><circle id='Path' stroke='#C8C8C8' cx='9' cy='2' r='2'></circle><circle id='Path' stroke='#C0C0C1' cx='2' cy='2' r='2'></circle><circle id='Path' stroke='#C0C0C1' cx='16' cy='2' r='2'></circle></g></g></g></g></g></svg>",SENT:"<svg class='lp-state-visual lp-sent-notification' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 15 15'><g fill='none'><g stroke='#C0C0C1'><g transform='translate(-421 -823)translate(421 824)'><polygon points='0 6.6 13.9 0 14 12.3 8.3 10.2 4.6 14 4.6 8.3' stroke-linejoin='round'/><path d='M13.3 1.2L7 8'/></g></g></g></svg>",ACCEPT:"<svg class='lp-state-visual lp-accept-notification' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 9 5'><g style='fill:none;stroke-linejoin:round'><g stroke='#C0C0C1'><polyline points='0 2.5 2.1 5 7 0'/></g></g></svg>",READ:"<svg class='lp-state-visual lp-read-notification' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 5'><g style='fill:none;stroke-linejoin:round'><g stroke='#C0C0C1'><g transform='translate(-426 -829)translate(427 829)'><polyline points='0 2.5 2.1 5 7 0'/><path d='M5 5L10 0'/></g></g></g></svg>",ERROR:"<svg class='lp-state-visual lp-failed-notification' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 14 14'><g fill='none'><g stroke='#FF0B29'><path d='M8.3 1.8C8.2 1.5 8 1.2 7.7 1.1 6.9 0.7 6 1 5.7 1.8L0.8 11.3C0.7 11.5 0.6 11.8 0.6 12 0.6 12.8 1.3 13.5 2.1 13.5L11.9 13.5C12.1 13.5 12.3 13.4 12.5 13.3 13.3 13 13.6 12.1 13.2 11.3L8.3 1.8Z'/><path d='M7 5.4L7 8.4'/><path d='M7 10.6L7 11.1'/></g></g></svg>",image_ERROR:"<svg class='lp-state-visual lp-failed-notification' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 14 14'><g fill='none'><g stroke='#FF0B29'><path d='M8.3 1.8C8.2 1.5 8 1.2 7.7 1.1 6.9 0.7 6 1 5.7 1.8L0.8 11.3C0.7 11.5 0.6 11.8 0.6 12 0.6 12.8 1.3 13.5 2.1 13.5L11.9 13.5C12.1 13.5 12.3 13.4 12.5 13.3 13.3 13 13.6 12.1 13.2 11.3L8.3 1.8Z'/><path d='M7 5.4L7 8.4'/><path d='M7 10.6L7 11.1'/></g></g></svg>",image_RETRY:"<svg class='lp-state-visual lp-failed-notification' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 14 14'><g fill='none'><g stroke='#FF0B29'><path d='M8.3 1.8C8.2 1.5 8 1.2 7.7 1.1 6.9 0.7 6 1 5.7 1.8L0.8 11.3C0.7 11.5 0.6 11.8 0.6 12 0.6 12.8 1.3 13.5 2.1 13.5L11.9 13.5C12.1 13.5 12.3 13.4 12.5 13.3 13.3 13 13.6 12.1 13.2 11.3L8.3 1.8Z'/><path d='M7 5.4L7 8.4'/><path d='M7 10.6L7 11.1'/></g></g></svg>"}},text:{value:"text"}},initialize:function(a){this.uiPath=lpTag.unifiedWindow.uiModelPath;this.chatPath=lpTag.unifiedWindow.chatModelPath;this.appContext=a.appContext;this.timeStampManager=a.appContext.timeStampManager;this.timeStampGroupingEnabled=this.timeStampManager.timeStampGroupingEnabled();if(!d.animationCreated&&this.appContext.deviceDetector.isAnimationSupported()){d.animationPrefix=this.appContext.deviceDetector.getAnimationData().preFix;d.animationsSupported=!0;d.cssAnimation=document.createElement("style");d.cssAnimation.type="text/css";document.getElementsByTagName("head")[0].appendChild(d.cssAnimation);this.createDefaultAnimations()}}});d=lpTag.unifiedWindow.BaseViewController.prototype;d.templateString=function(a,b){var c=window.liveperson.uiframework.latest.ViewController.prototype.templateString.call(this,a,b);return this.customize(c)};d.createDefaultAnimations=function(){if(!d.animationCreated){this.createKeyframe(this.animationClasses.bounce,[{percent:0,animate:this.prefixPlaceHolder+"transform: scale(1, 1);"},{percent:40,animate:this.prefixPlaceHolder+"transform: scale(1.15, 1.1);"},{percent:100,animate:this.prefixPlaceHolder+"transform: scale(1, 1);"}],500);this.createKeyframe(this.animationClasses.shakeX,[{percent:0,animate:this.prefixPlaceHolder+"transform: translateX(0px);"},{percent:20,animate:this.prefixPlaceHolder+"transform: translateX(-15px);"},{percent:40,animate:this.prefixPlaceHolder+"transform: translateX(15px); "},{percent:60,animate:this.prefixPlaceHolder+"transform: translateX(-10px);"},{percent:80,animate:this.prefixPlaceHolder+"transform: translateX(10px);"},{percent:100,animate:this.prefixPlaceHolder+"transform: translateX(0px);"}],400);this.createKeyframe(this.animationClasses.shakeY,[{percent:0,animate:this.prefixPlaceHolder+"transform: translateY(0px);"},{percent:20,animate:this.prefixPlaceHolder+"transform: translateY(-15px);"},{percent:40,animate:this.prefixPlaceHolder+"transform: translateY(15px); "},{percent:60,animate:this.prefixPlaceHolder+"transform: translateY(-10px);"},{percent:80,animate:this.prefixPlaceHolder+"transform: translateY(10px);"},{percent:100,animate:this.prefixPlaceHolder+"transform: translateY(0px);"}],400);d.animationCreated=!0}};d.createKeyframe=function(a,b,c){if(d.cssAnimation){for(var e="."+a+" {"+d.animationPrefix+"animation: lpanim_"+a+" "+c/1e3+"s 0s 1 ease-in-out;}@"+d.animationPrefix+"keyframes lpanim_"+a+" {",f=0;f<b.length;f++)e+=""+b[f].percent+"% {"+b[f].animate+"}";e+="}";var g=new RegExp(this.prefixPlaceHolder,"g");e=e.replace(g,this.animationPrefix);d.customAnimationDurations[a]=c;this.cssAnimation.appendChild(document.createTextNode(e))}};d.bounce=function(a,b){this.animateKeyframe({view:a,classname:this.animationClasses.bounce,callback:b,showAnimation:!0})};d.shakeX=function(a,b){this.animateKeyframe({view:a,classname:this.animationClasses.shakeX,callback:b,showAnimation:!0})};d.shakeY=function(a,b){this.animateKeyframe({view:a,classname:this.animationClasses.shakeY,callback:b,showAnimation:!0})};d.animateKeyframe=function(a){var b=a.classname,c=a.callback,e=a.showBefore,f=a.hideAfter,g=a.view,h=a.showAnimation,i=d.customAnimationDurations[b];"number"!=typeof i&&(i=0);"string"==typeof g&&(g=this.getFirstElement(g));if(h&&this.animationsSupported&&g&&!this.animationInProgress&&this.animationCreated){this.animationInProgress=!0;var j=this;this.addClass(g,b);e&&this.show(g);setTimeout(function(){j.animationInProgress=!1;j.removeClass(g,b);f&&j.hide(g);c&&"function"==typeof c&&c.call(j)},i)}else{f?this.hide(g):e&&this.show(g);c&&"function"==typeof c&&c.call(this)}};d.focusOnElement=function(a,b){var c=b||this.view,d=this.getFirstElement(a,c);d&&1===d.nodeType&&d.focus()};d.isFocusInsideApp=function(){var c=document.activeElement,d=this.appContext.wrapperWindow.getChatWrapperElement();return!c||c&&d&&d.contains(c)||c===document.body||a(this,c)||b(this,c)?!0:!1};d.getLineStateText=function(a,b){var c;switch(a){case this.LPReadNotificationsTypes.none.value:c=void 0;break;case this.LPReadNotificationsTypes.visual.value:c=this.createView({template:this.LPReadNotificationsTypes[a].templates[b.state],wrapWithDiv:!1,target:"#lp_line_"+b.localId+" .lp_line_state",doNotAddChild:!0});c=c&&c.outerHTML?c.outerHTML:c instanceof SVGElement?(new XMLSerializer).serializeToString(c):this.translate("messagingState_"+b.state);break;default:c=this.translate("messagingState_"+b.state)}return c};d.getMonthNames=function(){return[this.translate("monthJanuary"),this.translate("monthFebruary"),this.translate("monthMarch"),this.translate("monthApril"),this.translate("monthMay"),this.translate("monthJune"),this.translate("monthJuly"),this.translate("monthAugust"),this.translate("monthSeptember"),this.translate("monthOctober"),this.translate("monthNovember"),this.translate("monthDecember")]}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){if(a)for(var c,d=b(a),e=0;e<d.length;e++){c=this.translate(d[e])||"";a=a.replace("{{"+d[e]+"}}",c)}return a}function b(a){var b=[],c="string"==typeof a&&a.match(e);if(c)for(var d=0;d<c.length;d++)"string"==typeof c[d]&&b.push(c[d].substring(2,c[d].length-2));return b}var c,d="en-US",e=/({{\w+)(?![{])}}/gi;lpTag.unifiedWindow.Translator=function(a){function b(){this.dictionary=lpTag.unifiedWindow.language;this.dictionary.setLocale(a)}b.call(this,a)};c=lpTag.unifiedWindow.Translator.prototype;c.extendDictionary=function(a,b){b=b||{};b.locale=b.locale||d;this.dictionary.add(a,b)};c.translate=function(b,c){var d=this.dictionary.getString(b);c||(d=a.call(this,d));return d}}();window.lpTag=window.lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.applicationUtils=lpTag.unifiedWindow.applicationUtils||function(){function a(a,b){if("function"==typeof[].indexOf&&"function"==typeof a.indexOf)return a.indexOf(b);if(a.constructor===Array)for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function b(a){return"string"!=typeof a?a:a.trim?a.trim():a.replace(/^\s+|\s+$/gm,"")}function c(a){if("string"!=typeof a)return a;var c=b(a);return c.toLowerCase()}function d(a,b){function c(a,b,c,d){for(var e,f,g=-1,h=c,i=a.length,j=b.length,k=h.indexOf(a);k>-1;){k+=i;g=h.substring(k).indexOf(b);if(g>-1){e=h.substring(k,k+g);f=d&&d[e];d&&"undefined"!=typeof d[e]&&(f=d[e]);void 0!==f&&(c=c.replace(a+e+b,f));h=h.substring(k+g+j)}else h=h.substring(k+j);g=-1;k=h.indexOf(a)}return c}a=c("{{","}}",a,b);return a}function e(a,b){var c=new RegExp(/((?:http|ftp|ws){1}s{0,1}?:\/\/){0,1}([^\/\?\/:]+)(\/?)/gi),d=c.exec(a),e=null;if(d&&d.length>=3&&""!==d[2]){e=d[2].toLowerCase();b&&(e=d[1]+e)}return e}function f(a){var b,c,d={};if("string"==typeof a){b=a.substr(1).split("&");for(var e=0;e<b.length;e++)if(b[e].indexOf("=")>-0){c=b[e].split("=");2==c.length&&(d[decodeURIComponent(c[0])]=decodeURIComponent(c[1]))}}return d}function g(a){a=""+a;var b,c,d=null,f={top:null,country:null};a=e(a);b=a.split(".");if(b.length<3)return a;for(var g=b.length-1,j=g;j>-1;j--){i(b[j],f,j);if(null!==f.country&&null!==f.top)break}if(null!==f.top||null!==f.country){d=f.top;(null===d||null!==f.country&&f.country<d&&d-1===f.country)&&(d=f.country);c=d>0?d-1:d;return h(b.slice(c))}return a}function h(a){return a.join(".")}function i(a,b,c){a=""+a;null===b.top&&(W.topLevelDomain[a]||W.customTopLevelDomain[a])?b.top=c:null===b.country&&W.countryTopLevelDomain[a]&&(b.country=c)}function j(a,b,c){var d;if(!a||"object"!=typeof a)return a;if(!b)return k(a);d=b||a.constructor()||{};for(var e in a)d[e]!==a[e]&&a.hasOwnProperty(e)&&(d[e]=c?j(a[e],void 0,c):a[e]);return d}function k(a){try{return JSON.parse(p(a))}catch(b){lpTag.log("unable to clone object:"+JSON.stringify(b),"ERROR",V);return}}function l(a,b){if("undefined"!=typeof b){if(a)for(var c=0;c<a.length;c++){var d=a[c].value;if("string"==typeof d&&""!==d)if("true"===d)d=!0;else if("false"===d)d=!1;else if("["==d.charAt(0)||"{"==d.charAt(0))try{d=JSON.parse(d)}catch(e){lpTag.log("unable to parse JSON:"+JSON.stringify(e),"ERROR",V)}b[a[c].id]=d}}else lpTag.log("_config is passed as undefined","ERROR",V)}function m(a,b){if(a&&"string"==typeof a){b=b||{};var c,d=b.document||window.document,e=b.id;if("undefined"!=typeof e){c=d.getElementById(e)||d.createElement("style");c.id=e}else c=d.createElement("style");c.type="text/css";d.getElementsByTagName("head")[0].appendChild(c);c.styleSheet?c.styleSheet.cssText=a:c.appendChild(document.createTextNode(a));return c}}function n(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=c);return b}function o(a,b){function c(){e.body?r(a,d):setTimeout(c,50)}b=b||{};var d=b.context,e=b.document||window.document;c()}function p(a){var b,c;if("function"==typeof Array.prototype.toJSON){c=Array.prototype.toJSON;delete Array.prototype.toJSON;try{b=JSON.stringify(a)}catch(d){Array.prototype.toJSON=c;throw d}Array.prototype.toJSON=c}else b=JSON.stringify(a);return b}function q(){var a="tttttttt-tttt-4ttt-fttt-t7ttttttttttt".replace(/[tf]/g,function(a){var b=16*Math.random()|0,c="t"==a?b:3&b|8;return c.toString(16)});return a+"-"+Math.floor(1e5*Math.random())}function r(a,b){b=b||window;if("function"==typeof a){var c=Array.prototype.slice.call(arguments,2);try{return a.apply(b,c)}catch(d){lpTag.log("Failed to execute callback exc= "+d.message,"ERROR",V)}}}function s(a,b,c){if("function"==typeof N){a=a||{};var d=N(window,a.jsContext),e=N(window,a.jsMethodName);if("function"!=typeof e){lpTag.log("runCallbackByObject err=function "+a.jsMethodName+" was not found","ERROR","utils");c()}else{lpTag.log("runCallbackByObject calling function "+a.jsMethodName,"DEBUG","utils");e.call(d,b)}}else lpTag.log("lpTag.taglets.lpUtil.getPropertyFromObject is not a function","ERROR","utils")}function t(a,b,c){a&&b&&c&&(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c))}function u(a,b,c){a&&b&&c&&(a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c))}function v(b,c,d){var e,f;b="string"==typeof b?b:"";e=b.split(" ");f=c&&c.constructor===Array?c:"string"==typeof c?[c]:[];d=d&&d.constructor===Array?d:"string"==typeof d?[d]:[];for(var g=0;g<e.length;g++)a(d,e[g])<0&&a(f,e[g])<0&&f.push(e[g]);return f.join(" ").replace(/$\s/gi,"")}function w(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function x(a){return b(a.replace(/\s\s*/g," "))}function y(a){return"object"==typeof a&&1===a.nodeType}function z(a){return"undefined"!=typeof a.length&&"undefined"!=typeof a.item}function A(a,b){return a.className.indexOf(b)>-1}function B(a,b){var c={};a.forEach(function(a){var d=a[b];c[d]=c[d]||[];c[d].push(a)});return c}function C(a,b){for(var c=a.concat(),d=0;d<c.length;++d)for(var e=d+1;e<c.length;++e)"undefined"!=typeof c[d][b]&&c[d][b]===c[e][b]&&c.splice(e--,1);return c}function D(a){return"undefined"!=typeof a&&a.constructor===Array}function E(a,b){var c=a;Array.isArray(a)&&(c=a.sort(function(a,c){return!a[b]||a[b]<c[b]?-1:!c[b]||a[b]>c[b]?1:0}));return c}function F(a){return JSON.parse(JSON.stringify(a))}function G(a){for(var b in a)return!1;return!0}function H(a,b){var c=null===a&&null===b,d=a===b,e=typeof a==typeof b,f=e&&"undefined"==typeof a,g=e&&"function"==typeof a&&""+a==""+b,h=e&&"object"==typeof a&&null!==a&&null!==b,i=h&&Object.keys(a).length===Object.keys(b).length;return c||f||d||g||i&&I(a,b)}function I(a,b){var c=!0;for(var d in a){a.hasOwnProperty(d)&&b.hasOwnProperty(d)&&(c="object"==typeof a[d]&&null!==a[d]&&a[d].constructor===Array?p(a[d])===p(b[d]):H(a[d],b[d]));if(!c)break}return c}function J(a,b){if(D(b))for(var c=0;c<b.length;c++)J(a,b[c]);else{if(A(a,b))return;var d=a.className?[a.className]:[];d.push(b);a.className=d.join(" ")}}function K(a){a=a||{};var b=[];for(var c in a)b.push(c);return b}function L(a,b){if(D(b))for(var c=0;c<b.length;c++)L(a,b[c]);else{a.className=a.className.replace(new RegExp(b,"g"),"");a.className=x(a.className)}}function M(){var a=document.documentElement,b=document.getElementsByTagName("body")[0],c=a.clientWidth||b.clientWidth||window.innerWidth,d=window.outerHeight||a.clientHeight||b.clientHeight;return{width:c,height:d}}function N(a,b,c){var d,e=a;if("string"==typeof b){d=b.split(".");for(var f=0;f<d.length;f++){if("undefined"==typeof e||null===e||"undefined"==typeof e[d[f]]||null===e[d[f]]){e="undefined"!=typeof c?c:void 0;break}e=e[d[f]]}}else lpTag.log("Empty path sent to lookup getPropertyFromObject","DEBUG","utils");return e}function O(a,b){function c(a){Array.isArray(b)&&b.forEach(function(b){"string"==typeof b&&b.length>0&&delete a[b]})}a&&(Array.isArray(a)?a.forEach(function(a){a&&c(a)}):"object"==typeof a&&c(a));return a}function P(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return a?a.replace(/[&<>"'`=\/]/g,function(a){return b[a]}):void 0}function Q(a){var b=new Date(a);if(isNaN(b)){b=new Date;var c=a.match(/(\d+)-(\d+)-(\d+)T(\d+):(\d+):(\d+)([.])(\d+)([+-])(\d+):(\d+)/);if(c&&12==c.length){b.setUTCFullYear(parseInt(c[1],10));b.setUTCMonth(parseInt(c[2],10)-1);b.setUTCDate(parseInt(c[3],10));b.setUTCHours(parseInt(c[4],10)-parseInt(c[9]+"1",10)*parseInt(c[10],10));b.setUTCMinutes(parseInt(c[5],10)-parseInt(c[9]+"1",10)*parseInt(c[11],10));b.setUTCSeconds(parseInt(c[6],10))}c=null}return b}function R(a,b,c,d,e,f){var g=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],h=["Sun","Mon","Tues","Wed","Thurs","Fri","Sat"];if(b)for(var i=0,j=g.length;j>i;i++)b[i]=b[i]||g[i];else b=g;if(c)for(var k=0,l=h.length;l>k;k++)c[k]=c[k]||h[k];else c=h;if(!a)return"";"Date"!==a.constructor&&(a=this.createDateFromString(a));var m=a.getMonth(),n=a.getDate(),o=a.getDay(),p=a.getFullYear();if(f&&null!==f&&"object"==typeof f){var q="";f.weekDay&&(q+=c[o]+", ");q+=b[m]+("string"==typeof d?d:" ")+n+("string"==typeof e?e:"");f.year&&(q+=" "+p);return q}return b[m]+("string"==typeof d?d:" ")+n+("string"==typeof e?e:"")}function S(a,b,c,d,e,f){a&&(a=this.formatDay(a,b,c,d,e,f));return a?a:this.formatDay(new Date,b,c,d,e)}function T(a,b,c,d,e,f){var g=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];if(c)for(var h=0,i=g.length;i>h;h++)c[h]=c[h]||g[h];else c=g;if(!a)return"";"Date"!==a.constructor&&(a=this.createDateFromString(a));var j=":",k=a.getMonth(),l=a.getDate(),m=a.getMinutes();j+=10>m?"0":"";j+=m;if(b){var n=a.getSeconds();j+=10>n?":0":":";j+=n}if(f&&null!==f&&"object"==typeof f){if("en-US"===f.lang){var o=a.getHours(),p=o>=12?"PM":"AM";o%=12;o=o?o:12;return o+j+" "+p}return a.getHours()+j}return a.getHours()+j+", "+c[k]+("string"==typeof d?d:" ")+l+("string"==typeof e?e:"")}function U(a,b,c,d,e){a&&(a=this.formatTime(a,!1,b,c,d,e));return a?a:this.formatTime(new Date,!0,b,c,d)}var V="ApplicationUtils",W={customTopLevelDomain:{aero:"aero",asia:"asia",bike:"bike",biz:"biz",camera:"camera",cat:"cat",clothing:"clothing",coop:"coop",equipment:"equipment",estate:"estate",eus:"eus",gallery:"gallery",graphics:"graphics",guru:"guru",info:"info","int":"int",holdings:"holdings",jobs:"jobs",lighting:"lighting",mobi:"mobi",museum:"museum",name:"name",photography:"photography",plumbing:"plumbing",post:"post",pro:"pro",singles:"singles",tel:"tel",travel:"travel",ventures:"ventures",xxx:"xxx"},topLevelDomain:{ac:"ac",co:"co",com:"com",edu:"edu",gov:"gov",mil:"mil",net:"net",org:"org"},countryTopLevelDomain:{ac:"ac",ad:"ad",ae:"ae",af:"af",ag:"ag",ai:"ai",al:"al",am:"am",an:"an",ao:"ao",aq:"aq",ar:"ar",as:"as",at:"at",au:"au",aw:"aw",ax:"ax",az:"az",ba:"ba",bb:"bb",bd:"bd",be:"be",bf:"bf",bg:"bg",bh:"bh",bi:"bi",bj:"bj",bm:"bm",bn:"bn",bo:"bo",bq:"bq",br:"br",bs:"bs",bt:"bt",bv:"bv",bw:"bw",by:"by",bz:"bz",bzh:"bzh",ca:"ca",cc:"cc",cd:"cd",cf:"cf",cg:"cg",ch:"ch",ci:"ci",ck:"ck",cl:"cl",cm:"cm",cn:"cn",co:"co",cr:"cr",cs:"cs",cu:"cu",cv:"cv",cw:"cw",cx:"cx",cy:"cy",cz:"cz",dd:"dd",de:"de",dj:"dj",dk:"dk",dm:"dm","do":"do",dz:"dz",ec:"ec",ee:"ee",eg:"eg",eh:"eh",er:"er",es:"es",et:"et",eu:"eu",fi:"fi",fj:"fj",fk:"fk",fm:"fm",fo:"fo",fr:"fr",ga:"ga",gb:"gb",gd:"gd",ge:"ge",gf:"gf",gg:"gg",gh:"gh",gi:"gi",gl:"gl",gm:"gm",gn:"gn",gp:"gp",gq:"gq",gr:"gr",gs:"gs",gt:"gt",gu:"gu",gw:"gw",gy:"gy",hk:"hk",hm:"hm",hn:"hn",hr:"hr",ht:"ht",hu:"hu",id:"id",ie:"ie",il:"il",im:"im","in":"in",io:"io",iq:"iq",ir:"ir",is:"is",it:"it",je:"je",jm:"jm",jo:"jo",jp:"jp",ke:"ke",kg:"kg",kh:"kh",ki:"ki",km:"km",kn:"kn",kp:"kp",kr:"kr","krd:":"krd",kw:"kw",ky:"ky",kz:"kz",la:"la",lb:"lb",lc:"lc",li:"li",lk:"lk",lr:"lr",ls:"ls",lt:"lt",lu:"lu",lv:"lv",ly:"ly",ma:"ma",mc:"mc",md:"md",me:"me",mg:"mg",mh:"mh",mk:"mk",ml:"ml",mm:"mm",mn:"mn",mo:"mo",mp:"mp",mq:"mq",mr:"mr",ms:"ms",mt:"mt",mu:"mu",mv:"mv",mw:"mw",mx:"mx",my:"my",mz:"mz",na:"na",nc:"nc",ne:"ne",nf:"nf",ng:"ng",ni:"ni",nl:"nl",no:"no",np:"np",nr:"nr",nu:"nu",nz:"nz",om:"om",pa:"pa",pe:"pe",pf:"pf",pg:"pg",ph:"ph",pk:"pk",pl:"pl",pm:"pm",pn:"pn",pr:"pr",ps:"ps",pt:"pt",pw:"pw",py:"py",qa:"qa",re:"re",ro:"ro",rs:"rs",ru:"ru",rw:"rw",sa:"sa",sb:"sb",sc:"sc",sd:"sd",se:"se",sg:"sg",sh:"sh",si:"si",sj:"sj",sk:"sk",sl:"sl",sm:"sm",sn:"sn",so:"so",sr:"sr",ss:"ss",st:"st",su:"su",sv:"sv",sx:"sx",sy:"sy",sz:"sz",tc:"tc",td:"td",tf:"tf",tg:"tg",th:"th",tj:"tj",tk:"tk",tl:"tl",tm:"tm",tn:"tn",to:"to",tp:"tp",tr:"tr",tt:"tt",tv:"tv",tw:"tw",tz:"tz",ua:"ua",ug:"ug",uk:"uk",us:"us",uy:"uy",uz:"uz",va:"va",vc:"vc",ve:"ve",vg:"vg",vi:"vi",vn:"vn",vu:"vu",wf:"wf",ws:"ws",ye:"ye",yt:"yt",yu:"yu",za:"za",zm:"zm",zr:"zr"}},X={delimiter:"|",set:function(a,b,c){if("string"==typeof a&&b.join&&"function"==typeof b.join){var d=encodeURIComponent(a)+"="+encodeURIComponent(b.join(this.delimiter))+";path=/";"undefined"!=typeof c&&(d+=";domain="+c);document.cookie=d;return!0}},get:function(a){var b="\\$&";if("string"==typeof a){var c=document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,b)+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1")||null;if("string"==typeof c){var d=decodeURIComponent(c);if(d)return d.split(this.delimiter)}}},remove:function(a,b){if("string"==typeof a){this.set(a,["null"],b);return!0}}};return{indexOf:a,trim:b,trimAndLower:c,injectTextObj:d,getDomain:e,getURLParams:f,getParentDomain:g,cloneExtend:j,clone:k,convertConfig:l,addStyleTag:m,objectKeys:n,waitForBody:o,stringify:p,cookieActions:X,getUID:q,runCallback:r,runCallbackByObject:s,registerEvent:t,unregisterEvent:u,buildClassString:v,isEmpty:w,isDomNode:y,isNodeList:z,hasClass:A,groupByKeyValue:B,arrayUniqueByKey:C,isArray:D,sortByKeyValue:E,cloneObj:F,isEmptyLiteral:G,isSameObject:H,addClassByArray:J,objectKeysAsArray:K,removeClassByArray:L,getWindowSize:M,getPropertyFromObject:N,excludeAttributes:O,escapeHtml:P,createDateFromString:Q,formatDay:R,getDay:S,formatTime:T,getTime:U}}();window.lpTag=window.lpTag||{};(function(){this.JsonPollock=function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="/dist/",b(b.s=5)}([function(a,b,c){var d,e,d,f;!function(a,c){"use strict";d=[],e=function(){return c(a,a,!0)}.apply(b,d)}("undefined"==typeof ChronosRoot?this:ChronosRoot,function(a,b,c){"use strict";function d(a,b,c){var d=[];if(a[b]&&a[b].length)for(var e=0;e<a[b].length;e++)c&&"*"!==a[b][e].appName&&a[b][e].appName!==c||d.push(a[b][e]);if(a["*"])for(var f=0;f<a["*"].length;f++)c&&"*"!==a["*"][f].appName&&a["*"][f].appName!==c||d.push(a["*"][f]);return d}function e(b,c,d){a&&"function"==typeof a.log&&a.log(b,c,d)}function f(a){var b,c=a.unbindObj[a.attrName],d=!1;if(!a.unbindObj)return e("CMD listen id not spec for unbind","ERROR",a.loggerName),null;if("string"==typeof a.unbindObj)return j(a.lstnrs,a.unbindObj);if(!a.unbindObj.func&&!a.unbindObj.context&&!a.unbindObj.appName)return!1;var f=a.lstnrs;c&&(f={},f[c]=a.lstnrs[c]);for(var g in f)f.hasOwnProperty(g)&&f[g]&&f[g].length&&(b=k(f[g],a.unbindObj.func,a.unbindObj.context,a.unbindObj.appName),b.length!==f[g].length&&(a.lstnrs[g]=b,d=!0));return d}function g(a){var b={};if(a.constructor===Object)for(var c in a)a.hasOwnProperty(c)&&null!==a[c]&&void 0!==a[c]&&("object"==typeof a[c]&&a[c].constructor!==Array?b[c]=g(a[c]):a[c].constructor===Array?b[c]=a[c].slice(0)||[]:"function"!=typeof a[c]&&(b[c]=null!==a[c]&&void 0!==a[c]?a[c]:""));else a.constructor===Array?b=a.slice(0)||[]:"function"!=typeof a&&(b=a);
return b}function h(a,b,c){if((void 0===c||"*"===c)&&"*"===b)return a;for(var d=[],e=0;e<a.length;e++)a[e].eventName!==c&&"*"!==c||(b&&b===a[e].appName||!a[e].appName||"*"===a[e].appName||"*"===b)&&d.push(a[e]);return d}function i(a){if(0===a.eventBufferLimit||a.triggerData.data&&a.triggerData.data.doNotStore)a=null;else{var b={eventName:a.triggerData[a.attrName],appName:a.triggerData.appName};b.data=a.triggerData.passDataByRef?a.triggerData.data:g(a.triggerData.data),a.eventBufferLimit>0?(a.index>=a.eventBufferLimit&&(a.index=0),a.fired[a.index]=b,a.index++):a.fired.push(b),a=null}}function j(a,b){var c=!1;if(!b)return e("Ev listen id not spec for unregister","ERROR","Events"),null;for(var d in a)if(a.hasOwnProperty(d))for(var f=0;f<a[d].length;f++)if(a[d][f].id==b){a[d].splice(f,1),e("Ev listen="+b+" and name="+d+" unregister","DEBUG","Events"),c=!0;break}return c||e("Ev listen not found "+b+" unregister","DEBUG","Events"),c}function k(a,b,c,d){var f=[];if(a&&a.length)for(var g=0;g<a.length;g++)try{var h=!c&&a[g].func===b,i=!b&&c&&a[g].context===c,j=b&&c&&a[g].func===b&&a[g].context===c,k=d&&d===a[g].appName,l="*"===a[g].appName;if(h||i||j){if(k||l)continue;if(i)continue}else if(!b&&!c&&k)continue;f.push(a[g])}catch(a){e("Error in unbind e="+a.message,"ERROR","Events")}return f}var l={getListeners:d,log:e,unbind:f,hasFired:h,cloneEventData:g,storeEventData:i};return c||(b.EventsUtil=b.EventsUtil||l),l}),function(c,g){"use strict";d=[e],void 0!==(f=function(a){return g(c,c,a,!0)}.apply(b,d))&&(a.exports=f)}("undefined"==typeof ChronosRoot?this:ChronosRoot,function(a,b,c,d){"use strict";function e(a){function b(a){return a?(a.triggerOnce=!0,d(a)):null}function d(a,b,e){var f=a;if("string"==typeof a&&(f={appName:a,eventName:b,func:e}),f.appName=f.appName||l,"*"!==l&&("string"!=typeof a||"function"!=typeof b&&void 0!==b||(f.eventName=a)),!f.eventName||!f.func||"function"!=typeof f.func&&f.func.constructor!==Array)return c.log("Ev listen has invalid params: evName=["+f.eventName+"]","ERROR","Events"),null;if(f.func.constructor===Array){for(var g,h,i=[],j=0;j<f.func.length;j++)g=c.cloneEventData(f),g.func=f.func[j],h=d(g),i.push(h);return i}var k=r+o++,m={id:k,func:f.func,context:f.context||null,aSync:!!f.aSync,appName:f.appName,triggerOnce:f.triggerOnce||!1};return p[f.eventName]=p[f.eventName]||[],p[f.eventName].push(m),c.log("Ev listen rgstr: evName=["+f.eventName+"] aSync="+m.aSync+" appName="+m.name,"DEBUG","Events"),f=null,a=null,k}function e(a){return"*"!==l&&(a.appName=a.appName||l),c.unbind({unbindObj:a,attrName:n,loggerName:m,lstnrs:p})}function f(a,b){return void 0===b&&(b=a,a=l),c.hasFired(q,a,b)}function g(a,b,d){var e=a;if("string"==typeof a&&(e={eventName:b,appName:a,data:d}),"*"!==l&&(e.appName=e.appName||l,"string"!=typeof a||"object"!=typeof b&&void 0!==b||(e.eventName=a)),!e||void 0===e.eventName)return c.log("Ev name not spec for publish","ERROR","Events"),e=null,null;e.passDataByRef=e.passDataByRef||!j,i(e);var f=c.getListeners(p,e.eventName,e.appName);if(f.length>0)for(var g=0;g<f.length;g++){var k=e.passDataByRef?e.data:c.cloneEventData(e.data),m={appName:e.appName,eventName:e.eventName},n=f[g];n.aSync||k&&k.aSync?setTimeout(h(n,k,m),0):h(n,k,m)()}return e=null,f.length>0}function h(a,b,d){return function(){try{a.func.call(a.context,b,d),b=null,a.triggerOnce&&e(a),a=null}catch(b){c.log("Error executing "+d.eventName+" eventId: "+a.id+"e="+b.message,"ERROR","Events")}}}function i(a){c.storeEventData({triggerData:a,eventBufferLimit:k,attrName:n,fired:q,index:s})}var j,k,l,m="Events",n="eventName",o=0,p={},q=[],r="evId_",s=0;l=a&&a.appName||"*",j=!(!a||"boolean"!=typeof a.cloneEventData)&&a.cloneEventData,k=a&&!isNaN(a.eventBufferLimit)?a.eventBufferLimit:-1,this.once=b,this.hasFired=f,this.trigger=g,this.publish=g,this.bind=d,this.register=d,this.unbind=e,this.unregister=e}return d||(b.Events=b.Events||e),e})},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=["vertical","horizontal","carousel"];b["default"]={styleToCss:function(a){var b="";return a&&(a.color&&(b+="color:"+a.color+";"),a["background-color"]&&(b+="background-color:"+a["background-color"]+";"),a.bold&&(b+="font-weight:bold;"),a.italic&&(b+="font-style:italic;"),a.size&&(b+="font-size:"+this.sizeToPx(a.size)+"px;")),b},extractFromStyles:function(a,b){var c=a,d=c.indexOf(b),e="";return d>-1&&(e=c.substr(d,c.indexOf(";",d)-(d-1)),c=c.replace(e,"")),{extractedStyle:e,style:c}},sizeToPx:function(a){switch(a){case"small":return 11;case"medium":return 13;case"large":return 17;default:return 13}},validateParameters:function(a){if(!a.type)throw new Error("Missing configuration: type");for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];c.forEach(function(b){if(void 0===a[b])throw new Error("Missing configuration: "+b+" is a mandatory for element of type "+a.type)})},isString:function(a){return a instanceof String||"string"==typeof a},isLayout:function(a){return d.indexOf(a)>=0},normalizeHtmlText:function(a){var b=a;return a&&(b=b.replace(/(?:\r\n|\r|\n)/g,"<br/>")),b},escapeHtml:function(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return a.replace(/[&<>"'`=\/]/g,function(a){return b[a]})},hasClass:function(a,b){return a.classList&&a.classList.contains?a.classList.contains(b):!!a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))},addClass:function(a,b){a.classList?a.classList.add(b):this.hasClass(a,b)||(a.className+=" "+b)},removeClass:function(a,b){if(a.classList)a.classList.remove(b);else if(this.hasClass(a,b)){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ")}}}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(4),j=d(i),k=c(1),l=d(k),m=c(0),n=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return d.errors=c,d}return g(b,a),b}(Error),o=function(){function a(b){e(this,a),this.events=new m({cloneEventData:!0,appName:"json-pollock"}),this.provider=new j["default"](this.events),this.maxAllowedElements=50,this.schemaValidator=b}return h(a,[{key:"init",value:function(a){a&&(Object.prototype.hasOwnProperty.call(a,"maxAllowedElements")&&(!isNaN(a.maxAllowedElements)&&a.maxAllowedElements>0?this.maxAllowedElements=a.maxAllowedElements:this.maxAllowedElements=50),"function"==typeof a.onAfterElementRendered&&(this.onAfterElementRendered=a.onAfterElementRendered))}},{key:"renderElement",value:function(a,b){var c=this,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(d>=this.maxAllowedElements)){var e=d,f=this.provider.get(a.type),g=void 0;f&&(g=f(a),this.onAfterElementRendered&&(g=this.onAfterElementRendered(g,a)),g&&(b.appendChild(g),Array.isArray(a.elements)&&a.elements.forEach(function(a){e+=1,c.renderElement(a,g,e)}),g.afterRender&&g.afterRender.call(g,a,b)))}}},{key:"render",value:function(a){var b=void 0;if(b=l["default"].isString(a)?JSON.parse(a):a,this.schemaValidator){var c=this.schemaValidator.validate(b);if(!c.valid)throw new n("Schema validation error, see 'errors' for more details",c.errors)}var d=document.createDocumentFragment(),e=document.createElement("div");return e.className="lp-json-pollock",l["default"].isLayout(b.type)||(e.className+=" lp-json-pollock-single-element"),d.appendChild(e),this.renderElement(b,e),d}},{key:"registerAction",value:function(a,b){this.events.bind({eventName:a,func:function(a){b(a)}})}},{key:"unregisterAction",value:function(a){this.events.unbind({eventName:a})}},{key:"unregisterAllActions",value:function(){this.events.unbind({})}},{key:"registerElement",value:function(a,b){this.provider.set(a,b)}}]),a}();o.TEMPLATE_TYPES=j["default"].TYPES,b["default"]=o},function(a,b){},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(1),g=function(a){return a&&a.__esModule?a:{"default":a}}(f),h=(c(0),{TEXT:"text",BUTTON:"button",IMAGE:"image",MAP:"map",VERTICAL:"vertical",HORIZONTAL:"horizontal",CAROUSEL:"carousel",SUBMITBUTTON:"submitButton",CHECKBOX:"checkbox",CHECKLIST:"checklist",LIST:"list",SECTION:"section",SECTIONLIST:"sectionList",BUTTONLIST:"buttonList"}),i="data-section-id",j=function(){function a(b){var c=this;d(this,a),this.elements={},this.events=b,this.set(h.TEXT,function(a){var b=document.createElement("div"),c=a.tooltip?g["default"].escapeHtml(a.tooltip):"";b.className="lp-json-pollock-element-text",a.rtl&&(b.dir="rtl",g["default"].addClass(b,"direction-rtl"));var d=g["default"].styleToCss(a.style),e=g["default"].extractFromStyles(d,"background-color");return b.setAttribute("style",e.extractedStyle),b.innerHTML='<span style="'+e.style+'" title="'+c+'" aria-label="'+c+'">'+g["default"].normalizeHtmlText(a.text)+"</span>",b}),this.set(h.BUTTON,function(a){var b=document.createElement("div");b.className="lp-json-pollock-element-button",a.rtl&&(b.dir="rtl",g["default"].addClass(b,"direction-rtl"));var d=document.createElement("button");if(d.innerHTML=g["default"].normalizeHtmlText(a.title),a.tooltip&&(d.title=a.tooltip,d.setAttribute("aria-label",a.tooltip)),a.style){var e=g["default"].styleToCss(a.style),f=g["default"].extractFromStyles(e,"background-color");b.setAttribute("style",f.extractedStyle),d.style.cssText=f.style}return a.click&&a.click.actions&&(d.onclick=c.wrapAction(a.click)),b.appendChild(d),b}),this.set(h.SUBMITBUTTON,function(a){var b=document.createElement("div");b.className="lp-json-pollock-element-submit-button",a.rtl&&(b.dir="rtl",g["default"].addClass(b,"direction-rtl"));var d=document.createElement("input");if(d.type="submit",d.value=g["default"].normalizeHtmlText(a.title),a.disabled&&(d.disabled=!0,d.classList.add("lp-json-pollock-element-submit-button-disabled")),a.tooltip&&(d.title=a.tooltip,d.setAttribute("aria-label",a.tooltip)),a.style){var e=g["default"].styleToCss(a.style),f=g["default"].extractFromStyles(e,"background-color");b.setAttribute("style",f.extractedStyle),d.style.cssText=f.style}return a.click&&a.click.actions&&(d.onclick=c.wrapAction(a.click,!0)),b.appendChild(d),b}),this.set(h.CHECKBOX,function(a){var b=document.createElement("div");b.className="lp-json-pollock-element-checkbox";var d=document.createElement("input"),e=g["default"].normalizeHtmlText(a.text);d.type="checkbox",d.className="lp-json-pollock-element-checkbox-input";var f=document.createElement("label");if(f.className="lp-json-pollock-element-checkbox-label",f.innerHTML+=e,a.rtl&&(f.dir="rtl",g["default"].addClass(f,"direction-rtl")),a.tooltip&&(f.title=a.tooltip,f.setAttribute("aria-label",a.tooltip)),a.borderLine){var h=document.createElement("div");h.className="lp-json-pollock-border-element",a.borderColor&&(h.style.borderColor=a.borderColor),b.appendChild(h)}var j=document.createElement("div");if(j.className="lp-json-pollock-element-checkbox-wrapper",a.rtl&&(j.dir="rtl",g["default"].addClass(j,"direction-rtl")),a.style){var k=g["default"].styleToCss(a.style),l=g["default"].extractFromStyles(k,"background-color");f.style.cssText=k,j.setAttribute("style",l.extractedStyle)}return j.appendChild(d),j.appendChild(f),b.appendChild(j),b.afterRender=function(a,d){var e=b.getElementsByTagName("input")[0];a.click&&a.click.actions&&(e.onclick=c.wrapAction(a.click,!1,d.parentElement.getAttribute(i)))},b}),this.set(h.CHECKLIST,function(a){var b=document.createElement("div");if(b.className="lp-json-pollock-layout-checklist",a.padding){var c=a.padding;b.style.margin=c/2+"px 0px"}return b}),this.set(h.SECTION,function(a){var b=document.createElement("div");if(b.className="lp-json-pollock-layout-section",a.padding){var c=a.padding;b.style.margin=c/2+"px 0px"}return a.sectionID&&b.setAttribute(i,a.sectionID),b}),this.set(h.SECTIONLIST,function(){var a=document.createElement("div");return a.className="lp-json-pollock-layout-sectionList",a}),this.set(h.BUTTONLIST,function(){var a=document.createElement("div");return a.className="lp-json-pollock-layout-buttonList",a}),this.set(h.LIST,function(){var a=document.createElement("form");return a.className="lp-json-pollock-layout lp-json-pollock-layout-form",a.afterRender=function(){var b=a.querySelectorAll("input");if(b.length>0)for(var d=0;d<b.length;d+=1){var e=b[d];e.onclick&&function(){var b=e.onclick;e.onclick=function(d){b.call(c,d,a)}}()}var f=a.querySelectorAll("button");if(f.length>0)for(var g=0;g<f.length;g+=1){var h=f[g];h.getAttribute("type")||h.setAttribute("type","button")}},a}),this.set(h.IMAGE,function(a){var b=document.createElement("div");b.className="lp-json-pollock-element-image loading",a.rtl&&(b.dir="rtl",g["default"].addClass(b,"direction-rtl"));var d=document.createElement("img");return d.src=a.url,a.tooltip&&(d.title=a.tooltip,d.setAttribute("aria-label",a.tooltip)),a.style&&(d.style.cssText=g["default"].styleToCss(a.style)),a.caption&&(b.innerHTML+="<span>"+a.caption+"</span>"),d.onload=function(){g["default"].removeClass(b,"loading")},d.onerror=function(){g["default"].removeClass(b,"loading"),g["default"].addClass(b,"error"),b.title="fail to load image",d.style.display="none"},a.click&&a.click.actions&&(d.onclick=c.wrapAction(a.click)),b.appendChild(d),b}),this.set(h.MAP,function(a){var b=document.createElement("div");return b.className="lp-json-pollock-element-map",a.tooltip&&(b.title=a.tooltip,b.setAttribute("aria-label",a.tooltip)),a.style&&(b.style.cssText=g["default"].styleToCss(a.style)),a.click&&a.click.actions?b.onclick=c.wrapAction(a.click):b.onclick=function(){window.open("https://www.google.com/maps/search/?api=1&query="+a.la+","+a.lo,"_blank")},b}),this.set(h.VERTICAL,function(){var a=document.createElement("div");return a.className="lp-json-pollock-layout lp-json-pollock-layout-vertical",a}),this.set(h.CAROUSEL,function(a){function b(a){l=0,0===k&&this.events.trigger({eventName:q,data:{offset:k,prevOffset:l,uiEvent:a}}),""!==p.style.left&&(l=parseInt(p.style.left,i)),k=l-h-g-j,n.style.visibility="visible",m.style.visibility="visible",o.offsetWidth>p.offsetWidth+k&&(k=-(p.offsetWidth+g-o.offsetWidth),m.style.visibility="hidden"),p.style.left=k+"px"}function d(a){l=0,""!==p.style.left&&(l=parseInt(p.style.left,i)),k=l+h+g+j,m.style.visibility="visible",k>=0&&(k=0,n.style.visibility="hidden",m.style.visibility="visible"),0===k&&this.events.trigger({eventName:q,data:{offset:k,prevOffset:l,uiEvent:a}}),p.style.left=k+"px"}function e(a){return a.className.indexOf("lp-json-pollock-layout")>-1?a:e(a.parentNode)}function f(a){var c=a.target,f=e(c);o.scrollLeft=0;var g=o.getBoundingClientRect(),h=f.getBoundingClientRect();g.left>h.left?d.call(this,a):g.right<h.right&&b.call(this,a)}var g=a.padding||0,h=180,i=10,j=2,k=0,l=0,m=document.createElement("div"),n=document.createElement("div"),o=document.createElement("div"),p=document.createElement("div"),q="carouselOffsetChange";return o.afterRender=function(){if(o.childNodes.length){for(var a=0;a<o.childNodes.length;a+=1){var e=o.childNodes[a];e.addEventListener("focus",f.bind(c),!0),e.style.margin="0 "+g/2+"px"}for(m.className="lp-json-pollock-component-action lp-json-pollock-layout-carousel-arrow",n.className="lp-json-pollock-component-action lp-json-pollock-layout-carousel-arrow left";o.hasChildNodes();)p.insertBefore(o.lastChild,p.firstChild);o.appendChild(p);var i=0,k=2*(h+j)+g;p.childNodes.length>2&&(i=(p.childNodes.length-2)*(j+h+g));var l=k+i;p.style.width=l+"px",p.className="lp-json-pollock-layout-carousel",o.className="lp-json-pollock-layout-carousel-wrapper",o.appendChild(p),o.appendChild(m),o.appendChild(n),setTimeout(function(){o.offsetWidth>p.offsetWidth&&(n.style.visibility="hidden",m.style.visibility="hidden")},0),m.onclick=function(a){b.call(c,a)},n.onclick=function(a){d.call(c,a)}}},o}),this.set(h.HORIZONTAL,function(){var a=document.createElement("div");return a.className="lp-json-pollock-layout lp-json-pollock-layout-horizontal",a.afterRender=function(){if(a.childNodes.length){var b=100/a.childNodes.length;Array.prototype.forEach.call(a.childNodes,function(a){a.style.width=b+"%"})}},a})}return e(a,[{key:"get",value:function(a){return this.elements[a]}},{key:"set",value:function(a,b){this.elements[a]=b}},{key:"wrapAction",value:function(a,b,c){var d=this;return function(e,f){b&&e&&e.preventDefault&&e.preventDefault(),a.actions instanceof Array&&a.actions.forEach(function(b){var g={actionData:b,metadata:a.metadata,uiEvent:e};c&&(g.groupID=c),f&&(g.formEl=f),d.events.trigger({eventName:b.type,data:g})})}}}]),a}();j.TYPES=h,b["default"]=j},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0}),b.TEMPLATE_TYPES=b.version=b.unregisterAllActions=b.unregisterAction=b.registerAction=b.render=b.init=void 0;var e=c(3),f=(d(e),c(2)),g=d(f),h=new g["default"],i=h.init.bind(h),j=h.render.bind(h),k=h.registerAction.bind(h),l=h.unregisterAction.bind(h),m=h.unregisterAllActions.bind(h),n=g["default"].TEMPLATE_TYPES;b.init=i,b.render=j,b.registerAction=k,b.unregisterAction=l,b.unregisterAllActions=m,b.version="1.3.4",b.TEMPLATE_TYPES=n}])}).call(window.lpTag);window.lpTag=window.lpTag||{};(function(){this.chips=function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="/pages/eliranm/chips/dist/",b(b.s=71)}([function(a,b){var c=a.exports={version:"2.5.4"};"number"==typeof __e&&(__e=c)},function(a,b,c){var d=c(5),e=c(0),f=c(9),g=c(8),h=c(11),i=function(a,b,c){var j,k,l,m=a&i.F,n=a&i.G,o=a&i.S,p=a&i.P,q=a&i.B,r=a&i.W,s=n?e:e[b]||(e[b]={}),t=s.prototype,u=n?d:o?d[b]:(d[b]||{}).prototype;n&&(c=b);for(j in c)(k=!m&&u&&void 0!==u[j])&&h(s,j)||(l=k?u[j]:c[j],s[j]=n&&"function"!=typeof u[j]?c[j]:q&&k?f(l,d):r&&u[j]==l?function(a){var b=function(b,c,d){if(this instanceof a){switch(arguments.length){case 0:return new a;case 1:return new a(b);case 2:return new a(b,c)}return new a(b,c,d)}return a.apply(this,arguments)};return b.prototype=a.prototype,b}(l):p&&"function"==typeof l?f(Function.call,l):l,p&&((s.virtual||(s.virtual={}))[j]=l,a&i.R&&t&&!t[j]&&g(t,j,l)))};i.F=1,i.G=2,i.S=4,i.P=8,i.B=16,i.W=32,i.U=64,i.R=128,a.exports=i},function(a,b,c){var d=c(37)("wks"),e=c(23),f=c(5).Symbol,g="function"==typeof f;(a.exports=function(a){return d[a]||(d[a]=g&&f[a]||(g?f:e)("Symbol."+a))}).store=d},function(a,b,c){var d=c(7),e=c(53),f=c(39),g=Object.defineProperty;b.f=c(4)?Object.defineProperty:function(a,b,c){if(d(a),b=f(b,!0),d(c),e)try{return g(a,b,c)}catch(a){}if("get"in c||"set"in c)throw TypeError("Accessors not supported!");return"value"in c&&(a[b]=c.value),a}},function(a,b,c){a.exports=!c(10)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(a,b){var c=a.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=c)},function(a,b){a.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}},function(a,b,c){var d=c(6);a.exports=function(a){if(!d(a))throw TypeError(a+" is not an object!");return a}},function(a,b,c){var d=c(3),e=c(16);a.exports=c(4)?function(a,b,c){return d.f(a,b,e(1,c))}:function(a,b,c){return a[b]=c,a}},function(a,b,c){var d=c(50);a.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}},function(a,b){a.exports=function(a){try{return!!a()}catch(a){return!0}}},function(a,b){var c={}.hasOwnProperty;a.exports=function(a,b){return c.call(a,b)}},function(a,b,c){var d=c(31),e=c(29);a.exports=function(a){return d(e(a))}},function(a,b){a.exports={}},function(a,b,c){var d=c(61),e=c(30);a.exports=Object.keys||function(a){return d(a,e)}},function(a,b){b.f={}.propertyIsEnumerable},function(a,b){a.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}},function(a,b,c){var d=c(29);a.exports=function(a){return Object(d(a))}},function(a,b,c){"use strict";var d=c(122)(!0);c(32)(String,"String",function(a){this._t=String(a),this._i=0},function(){var a,b=this._t,c=this._i;return c>=b.length?{value:void 0,done:!0}:(a=d(b,c),this._i+=a.length,{value:a,done:!1})})},function(a,b,c){var d=c(9),e=c(56),f=c(54),g=c(7),h=c(22),i=c(42),j={},k={},b=a.exports=function(a,b,c,l,m){var n,o,p,q,r=m?function(){return a}:i(a),s=d(c,l,b?2:1),t=0;if("function"!=typeof r)throw TypeError(a+" is not iterable!");if(f(r)){for(n=h(a.length);n>t;t++)if((q=b?s(g(o=a[t])[0],o[1]):s(a[t]))===j||q===k)return q}else for(p=r.call(a);!(o=p.next()).done;)if((q=e(p,s,o.value,b))===j||q===k)return q};b.BREAK=j,b.RETURN=k},function(a,b,c){var d=c(7),e=c(114),f=c(30),g=c(36)("IE_PROTO"),h=function(){},i=function(){var a,b=c(52)("iframe"),d=f.length;for(b.style.display="none",c(109).appendChild(b),b.src="javascript:",a=b.contentWindow.document,a.open(),a.write("<script>document.F=Object</script>"),a.close(),i=a.F;d--;)delete i.prototype[f[d]];return i()};a.exports=Object.create||function(a,b){var c;return null!==a?(h.prototype=d(a),c=new h,h.prototype=null,c[g]=a):c=i(),void 0===b?c:e(c,b)}},function(a,b,c){var d=c(3).f,e=c(11),f=c(2)("toStringTag");a.exports=function(a,b,c){a&&!e(a=c?a:a.prototype,f)&&d(a,f,{configurable:!0,value:b})}},function(a,b,c){var d=c(38),e=Math.min;a.exports=function(a){return a>0?e(d(a),9007199254740991):0}},function(a,b){var c=0,d=Math.random();a.exports=function(a){return"Symbol(".concat(void 0===a?"":a,")_",(++c+d).toString(36))}},function(a,b,c){c(127);for(var d=c(5),e=c(8),f=c(13),g=c(2)("toStringTag"),h="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),i=0;i<h.length;i++){var j=h[i],k=d[j],l=k&&k.prototype;l&&!l[g]&&e(l,g,j),f[j]=f.Array}},function(a,b,c){"use strict";b.__esModule=!0,b["default"]=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}},function(a,b,c){"use strict";b.__esModule=!0;var d=c(78),e=function(a){return a&&a.__esModule?a:{"default":a}}(d);b["default"]=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e["default"](a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()},function(a,b,c){var d=c(28),e=c(2)("toStringTag"),f="Arguments"==d(function(){return arguments}()),g=function(a,b){try{return a[b]}catch(a){}};a.exports=function(a){var b,c,h;return void 0===a?"Undefined":null===a?"Null":"string"==typeof(c=g(b=Object(a),e))?c:f?d(b):"Object"==(h=d(b))&&"function"==typeof b.callee?"Arguments":h}},function(a,b){var c={}.toString;a.exports=function(a){return c.call(a).slice(8,-1)}},function(a,b){a.exports=function(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a}},function(a,b){a.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(a,b,c){var d=c(28);a.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return"String"==d(a)?a.split(""):Object(a)}},function(a,b,c){"use strict";var d=c(33),e=c(1),f=c(63),g=c(8),h=c(13),i=c(111),j=c(21),k=c(60),l=c(2)("iterator"),m=!([].keys&&"next"in[].keys()),n=function(){return this};a.exports=function(a,b,c,o,p,q,r){i(c,b,o);var s,t,u,v=function(a){if(!m&&a in z)return z[a];switch(a){case"keys":case"values":return function(){return new c(this,a)}}return function(){return new c(this,a)}},w=b+" Iterator",x="values"==p,y=!1,z=a.prototype,A=z[l]||z["@@iterator"]||p&&z[p],B=A||v(p),C=p?x?v("entries"):B:void 0,D="Array"==b?z.entries||A:A;if(D&&(u=k(D.call(new a)))!==Object.prototype&&u.next&&(j(u,w,!0),d||"function"==typeof u[l]||g(u,l,n)),x&&A&&"values"!==A.name&&(y=!0,B=function(){return A.call(this)}),d&&!r||!m&&!y&&z[l]||g(z,l,B),h[b]=B,h[w]=n,p)if(s={values:x?B:v("values"),keys:q?B:v("keys"),entries:C},r)for(t in s)t in z||f(z,t,s[t]);else e(e.P+e.F*(m||y),b,s);return s}},function(a,b){a.exports=!0},function(a,b,c){var d=c(23)("meta"),e=c(6),f=c(11),g=c(3).f,h=0,i=Object.isExtensible||function(){return!0},j=!c(10)(function(){return i(Object.preventExtensions({}))}),k=function(a){g(a,d,{value:{i:"O"+ ++h,w:{}}})},l=function(a,b){if(!e(a))return"symbol"==typeof a?a:("string"==typeof a?"S":"P")+a;if(!f(a,d)){if(!i(a))return"F";if(!b)return"E";k(a)}return a[d].i},m=function(a,b){if(!f(a,d)){if(!i(a))return!0;if(!b)return!1;k(a)}return a[d].w},n=function(a){return j&&o.NEED&&i(a)&&!f(a,d)&&k(a),a},o=a.exports={KEY:d,NEED:!1,fastKey:l,getWeak:m,onFreeze:n}},function(a,b){b.f=Object.getOwnPropertySymbols},function(a,b,c){var d=c(37)("keys"),e=c(23);a.exports=function(a){return d[a]||(d[a]=e(a))}},function(a,b,c){var d=c(5),e=d["__core-js_shared__"]||(d["__core-js_shared__"]={});a.exports=function(a){return e[a]||(e[a]={})}},function(a,b){var c=Math.ceil,d=Math.floor;a.exports=function(a){return isNaN(a=+a)?0:(a>0?d:c)(a)}},function(a,b,c){var d=c(6);a.exports=function(a,b){if(!d(a))return a;var c,e;if(b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;if("function"==typeof(c=a.valueOf)&&!d(e=c.call(a)))return e;if(!b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;throw TypeError("Can't convert object to primitive value")}},function(a,b,c){var d=c(5),e=c(0),f=c(33),g=c(41),h=c(3).f;a.exports=function(a){var b=e.Symbol||(e.Symbol=f?{}:d.Symbol||{});"_"==a.charAt(0)||a in b||h(b,a,{value:g.f(a)})}},function(a,b,c){b.f=c(2)},function(a,b,c){var d=c(27),e=c(2)("iterator"),f=c(13);a.exports=c(0).getIteratorMethod=function(a){return void 0!=a?a[e]||a["@@iterator"]||f[d(a)]:void 0}},function(a,b,c){"use strict";c.d(b,"d",function(){return j}),c.d(b,"a",function(){return k}),c.d(b,"c",function(){return l}),c.d(b,"b",function(){return m}),c.d(b,"e",function(){return n}),c.d(b,"f",function(){return o});var d=c(84),e=c.n(d),f=c(79),g=c.n(f),h=c(44),i=c.n(h),j=function(){var a=arguments.length<=0?void 0:arguments[0],b=void 0,c=void 0;Array.isArray(arguments.length<=1?void 0:arguments[1])?(b={},c=(arguments.length<=1?void 0:arguments[1])||[]):(b=(arguments.length<=1?void 0:arguments[1])||{},c=(arguments.length<=2?void 0:arguments[2])||[]);var d=document.createElement(a);return i()(d.style,b.style||{}),i()(d,b.domProps||{}),g()(b.attrs||[]).forEach(function(a){var b=e()(a,2),c=b[0],f=b[1];return d.setAttribute(c,f)}),g()(b.on||[]).forEach(function(a){var b=e()(a,2),c=b[0],f=b[1];return d.addEventListener(c,f,!1)}),c.forEach(function(a){return d.appendChild(a)}),d},k=function(a,b,c){if(a){var d=a.classList.contains(b);c?d||a.classList.add(b):d&&a.classList.remove(b)}},l=function(a){var b=document.createDocumentFragment();return b.appendChild(a),b},m=function(a,b){a.style.animationName="nodeInserted",a.style.animationDuration="0.001s";var c=function d(c){c.target===a&&"nodeInserted"===c.animationName&&(b(),document.removeEventListener("animationstart",d,!1))};document.addEventListener("animationstart",c,!1)},n=function(a,b){var c=a.getBoundingClientRect(),d=b.getBoundingClientRect();return c.left<d.left||c.right>d.right||c.top<d.top||c.bottom>d.bottom},o=function(a,b,c){var d=a.getBoundingClientRect(),e=b.getBoundingClientRect(),f=e.width*c,g=void 0,h=void 0;return d.left<e.left?(g=d.left-e.left,h=Math.floor):d.right>e.right&&(g=d.right-e.right,h=Math.ceil),-1*h(g/f)}},function(a,b,c){a.exports={"default":c(90),__esModule:!0}},function(a,b,c){a.exports={"default":c(94),__esModule:!0}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}b.__esModule=!0;var e=c(80),f=d(e),g=c(77),h=d(g),i=c(49),j=d(i);b["default"]=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+(void 0===b?"undefined":j["default"](b)));a.prototype=h["default"](b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(f["default"]?f["default"](a,b):a.__proto__=b)}},function(a,b,c){"use strict";b.__esModule=!0;var d=c(49),e=function(a){return a&&a.__esModule?a:{"default":a}}(d);b["default"]=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":e["default"](b))&&"function"!=typeof b?a:b}},function(a,b,c){"use strict";b.__esModule=!0;var d=c(72),e=function(a){return a&&a.__esModule?a:{"default":a}}(d);b["default"]=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return e["default"](a)}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}b.__esModule=!0;var e=c(82),f=d(e),g=c(81),h=d(g),i="function"==typeof h["default"]&&"symbol"==typeof f["default"]?function(a){return typeof a}:function(a){return a&&"function"==typeof h["default"]&&a.constructor===h["default"]&&a!==h["default"].prototype?"symbol":typeof a};b["default"]="function"==typeof h["default"]&&"symbol"===i(f["default"])?function(a){return void 0===a?"undefined":i(a)}:function(a){return a&&"function"==typeof h["default"]&&a.constructor===h["default"]&&a!==h["default"].prototype?"symbol":void 0===a?"undefined":i(a)}},function(a,b){a.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}},function(a,b){a.exports=function(a,b,c,d){if(!(a instanceof b)||void 0!==d&&d in a)throw TypeError(c+": incorrect invocation!");return a}},function(a,b,c){var d=c(6),e=c(5).document,f=d(e)&&d(e.createElement);a.exports=function(a){return f?e.createElement(a):{}}},function(a,b,c){a.exports=!c(4)&&!c(10)(function(){return 7!=Object.defineProperty(c(52)("div"),"a",{get:function(){return 7}}).a})},function(a,b,c){var d=c(13),e=c(2)("iterator"),f=Array.prototype;a.exports=function(a){return void 0!==a&&(d.Array===a||f[e]===a)}},function(a,b,c){var d=c(28);a.exports=Array.isArray||function(a){return"Array"==d(a)}},function(a,b,c){var d=c(7);a.exports=function(a,b,c,e){try{return e?b(d(c)[0],c[1]):b(c)}catch(b){var f=a["return"];throw void 0!==f&&d(f.call(a)),b}}},function(a,b){a.exports=function(a,b){
return{value:b,done:!!a}}},function(a,b,c){var d=c(15),e=c(16),f=c(12),g=c(39),h=c(11),i=c(53),j=Object.getOwnPropertyDescriptor;b.f=c(4)?j:function(a,b){if(a=f(a),b=g(b,!0),i)try{return j(a,b)}catch(a){}return h(a,b)?e(!d.f.call(a,b),a[b]):void 0}},function(a,b,c){var d=c(61),e=c(30).concat("length","prototype");b.f=Object.getOwnPropertyNames||function(a){return d(a,e)}},function(a,b,c){var d=c(11),e=c(17),f=c(36)("IE_PROTO"),g=Object.prototype;a.exports=Object.getPrototypeOf||function(a){return a=e(a),d(a,f)?a[f]:"function"==typeof a.constructor&&a instanceof a.constructor?a.constructor.prototype:a instanceof Object?g:null}},function(a,b,c){var d=c(11),e=c(12),f=c(100)(!1),g=c(36)("IE_PROTO");a.exports=function(a,b){var c,h=e(a),i=0,j=[];for(c in h)c!=g&&d(h,c)&&j.push(c);for(;b.length>i;)d(h,c=b[i++])&&(~f(j,c)||j.push(c));return j}},function(a,b,c){var d=c(8);a.exports=function(a,b,c){for(var e in b)c&&a[e]?a[e]=b[e]:d(a,e,b[e]);return a}},function(a,b,c){a.exports=c(8)},function(a,b,c){var d=c(6);a.exports=function(a,b){if(!d(a)||a._t!==b)throw TypeError("Incompatible receiver, "+b+" required!");return a}},function(a,b){},function(a,b,c){"use strict";var d=c(68);b.a=d.a},function(a,b){},function(a,b,c){"use strict";var d=c(48),e=c.n(d),f=c(45),g=c.n(f),h=c(25),i=c.n(h),j=c(26),k=c.n(j),l=c(47),m=c.n(l),n=c(46),o=c.n(n),p=c(69),q=c(70),r=c(43),s=function(a,b){var c=void 0;c=+b?+b:1;for(var d=[],e=0;e<a.length;e+=c)d.push(a.slice(e,e+c));return d},t=function(a){function b(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=a.el,d=void 0===c?document.body:c,e=a.items,f=void 0===e?[]:e,h=a.rowSize,j=void 0===h?f.length||1:h,k=a.rowLimit,l=void 0===k?3:k,n=a.itemCharLimit,o=void 0===n?25:n,p=a.lazy,q=void 0!==p&&p,r=a.renderer;i()(this,b);var s=m()(this,(b.__proto__||g()(b)).call(this));if(!r)throw new Error('"renderer" must be passed');return s.el=d,s.items=f,s.rowSize=j,s.rowLimit=l,s.itemCharLimit=o,s.RendererClass=r,q||s.render(),s}return o()(b,a),k()(b,[{key:"render",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.items,c=void 0===b?this.items:b,d=a.rowSize,f=void 0===d?this.rowSize:d,g=a.rowLimit,h=void 0===g?this.rowLimit:g,i=a.itemCharLimit,j=void 0===i?this.itemCharLimit:i,k=s(c,f);if(k.length>h){var l,m=k.slice(0,h-1),n=(l=[]).concat.apply(l,e()(k.slice(h-1)));m.push(n),k=m}this.renderer=new this.RendererClass({events:this,rows:k,itemCharLimit:j}),this.detach(),this.attach(this.renderer.render())}},{key:"attach",value:function(a){this.el.appendChild(a)}},{key:"detach",value:function(){var a=this.el.querySelector(".chips-wrapper");a&&this.el.removeChild(a)}},{key:"dispose",value:function(){this.clear(),this.detach()}},{key:"readonly",value:function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];c.i(r.a)(this.el.querySelector(".chips-wrapper"),"chips-readonly",a),this.renderer.isReadOnly=a}}]),b}(p.a);t.Renderer=q.a,b.a=t},function(a,b,c){"use strict";var d=c(75),e=c.n(d),f=c(25),g=c.n(f),h=c(26),i=c.n(h),j=function(){function a(){g()(this,a),this.listeners=new e.a}return i()(a,[{key:"on",value:function(a,b){this.listeners.set(a,b)}},{key:"off",value:function(a){this.listeners["delete"](a)}},{key:"clear",value:function(){this.listeners=new e.a}},{key:"dispatch",value:function(a){var b=this.listeners.get(a);if(b){for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;c>e;e++)d[e-1]=arguments[e];b.apply(void 0,d)}}}]),a}();b.a=j},function(a,b,c){"use strict";var d=c(48),e=c.n(d),f=c(76),g=c.n(f),h=c(83),i=c.n(h),j=c(45),k=c.n(j),l=c(47),m=c.n(l),n=c(46),o=c.n(n),p=c(25),q=c.n(p),r=c(26),s=c.n(r),t=c(43),u=function(){function a(b){var c=b.events,d=b.rows,e=b.itemCharLimit;q()(this,a),this.events=c,this.rows=d,this.itemCharLimit=e,this.stepRatio=.7,this.refs={wrapper:null,slider:null,navLeft:null,navRight:null}}return s()(a,[{key:"render",value:function(){var a=this.buildDomTree();return this.refs={wrapper:a,slider:a.querySelector(".chips-slider"),navLeft:a.querySelector(".chips-nav-left"),navRight:a.querySelector(".chips-nav-right")},c.i(t.b)(this.refs.slider,this.renderNav.bind(this)),c.i(t.c)(a)}},{key:"buildDomTree",value:function(){var a=this;return c.i(t.d)("div",{attrs:{"class":"chips-wrapper"}},[c.i(t.d)("div",{attrs:{"class":"chips-nav chips-nav-left",role:"button"},style:{visibility:"hidden"},on:{click:function(){a.renderOffset(1),a.events.dispatch("nav:left")}}}),c.i(t.d)("div",{attrs:{"class":"chips-nav chips-nav-right",role:"button"},style:{visibility:"hidden"},on:{click:function(){a.renderOffset(-1),a.events.dispatch("nav:right")}}}),c.i(t.d)("div",{attrs:{"class":"chips-slider"},style:{left:0}},this.rows.map(function(b){return c.i(t.d)("div",{attrs:{"class":"chips-row"}},b.map(a.renderItem.bind(a)))}))])}},{key:"renderOffset",value:function(a){var b=this.refs.slider,c=b.offsetWidth*this.stepRatio*a,d=b.offsetLeft+c,e=void 0;e=d>0?0:d<b.offsetWidth-b.scrollWidth?b.offsetWidth-b.scrollWidth:d;var f=Math.round(e);b.style.left=f+"px",this.renderNav(e)}},{key:"renderNav",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=this.refs.slider,c=this.refs.navLeft,d=this.refs.navRight;0===a?(c.style.visibility="hidden",c.setAttribute("aria-hidden",!0)):(c.style.visibility="visible",c.setAttribute("aria-hidden",!1)),a<=b.offsetWidth-b.scrollWidth?(d.style.visibility="hidden",d.setAttribute("aria-hidden",!0)):(d.style.visibility="visible",d.setAttribute("aria-hidden",!1))}},{key:"renderItem",value:function(){throw new Error("abstract method not implemented!")}}]),a}(),v=function(a){function b(){return q()(this,b),m()(this,(b.__proto__||k()(b)).apply(this,arguments))}return o()(b,a),s()(b,[{key:"renderItem",value:function(a){var b=this,d=a.title,f=a.tooltip,h=a.style,j=void 0===h?{}:h,k=a.click,l=this.itemCharLimit,m="string"==typeof d&&d.length>l;return c.i(t.d)("button",{attrs:{"class":"chips-item",role:"button"},domProps:i()({},"string"==typeof d&&{textContent:m?""+d.substr(0,l):d},"string"==typeof f&&{title:f}),style:i()({},"string"==typeof j.color&&{color:j.color},"string"==typeof j["background-color"]&&{backgroundColor:j["background-color"]},"string"==typeof j["border-color"]&&{borderColor:j["border-color"]},g()(j["border-radius"])&&{borderRadius:j["border-radius"]+"px"},j.bold&&{fontWeight:"bold"},j.italic&&{fontStyle:"italic"},-1!==["small","medium","large"].indexOf(j.size)&&{fontSize:{small:"10px",medium:"12px",large:"15px"}[j.size]}),on:i()({},k&&{click:function(a){if(b.isReadOnly)return void a.preventDefault();k.actions.forEach(function(a){return b.events.dispatch("action:"+a.type,{action:a,metadata:k.metadata})});return void 0},focus:function(a){var d=a.target,e=b.refs.wrapper;if(e.scrollLeft=0,c.i(t.e)(d,e)){var f=c.i(t.f)(d,e,b.stepRatio);b.renderOffset(f)}}})},[].concat(e()(m&&[c.i(t.d)("span",{domProps:{innerHTML:"&hellip;"}})])))}}]),b}(u);b.a={StructuredContentButton:v}},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(67),e=(c.n(d),c(66));b["default"]=e.a},function(a,b,c){a.exports={"default":c(85),__esModule:!0}},function(a,b,c){a.exports={"default":c(86),__esModule:!0}},function(a,b,c){a.exports={"default":c(87),__esModule:!0}},function(a,b,c){a.exports={"default":c(88),__esModule:!0}},function(a,b,c){a.exports={"default":c(89),__esModule:!0}},function(a,b,c){a.exports={"default":c(91),__esModule:!0}},function(a,b,c){a.exports={"default":c(92),__esModule:!0}},function(a,b,c){a.exports={"default":c(93),__esModule:!0}},function(a,b,c){a.exports={"default":c(95),__esModule:!0}},function(a,b,c){a.exports={"default":c(96),__esModule:!0}},function(a,b,c){a.exports={"default":c(97),__esModule:!0}},function(a,b,c){"use strict";b.__esModule=!0;var d=c(44),e=function(a){return a&&a.__esModule?a:{"default":a}}(d);b["default"]=e["default"]||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}b.__esModule=!0;var e=c(74),f=d(e),g=c(73),h=d(g);b["default"]=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,i=h["default"](a);!(d=(g=i.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&i["return"]&&i["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(f["default"](Object(b)))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(a,b,c){c(18),c(126),a.exports=c(0).Array.from},function(a,b,c){c(24),c(18),a.exports=c(124)},function(a,b,c){c(24),c(18),a.exports=c(125)},function(a,b,c){c(65),c(18),c(24),c(128),c(138),c(137),c(136),a.exports=c(0).Map},function(a,b,c){c(129),a.exports=c(0).Number.isInteger},function(a,b,c){c(130),a.exports=c(0).Object.assign},function(a,b,c){c(131);var d=c(0).Object;a.exports=function(a,b){return d.create(a,b)}},function(a,b,c){c(132);var d=c(0).Object;a.exports=function(a,b,c){return d.defineProperty(a,b,c)}},function(a,b,c){c(139),a.exports=c(0).Object.entries},function(a,b,c){c(133),a.exports=c(0).Object.getPrototypeOf},function(a,b,c){c(134),a.exports=c(0).Object.setPrototypeOf},function(a,b,c){c(135),c(65),c(140),c(141),a.exports=c(0).Symbol},function(a,b,c){c(18),c(24),a.exports=c(41).f("iterator")},function(a,b){a.exports=function(){}},function(a,b,c){var d=c(19);a.exports=function(a,b){var c=[];return d(a,!1,c.push,c,b),c}},function(a,b,c){var d=c(12),e=c(22),f=c(123);a.exports=function(a){return function(b,c,g){var h,i=d(b),j=e(i.length),k=f(g,j);if(a&&c!=c){for(;j>k;)if((h=i[k++])!=h)return!0}else for(;j>k;k++)if((a||k in i)&&i[k]===c)return a||k||0;return!a&&-1}}},function(a,b,c){var d=c(9),e=c(31),f=c(17),g=c(22),h=c(103);a.exports=function(a,b){var c=1==a,i=2==a,j=3==a,k=4==a,l=6==a,m=5==a||l,n=b||h;return function(b,h,o){for(var p,q,r=f(b),s=e(r),t=d(h,o,3),u=g(s.length),v=0,w=c?n(b,u):i?n(b,0):void 0;u>v;v++)if((m||v in s)&&(p=s[v],q=t(p,v,r),a))if(c)w[v]=q;else if(q)switch(a){case 3:return!0;case 5:return p;case 6:return v;case 2:w.push(p)}else if(k)return!1;return l?-1:j||k?k:w}}},function(a,b,c){var d=c(6),e=c(55),f=c(2)("species");a.exports=function(a){var b;return e(a)&&(b=a.constructor,"function"!=typeof b||b!==Array&&!e(b.prototype)||(b=void 0),d(b)&&null===(b=b[f])&&(b=void 0)),void 0===b?Array:b}},function(a,b,c){var d=c(102);a.exports=function(a,b){return new(d(a))(b)}},function(a,b,c){"use strict";var d=c(3).f,e=c(20),f=c(62),g=c(9),h=c(51),i=c(19),j=c(32),k=c(57),l=c(121),m=c(4),n=c(34).fastKey,o=c(64),p=m?"_s":"size",q=function(a,b){var c,d=n(b);if("F"!==d)return a._i[d];for(c=a._f;c;c=c.n)if(c.k==b)return c};a.exports={getConstructor:function(a,b,c,j){var k=a(function(a,d){h(a,k,b,"_i"),a._t=b,a._i=e(null),a._f=void 0,a._l=void 0,a[p]=0,void 0!=d&&i(d,c,a[j],a)});return f(k.prototype,{clear:function(){for(var a=o(this,b),c=a._i,d=a._f;d;d=d.n)d.r=!0,d.p&&(d.p=d.p.n=void 0),delete c[d.i];a._f=a._l=void 0,a[p]=0},"delete":function(a){var c=o(this,b),d=q(c,a);if(d){var e=d.n,f=d.p;delete c._i[d.i],d.r=!0,f&&(f.n=e),e&&(e.p=f),c._f==d&&(c._f=e),c._l==d&&(c._l=f),c[p]--}return!!d},forEach:function(a){o(this,b);for(var c,d=g(a,arguments.length>1?arguments[1]:void 0,3);c=c?c.n:this._f;)for(d(c.v,c.k,this);c&&c.r;)c=c.p},has:function(a){return!!q(o(this,b),a)}}),m&&d(k.prototype,"size",{get:function(){return o(this,b)[p]}}),k},def:function(a,b,c){var d,e,f=q(a,b);return f?f.v=c:(a._l=f={i:e=n(b,!0),k:b,v:c,p:d=a._l,n:void 0,r:!1},a._f||(a._f=f),d&&(d.n=f),a[p]++,"F"!==e&&(a._i[e]=f)),a},getEntry:q,setStrong:function(a,b,c){j(a,b,function(a,c){this._t=o(a,b),this._k=c,this._l=void 0},function(){for(var a=this,b=a._k,c=a._l;c&&c.r;)c=c.p;return a._t&&(a._l=c=c?c.n:a._t._f)?"keys"==b?k(0,c.k):"values"==b?k(0,c.v):k(0,[c.k,c.v]):(a._t=void 0,k(1))},c?"entries":"values",!c,!0),l(b)}}},function(a,b,c){var d=c(27),e=c(99);a.exports=function(a){return function(){if(d(this)!=a)throw TypeError(a+"#toJSON isn't generic");return e(this)}}},function(a,b,c){"use strict";var d=c(5),e=c(1),f=c(34),g=c(10),h=c(8),i=c(62),j=c(19),k=c(51),l=c(6),m=c(21),n=c(3).f,o=c(101)(0),p=c(4);a.exports=function(a,b,c,q,r,s){var t=d[a],u=t,v=r?"set":"add",w=u&&u.prototype,x={};return p&&"function"==typeof u&&(s||w.forEach&&!g(function(){(new u).entries().next()}))?(u=b(function(b,c){k(b,u,a,"_c"),b._c=new t,void 0!=c&&j(c,r,b[v],b)}),o("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(a){var b="add"==a||"set"==a;a in w&&(!s||"clear"!=a)&&h(u.prototype,a,function(c,d){if(k(this,u,a),!b&&s&&!l(c))return"get"==a&&void 0;var e=this._c[a](0===c?0:c,d);return b?this:e})}),s||n(u.prototype,"size",{get:function(){return this._c.size}})):(u=q.getConstructor(b,a,r,v),i(u.prototype,c),f.NEED=!0),m(u,a),x[a]=u,e(e.G+e.W+e.F,x),s||q.setStrong(u,a,r),u}},function(a,b,c){"use strict";var d=c(3),e=c(16);a.exports=function(a,b,c){b in a?d.f(a,b,e(0,c)):a[b]=c}},function(a,b,c){var d=c(14),e=c(35),f=c(15);a.exports=function(a){var b=d(a),c=e.f;if(c)for(var g,h=c(a),i=f.f,j=0;h.length>j;)i.call(a,g=h[j++])&&b.push(g);return b}},function(a,b,c){var d=c(5).document;a.exports=d&&d.documentElement},function(a,b,c){var d=c(6),e=Math.floor;a.exports=function(a){return!d(a)&&isFinite(a)&&e(a)===a}},function(a,b,c){"use strict";var d=c(20),e=c(16),f=c(21),g={};c(8)(g,c(2)("iterator"),function(){return this}),a.exports=function(a,b,c){a.prototype=d(g,{next:e(1,c)}),f(a,b+" Iterator")}},function(a,b,c){var d=c(2)("iterator"),e=!1;try{var f=[7][d]();f["return"]=function(){e=!0},Array.from(f,function(){throw 2})}catch(a){}a.exports=function(a,b){if(!b&&!e)return!1;var c=!1;try{var f=[7],g=f[d]();g.next=function(){return{done:c=!0}},f[d]=function(){return g},a(f)}catch(a){}return c}},function(a,b,c){"use strict";var d=c(14),e=c(35),f=c(15),g=c(17),h=c(31),i=Object.assign;a.exports=!i||c(10)(function(){var a={},b={},c=Symbol(),d="abcdefghijklmnopqrst";return a[c]=7,d.split("").forEach(function(a){b[a]=a}),7!=i({},a)[c]||Object.keys(i({},b)).join("")!=d})?function(a,b){for(var c=g(a),i=arguments.length,j=1,k=e.f,l=f.f;i>j;)for(var m,n=h(arguments[j++]),o=k?d(n).concat(k(n)):d(n),p=o.length,q=0;p>q;)l.call(n,m=o[q++])&&(c[m]=n[m]);return c}:i},function(a,b,c){var d=c(3),e=c(7),f=c(14);a.exports=c(4)?Object.defineProperties:function(a,b){e(a);for(var c,g=f(b),h=g.length,i=0;h>i;)d.f(a,c=g[i++],b[c]);return a}},function(a,b,c){var d=c(12),e=c(59).f,f={}.toString,g="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],h=function(a){try{return e(a)}catch(a){return g.slice()}};a.exports.f=function(a){return g&&"[object Window]"==f.call(a)?h(a):e(d(a))}},function(a,b,c){var d=c(1),e=c(0),f=c(10);a.exports=function(a,b){var c=(e.Object||{})[a]||Object[a],g={};g[a]=b(c),d(d.S+d.F*f(function(){c(1)}),"Object",g)}},function(a,b,c){var d=c(14),e=c(12),f=c(15).f;a.exports=function(a){return function(b){for(var c,g=e(b),h=d(g),i=h.length,j=0,k=[];i>j;)f.call(g,c=h[j++])&&k.push(a?[c,g[c]]:g[c]);return k}}},function(a,b,c){"use strict";var d=c(1),e=c(50),f=c(9),g=c(19);a.exports=function(a){d(d.S,a,{from:function(a){var b,c,d,h,i=arguments[1];return e(this),b=void 0!==i,b&&e(i),void 0==a?new this:(c=[],b?(d=0,h=f(i,arguments[2],2),g(a,!1,function(a){c.push(h(a,d++))})):g(a,!1,c.push,c),new this(c))}})}},function(a,b,c){"use strict";var d=c(1);a.exports=function(a){d(d.S,a,{of:function(){for(var a=arguments.length,b=new Array(a);a--;)b[a]=arguments[a];return new this(b)}})}},function(a,b,c){var d=c(6),e=c(7),f=function(a,b){if(e(a),!d(b)&&null!==b)throw TypeError(b+": can't set as prototype!")};a.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(a,b,d){try{d=c(9)(Function.call,c(58).f(Object.prototype,"__proto__").set,2),d(a,[]),b=!(a instanceof Array)}catch(a){b=!0}return function(a,c){return f(a,c),b?a.__proto__=c:d(a,c),a}}({},!1):void 0),check:f}},function(a,b,c){"use strict";var d=c(5),e=c(0),f=c(3),g=c(4),h=c(2)("species");a.exports=function(a){var b="function"==typeof e[a]?e[a]:d[a];g&&b&&!b[h]&&f.f(b,h,{configurable:!0,get:function(){return this}})}},function(a,b,c){var d=c(38),e=c(29);a.exports=function(a){return function(b,c){var f,g,h=String(e(b)),i=d(c),j=h.length;return 0>i||i>=j?a?"":void 0:(f=h.charCodeAt(i),55296>f||f>56319||i+1===j||(g=h.charCodeAt(i+1))<56320||g>57343?a?h.charAt(i):f:a?h.slice(i,i+2):g-56320+(f-55296<<10)+65536)}}},function(a,b,c){var d=c(38),e=Math.max,f=Math.min;a.exports=function(a,b){return a=d(a),0>a?e(a+b,0):f(a,b)}},function(a,b,c){var d=c(7),e=c(42);a.exports=c(0).getIterator=function(a){var b=e(a);if("function"!=typeof b)throw TypeError(a+" is not iterable!");return d(b.call(a))}},function(a,b,c){var d=c(27),e=c(2)("iterator"),f=c(13);a.exports=c(0).isIterable=function(a){var b=Object(a);return void 0!==b[e]||"@@iterator"in b||f.hasOwnProperty(d(b))}},function(a,b,c){"use strict";var d=c(9),e=c(1),f=c(17),g=c(56),h=c(54),i=c(22),j=c(107),k=c(42);e(e.S+e.F*!c(112)(function(a){Array.from(a)}),"Array",{from:function(a){var b,c,e,l,m=f(a),n="function"==typeof this?this:Array,o=arguments.length,p=o>1?arguments[1]:void 0,q=void 0!==p,r=0,s=k(m);if(q&&(p=d(p,o>2?arguments[2]:void 0,2)),void 0==s||n==Array&&h(s))for(b=i(m.length),c=new n(b);b>r;r++)j(c,r,q?p(m[r],r):m[r]);else for(l=s.call(m),c=new n;!(e=l.next()).done;r++)j(c,r,q?g(l,p,[e.value,r],!0):e.value);return c.length=r,c}})},function(a,b,c){"use strict";var d=c(98),e=c(57),f=c(13),g=c(12);a.exports=c(32)(Array,"Array",function(a,b){this._t=g(a),this._i=0,this._k=b},function(){var a=this._t,b=this._k,c=this._i++;return!a||c>=a.length?(this._t=void 0,e(1)):"keys"==b?e(0,c):"values"==b?e(0,a[c]):e(0,[c,a[c]])},"values"),f.Arguments=f.Array,d("keys"),d("values"),d("entries")},function(a,b,c){"use strict";var d=c(104),e=c(64);a.exports=c(106)("Map",function(a){return function(){return a(this,arguments.length>0?arguments[0]:void 0)}},{get:function(a){var b=d.getEntry(e(this,"Map"),a);return b&&b.v},set:function(a,b){return d.def(e(this,"Map"),0===a?0:a,b)}},d,!0)},function(a,b,c){var d=c(1);d(d.S,"Number",{isInteger:c(110)})},function(a,b,c){var d=c(1);d(d.S+d.F,"Object",{assign:c(113)})},function(a,b,c){var d=c(1);d(d.S,"Object",{create:c(20)})},function(a,b,c){var d=c(1);d(d.S+d.F*!c(4),"Object",{defineProperty:c(3).f})},function(a,b,c){var d=c(17),e=c(60);c(116)("getPrototypeOf",function(){return function(a){return e(d(a))}})},function(a,b,c){var d=c(1);d(d.S,"Object",{setPrototypeOf:c(120).set})},function(a,b,c){"use strict";var d=c(5),e=c(11),f=c(4),g=c(1),h=c(63),i=c(34).KEY,j=c(10),k=c(37),l=c(21),m=c(23),n=c(2),o=c(41),p=c(40),q=c(108),r=c(55),s=c(7),t=c(6),u=c(12),v=c(39),w=c(16),x=c(20),y=c(115),z=c(58),A=c(3),B=c(14),C=z.f,D=A.f,E=y.f,F=d.Symbol,G=d.JSON,H=G&&G.stringify,I=n("_hidden"),J=n("toPrimitive"),K={}.propertyIsEnumerable,L=k("symbol-registry"),M=k("symbols"),N=k("op-symbols"),O=Object.prototype,P="function"==typeof F,Q=d.QObject,R=!Q||!Q.prototype||!Q.prototype.findChild,S=f&&j(function(){return 7!=x(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a})?function(a,b,c){var d=C(O,b);d&&delete O[b],D(a,b,c),d&&a!==O&&D(O,b,d)}:D,T=function(a){var b=M[a]=x(F.prototype);return b._k=a,b},U=P&&"symbol"==typeof F.iterator?function(a){return"symbol"==typeof a}:function(a){return a instanceof F},V=function(a,b,c){return a===O&&V(N,b,c),s(a),b=v(b,!0),s(c),e(M,b)?(c.enumerable?(e(a,I)&&a[I][b]&&(a[I][b]=!1),c=x(c,{enumerable:w(0,!1)})):(e(a,I)||D(a,I,w(1,{})),a[I][b]=!0),S(a,b,c)):D(a,b,c)},W=function(a,b){s(a);for(var c,d=q(b=u(b)),e=0,f=d.length;f>e;)V(a,c=d[e++],b[c]);return a},X=function(a,b){return void 0===b?x(a):W(x(a),b)},Y=function(a){var b=K.call(this,a=v(a,!0));return!(this===O&&e(M,a)&&!e(N,a))&&(!(b||!e(this,a)||!e(M,a)||e(this,I)&&this[I][a])||b)},Z=function(a,b){if(a=u(a),b=v(b,!0),a!==O||!e(M,b)||e(N,b)){var c=C(a,b);return!c||!e(M,b)||e(a,I)&&a[I][b]||(c.enumerable=!0),c}},$=function(a){for(var b,c=E(u(a)),d=[],f=0;c.length>f;)e(M,b=c[f++])||b==I||b==i||d.push(b);return d},_=function(a){for(var b,c=a===O,d=E(c?N:u(a)),f=[],g=0;d.length>g;)!e(M,b=d[g++])||c&&!e(O,b)||f.push(M[b]);return f};P||(F=function(){if(this instanceof F)throw TypeError("Symbol is not a constructor!");var a=m(arguments.length>0?arguments[0]:void 0),b=function(c){this===O&&b.call(N,c),e(this,I)&&e(this[I],a)&&(this[I][a]=!1),S(this,a,w(1,c))};return f&&R&&S(O,a,{configurable:!0,set:b}),T(a)},h(F.prototype,"toString",function(){return this._k}),z.f=Z,A.f=V,c(59).f=y.f=$,c(15).f=Y,c(35).f=_,f&&!c(33)&&h(O,"propertyIsEnumerable",Y,!0),o.f=function(a){return T(n(a))}),g(g.G+g.W+g.F*!P,{Symbol:F});for(var aa="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ba=0;aa.length>ba;)n(aa[ba++]);for(var ca=B(n.store),da=0;ca.length>da;)p(ca[da++]);g(g.S+g.F*!P,"Symbol",{"for":function(a){return e(L,a+="")?L[a]:L[a]=F(a)},keyFor:function(a){if(!U(a))throw TypeError(a+" is not a symbol!");for(var b in L)if(L[b]===a)return b},useSetter:function(){R=!0},useSimple:function(){R=!1}}),g(g.S+g.F*!P,"Object",{create:X,defineProperty:V,defineProperties:W,getOwnPropertyDescriptor:Z,getOwnPropertyNames:$,getOwnPropertySymbols:_}),G&&g(g.S+g.F*(!P||j(function(){var a=F();return"[null]"!=H([a])||"{}"!=H({a:a})||"{}"!=H(Object(a))})),"JSON",{stringify:function(a){for(var b,c,d=[a],e=1;arguments.length>e;)d.push(arguments[e++]);return c=b=d[1],!t(b)&&void 0===a||U(a)?void 0:(r(b)||(b=function(a,b){return"function"==typeof c&&(b=c.call(this,a,b)),U(b)?void 0:b}),d[1]=b,H.apply(G,d))}}),F.prototype[J]||c(8)(F.prototype,J,F.prototype.valueOf),l(F,"Symbol"),l(Math,"Math",!0),l(d.JSON,"JSON",!0)},function(a,b,c){c(118)("Map")},function(a,b,c){c(119)("Map")},function(a,b,c){var d=c(1);d(d.P+d.R,"Map",{toJSON:c(105)("Map")})},function(a,b,c){var d=c(1),e=c(117)(!0);d(d.S,"Object",{entries:function(a){return e(a)}})},function(a,b,c){c(40)("asyncIterator")},function(a,b,c){c(40)("observable")}])}).call(window.lpTag);window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.ThemeConfiguratorFactory=function(a,b){b=b||{};var c=lpTag.unifiedWindow.ThemeConfigurationTranslator,d=lpTag.unifiedWindow.ThemeConfigurator,e=lpTag.unifiedWindow.applicationUtils;b.clone="undefined"==typeof b.clone?!0:b.clone;b.clone&&(a=e.cloneObj(a||{}));a&&"2.0"!==a.v&&(a=(new c).translate(a));return new d(a)};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.ThemeConfiguration=lpTag.unifiedWindow.ThemeConfiguration||{};lpTag.unifiedWindow.ThemeConfiguration.styleInference={mainArea:{"background-color":[{target:"surveyArea"},{target:"dialogArea"},{target:"transcriptArea"}]},transcript_message:{"font-family":[{target:"surveyArea"},{target:"dialogArea"}],color:[{target:"cancel_button"},{target:"surveyArea"},{target:"dialogArea"}]},top:{"background-color":[{target:"button"},{target:"close_survey_button"},{target:"star",prop:"color"}]},top_text:{color:[{target:"button"},{target:"close_survey_button"}]},transcript_bubble_agent:{"border-color":[{target:"transcript_bubble_agentArrowBorder",prop:"border-right-color",override:!0}],"background-color":[{target:"transcript_bubble_agentArrow",prop:"border-right-color",override:!0}]},transcript_bubble_visitor:{"border-color":[{target:"transcript_bubble_visitorArrowBorder",prop:"border-left-color",override:!0}],"background-color":[{target:"transcript_bubble_visitorArrow",prop:"border-left-color",override:!0}]},input:{"border-radius":[{target:"mainArea"},{target:"maximizedWindow"},{target:"surveyArea"},{target:"dialogArea"},{target:"actionsMenu"},{target:"sliderMaximizedWindow"}]}};lpTag.unifiedWindow.ThemeConfiguration.options={ICON_SET:{name:"icon_set",query:'[data-lp-type="icon"]',values:{DARK:{name:"dark",cssClass:"lp_icon-dark"},BRIGHT:{name:"bright",cssClass:"lp_icon-white"}}},MINIMIZE_ICON:{name:"minimize_icon",query:'[data-lp-point="minimize_icon"]',values:{DEFAULT:{name:"default",cssClass:"lp_minimize-icon"},CHEVRON:{name:"chevron",cssClass:"lp_chevron-icon"}}},LOCATION:{name:"location",values:{TOP_LEFT:{name:"top_left",cssClass:"lp_top-left"},TOP_RIGHT:{name:"top_right",cssClass:"lp_top-right"},MIDDLE_RIGHT:{name:"middle_right",cssClass:"lp_middle-right"},BOTTOM_RIGHT:{name:"bottom_right",cssClass:"lp_bottom-right"},BOTTOM_LEFT:{name:"bottom_left",cssClass:"lp_bottom-left"},MIDDLE_LEFT:{name:"middle_left",cssClass:"lp_middle-left"}}},TOP_TEXT:{name:"top_text"},TRANSCRIPT_BUBBLE_VISITOR_TEXT:{name:"transcript_bubble_visitor_text"},TRANSCRIPT_BUBBLE_AGENT_TEXT:{name:"transcript_bubble_agent_text"},TRANSCRIPT_TIME:{name:"transcript_time"},TRANSCRIPT_MESSAGE:{name:"transcript_message"},INPUT_TEXT:{name:"input_text"},ACTIONSMENU_ACTIONITEM_TEXT:{name:"actionsMenu_actionItem_text"},TRANSCRIPT_BUBBLE_RICH_CONTENT:{name:"transcript_bubble_rich_content"},TRANSCRIPT_BUBBLE_VISITOR_PARENT:{name:"transcript_bubble_visitor_parent",query:'[data-lp-cust-id = "transcript_bubble_visitor"]',values:{DEFAULT:{name:"default",cssClass:"lp_chat_line"},CURVY:{name:"curvy",cssClass:"lp_new_chat_line"}}},TRANSCRIPT_BUBBLE_VISITOR_ARROW_BORDER_PARENT:{name:"transcript_bubble_visitor_parent",query:'[data-lp-cust-id = "transcript_bubble_visitorArrowBorder"]',values:{DEFAULT:{name:"default",cssClass:"lp_chat_arrow_border"},CURVY:{name:"curvy",cssClass:"lpHide"}}},TRANSCRIPT_BUBBLE_VISITOR_ARROW_PARENT:{name:"transcript_bubble_visitor_parent",query:'[data-lp-cust-id = "transcript_bubble_visitorArrow"]',values:{DEFAULT:{name:"default",cssClass:"lp_chat_arrow"},CURVY:{name:"curvy",cssClass:"lpHide"}}},TRANSCRIPT_BUBBLE_AGENT_PARENT:{name:"transcript_bubble_agent_parent",query:'[data-lp-cust-id = "transcript_bubble_agent"]',values:{DEFAULT:{name:"default",cssClass:"lp_chat_line"},CURVY:{name:"curvy",cssClass:"lp_new_chat_line"}}},TRANSCRIPT_BUBBLE_AGENT_ARROW_BORDER_PARENT:{name:"transcript_bubble_agent_parent",query:'[data-lp-cust-id = "transcript_bubble_agentArrowBorder"]',values:{DEFAULT:{name:"default",cssClass:"lp_chat_arrow_border"},CURVY:{name:"curvy",cssClass:"lpHide"}}},TRANSCRIPT_BUBBLE_AGENT_ARROW_PARENT:{name:"transcript_bubble_agent_parent",query:'[data-lp-cust-id = "transcript_bubble_agentArrow"]',values:{DEFAULT:{name:"default",cssClass:"lp_chat_arrow"},CURVY:{name:"curvy",cssClass:"lpHide"}}}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.ThemeConfigurationTranslator=function(){function a(a){return"2.0"===a.v?a:b(a)}function b(a){var b=new g;a.style&&d(a.style,b);if(a.iconSet)for(var c in a.iconSet)b.setOption(c,h.option.ICON_SET.name,a.iconSet[c]);a.meta&&b.setMeta(a.meta);f(b);var e=b.getConfiguration();return e}function c(a,b,c,d){i.isStyleColorProperty(b)?d.setStyle(a,b,"{{colors."+c+"}}"):"image"===b?d.setProperty(a,"src",c):"font"===b?d.setStyle(a,b,"{{fonts."+c+"}}"):d.setStyle(a,b,c)}function d(a,b,e){var f;e=e||"";if("object"==typeof a){f=a;for(var g in f)"object"!=typeof f[g]?c(e,g,f[g],b):d(f[g],b,(e?e+"_":e)+g)}}function e(a){if(a){if(a.indexOf("_white")>-1)return h.options.ICON_SET.values.BRIGHT.name;if(a.indexOf("_normal")>-1)return h.options.ICON_SET.values.DARK.name}}function f(a){var b=e(a.getProperty("top_minimizeButton","src")),c=e(a.getProperty("input_buttonEnabled","src"));a.removeItem("top_minimizeButton");a.removeItem("top_closeButton");a.removeItem("input_buttonEnabled");a.removeItem("input_buttonDisabled");var d=a.getStyle("transcriptArea","background-color");"undefined"!=typeof d&&a.setStyle("mainArea","background-color",d);a.removeItem("transcriptArea");"undefined"!=typeof b&&a.setOption("top",h.options.ICON_SET.name,b);"undefined"!=typeof c&&a.setOption("input",h.options.ICON_SET.name,c)}var g=lpTag.unifiedWindow.ThemeConfigurator,h=lpTag.unifiedWindow.ThemeConfiguration,i=lpTag.unifiedWindow.AWCUtils;return{translate:a}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.ThemeConfigurator=function(a){function b(a,b,c,d,e){d=y.trim(""+d);if("style"===b&&"undefined"==typeof d)o(a,b,c);else if("undefined"==typeof c)o(a,b);else if(e||!w[a]||!w[a].attrs[b][c]){w[a]=w[a]||{};w[a].attrs=w[a].attrs||{};w[a].attrs[b]=w[a].attrs[b]||{};if("style"===b){var f=q(c);if(d&&!d.match(/\{\{(.*)\}\}/)&&f){var g=t(f,d);j(f,g,d);w[a].attrs[b][c]=p(f,g)}else w[a].attrs[b][c]=d}else w[a].attrs[b]=c}}function c(a){w[a]&&delete w[a]}function d(a,b,c){w[a]=w[a]||{};w[a].options=w[a].options||{};w[a].options[b]=c}function e(a,b){return"undefined"!=typeof w[a]&&"undefined"!=typeof w[a].options?u(w[a].options[b]):void 0}function f(a,b,c){return"undefined"!=typeof w[a]&&"undefined"!=typeof w[a].attrs?u("undefined"!=typeof w[a].attrs[b]&&"undefined"!=typeof c?w[a].attrs[b][c]:w[a].attrs[b]):void 0}function g(a,b){if("undefined"==typeof b&&w[a]&&w[a].attrs&&w[a].attrs.style){var c,d={};for(var e in w[a].attrs.style){c=u(w[a].attrs.style[e]);d[e]=c}return d}return f(a,"style",b)}function h(a,c,d,e){e="boolean"==typeof e?e:!0;if("object"==typeof c)for(var f in c)h(a,f,c[f],e);else b(a,"style",c,d,e)}function i(a,b){return"undefined"!=typeof v&&"undefined"!=typeof v[a]?v[a][b]:void 0}function j(a,b,c){v=v||{};v[a]=v[a]||{};v[a][b]=c}function k(a){v=y.cloneObj(a)}function l(a){a=a||{};a.normalize="undefined"==typeof a.normalize?!0:a.normalize;var b={config:w,v:"2.0"};"undefined"!=typeof v&&(b.meta=v);return a.normalize?r(b):b}function m(a){var b=[];if(w[a]&&w[a].attrs)for(var c in w[a].attrs)b.push(c);return b}function n(a){w=a&&"2.0"===a.v?a.config:{};v=a&&a.meta||{}}function o(a,b,c){if(w[a]&&w[a].attrs&&w[a].attrs[b])if("undefined"==typeof c)delete w[a].attrs[b];else{delete w[a].attrs[b][c];y.isEmptyLiteral(w[a].attrs[b])&&delete w[a].attrs[b];y.isEmptyLiteral(w[a].attrs)&&delete w[a].attrs;y.isEmptyLiteral(w[a])&&delete w[a]}}function p(a,b){return"{{"+[a,b].join(".")+"}}"}function q(a){return x.isStyleColorProperty(a)?"colors":"font-family"===a?"fonts":void 0}function r(a){var b=y.cloneObj(a.meta),c=JSON.stringify(a);c=s(b,c,"colors");c=s(b,c,"fonts");var d=JSON.parse(c);d.meta=b;return d}function s(a,b,c){for(var d,e=y.objectKeysAsArray(a[c]),f=1,g=0;g<e.length;g++){d=e[g];if(-1===b.indexOf("{{"+c+"."+d+"}}"))delete a[c][d];else{b=b.replace(new RegExp("{{"+c+"."+d+"}}","g"),"{{"+c+"."+f+"}}");a[c][f]=a[c][d];d!=f&&delete a[c][d];f++}}return b}function t(a,b){if(v&&v[a]){for(var c in v[a])if(v[a][c]===b)return c;for(var d=1;;d++)if(!v[a][d])return d}return 1}function u(a){if("string"==typeof a){var b=a.match(/\{\{(.*)\}\}/);if(b&&2===b.length){var c=b[1].split(".");return i(c[0],c[1])}return a}return a}var v,w,x=lpTag.unifiedWindow.AWCUtils,y=lpTag.unifiedWindow.applicationUtils;n(a);return{removeItem:c,setProperty:b,getProperty:f,getAvailableAttributes:m,setStyle:h,getStyle:g,setOption:d,getOption:e,setMetaProperty:j,setMeta:k,getMetaProperty:i,getConfiguration:l}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.Themer=function(a,b,c){function d(a){var b=window.lpTag.taglets.lpSecureStorage.v;return"https://"+a+"/le_secure_storage/"+(b?b:"")}function e(a,b){var c=P.createDomContainer(a);f(c,b);return c.innerHTML}function f(a,b){b=b||{removeThemeAttrs:!0};var c=b.configuration?new R(b.configuration):I;E(c);var d,e=a.querySelectorAll("["+N+"]");h(a,c);for(var f=0;f<e.length;f++){d=e[f];h(d,c);b.removeThemeAttrs&&m(d)}}function g(a,b){return I.getStyle(a,b)}function h(a,b){var c=a.getAttribute(N);if(c){if(K[c])return;l(a,c,b);i(a,c,b)}}function i(a,b,c){var d,e,f,g=S.options;for(var h in g){d=g[h];f=d.query?a.querySelectorAll(d.query):a;e=c.getOption(b,d.name);j(f,d.values,e)}}function j(a,b,c){var d,e=[];for(var f in b)b[f].name===c?d=b[f].cssClass:e.push(b[f].cssClass);if("undefined"!=typeof d){a=Q.isNodeList(a)?a:[a];for(var g=0;g<a.length;g++){Q.addClassByArray(a[g],d);Q.removeClassByArray(a[g],e)}}}function k(a){var b,c,d,e,f=lpTag.unifiedWindow.ThemeConfiguration.styleInference;
for(var g in f){c=f[g];for(var h in c){d=c[h];b=a.getStyle(g,[h]);if("undefined"!=typeof b)for(var i=0;i<d.length;i++){e=d[i];a.setStyle(e.target,e.prop||h,b,e.override||!1)}}}}function l(a,b,c){for(var d=c.getAvailableAttributes(b),e=0;e<d.length;e++)if("style"===d[e])if(a.getAttribute("style")){var f=n(a,c.getStyle(b));a.setAttribute(d[e],f)}else a.setAttribute(d[e],o(c.getStyle(b)));else"src"===d[e]&&"IMG"===a.tagName?a.setAttribute(d[e],F(c.getProperty(b,"src"))):a.setAttribute(d[e],c.getProperty(b,d[e]))}function m(a){a.removeAttribute(N);a.removeAttribute(O)}function n(a,b){var c=p(a);for(var d in b)c[d]=b[d];return o(c)}function o(a){var b=[];for(var c in a)b.push(c+":"+a[c]);return b.join(";")}function p(a){var b=a.getAttribute("style"),c={};if(b)for(var d,e=b.split(";"),f=0;f<e.length;f++){d=e[f];d=e[f].split(":");c[d[0]]=d[1]}return c}function q(){return{transcript_bubble_visitor:S.options.TRANSCRIPT_BUBBLE_VISITOR_TEXT.name,transcript_bubble_agent:S.options.TRANSCRIPT_BUBBLE_AGENT_TEXT.name,transcript_time:S.options.TRANSCRIPT_TIME.name,transcript_message:S.options.TRANSCRIPT_MESSAGE.name,top:S.options.TOP_TEXT.name,input:S.options.INPUT_TEXT.name,actionsMenu:S.options.ACTIONSMENU_ACTIONITEM_TEXT.name,transcript_bubble_rich_content:S.options.TRANSCRIPT_BUBBLE_RICH_CONTENT}}function r(a,b){T.getValue({key:Z.storage.valueKeys.overridenFontInStorage,appName:Z.storage.appName,site:M,domain:X.secureStorageLocation,success:a,error:b})}function s(a,b,c){T.setValue({key:Z.storage.valueKeys.overridenFontInStorage,appName:Z.storage.appName,site:M,value:a,domain:X.secureStorageLocation,ttl:Y,success:b,error:c})}function t(a){U.debug("Successfully added value to Secure storage for accountId: "+M+" key: "+Z.storage.valueKeys.overridenFontInStorage+" value :"+a)}function u(a){U.error("Secure storage transaction failed with error ",a)}function v(a){if(a&&"string"==typeof a&&a.length>0){U.debug("Successfully retrieved value from Secure storage for accountId: "+M+" key: "+Z.storage.valueKeys.overridenFontInStorage+" value :"+a);L=a}else{L=D();s(L,t,u)}}function w(a){U.error("Secure storage transaction failed with error ",a);L=D();s(L,t,u)}function x(){X.secureStorageDomain=lpTag&&lpTag.csds&&lpTag.csds.getDomain(Z.csds.leCdnDomain);X.secureStorageLocation=d(X.secureStorageDomain)}function y(a,b,c){J=b||{};K=c||{};I=new R(a);M=J.accountId;var d=q();Object.keys(d).forEach(function(a){var b=I.getOption(a,d[a]);"undefined"!=typeof b&&b&&(V[d[a]]=b);b&&"transcript_bubble_agent"===a&&(V.transcript_bubble_rich_content=!0)});if(0!==Object.keys(V).length){x();r(v,w)}}function z(){return["META","STYLE","SCRIPT"]}function A(a,b){return window.getComputedStyle(a,null).getPropertyValue(b)}function B(a){return"object"==typeof HTMLElement?a instanceof HTMLElement:a&&"object"==typeof a&&null!==a&&1===a.nodeType&&"string"==typeof a.nodeName}function C(a){var b=Array.prototype.slice.call(a.getElementsByTagName("*"),0),c=z();return b.filter(function(a){if(a&&a.className&&("string"==typeof a.className||a.className instanceof String)&&a.className.indexOf("lp_")>-1||("string"==typeof a.nodeName||a.nodeName instanceof String)&&c.indexOf(a.nodeName)>-1)return!1;if(a.hasChildNodes())for(var b=0;b<a.childNodes.length;b++)if(1===a.childNodes[b].nodeType)return!1;return!0})}function D(){var a={},b="",c=0,d=C(document);d.forEach(function(d){if(B(d)){var e=A(d,"font-family");a[e]=a[e]>=1?a[e]+1:1;if(a[e]>=c&&"system-ui"!==e){b=e;c=a[e]}}});return b}function E(a){var b=a.getProperty("logoAltText","alt"),c=a.getProperty("logoAltText","title"),d=a.getProperty("logoTarget","title");b!==c&&a.setProperty("logoAltText","title",b);b!==d&&a.setProperty("logoTarget","title",b);var e=a.getProperty("agentImage","src");"undefined"==typeof e&&a.setProperty("agentImage","src",H("agentUrl"));var f=a.getProperty("logoImage","src");"undefined"==typeof f&&a.setProperty("logoImage","src",H("logoUrl"));var g=a.getOption("input",S.options.ICON_SET.name);"undefined"==typeof g&&a.setOption("input",S.options.ICON_SET.name,S.options.ICON_SET.values.DARK.name);var h=a.getOption("action",S.options.ICON_SET.name);"undefined"==typeof a.getOption("actionsMenu",S.options.ICON_SET.name)&&"undefined"!=typeof h&&a.setOption("actionsMenu",S.options.ICON_SET.name,h);W||Object.keys(V).forEach(function(b){if("string"==typeof L&&L.length>0){a.setProperty(b,"style","font-family",L,!0);W=!0}});k(a)}function F(a){var b=H("imagesRepository");return b&&!G(a)?[b,a].join("/"):a}function G(a){return null!==a.match(/^http[s]*/)}function H(a){return J[a]}var I,J,K,L,M,N="data-lp-cust-id",O="data-lp-type",P=lpTag.unifiedWindow.AWCUtils,Q=lpTag.unifiedWindow.applicationUtils,R=lpTag.unifiedWindow.ThemeConfiguratorFactory,S=lpTag.unifiedWindow.ThemeConfiguration,T=lpTag.taglets.lpSecureStorage,U=lpTag.unifiedWindow.log,V={},W=!1,X={},Y=6e5,Z={csds:{leCdnDomain:"leCdnDomain"},storage:{appName:"themerStorage",valueKeys:{overridenFontInStorage:"overridenFontInStorage_$_"+document.URL}}};y(a,b,c);return{processHTML:e,processDomEl:f,getStyle:g}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.defaultStyle={v:"2.0",config:{logo:{attrs:{style:{"text-align":"left","background-color":"{{colors.3}}"}}},transcript_time:{attrs:{style:{color:"{{colors.6}}","font-style":"normal","font-family":"{{fonts.1}}","font-weight":"normal"}}},transcript_bubble_visitor:{attrs:{style:{"background-color":"{{colors.3}}","border-color":"{{colors.4}}"}}},actionsMenu_actionItem_text:{attrs:{style:{color:"{{colors.7}}","font-style":"normal","font-family":"{{fonts.1}}","font-weight":"normal"}}},input_text:{attrs:{style:{color:"{{colors.2}}","font-style":"normal","font-family":"{{fonts.1}}","font-weight":"normal"}}},transcript_bubble_agent_text:{attrs:{style:{color:"{{colors.3}}","font-style":"normal","font-family":"{{fonts.1}}","font-weight":"normal"}}},agent:{attrs:{style:{"background-color":"{{colors.3}}"}}},transcript_message:{attrs:{style:{color:"{{colors.6}}","font-style":"normal","font-family":"{{fonts.1}}","font-weight":"normal"}}},transcript_bubble_visitor_text:{attrs:{style:{color:"{{colors.5}}","font-style":"normal","font-family":"{{fonts.1}}","font-weight":"normal"}}},transcript_bubble_visitorArrowBorder:{attrs:{style:{"border-left-color":"{{colors.4}}"}}},transcript_bubble_agent:{attrs:{style:{"background-color":"{{colors.1}}","border-color":"{{colors.4}}"}}},mainArea:{attrs:{style:{"background-color":"{{colors.3}}"}}},transcript_bubble_agentArrowBorder:{attrs:{style:{"border-right-color":"{{colors.4}}"}}},input:{attrs:{style:{color:"{{colors.6}}","font-style":"normal","background-color":"{{colors.3}}","font-family":"{{fonts.1}}","font-weight":"normal"}},options:{icon_set:"dark"}},transcript_bubble_visitorArrow:{attrs:{style:{"border-left-color":"{{colors.3}}"}}},actionsMenu:{attrs:{style:{"background-color":"{{colors.3}}"}}},action:{options:{icon_set:"dark"}},top_text:{attrs:{style:{color:"{{colors.3}}","font-style":"normal","font-family":"{{fonts.1}}","font-weight":"normal"}}},transcript_bubble_agentArrow:{attrs:{style:{"border-right-color":"{{colors.1}}"}}},top:{attrs:{style:{"background-color":"{{colors.1}}"}},options:{icon_set:"bright"}}},meta:{colors:{3:"#FFFFFF",2:"#000000",1:"#0363ad",7:"#6d6e71",6:"#6D6E70",5:"#404041",4:"#b6b6b6",8:"#134cd1"},fonts:{1:"Arial,Helvetica,sans-serif"}}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.AWCUtils=function(){function a(a){for(var b=["background-color","border-left-color","border-right-color","border-top-color","border-bottom-color","border-color","color"],c=0;c<b.length;c++)if(b[c]===a)return!0;return!1}function b(a){var b=document.createElement("div");c.isDomNode(a)?b.appendChild(a):b.innerHTML=a;return b}var c=lpTag.unifiedWindow.applicationUtils;return{createDomContainer:b,isStyleColorProperty:a}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.soundManager=function(a,b,c,d){function e(a,b,c){r=c.audioRepository;v=b;w=a.uiModel;x=lpTag.unifiedWindow.uiModelPath;y=c.poppedOut;z=c.external;s=h();t=l();u=!!t;a.chatModel.bind(lpTag.unifiedWindow.chatModelPath.LINES,p,this,!1);if(u)for(var d in B)B.hasOwnProperty(d)&&i(B[d])}function f(){return(v.isDesktop()||v.isAndroid())&&w.get(x.WINDOW_SOUND)&&(!y&&o()||y&&!o()||z)}function g(a){function b(b){a.template=b;c.innerHTML=a.template;document.body.appendChild(c);a.callback&&"function"==typeof a.callback&&a.callback.call(null,c)}var c=document.createElement("audio");c.style.position="absolute";c.style.left="-1000px";c.style.top="-1000px";a.templateFile?lpTag.unifiedWindow.BaseViewController.prototype.loadResource(a.templateFile,b):b(a.template)}function h(){var a=document.createElement("audio"),b=!!a.canPlayType;a=null;return b&&v.isAudioSupported()}function i(a){var b;if(a.fileName){b=document.querySelector(A);if(b){a.audioTag=b;j(a)()}else g(s?{template:"<audio data-lp-point='audio_tag' hidden preload='auto'></audio>",callback:j(a)}:{template:"<object data-lp-point='audio_tag' classid='clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6' style='display:none'><param name='uimode' value='invisible'><param name='autostart' value='false'></object>",callback:j(a)})}}function j(a){return function(){a.audioTag||(a.audioTag=document.querySelector(A));if(a.audioTag&&!c.connectorsSfConfig){var b=r+"/"+a.fileName+"."+t;s?a.audioTag.src=b:a.audioTag.url=b;s&&setTimeout(function(){a.audioTag.volume=0;a.audioTag.play()},10)}}}function k(){var a=document.createElement("audio"),b=!(!a.canPlayType||!a.canPlayType('audio/wav; codecs="1"').replace(/no/,""));a=null;return b}function l(){var a;if(s){a="mp3";k()&&(a="wav")}return a}function m(a){if(u&&f()&&a.audioTag&&!c.connectorsSfConfig&&q())if(s){a.audioTag.volume=C;a.audioTag.play()}else a.audioTag.controls.play()}function n(){return w.get(x.WINDOW_MAXIMIZED)}function o(){return w.get(x.WINDOW_EMBEDDED)}function p(a){var b=!1;if(a&&a.newValue)for(var c=0;c<a.newValue.length;c++)"agent"!==a.newValue[c].source||a.newValue[c].history||(b=!0);b&&m(n()?B.NEW_LINE_MAX:B.NEW_LINE_MIN)}function q(){return!(d&&d.isSupported&&d.nativeEnabled()&&d.permissionGranted()&&b.isMobile())}var r,s,t,u,v,w,x,y,z,A='audio[data-lp-point="audio_tag"]',B={NEW_LINE_MIN:{fileName:"systemSoundEffect"},NEW_LINE_MAX:{fileName:"kpSoundEffect"}},C=1;e(a,b,c)};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};window.lpTag.uiframework=window.lpTag.uiframework||{};lpTag.uiframework.scrollManager=function(a){function b(a,b){x=lpTag.unifiedWindow.uiModelPath;u=a.isIOS();v=a.isDesktop();w=b}function c(a,b){if(!v){("undefined"==typeof b||null===b)&&(b=!0);n(a,z);A.push({view:a,bounce:b});!y&&w.get(x.WINDOW_MAXIMIZED)&&e()}}function d(a){if(!v){o(a,z);for(var b=[],c=0;c<A.length;c++)A[c].view!==a&&b.push(A[c]);A=b;0===A.length&&f()}}function e(){if(!y&&!v&&0!==A.length){document.body.addEventListener("touchmove",j,!1);document.body.addEventListener("touchstart",g,!1);document.body.addEventListener("touchend",h,!1);y=!0}}function f(){if(y&&!v){document.body.removeEventListener("touchmove",j);document.body.removeEventListener("touchstart",g);document.body.removeEventListener("touchend",h);y=!1}}function g(a){if(r){clearTimeout(r);r=null;i()}q=!1;F=!0;s=!1;B=a.touches[0].clientY;C=B;D=-1;p=null}function h(a){if(p&&s){q=!1;var b=E/400;p.style[m()]="all "+b+"s ease-out";p.style.webkitTransform="translateY(0px)";F=!1;r&&clearTimeout(r);r=setTimeout(i,1e3*b+50)}}function i(){if(p){p.style[m()]="";delete p.style[m()];p=null;D=-1}}function j(b){var c=!1;if(q)c=!0;else{c=k(b);q=!0}if(c){if(p&&A[D].bounce){s=!0;var d,e=b.touches[0].clientY-C;d=u?[{height:.1*a.innerHeight,scale:.85},{height:.3*a.innerHeight,scale:.55},{height:.5*a.innerHeight,scale:.35},{height:.75*a.innerHeight,scale:.2},{height:.9*a.innerHeight,scale:.1}]:[{height:.05*a.innerHeight,scale:.75},{height:.1*a.innerHeight,scale:.4},{height:.9*a.innerHeight,scale:.08}];var f=0>e?-1:1;e=e>0?e:-1*e;E=0;for(var g=0;g<d.length;g++){var h=g>0?d[g].height-d[g-1].height:d[g].height;if(e<=d[g].height){E+=(e-(0===g?0:d[g-1].height))*d[g].scale;break}E+=h*d[g].scale}if(E>0){t=Math.round(E*f);p.style[l()]="translateY("+t+"px)"}}b.preventDefault()}else{D=-1;p=null;b.stopPropagation()}}function k(a){var b=!1;if(y)for(var c=a.target||a.relatedTarget||a.srcElement;null!==c&&!p;){if(c.className&&c.className.indexOf(z)>=0){p=c;b=!1}c=c.parentNode}if(p&&p.parentNode){p.parentNode.style["-webkit-overflow-scrolling"]="touch";if(0>D)for(var d=0;d<A.length;d++)if(A[d].view===p){D=d;break}var e=parseInt(getComputedStyle(p,"height").height,10);if(0===p.parentNode.scrollTop){if(0===B){B=a.touches[0].clientY;b=!0}(a.touches[0].clientY>B||e<=p.parentNode.clientHeight)&&(b=!0)}else e<=p.parentNode.clientHeight+p.parentNode.scrollTop&&B>a.touches[0].clientY&&(b=!0)}else b=!0;return b}function l(){return""===document.body.style.mozTransform?"-moz-transform":""===document.body.style.webkitTransform?"-webkit-transform":""===document.body.style.OTransform?"-o-transform":"transform"}function m(){return""===document.body.style.MozTransition?"-moz-transition":""===document.body.style.WebkitTransition?"-webkit-transition":""===document.body.style.OTransition?"-o-transition":"transition"}function n(a,b){"string"==typeof a&&(a=this.getFirstElement(a));b=b.constructor===Array?b:[b];if(a&&1===a.nodeType){var c=a.className;c&&c.indexOf(b)<0&&(c+=" "+b);c=c.replace(/^\s\s*/,"");a.className=c}else this.logger.error("Unable to add class to "+a+" Class: "+b,"addClass")}function o(a,b){for(var c=a.className.split(" "),d=[],e=0;e<c.length;e++)c[e]!==b&&d.push(c[e]);a.className=d.join(" ")}var p,q,r,s,t,u,v,w,x,y=!1,z="lpclass_scrollable",A=[],B=0,C=0,D=-1,E=0,F=!1;return{init:b,registerView:c,unregisterView:d,enable:e,disable:f}}(window);window.lpTag=window.lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.lpDragManager=lpTag.taglets.lpDragManager||function(){function a(a){var b=x();C[b]=h(a);C[b].bindFunc=l(C[b]);i(C[b]);g(C[b].drag);return b}function b(a){if(C[a]){j(C[a]);for(var b in C[a])if(C[a].hasOwnProperty(b)){C[a][b]=null;delete C[a][b]}delete C[a];return!0}return!1}function c(){}function d(){}function e(a,b,c,d){a&&I?a.addEventListener(b,c,d===!0):a&&a.attachEvent&&a.attachEvent("on"+b,c)}function f(a,b,c){a&&I?a.removeEventListener(b,c):a&&a.detachEvent&&a.detachEvent("on"+b,c)}function g(a){var b=u(a);"absolute"!==b.position&&"fixed"!==b.position&&(a.style.position="absolute")}function h(a){var b=a.drag,c=a.anchor||b,d=a.parent||b.parentNode||document.body;return{anchor:c,drag:b,parent:d,onDrag:a.onDrag,onDragEnd:a.onDragEnd,horizontal:a.horizontal===!0,vertical:a.vertical===!0,limitToParent:a.containParent===!0,context:a.context}}function i(a){e(a.anchor,"mousedown",a.bindFunc)}function j(a){f(a.anchor,"mousedown",a.bindFunc)}function k(a){f(a.anchor,"mouseup",s)}function l(a){return function(b){b=b||event;e(a.anchor,"mouseup",s);a.anchorData=v(a.anchor);a.parentData=v(a.parent);a.dragElementData=v(a.drag);a.diff={left:b.clientX-a.dragElementData.left,top:b.clientY-a.dragElementData.top};a.newDrag=!0;A=a;B=m();E=!0;return!1}}function m(){var a={"*,body,.lpDragActive":{"-moz-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none","-o-user-select":"none"},"html *::selection,body *::selection,button::selection,body::selection,*::selection":{background:"transparent",color:"inherit"}};document.body.setAttribute("unselectable","on");return o(a)}function n(){if(B){document.head.removeChild(B);B=null}document.body.removeAttribute("unselectable")}function o(a){if(I){var b=document.createElement("style"),c="";for(var d in a){c+=d+"{";for(var e in a[d])c+=e+":"+a[d][e]+";";c+="}"}b.appendChild(document.createTextNode(c));(document.head||document.getElementsByTagName("head")[0]).appendChild(b);return b}return null}function p(a){var b=a.clientX-A.diff.left;b>A.parentData.width-A.dragElementData.width&&(b=A.parentData.width-A.dragElementData.width);b<A.parentData.left&&(b=A.parentData.left);(b+A.dragElementData.width>A.parentData.width+A.parentData.left||a.clientX<0)&&(F=!0);return b}function q(a){var b=a.clientY-A.diff.top;b>A.parentData.top+A.parentData.height-A.dragElementData.height&&(b=A.parentData.top+A.parentData.height-A.dragElementData.height);b<A.parentData.top&&(b=A.parentData.top);(b+A.dragElementData.height>A.parentData.height||a.clientY<0)&&(F=!0);return b}function r(a,b){var c=z(),d=v(A.drag);if(A.horizontal)if(A.drag.style.right&&"auto"!==A.drag.style.right){A.drag.style.right=c.width-b-d.width+"px";A.drag.style.left="auto"}else{A.drag.style.left=b+"px";A.drag.style.right="auto"}if(A.vertical)if(A.drag.style.right&&"auto"!==A.drag.style.bottom){A.drag.style.bottom=c.height-a-d.height+"px";A.drag.style.top="auto"}else{A.drag.style.top=a+"px";A.drag.style.bottom="auto"}}function s(){if(A&&A.onDragEnd){if(J){var a=t(A.drag);y(A.onDragEnd,a,A.context)}k(A)}n(A);E=!1;A=null;J=!1}function t(a){var b=v(a),c=u(a,!0);b.left=""!==c.left?c.left:b.left;b.right=""!==c.right?c.right:b.right;b.bottom=""!==c.bottom?c.bottom:b.bottom;b.top=""!==c.top?c.top:b.top;return b}function u(a,b){var c;b||(document.defaultView&&document.defaultView.getComputedStyle?c=document.defaultView.getComputedStyle(a):a.currentStyle&&(c=a.currentStyle));return c||a.style}function v(a){var b,c,d=!1,e=a.getBoundingClientRect(),f=u(a),g={right:w(f.borderRight),left:w(f.borderLeft),top:w(f.borderTop),bottom:w(f.borderBottom)},h={right:w(f.marginRight),left:w(f.marginLeft),top:w(f.marginTop),bottom:w(f.marginBottom)};if(a===document.body){d=!0;var i=z();b=i.width;c=i.height}else{b=(e.width||a.clientWidth||0)+g.right+g.left+h.right+h.left;c=(e.width||a.clientHeight||0)+g.top+g.bottom+h.top+h.bottom}return{width:b,height:c,left:d?0:e.left,right:e.right,top:d?0:e.top,bottom:e.bottom,border:g,margin:h}}function w(a){var b=parseInt(a,10);return isNaN(b)?0:b}function x(){return D++ +"_"+((new Date).getTime()+Math.floor(1e6*Math.random()))}function y(a,b,c){if("function"==typeof a)try{a.call(c||null,b)}catch(d){}}function z(){var a=document.documentElement,b=document.body,c=a.clientWidth||b.clientWidth||window.innerWidth,d=a.clientHeight||b.clientHeight||window.innerHeight;return{width:c,height:d}}var A,B,C={},D=0,E=!1,F=!1,G="0.5.0",H="lpDragManager",I=!!window.addEventListener,J=!1;e(document,"mousemove",function(a){var b,c;if(E&&A){F=!1;a=a||event;A.horizontal&&(b=p(a));A.vertical&&(c=q(a));r(c,b);J=!0;if(A.newDrag===!0){setTimeout(function(){A&&y(A.onDrag,A,A.context)},0);A.newDrag=!1}I&&1!=a.which&&(F=!0);A&&F&&s();return!1}});e(document,"mouseup",function(a){E&&A&&s()});return{v:G,name:H,init:c,start:d,bind:a,unbind:b}};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.ViewPortManager=function(a){function b(){var a=screen.availWidth/window.innerWidth;H.debug("getCurrentScale, currentScale="+a+" height="+window.innerHeight+" width="+window.innerWidth,G);return a}function c(){m()}function d(a,c){var d;if(x){var e=n();o();d=w(x.content);if(!l(d,a)){A=d;s(v(a));z=a;e.scale!==b()&&f(c,e)}}}function e(a,b,c,e){if(x){var f={width:"device-width","initial-scale":a,"minimum-scale":b||a,"maximum-scale":c||a,"user-scalable":"string"==typeof e?e:"no"};d(f)}}function f(a,b){p(b);q(a)}function g(){return t(z)}function h(){return I.cloneExtend(z||{})}function i(a){F=a;I.waitForBody(k)}function j(){if(!x){var a=document.getElementsByName("viewport");a&&(x=a[a.length-1])}}function k(){j();if(x){y=w(x.content);z||(z=y);K=t(y);K&&u()}else J=!1}function l(a,b){var c=!0;for(var d in a)if(b.hasOwnProperty(d)&&b[d]!==a[d]){c=!1;break}return c}function m(){if(J&&x&&A){y["initial-scale"]=B;d(y)}}function n(){return{top:C,left:D,scale:B}}function o(){B=b();D=document.body.scrollLeft;C=document.body.scrollTop}function p(a){if(E){E.style.top=("undefined"!=typeof a?a.top:document.body.scrollTop)+"px";E.style.left=("undefined"!=typeof a?a.left:document.body.scrollLeft)+"px"}}function q(a){if(E){E.focus();if(F.isIOS()){E.click();setTimeout(r(a),40)}else r(a)()}}function r(a){return function(){E.blur();I.runCallback(a)}}function s(a){x.content=a}function t(a){var b=!1,c=a["user-scalable"],d=[a["minimum-scale"],a["maximum-scale"],a["initial-scale"]];if("no"===c)b=!1;else for(var e=0;e<d.length&&!b;e++)for(var f=e;f<d.length;f++)if(e!==f&&"undefined"!=typeof d[e]&&"undefined"!=typeof d[f]&&d[e]!==d[f]){b=!0;break}return b}function u(){E=document.createElement("input");E.type="text";E.style.opacity=0;E.style.top="-1000px";E.style.left="-1000px";E.style.position="absolute";document.body.appendChild(E)}function v(a){var b="";for(var c in a)if(a.hasOwnProperty(c)){b+=a[c]===!0?c:c+"="+a[c];b+=", "}return b.substring(0,b.length-2)}function w(a){var b,c,d={};if(a){b=a.split(",");for(var e=0;e<b.length;e++){c=b[e].split("=");d[I.trimAndLower(c[0])]=I.trimAndLower(c[1])}}return d}var x,y,z,A,B,C,D,E,F,G="ViewPortManager",H=lpTag.unifiedWindow.log,I=lpTag.taglets.lpUtil,J=!0,K=!1;i(a);this.reset=c;this.setScale=e;this.getViewPortInfo=h;this.getCurrentScale=b;this.isPageZoomable=g};window.lpTag=window.lpTag||{};lpTag.unifiedWindow.addLanguage({chattingWith:"{{agent_name}}",connecting:"Connecting",message_us:"Message us",ended:"Thank you",loader_title:"Loading",chatting:"Chat",preChat:"Chat with us",preSms:"Text us",postChat:"Thank you",offline:"Contact us",endedAndTranscriptShown:"Chat transcript",closeWindowAreYouSureMsg:"Closing will end conversation",closeWindowOkBtn:"OK",closeWindowCancelBtn:"Cancel",closeChatAreYouSureMsg:"Are you sure you want to disconnect?",closeChatDisconnectBtn:"Disconnect",closeChatCancelBtn:"Cancel",tooltip_NewMessageNotification:"You have {{notificationCount}} new {{notificationMsg}}",tooltip_EmailTranscriptSentConfirmation:"Transcript will be sent after chat ends",tooltip_Message:"message",tooltip_Messages:"messages",tooltip_Close:"Close",tooltip_Download:"You may be required to allow pop-ups to download files",tooltip_ExpandActionMenu:"Expand action menu",tooltip_CollapseActionMenu:"Collapse action menu",tooltip_SendIcon:"Send",tooltip_SendIconDisabled:"You are not connected to chat",tooltip_Minimize:"Minimize",tooltip_Maximize:"Maximize",tooltip_MuteButton:"Mute",tooltip_UnmuteButton:"Unmute",tooltip_Print:"Print transcript",tooltip_Email:"Email transcript",tooltip_EndChat:"End conversation",tooltip_Popout:"Pop out",tooltip_Popin:"Pop in",tooltip_Lock:"This is a secure chat",tooltip_Loader:"Loading",tooltip_EmailClearField:"Clear",tooltip_AutoBlockCreditCardPatternsMessage:"We have blocked some of your personal details from displaying. Please do not share personal or sensitive information during the conversation.",tooltip_open_widgets:"Open widgets",tooltip_close_widgets:"Close widgets",tooltip_refresh_slider:"Refresh widget",tooltip_minimize_slider:"Minimize widget",tooltip_maximize_slider:"Maximize widget",tooltip_ConnectionIssue:"Connection unavailable",tooltip_ConnectionReEstablished:"Connection re-established",tooltip_CloseToStartChat:"To start a chat please close this window",tooltip_CloseToStartConversation:"To start a messaging conversation please close this window",tooltip_FileTypeValidation:"File type should be PNG, JPG or GIF",tooltip_FileTypeValidationExpanded:"File type should be PNG, JPG, GIF, PDF, DOCX, XLSX or PPTX",tooltip_FileSizeValidation:"File size should be 5 MB or less",tooltip_FileSizeValidation15:"File size should be 15 MB or less",tooltip_EmojiIcon:"Emoji picker",windowTitle:"Need help?",defaultTextBoxText:"Enter text here",welcomeMessage:"How can I help you today?",thankYouMessage:"Thank you for connecting with us",thankYouMessagePreSms:"Text conversation started with {{phoneNumber}}. A representative should text you soon.",visitorChatLineSentError:"Error sending message",dragFilesMessage:"Drag files here",dropFilesMessage:"Drop files here",at:"at",me:"Me",you:"You",info:"Info",agent:"Agent",authExpired:"Your verification has expired. You are being directed to re-login. Please press here in order to redirect immediately.",unauthExpired:"Your verification has expired. Click below to reload the conversation.",reload:"Reload",redirect:"Redirect",relogin:"Session expired",secureForm_line_send:"{{agentName}} has sent you a Secure Form: {{secureFormName}}",secureForm_link_title_send:"{{agentName}} has sent you a Secure Form",secureForm_line_submit:"The following Secure Form has been submitted: {{secureFormName}}",secureForm_link_title_submit:"The following Secure Form has been submitted",secureFormSubmittedMessage:"The form has been submitted successfully. <br>To protect your information, submitted forms cannot be reopened.",secureFormOpenedInAnotherTabMessage:"The Secure Form could not be opened. Please submit the Secure Form from the tab where the interaction began.",secureFormErrorMessage:"The Secure Form could not be opened. <br>Please contact your agent for assistance.",monthJanuary:"Jan",monthFebruary:"Feb",monthMarch:"Mar",monthApril:"Apr",monthMay:"May",monthJune:"Jun",monthJuly:"Jul",monthAugust:"Aug",monthSeptember:"Sep",monthOctober:"Oct",monthNovember:"Nov",monthDecember:"Dec",weekDaySunday:"Sun",weekDayMonday:"Mon",weekDayTuesday:"Tues",weekDayWednesday:"Wed",weekDayThursday:"Thurs",weekDayFriday:"Fri",weekDaySaturday:"Sat",daySuffix:"",dayMonthGap:" ",logoAltText:"Logo",agentPicAltText:"Agent picture",lpLogo:"LivePerson logo",errorIconAltText:"Error",dialog_email_transcript:"Send transcript to:",EmailTranscriptAction:"Email\ntranscript",inputEmailError:"Enter a valid email address. Format: you@domain.com",defaultEmailInputText:"Enter email*",transcriptSubject:"Your chat transcript",transcriptAreaLabel:"Chat messages",transcriptConvResolvedByAgent:"Conversation closed by the agent {{time}}",transcriptConvResolvedByVisitor:"Conversation closed by you {{time}}",transcriptTtrMessage:"We will respond by {{time}}",transcriptShortlyMessage:"An agent will respond shortly",transcriptTtrOffHoursMessage:"We are currently off-hours. We will answer by {{time}}",transcriptForPhotoSharingImage:"Shared content is not available",transcriptRotatorDefaultMessage:"Loading history",transcriptRotatorFirstMessage:"Still loading",transcriptRotatorSecondMessage:"Failed to load history. ",transcriptRotatorLinkText:"Retry",idnvDialogTitle:"Please enter characters {{idnvChar1}} and {{idnvChar2}} from your {{idnvType}}",idnvInputError:"Complete both required fields",idnvFormCancelled:"The identification form was not submitted",idnvFormSubmitted:"You have submitted characters {{idnvChar1}} and {{idnvChar2}} from your {{idnvType}}.",idnvAnswer:"Characters are {{idnvAnswer1}} and {{idnvAnswer2}}",idnvSendLineError:"Identification form could not be submitted",MuteSoundAction:"Mute",UnmuteSoundAction:"Unmute",PrintTranscriptAction:"Print\ntranscript",MarkUrgentAction:"Mark as urgent",DismissUrgentAction:"Dismiss urgent",EndChatAction:"End\nconversation",PopOutAction:"Pop out",PopInAction:"Pop in",PopOutAction_topbar:"Click to pop out",PopInAction_topbar:"Click to pop in",ForgetMeAction:"Clear history",SharePhotoAction:"Send\nimage",AddAttachmentAction:"Add\nattachment",error:"Error",couldNotConnect:"Oops - unable to connect",tryAgain:"Try again",loadingOnMinimize:"Loading",loading:"Loading",unableToConnect:"Unable to connect",reconnect:"Trying to reconnect",chatEndedOnExternalWindow:"Close window in order to start new chat",externalWindowOpen:"You have an ongoing chat. Return to that window to continue the chat.",unsupportedBrowserMode:"Your browser may be in incognito mode, or it may be blocking third party cookies. Please open a regular browser session to chat, or check your browser privacy settings",cannotResumeChat:"Resume chat from the tab where the interaction began",crossDomainError:"Cannot resume conversation, please return to previous page to continue.",chatAuthError:"Go back to the previous page or log in to continue your conversation.",confirmMessage:"Closing the conversation means that you wont be able to continue even if you go back or log in. Are you sure you want to proceed?",startConversationError:"Please refresh the page and start a new conversation.",connectionUnavailable:"Connection unavailable",sessionExpired:"Session expired",sessionError:"Your session has expired. Please close this window and start a new conversation in order to resume.",sharkSessionExpired:"Please refresh the page and start a new conversation.",agentIsTypingText:"Agent is typing...",forget_me_dialog:"Are you sure you want to clear your conversation history?",forget_me_dialog_subtitle_on_active_chat:"If you choose yes the conversation will end and your conversation history will no longer be available from this device.",forget_me_dialog_subtitle:"If you choose yes your conversation history will no longer be available from this device",forget_me_dialog_close_window:"Are you sure you want to clear your conversation history?",forget_me_dialog_subtitle_on_active_chat_close_window:'If you choose "Yes" the conversation will be closed automatically and your history will no longer be available when you reopen the window.',forget_me_dialog_subtitle_close_window:'If you choose "Yes" the conversation will be closed automatically and your history will no longer be available when you reopen the window.',end_chat_alert:"Are you sure you want to end the conversation?",yes:"Yes",no:"No",preChatButton:"Submit",surveyRequireField:"Complete the required field",surveyRequireOption:"Required field. Select an option.",surveyRequireCheckbox:"Required field. Select at least one option.",surveyRequireNumericField:"Only numbers can be used in this field",surveyRequireValidEmail:"Enter a valid email address. Format: you@domain.com",surveyRequireValidPhone:"Enter a valid phone number.",surveyMaximumChars:"Cannot include more than {{specify_number}} characters in this field",surveyIllilgalCharacters:"One or more of the characters entered are not valid. Do not use: &lt;, &gt;, &quot;",surveyGeneralError:"An error has been encountered. Please review the survey and resubmit.",surveyLabel:"Complete the survey",offlineButton:"Submit",exitButton:"Submit",defaultSelect:"Choose item from the list",defaultTextArea:"Enter text here",submit:"Submit",back:"Back",next:"Next",startChat:"Chat",closeWindowText:"You have an active engagement",cancel:"Cancel",ok:"OK",close:"Close",send:"Send",insertTextHere:"Enter text here",IN_SESSION:"Resume chat from the tab where the interaction began",IN_PRE_CHAT:"Return to the tab with the survey to start chat",IN_CHAT:"Please refresh the page to resume chat",captchaTitle:"Chat with us",captchaEnterText:"Type the text shown",captchaRefreshButton:"Try another text",captchaAudioButton:"Try audio",captchaTextButton:"Try text",captchaMessageError:"Verification failed. Please try again.",captchaAccessDenied:"Maximum number of tries exceeded",messagingState_PENDING:"Pending",messagingState_SENT:"Sent",messagingState_ACCEPT:"Delivered",messagingState_READ:"Read",messagingState_ERROR:"Not Delivered",messagingState_image_ERROR:"This file failed to upload.<br>Please try another file.",messagingState_image_RETRY:"This file failed to upload.<br>Please try again.",csatLevel_0:"",csatLevel_1:"Very dissatisfied",csatLevel_2:"Dissatisfied",csatLevel_3:"Neutral",csatLevel_4:"Satisfied",csatLevel_5:"Very Satisfied",outOf:"out of",csatTheAgent:"the agent",csatRatingQuestion:"How would you rate your conversation with {{agentName}}?",csatDisclaimer:"Your feedback helps us serve you better. <br>It will not be shared with any customer service representative.",cobrowseInvitation:"I have invited you to join a CoBrowse session, where I will be able to walk you through our website. To start, please click Accept.",cobrowseAcceptBtn:"Accept",cobrowseRejectBtn:"Reject",cobrowseInvitationHeading:"CoBrowse Invitation",cobrowseSessionStarting:"Starting CoBrowse session...",cobrowseInvitationRejected:"CoBrowse invitation has been rejected",
cobrowseLine_cobrowseAccepted:"CoBrowse invitation accepted",cobrowseLine_cobrowseDeclined:"CoBrowse invitation rejected",cobrowseLine_cobrowseTimeout:"CoBrowse invitation timed out",cobrowseLine_cobrowseOffered:"{{agentName}} has invited you to a CoBrowse session",cobrowseLine_cobrowseCanceled:"CoBrowse invitation was cancelled by {{agentName}}",video_cobrowseInvitation:"I have invited you to a video call. To start, please click Accept.",video_cobrowseConnecting:"Connecting",video_cobrowseConnectingPermission:"Camera and microphone access are required. Please accept these permissions when prompted by your browser.",video_cobrowseAcceptBtn:"Accept",video_cobrowseRejectBtn:"Reject",video_cobrowseInvitationHeading:"Video Call",video_cobrowseSessionStarting:"Starting a Call...",video_cobrowseInvitationRejected:"Call has been rejected",video_cobrowseLine_cobrowseAccepted:"Call accepted",video_cobrowseLine_cobrowseDeclined:"Call rejected",video_cobrowseLine_cobrowseTimeout:"You missed a call from {{agentName}}",video_cobrowseLine_cobrowseOffered:"{{agentName}} has called you",video_cobrowseLine_cobrowseCanceled:"Call was cancelled by {{agentName}}",video_cobrowseActiveCallTooltip:"You are in a video call",voice_cobrowseInvitation:"I have invited you to a voice call. To start, please click Accept.",voice_cobrowseConnecting:"Connecting",voice_cobrowseConnectingPermission:"Microphone access is required. Please accept this permission when prompted by your browser.",voice_cobrowseAcceptBtn:"Accept",voice_cobrowseRejectBtn:"Reject",voice_cobrowseInvitationHeading:"Voice Call",voice_cobrowseSessionStarting:"Starting a Call...",voice_cobrowseInvitationRejected:"Call has been rejected",voice_cobrowseLine_cobrowseAccepted:"Call accepted",voice_cobrowseLine_cobrowseDeclined:"Call rejected",voice_cobrowseLine_cobrowseTimeout:"You missed a call from {{agentName}}",voice_cobrowseLine_cobrowseOffered:"{{agentName}} has called you",voice_cobrowseLine_cobrowseCanceled:"Call was cancelled by {{agentName}}",voice_cobrowseActiveCallTooltip:"You are in a voice call",richContentSent:"<< Sent Rich Content >>",browserNotifications_newMessageTitle:"New message from {{agentName}}",browserNotifications_newMessages:"new messages",browserNotifications_richContent:"{{agentName}} has shared rich content with you",browserNotifications_image:"{{agentName}} has shared an image with you",browserNotifications_file:"{{agentName}} has shared a file with you",ts_Now:"Now",ts_Today:"Today",ts_Yesterday:"Yesterday"},{locale:"en-US"});!function(a){a.ViewController.plugin({initialize:function(a){a&&(this.models=a.models)},bindModel:function(a){this.models[a.path.name].bind(a.path,a.callback,a.context||this,a.trigger)},unbindModel:function(a){a=a||{};var b=a.context?a.context:this,c=a.callback?a.callback:null,d=a.path?a.path:null;this.models[a.path.name].unbind(d,c,b)},getModelParam:function(a){return this.models[a.name].get(a)},dispose:function(){for(var a in this.models)this.models.hasOwnProperty(a)&&this.models[a].unbind(null,null,this)}})}(window.liveperson.uiframework.latest);!function(a){var b=new lpTag.unifiedWindow.helpers.LocalizationHelper({util:lpTag.taglets.lpUtil});a.ViewController.plugin({initialize:function(a){a.appContext&&(this.translator=a.appContext.translator)},translate:function(a,b){return this.translator.translate(a,b)},replaceCharacter:function(a,b,c){var d=a.split(b);return d.length>0?c?d.join(c):d.join(""):a},extendDictionary:function(a){this.translator.extendDictionary(a)},isLanguageRTL:function(){return b.isLanguageRTL(this.appContext.conf.engConf.lang)},applyDirOnElement:function(a,c){b.applyDirOnElement(a,c,this.appContext.conf.engConf.lang)}})}(window.liveperson.uiframework.latest);!function(a){a.ViewController.plugin({initialize:function(a){a.appContext&&(this.themer=a.appContext.themer)},customize:function(a){var b={removeThemeAttrs:!1};if(!this.isDOMNode(a))return this.themer.processHTML(a,b);this.themer.processDomEl(a,b);return void 0}})}(window.liveperson.uiframework.latest);!function(a){a.ViewController.plugin({initialize:function(a){},events:function(){},dragableView:function(a){var b;a.drag=this.isDOMNode(a.view)?a.view:this.getFirstElement(a.view);a.anchor=this.isDOMNode(a.anchor)?a.anchor:this.getFirstElement(a.anchor);a.parent=document.body;a.horizontal=!0;this.dragInstances=this.dragInstances||[];this.dm=new lpTag.taglets.lpDragManager;b=this.dm.bind(a);this.dragInstances.push(b);return b},dispose:function(){if(this.dragInstances&&this.dragInstances.length>0)for(var a=0;a<this.dragInstances.length;a++)this.dm.unbind(this.dragInstances[a])}})}(window.liveperson.uiframework.latest);!function(a,b){"use strict";"function"==typeof define&&define.amd&&define("HtmlSanitizerUtils",function(){return b(a,a)});a.lpTag=a.lpTag||{};b(a,a.lpTag)}(this,function(a,b){var c=function(){"use strict";function a(a){function b(a){a.errors.length>0&&Array.prototype.push.apply(d,a.errors)}var c=a,d=[],e=a;""!==e&&(e=g(e));var f=k(e);b(f);f=l(f.cleanText);b(f);f=m(f.cleanText);b(f);f=j(f.cleanText);b(f);f=h(f.cleanText);b(f);f=i(f.cleanText);b(f);return{sanitized:d.length>0,cleanText:d.length>0?f.cleanText:c,errors:d}}function b(a,b){for(var c=b&&b.uri_regex&&o(b.uri_regex)?b.uri_regex:A,e=b&&b.email_regex&&o(b.email_regex)?b.email_regex:B,f=d(a),g=0;g<f.childNodes.length;g++)if(3===f.childNodes[g].nodeType)f.childNodes[g].textContent=p(f.childNodes[g].textContent,c,e);else{var h=f.childNodes[g].outerHTML.match(/<a\s+href/g);h||(f.childNodes[g].innerText=p(f.childNodes[g].innerText,c,e))}f.innerHTML=f.innerHTML.replace(new RegExp("&lt;","g"),"<").replace(new RegExp("&gt;","g"),">");return f.innerHTML}function c(b,c){c=c||{};c=f(c);var g=a(b),h=g.cleanText,i=d(h),j="";if(c==={})j=i.innerText;else{e(i,c);j=i.innerHTML}return j}function d(a){var b=document.createElement("DIV");b.innerHTML=a;return b}function e(a,b){var c=Array.prototype.slice.call(a.childNodes);c.forEach(function(a){a.hasChildNodes()&&e(a,b);if(3!==a.nodeType){var c=a.tagName.toLowerCase();if("undefined"==typeof b[c])a.parentNode&&(a.outerHTML=a.innerHTML);else{for(var d=b[c],f=[],g=0;g<a.attributes.length;g++){var h=a.attributes[g].name.toLowerCase();-1===d.indexOf(h)&&f.push(h)}for(var i=0;i<f.length;i++)a.removeAttribute(f[i])}}})}function f(a){var b={};for(var c in a){var d=[];a[c]instanceof Array&&(d=a[c].map(function(a){a=a.toLowerCase();return a}));b[c.toLowerCase()]=d}return b}function g(a){for(var b=a,c="",d=!1;b!==c;){try{c=decodeURIComponent(b)}catch(e){c=b;d=!0}d||(b=c)}return c}function h(a){for(var b={errors:[],cleanText:a},c=d(a),e=!1,f=0;f<r.length;f++){var g=null;g=c.getElementsByTagName(r[f]);for(var h=0;h<g.length;h++){e=!0;b.errors.push({type:F.ELEMENT,key:r[f],html:g[h].outerHTML});var i=g[h];i&&i.parentNode&&i.parentNode.removeChild(i)}}e&&(b.cleanText=c.innerHTML);return b}function i(a){function b(a,b,d,e,f){var g=e===F.STYLE_ATTRIBUTE||e===F.ATTRIBUTE_VALUE?b:a;e===F.ATTRIBUTE_VALUE&&(g=g.replace(z,""));var h=g.match(d);if(h){for(var i=0;i<h.length;i++)c.errors.push({type:e,key:h[i],html:f.outerHTML});f.removeAttribute(a)}}var c={errors:[],cleanText:a},e=a;"string"!=typeof e&&(e=e.toString());for(var f=[],g=d(e),h=g.getElementsByTagName("*"),i=0;i<h.length;i++)for(var j=0;j<h[i].attributes.length;j++)f.push({attributeKey:h[i].attributes[j].name,attributeValue:h[i].attributes[j].value,element:h[i]});if(f)for(var k=0;k<f.length;k++){var l=f[k].attributeKey,m=f[k].attributeValue,n=f[k].element;b(l,m,s,F.ATTRIBUTE,n);b(l,m,t,F.ATTRIBUTE,n);b(l,m,u,F.ATTRIBUTE_VALUE,n);"style"===l.toLowerCase()&&b(l,m,v,F.STYLE_ATTRIBUTE,n)}c.cleanText=g.innerHTML;return c}function j(a){var b={errors:[],cleanText:a},c=a;"string"!=typeof c&&(c=c.toString());var e=c.match(C);e=null===e?0:e.length;var f=d(c),g=f.innerHTML.match(C);g=null===g?0:g.length;e>g&&b.errors.push({type:F.NOT_WELLFORMED,key:"",html:a});b.cleanText=f.innerHTML;return b}function k(a){var b=n(a,w,F.MARKER,"");return b}function l(a){var b=n(a,x,F.ELEMENT,D);return b}function m(a){var b=n(a,y,F.ATTRIBUTE,E);return b}function n(a,b,c,d){var e={errors:[],cleanText:a},f=a;"string"!=typeof f&&(f=f.toString());var g=f.match(b);if(g)for(var h=0;h<g.length;h++){e.errors.push({type:c,key:d,html:g[h]});f=f.replace(g[h],"")}e.cleanText=f;return e}function o(a){return a&&a.constructor===RegExp}function p(a,b,c){a=q(a,b);a=a.replace(c,"<a href='mailto:$&'>$&</a>");return a}function q(a,b){a=a.replace(b,function(a,b,c,d){var e=a.match(/^www\./i),f=e?"http://"+a.replace(/www\./i,""):a;return"<a href='"+f+"'>"+a+"</a>"});return a}var r=["SCRIPT","STYLE","LINK","IFRAME","META","OBJECT","EMBED"],s=/^on\S+|^\S*[^A-Za-z]+on\S*/gi,t=/DIRNAME|SRCDOC|BEGIN|TO/gi,u=/DATA(\s*):|MHTML(\s*):|JAVASCRIPT(\s*):|EXPRESSION(\s*)\([^;]*\)/gi,v=/MHTML(\s*):([^;]*)|DATA(\s*):([^;]*)|MASK(\s*):([^;]*)|[\w]+(\s*):(\s*)EXPRESSION\([^;]*/gi,w=/<\/\/(.*?)>|<[^A-Za-z0-9\/!](.*?)>/gi,x=/<(\s*)?SCRIPT\b[^>]*(\s*)?>|<(\s*)?FRAMESET\b[^>]*(\s*)?>|<(\s*)?FRAME\b[^>]*(\s*)?>|<(\s*)?BODY\b[^>]*(\s*)?>/gi,y=/ONERROR(\s*)=(\s*)["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']?|ONLOAD(\s*)=(\s*)["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']?|ONTOGGLE(\s*)=(\s*)["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']?|ONRATECHANGE(\s*)=(\s*)["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']|ONLOADSTART(\s*)=(\s*)["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']?/gi,z=/\[.]/gi,A=/(((ftp|http|https):\/\/)|www[.])(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi,B=/(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/gi,C=/<((\s)?[a-z%]+)\s*[^\/]*?/gi,D="SCRIPT/FRAMESET/FRAME/BODY",E="ONERROR_ONLOAD_ONTOGGLE_ONRATECHANGE",F={ELEMENT:"element",ATTRIBUTE:"attribute",ATTRIBUTE_VALUE:"attribute_value",STYLE_ATTRIBUTE:"style_attribute",MARKER:"marker",NOT_WELLFORMED:"not_wellformed_html"};return{sanitizeHtml:a,formatLinks:b,sanitizeAndCleanHtml:c}}();b.HtmlSanitizerUtils=b.HtmlSanitizerUtils||c;return c});!function(a){a.ViewController.plugin({LPSanitizer:window.lpTag&&lpTag.HtmlSanitizerUtils,sanitizeText:function(a,b){var c="string"==typeof a&&a;if(c){var d=this.appContext&&this.appContext.conf&&this.appContext.conf.engConf&&this.appContext.conf.engConf.async;d&&(c=this.decodeInput(c));c=this.initialTextSanitize(c);c=this.sanitizeEvents(c);c=this.removeElementByType(["SCRIPT","STYLE","LINK","IFRAME","META"],c);!d||b&&b.noFormatLink||(c=this.formatLinks(c,b));c=this.reTargetElementsByType(["A","FORM"],c)}return{sanitized:c!==a,text:c}},initialTextSanitize:function(a){if(this.LPSanitizer)try{a=this.LPSanitizer.sanitizeHtml(a).cleanText||""}catch(b){}return a},formatLinks:function(a,b){if(this.LPSanitizer)try{a=this.LPSanitizer.formatLinks(a,b)||""}catch(c){}return a},sanitizeEvents:function(a){for(var b=a,c=[{regEx:/[\s'"\/]+(onwheel|onwaiting|ontouchstart|ontouchmove|ontouchend|ontouchcancel|onvolumechange|ontimeupdate|onsuspend|onsubmit|onstalled|onsort|onshow|onselectionchange|onseeking|onseeked|onratechange|onprogress|onpointerlockerror|onpointerlockchange|onpointerleave|onpointerenter|onpointerout|onpointerover|onpointercancel|onpointerup|onpointermove|onpointerdown|onplaying|onplay|onpause|onmousewheel|onmouseleave|onmouseenter|onloadstart|onloadedmetadata|onloadeddata|oninvalid|onended|onemptied|ondurationchange|ondrop|ondragstart|ondragover|ondragleave|ondragexit|ondragenter|ondragend|ondrag|oncuechange|oncanplaythrough|oncanplay|oncancel|onabort|onclose|oncontextmenu|onerror|oninput|onresize|onscroll|onunload|onsubmit|onselect|onreset|onmouseup|onmouseover|onmouseout|onmousemove|onmousedown|onload|onkeyup|onblur|onchange|onclick|ondblclick|onfocus|onkeydown|onkeypress)\s*=/gi,replaceString:" _eventRemoved=",type:"ONEVENT"}],d=0;d<c.length;d++)try{"number"==typeof b&&(b=b.toString());b=b.replace(c[d].regEx,c[d].replaceString)}catch(e){this.logger.error("Error when trying to cleanup text, cleanupType: "+c[d].type+" text: "+a+" result: "+b,"sanitizeEvents")}return b},removeElementByType:function(a,b){function c(a){return function(){a&&a.parentNode&&a.parentNode.removeChild(a)}}a=a.constructor===Array?a:[a];var d=document.createElement("DIV");d.innerHTML=b;for(var e=!1,f=[],g=0;g<a.length;g++){var h=null;h=d.getElementsByTagName(a[g]);for(var i=0;i<h.length;i++){e=!0;try{f.push(c(h[i]))}catch(j){this.logger.error("Error when trying to create remove element function for type "+a[g],"removeElementByType")}}}for(var k=0;k<f.length;k++)try{f[k]()}catch(j){this.logger.error("Error when trying to remove element, HTML "+d.innerHTML,"removeElementByType")}return e?d.innerHTML:b},isSecureForm:function(a){return"lp_secure_form_line"===a.getAttribute("data-lp-point")},setTarget:function(a){var b=!1,c=a.getAttribute("target");if(!c||"_blank"!==c.toLowerCase()&&!this.isSecureForm(a)){b=!0;a.setAttribute("target","_blank")}return b},reTargetElementsByType:function(a,b){a=a.constructor===Array?a:[a];var c,d=document.createElement("DIV");d.innerHTML=b;for(var e=!1,f=0;f<a.length;f++){c=d.getElementsByTagName(a[f]);for(var g=0;g<c.length;g++)try{e=this.setTarget(c[g]);var h=c[g].getAttribute("rel");h&&"noopener"===h.toLowerCase()||c[g].setAttribute("rel","noopener")}catch(i){this.logger.error("Error when trying to reTargetLinks elements, result HTML: "+d.innerHTML+" text: "+b,"reTargetElementsByType")}c=null}return e?d.innerHTML:b},decodeInput:function(a){var b=document.createElement("DIV");b.textContent=a;return b.innerHTML}})}(window.liveperson.uiframework.latest);!function(a){function b(a,b){for(var c=0;c<b.length;c++){a.DOMEvent=b[c];this.bindViewEvent(a)}}function c(a,b){var c=this,d="undefined"!=typeof a.selector&&this.getFirstElement(a.selector)||a.view;return function(a){b.call(c,a,d)}}function d(a,b){var c,d=!1,e=b.scrollTop+b.clientHeight,f=!1;if("undefined"!=typeof a.deltaY){d=a.deltaY<0;c=a.deltaY>0?a.deltaY:-1*a.deltaY;c=parseInt(c,10)}if(!c&&"undefined"!=typeof a.wheelDelta){d=a.wheelDelta>0;c=a.wheelDelta>0?a.wheelDelta:-1*a.wheelDelta;c=parseInt(c,10)}f=d?b.scrollTop-c<=0:e+c>=b.scrollHeight;if(f){b.scrollTop=d?0:e;this.preventDefault(a)}this.stopPropagation(a)}function e(a,b){var c=b.scrollHeight-b.offsetHeight;0===b.scrollTop?b.scrollTop=1:c===b.scrollTop&&(b.scrollTop=c-1)}a.ViewController.plugin({pluginName:"scrollPrevent",initialize:function(){},preventScroll:function(a){a||(a={view:this.view});if("object"==typeof a&&(a.selector||a.view)){var e=[window.addEventListener?"wheel":"mousewheel","scroll"];a.callback=c.call(this,a,d);b.call(this,a,e)}},limitScroll:function(a){a||(a={view:this.view});if("object"==typeof a&&(a.selector||a.view)){var d=[window.addEventListener?"wheel":"mousewheel","scroll"];a.callback=c.call(this,a,e);b.call(this,a,d)}}})}(window.liveperson.uiframework.latest);!function(a){function b(a){return a?this.isDOMNode(a)?a:"object"==typeof a?a.view||a.selector&&"undefined"!=typeof a.selector&&this.getFirstElement(a.selector):this.view:null}function c(a,b){for(var c=0;c<b.length;c++){a.DOMEvent=b[c];this.bindViewEvent(a)}}function d(a,b){for(var c=0;c<b.length;c++)this.unbindViewEvent({view:a,DOMEvent:b[c],callback:g})}function e(a,b){var c;c=f(a.view,a.inView,a.trackBottom);if(c){"function"==typeof a.callback&&a.callback.call(this);a.bindOnce&&d.call(this,a.inView,h)}}function f(a,b,c){var d=a.getBoundingClientRect(),e=b.getBoundingClientRect();return d.top>=e.top&&(c?d.bottom<=e.bottom:!0)}var g,h;a.ViewController.plugin({initialize:function(a){var b=["scroll","resize",window.addEventListener?"wheel":"mousewheel"],c=["touchend","resize"];a.appContext&&a.appContext.deviceDetector.isDesktop&&(h=a.appContext.deviceDetector.isDesktop()?b:c)},events:function(){},trackInView:function(a){var d;a.view=b.call(this,a.view);a.inView=b.call(this,a.inView);if(a.view&&a.inView){g=e.bind(this,a);d={view:a.inView,callback:g};c.call(this,d,h)}},dispose:function(){}})}(window.liveperson.uiframework.latest);window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){a=a&&a.newValue;"boolean"==typeof a&&(a?P.removeClass(this.sliderButton,"lp_hidden"):P.addClass(this.sliderButton,"lp_hidden"))}function b(a){var b={ControllerName:lpTag.unifiedWindow.EndChatDialogViewController.ControllerName,models:this.models,appContext:this.appContext,sliderAPI:this.slider};b.dialogOpenedFrom=a?this.appConsts.views.TOP_MENU:this.appConsts.views.ACTION_MENU;if(this.appContext.conf.unifiedConf.shouldSkipConfirmationDialog)j.call(this);else{this.endChatWasInitiated=!0;var c={context:this,data:b};this.appContext.events.trigger({appName:this.ControllerName,eventName:this.VCEvents.DIALOG,data:c})}}function c(a){this.endChatWasInitiated=!1;this.consumerConfirmedClose="confirm"===a.origin;d.call(this,a)}function d(a){if(a.dialogOpenedFrom===this.appConsts.views.TOP_MENU){var b=this,c=this.focusOnElement;setTimeout(function(){c.call(b,b.LPViewMap.closeButton,b.maximizedView)},500)}}function e(){this.appContext.uiStateManager.setVisibility(this.uiPath.TOP_MENU_VISIBLE,!this.getModelParam(this.uiPath.TOP_MENU_VISIBLE))}function f(){i.call(this,!0)}function g(a){i.call(this,!0);this.stopPropagation(a)}function h(){this.appContext.events.trigger({appName:this.ControllerName,eventName:this.EventName.widgetSDK.INIT})}function i(a){var c=this.getModelParam(this.uiPath.STATE);if(!this.endChatWasInitiated)switch(c){case this.State.CHATTING:b.call(this,a);this.changeMode(this.states.MAXIMIZED,!0);break;case this.State.APP_ENDED:this.isClosingWindow=!0;A.call(this,this.State.APP_ENDED);break;case this.State.WAITING:j.call(this);break;default:this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.EventName.application.END_SURVEY});n.call(this)}}function j(){this.isClosingWindow=!0;this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.EventName.application.END_CHAT});n.call(this)}function k(a){this.forgetMeInitiated=!1;d.call(this,a)}function l(){this.isClosingWindow=!0;A.call(this,this.State.APP_ENDED)}function m(a){var b=this.getModelParam(this.uiPath.STATE);if(!this.forgetMeInitiated&&b!==this.State.ERROR&&b!==this.State.CONNECTION_ISSUE){var c={ControllerName:lpTag.unifiedWindow.ForgetMeDialogViewController.ControllerName,models:this.models,appContext:this.appContext,sliderAPI:this.slider};c.dialogOpenedFrom=a?this.appConsts.views.TOP_MENU:this.appConsts.views.ACTION_MENU;this.forgetMeInitiated=!0;var d={context:this,data:c};this.appContext.events.trigger({appName:this.ControllerName,eventName:this.VCEvents.DIALOG,data:d})}}function n(){var a=this.appContext.conf.unifiedConf,b=this.appContext,c=a.poppedOut||a.external;c&&!a.NativeSDK?window.close():this.appContext.events.trigger({appName:this.ControllerName,eventName:this.EventName.application.DO_HARAKIRI});var d=document.getElementsByClassName("LPMcontainer LPMoverlay");d.length>0&&d[0]&&d[0].focus();lpTag.hooks&&lpTag.hooks.exec&&lpTag.hooks.exec({name:lpTag.unifiedWindow.hooks.ON_WINDOW_CLOSED,data:{context:b}})}function o(a){var b=this.appContext.wrapperWindow.getChatWrapperElement(),c=this.LPClassesMap.visitorHasTyped;if(a.typing){P.addClass(b,c);this.appContext.events.trigger({appName:this.ControllerName,eventName:this.EventName.widgetSDK.VISITOR_TYPING,data:!0})}else{P.removeClass(b,c);this.appContext.events.trigger({appName:this.ControllerName,eventName:this.EventName.widgetSDK.VISITOR_TYPING,data:!1})}}function p(a,b){b=b||this.getModelParam(this.uiPath.STATE);var c=this.State.CHATTING===b||this.State.WAITING===b,d={closeButton:c?"tooltip_EndChat":"tooltip_Close",minimizeButton:"tooltip_Minimize",maximizeButton:"tooltip_Maximize"};q.call(this,d,a)}function q(a,b){var c,d,e;for(var f in a){d=this.translator.translate(a[f]);c=this.getElements(this.LPViewMap[f],this.mainWindow);for(var g=0;g<c.length;g++){r(c[g],d);e=this.getFirstElement("img",c[g]);e&&s(e,d,b)}}}function r(a,b){a.title=b}function s(a,b,c){a.alt=b;c&&(a.src+="?v="+lpTag.unifiedWindow.Application.v)}function t(a){this.stateHistory.push(a);this.stateHistory.length>5&&this.stateHistory.shift()}function u(a,b){var c=a&&b&&a.length===b.length;if(c){for(var d=!0,e=0;e<a.length;e++)if(a[e]!==b[e]){d=!1;break}return d}return!1}function v(a){var b=["applicationEnded","waiting","chatting","applicationEnded","waiting"];return u(b,a)}function w(a){var b=["chatting","applicationEnded","waiting","chatting","applicationEnded"];return u(b,a)}function x(a){return a?this.stateHistory[this.stateHistory.length-a]:this.stateHistory}function y(a){var b=a&&a.newValue;t.call(this,b);A.call(this,b);C.call(this,b);this.appContext.conf.unifiedConf.connectorsSfConfig||this.appContext.wrapperWindow.setTitle(D.call(this,b));p.call(this,!1,b)}function z(a){var b=this;setTimeout(function(){n.call(b)},a)}function A(a){var b=a===this.State.ENDED||a===this.State.APP_ENDED,c=a===this.State.WAITING,d=this.util.getPropertyFromObject(this.appContext,"conf.unifiedConf.external",!1),e=this.util.getPropertyFromObject(this.models.chatModel.getModel(),"attributes.chat",{});if(this.closeOnEnd===this.CloseOnEndType.CLOSE&&this.consumerConfirmedClose){if(b||c)if(this.isAsync){var f=e.currentDialogType,g=f===this.dialogStatics.types.POST_SURVEY,h=x.call(this,2),i=x.call(this);if(d)h===this.State.POST_CHAT?n.call(this):w(i)&&n.call(this);else{var j=v(i);c&&h===this.State.APP_ENDED&&!g&&(j?z.call(this,2e3):n.call(this))}}else a===this.State.APP_ENDED&&z.call(this,2e3)}else b&&this.isClosingWindow&&n.call(this)}function B(a){var b=this.getModelParam(this.uiPath.STATE),c=a&&a.newValue||this.showMessageUs&&this.appContext.translator.translate("message_us");c&&b===this.State.CHATTING&&!this.appContext.conf.unifiedConf.connectorsSfConfig&&this.appContext.wrapperWindow.setTitle(c)}function C(a){var b,c;if(!this.appContext.conf.unifiedConf.widgetSDK){b=this.getElements(this.LPViewMap.chattingWithIcon,this.mainWindow);for(var d=0;d<b.length;d++){c={view:b[d],useClasses:!0,display:"inline-block"};a!==this.State.CHATTING||this.appContext.conf.unifiedConf.connectorsSfConfig?this.hide(c):this.show(c)}}}function D(a){var b,c,d=this.showMessageUs&&this.translator.translate("message_us");a=a||this.getModelParam(this.uiPath.STATE);switch(a){case this.State.APP_ENDED:b=this.translator.translate(this.State.ENDED);break;case this.State.REQUESTED:b=d;break;case this.State.CHATTING:case this.State.CONNECTION_ISSUE:b=this.getModelParam(this.chatPath.AGENT_NAME)||d||this.translator.translate(this.State.CHATTING);break;case this.State.PRE_SMS:b=this.translator.translate(this.State.PRE_SMS);break;default:c=d||this.translator.translate("connecting");b=this.translator.translate(a)||c}return b}function E(a){this.blurredTimeout&&clearTimeout(this.blurredTimeout);var b=this;a.focus?this.blurredTimeout=setTimeout(function(){b.wasBlurred=!1},100):this.wasBlurred=!0}function F(){this.isFocusInsideApp()&&this.focusOnElement(this.LPViewMap.closeButton,this.maximizedView)}function G(a){a&&a.type===lpTag.unifiedWindow.consts.slider.viewType.widgetSDKView?this.sliderButton.title=this.translate("tooltip_close_widgets"):this.sliderButton.title=this.translate("tooltip_open_widgets")}function H(){if(this.appContext.conf.unifiedConf.widgetSDK){this.sliderButton.title=this.translate("tooltip_open_widgets");this.focusOnElement(this.LPViewMap.widgetSdkButton,this.maximizedView)}}function I(a){var b=a&&"number"==typeof a.newValue&&a.newValue||0;if(b>0){P.removeClass(this.titleDiv,this.LPClassesMap.lp_slider_gap);J.call(this,b)}else{P.addClass(this.titleDiv,this.LPClassesMap.lp_slider_gap);this.addClass(this.widgetNotificationContainer,"lpHide")}}function J(a){this.widgetNotificationText.innerHTML=""+a;this.removeClass(this.widgetNotificationContainer,"lpHide");this.shakeX(this.getFirstElement(this.widgetNotificationContainer))}function K(){var a=this.featureStateManager.isEngagementWindowBorderEnabled();a||(this.maximizedView.style.border="none")}function L(){var a=this.featureStateManager.getEngagementWindowBoxShadowConfig();a&&a.length>0&&(this.maximizedView.style.boxShadow=a)}function M(){this.customize(this.maximizedView);this.customize(this.minimizedView);this.customize(this.bufferStrip);this.appContext.wrapperWindow.adjustConfigStyle(this.appContext.themer)}function N(a){this.mainWindow.appendChild(a)}function O(a){this.maximizedView.appendChild(a)}var P=lpTag.taglets.lpUtil;lpTag.unifiedWindow.WrapperWindowExtenderBase=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"WrapperWindowExtenderBase",LPViewMap:{header:"^header",maximized:"^maximized",minimizedView:"^minimized",headerText:"^headerText",chattingWithIcon:"^chattingWithIcon",closeButton:"^close",topMenu:"^top_menu",topMenuButton:"^menu-top-btn",minimizeButton:"^minimize",maximizeButton:"^maximize",minimizeButtonImg:"^minimizeButtonImage",closeButtonImg:"^closeButtonImage",widgetSdkButton:"^widget_sdk"},CloseOnEndType:{OPEN:"OPEN",CLOSE:"CLOSE"},LPClassesMap:{visitorHasTyped:"lp_visitor_has_typed",lp_slider_gap:"lp_slider_gap"},initialize:function(a){this.models=a.models;this.endChatWasInitiated=!1;this.forgetMeInitiated=!1;this.isClosingWindow=!1;this.appContextConf=a.appContext&&a.appContext.conf||{};this.featureStateManager=a.appContext.featureStateManager;this.State=lpTag.unifiedWindow.State;this.states=this.appContext.uiStateManager.WINDOW_STATE;this.mainWindow=this.appContext.wrapperWindow.getMainWindowElement();this.minimizedView=this.appContext.wrapperWindow.getMinimizedElement();this.bufferStrip=this.appContext.wrapperWindow.getBufferStripElement();this.maximizedView=this.appContext.wrapperWindow.getMaximizedElement();this.sliderButton=this.appContext.wrapperWindow.getSliderButton();this.titleDiv=this.appContext.wrapperWindow.getTitleDiv();this.chattingWithIcon=this.appContext.wrapperWindow.getChattingWIthIcon();this.widgetNotificationContainer=this.appContext.wrapperWindow.getWidgetNotificationContainer();this.widgetNotificationText=this.appContext.wrapperWindow.getWidgetNotificationText();this.appContext.wrapperWindow.unbindDomEvents();this.windowConf=this.appContextConf.windowConf;this.closeOnEnd=this.windowConf.closeWindowButtonBehaviorType;this.isAsync=this.appContextConf.engConf&&this.appContextConf.engConf.async;this.isSMS=this.appContextConf.engConf&&this.appContextConf.engConf.externalTargets&&!!this.appContextConf.engConf.externalTargets[lpTag.unifiedWindow.consts.externalTargets.SMS];this.stateHistory=[];this.dialogStatics=lpTag.AMSStatics&&lpTag.AMSStatics.dialog||{};this.consumerConfirmedClose=!1;this.topMenuEnabled=this.featureStateManager.isMenuTop();this.renderMap=this.featureStateManager.renderMap;this.topMenuButtonStyle=this.featureStateManager.getStyleConfig(this.renderMap.TOP_MENU_BUTTON);this.closeButtonStyle=this.featureStateManager.getStyleConfig(this.renderMap.CLOSE_BUTTON);this.topMenuButton=this.getFirstElement(this.LPViewMap.topMenuButton,this.maximizedView);this.featureStateManager=this.appContext.featureStateManager;p.call(this,!0);var b=!(a.appContext.conf&&a.appContext.conf.unifiedConf&&a.appContext.conf.unifiedConf.connectorsSfConfig);this.appContext.wrapperWindow.showClose(b);this.appContext.wrapperWindow.showMinimized(!0);this.appContext.wrapperWindow.showTopMenu(!0);M.call(this);this.removeClass(this.minimizedView,"lpHide");this.appContext.conf.unifiedConf.widgetSDK&&this.setWidgetSDKView.call(this);this.showMessageUs=this.appContext.conf.engConf.async&&!this.isSMS},events:function(){this.bindModel({path:this.uiPath.STATE,callback:y,context:this});this.bindModel({path:this.chatPath.AGENT_NAME,callback:B,context:this});this.bindModel({path:this.chatPath.SDK_NOTIFICATIONS,context:this,callback:I});this.bindModel({path:this.chatPath.SDK_BUTTON_ENABLE,context:this,callback:a});this.bindViewEvent({inView:this.maximizedView,selector:this.LPViewMap.topMenuButton,DOMEvent:"click",callback:e,context:this});this.bindViewEvent({inView:this.maximizedView,selector:this.LPViewMap.closeButton,DOMEvent:"click",callback:f,context:this});this.bindViewEvent({inView:this.maximizedView,selector:this.LPViewMap.widgetSdkButton,DOMEvent:"click",callback:h,context:this});this.bindViewEvent({view:this.mainWindow,DOMEvent:"keyup",callback:this.stopPropagation,context:this});this.bindViewEvent({view:this.mainWindow,DOMEvent:"keydown",callback:this.stopPropagation,context:this});this.bindViewEvent({view:this.mainWindow,DOMEvent:"keypress",callback:this.stopPropagation,context:this});this.bindViewEvent({inView:this.minimizedView,selector:this.LPViewMap.closeButton,DOMEvent:"click",callback:g,context:this});this.appContext.events.bind({appName:"*",eventName:this.EventName.viewController.SHOW_FORGET_ME,context:this,func:m});this.appContext.events.bind({appName:"*",eventName:this.EventName.viewController.CLOSE_WINDOW_FORGET_ME,context:this,func:l});this.appContext.events.bind({appName:lpTag.unifiedWindow.ForgetMeDialogViewController.ControllerName,eventName:this.EventName.viewController.DIALOG_CLOSED,context:this,func:k});this.appContext.events.bind({appName:"*",eventName:this.EventName.viewController.INITIATE_END_CHAT,context:this,func:i});this.appContext.events.bind({appName:"*",eventName:this.EventName.viewController.VISITOR_HAS_TYPED,context:this,func:o});this.appContext.events.bind({appName:lpTag.unifiedWindow.EndChatDialogViewController.ControllerName,eventName:this.EventName.viewController.DIALOG_CLOSED,context:this,func:c});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.THANK_YOU_PAGE,context:this,func:F});this.appContext.events.bind({appName:"*",eventName:lpTag.unifiedWindow.events.viewController.SLIDER_VIEW_CHANGE,func:G,context:this});this.appContext.events.bind({appName:"*",eventName:lpTag.unifiedWindow.events.viewController.SLIDER_CLOSED,func:H,context:this});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.FILE_SHARE,eventName:lpTag.unifiedWindow.events.imageShare.SHOW_PREVIEW,func:N,context:this});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.FILE_SHARE,eventName:lpTag.unifiedWindow.events.imageShare.IMAGE_PREVIEW_SHOW,func:O,context:this});this.appContext.browserStateManager.on(this.appContext.browserStateManager.EVENT_NAME.FOCUS_CHANGE,E,this);this.maximizedVisible=this.getModelParam(this.uiPath.WINDOW_MAXIMIZED);this.bindTopMenuDismissEvent()},render:function(){var a=this.appContext.deviceDetector.getDeviceFamilyName().toLowerCase(),b='@charset "UTF-8";.lp-window-root *{box-sizing:border-box;font-weight:normal;letter-spacing:0;font-family:inherit;opacity:1;filter:alpha(opacity=100);max-width:none;direction:inherit;text-align:inherit;outline:none}.lp-window-root *::-moz-focus-inner{border:0}.lp-window-root .lp_main_area *{-webkit-overflow-scrolling:touch;-webkit-text-size-adjust:none;-webkit-font-smoothing:antialiased}.lp-window-root img{margin:0;padding:0;border:0;vertical-align:bottom;background:inherit;background:initial;position:static;position:initial;color:black;width:auto;height:auto;text-shadow:none;box-shadow:none;-webkit-box-shadow:initial;line-height:normal}.lp-window-root b,.lp-window-root strong{font-weight:bold}.lp-window-root h1,.lp-window-root h2,.lp-window-root h3,.lp-window-root h4,.lp-window-root h5,.lp-window-root h6,.lp-window-root p,.lp-window-root blockquote,.lp-window-root pre,.lp-window-root a,.lp-window-root abbr,.lp-window-root acronym,.lp-window-root address,.lp-window-root big,.lp-window-root cite,.lp-window-root code,.lp-window-root del,.lp-window-root dfn,.lp-window-root em,.lp-window-root ins,.lp-window-root kbd,.lp-window-root q,.lp-window-root s,.lp-window-root samp,.lp-window-root small,.lp-window-root strike,.lp-window-root strong,.lp-window-root sub,.lp-window-root sup,.lp-window-root tt,.lp-window-root var,.lp-window-root b,.lp-window-root u,.lp-window-root i,.lp-window-root center,.lp-window-root dl,.lp-window-root dt,.lp-window-root dd,.lp-window-root ol,.lp-window-root ul,.lp-window-root li,.lp-window-root fieldset,.lp-window-root form,.lp-window-root select,.lp-window-root label,.lp-window-root legend,.lp-window-root table,.lp-window-root caption,.lp-window-root tbody,.lp-window-root tfoot,.lp-window-root thead,.lp-window-root tr,.lp-window-root th,.lp-window-root td,.lp-window-root article,.lp-window-root aside,.lp-window-root canvas,.lp-window-root details,.lp-window-root embed,.lp-window-root figure,.lp-window-root figcaption,.lp-window-root footer,.lp-window-root header,.lp-window-root menu,.lp-window-root nav,.lp-window-root output,.lp-window-root ruby,.lp-window-root section,.lp-window-root summary,.lp-window-root span,.lp-window-root time,.lp-window-root mark,.lp-window-root audio,.lp-window-root video,.lp-window-root p{margin:0;padding:0;border:0;vertical-align:baseline;background:inherit;background:initial;position:static;position:initial;color:inherit;width:auto;height:auto;text-shadow:none;box-shadow:none;-webkit-box-shadow:initial;line-height:normal;font-size:inherit}.lp-window-root input:not([type="radio"]){margin:0;padding:0;border:0;vertical-align:baseline;background:inherit;background:initial;position:static;position:initial;color:black;width:auto;height:auto;text-shadow:none;box-shadow:none;-webkit-box-shadow:initial;line-height:normal}.lp-window-root input[type="radio"],.lp-window-root textarea{margin:0;padding:0;border:0;vertical-align:baseline;position:static;position:initial;color:black;width:auto;height:auto;min-height:0;text-shadow:none;box-shadow:none;-webkit-box-shadow:initial;line-height:normal}.lp-window-root input[type="radio"]{-moz-appearance:radio;-webkit-appearance:radio;appearance:radio}.lp-window-root textarea{font-size:inherit}.lp-window-root legend{display:block}.lp-window-root div,.lp-window-root button{margin:0;padding:0;border:0;vertical-align:baseline;background:inherit;background:initial;position:static;position:initial;font-family:inherit;color:inherit;width:auto;height:auto;text-shadow:none;box-shadow:none;-webkit-box-shadow:initial;line-height:normal;font-size:inherit}.lp-window-root button{font-size:1em;border-radius:0}.lp-window-root input[type="checkbox"]{-moz-appearance:checkbox;-webkit-appearance:checkbox;appearance:checkbox}.lp-window-root input{height:auto;vertical-align:middle}.lp-window-root .lpHide,.lp-window-root .lp_hidden{display:none !important}.lp-window-root .lpNoOutlineFocus{outline:none !important}.lp-window-root .lpInlineBlock{display:inline-block !important}.lp-window-root .lpClearfix:after{visibility:hidden;display:block;font-size:0;content:" ";clear:both;height:0}.lp-window-root *:disabled{cursor:default}.lp-window-root *:disabled img{opacity:0.5}.lp_desktop .lp-window-root .lp_close-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp_desktop .lp-window-root .lp_close-icon.lp_icon-white img{top:-40px !important;left:-480px !important}.lp_desktop .lp-window-root .lp_close-icon.lp_icon-white svg path{fill:#ffffff}.lp_desktop .lp-window-root .lp_close-icon img{top:0 !important;left:-480px !important;position:absolute !important}.lp_desktop .lp-window-root .lp_close-icon svg path{fill:#656668}.lp_desktop .lp-window-root .lp_menu-top-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp_desktop .lp-window-root .lp_menu-top-icon.lp_icon-white img{top:-40px !important;left:-480px !important}.lp_desktop .lp-window-root .lp_menu-top-icon.lp_icon-white svg path{fill:#ffffff}.lp_desktop .lp-window-root .lp_menu-top-icon img{top:0 !important;left:-480px !important;position:absolute !important}.lp_desktop .lp-window-root .lp_menu-top-icon svg path{fill:#656668}.lp_desktop .lp-window-root .lp_minimize-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp_desktop .lp-window-root .lp_minimize-icon.lp_icon-white img{top:-40px !important;left:-600px !important}.lp_desktop .lp-window-root .lp_minimize-icon.lp_icon-white svg path{fill:#ffffff}.lp_desktop .lp-window-root .lp_minimize-icon img{top:0 !important;left:-600px !important;position:absolute !important}.lp_desktop .lp-window-root .lp_minimize-icon svg path{fill:#656668}.lp_desktop .lp-window-root .lp_chevron-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp_desktop .lp-window-root .lp_chevron-icon.lp_icon-white img{top:-40px !important;left:-1680px !important}.lp_desktop .lp-window-root .lp_chevron-icon.lp_icon-white svg path{fill:#ffffff}.lp_desktop .lp-window-root .lp_chevron-icon img{top:0 !important;left:-1680px !important;position:absolute !important}.lp_desktop .lp-window-root .lp_chevron-icon svg path{fill:#656668}.lp_desktop .lp-window-root .lp_maximize-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp_desktop .lp-window-root .lp_maximize-icon.lp_icon-white img{top:-40px !important;left:-960px !important}.lp_desktop .lp-window-root .lp_maximize-icon.lp_icon-white svg path{fill:#ffffff}.lp_desktop .lp-window-root .lp_maximize-icon img{top:0 !important;left:-960px !important;position:absolute !important}.lp_desktop .lp-window-root .lp_maximize-icon svg path{fill:#656668}.lp_desktop .lp-window-root .lp_actions_button,.lp_desktop .lp-window-root .lp_emoji_button,.lp_desktop .lp-window-root .lp_slider{width:22px;height:22px}.lp_desktop .lp-window-root .lp_close,.lp_desktop .lp-window-root .lp_minimize,.lp_desktop .lp-window-root .lp_menu-top-btn,.lp_desktop .lp-window-root .lp_maximize,.lp_desktop .lp-window-root .lp_menu-top-btn{width:30px;height:22px}.lp_desktop .lp-window-root .lp_slider_header .lp_minimize{width:22px;height:22px}.lp_tablet .lp-window-root .lp_close-icon,.lp_mobile .lp-window-root .lp_close-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:24px !important;min-width:24px;height:24px !important}.lp_tablet .lp-window-root .lp_close-icon.lp_icon-white img,.lp_mobile .lp-window-root .lp_close-icon.lp_icon-white img{top:-40px !important;left:-480px !important}.lp_tablet .lp-window-root .lp_close-icon.lp_icon-white svg path,.lp_mobile .lp-window-root .lp_close-icon.lp_icon-white svg path{fill:#ffffff}.lp_tablet .lp-window-root .lp_close-icon img,.lp_mobile .lp-window-root .lp_close-icon img{top:0 !important;left:-480px !important;position:absolute !important}.lp_tablet .lp-window-root .lp_close-icon svg path,.lp_mobile .lp-window-root .lp_close-icon svg path{fill:#656668}.lp_tablet .lp-window-root .lp_menu-top-icon,.lp_mobile .lp-window-root .lp_menu-top-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:24px !important;min-width:24px;height:24px !important}.lp_tablet .lp-window-root .lp_menu-top-icon.lp_icon-white img,.lp_mobile .lp-window-root .lp_menu-top-icon.lp_icon-white img{top:-40px !important;left:-480px !important}.lp_tablet .lp-window-root .lp_menu-top-icon.lp_icon-white svg path,.lp_mobile .lp-window-root .lp_menu-top-icon.lp_icon-white svg path{fill:#ffffff}.lp_tablet .lp-window-root .lp_menu-top-icon img,.lp_mobile .lp-window-root .lp_menu-top-icon img{top:0 !important;left:-480px !important;position:absolute !important}.lp_tablet .lp-window-root .lp_menu-top-icon svg path,.lp_mobile .lp-window-root .lp_menu-top-icon svg path{fill:#656668}.lp_tablet .lp-window-root .lp_minimize-icon,.lp_mobile .lp-window-root .lp_minimize-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:24px !important;min-width:24px;height:24px !important}.lp_tablet .lp-window-root .lp_minimize-icon.lp_icon-white img,.lp_mobile .lp-window-root .lp_minimize-icon.lp_icon-white img{top:-40px !important;left:-600px !important}.lp_tablet .lp-window-root .lp_minimize-icon.lp_icon-white svg path,.lp_mobile .lp-window-root .lp_minimize-icon.lp_icon-white svg path{fill:#ffffff}.lp_tablet .lp-window-root .lp_minimize-icon img,.lp_mobile .lp-window-root .lp_minimize-icon img{top:0 !important;left:-600px !important;position:absolute !important}.lp_tablet .lp-window-root .lp_minimize-icon svg path,.lp_mobile .lp-window-root .lp_minimize-icon svg path{fill:#656668}.lp_tablet .lp-window-root .lp_chevron-icon,.lp_mobile .lp-window-root .lp_chevron-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:24px !important;min-width:24px;height:24px !important}.lp_tablet .lp-window-root .lp_chevron-icon.lp_icon-white img,.lp_mobile .lp-window-root .lp_chevron-icon.lp_icon-white img{top:-40px !important;left:-600px !important}.lp_tablet .lp-window-root .lp_chevron-icon.lp_icon-white svg path,.lp_mobile .lp-window-root .lp_chevron-icon.lp_icon-white svg path{fill:#ffffff}.lp_tablet .lp-window-root .lp_chevron-icon img,.lp_mobile .lp-window-root .lp_chevron-icon img{top:0 !important;left:-600px !important;position:absolute !important}.lp_tablet .lp-window-root .lp_chevron-icon svg path,.lp_mobile .lp-window-root .lp_chevron-icon svg path{fill:#656668}.lp_tablet .lp-window-root .lp_maximize-icon,.lp_mobile .lp-window-root .lp_maximize-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:24px !important;min-width:24px;height:24px !important}.lp_tablet .lp-window-root .lp_maximize-icon.lp_icon-white img,.lp_mobile .lp-window-root .lp_maximize-icon.lp_icon-white img{top:-40px !important;left:-960px !important}.lp_tablet .lp-window-root .lp_maximize-icon.lp_icon-white svg path,.lp_mobile .lp-window-root .lp_maximize-icon.lp_icon-white svg path{fill:#ffffff}.lp_tablet .lp-window-root .lp_maximize-icon img,.lp_mobile .lp-window-root .lp_maximize-icon img{top:0 !important;left:-960px !important;position:absolute !important}.lp_tablet .lp-window-root .lp_maximize-icon svg path,.lp_mobile .lp-window-root .lp_maximize-icon svg path{fill:#656668}.lp_tablet .lp-window-root .lp_actions_button,.lp_tablet .lp-window-root .lp_emoji_button,.lp_tablet .lp-window-root .lp_slider,.lp_mobile .lp-window-root .lp_actions_button,.lp_mobile .lp-window-root .lp_emoji_button,.lp_mobile .lp-window-root .lp_slider{width:24px;height:24px}.lp_tablet .lp-window-root .lp_close,.lp_tablet .lp-window-root .lp_minimize,.lp_tablet .lp-window-root .lp_menu-top-btn,.lp_tablet .lp-window-root .lp_maximize,.lp_tablet .lp-window-root .lp_menu-top-btn,.lp_mobile .lp-window-root .lp_close,.lp_mobile .lp-window-root .lp_minimize,.lp_mobile .lp-window-root .lp_menu-top-btn,.lp_mobile .lp-window-root .lp_maximize,.lp_mobile .lp-window-root .lp_menu-top-btn{width:30px;height:24px}.lp_tablet .lp-window-root .lp_slider_header .lp_minimize,.lp_mobile .lp-window-root .lp_slider_header .lp_minimize{width:24px;height:24px}.lp-window-root button:focus,.lp-window-root input:focus,.lp-window-root textarea:focus,.lp-window-root select:focus,.lp-window-root a:focus,.lp-window-root div:focus{outline:#6A9FB1 solid 2px}.lp_mobile .lp-window-root,.lp_tablet .lp-window-root,.lp_desktop .lp-window-root{font-family:"Arial"}.lp_mobile .lp-window-root>.lp_buffer-strip,.lp_tablet .lp-window-root>.lp_buffer-strip,.lp_desktop .lp-window-root>.lp_buffer-strip{display:none}.lp_mobile .lp-window-root .lp_centerd_img,.lp_tablet .lp-window-root .lp_centerd_img,.lp_desktop .lp-window-root .lp_centerd_img{position:absolute;margin:auto;top:0;left:0;right:0;bottom:0}.lp_mobile .lp-window-root table.lp_centralizer,.lp_tablet .lp-window-root table.lp_centralizer,.lp_desktop .lp-window-root table.lp_centralizer{height:100%;width:100%}.lp_mobile .lp-window-root table.lp_centralizer td,.lp_tablet .lp-window-root table.lp_centralizer td,.lp_desktop .lp-window-root table.lp_centralizer td{text-align:center;vertical-align:middle}.lp_mobile .lp-window-root .lp_rotator-container,.lp_tablet .lp-window-root .lp_rotator-container,.lp_desktop .lp-window-root .lp_rotator-container{position:relative;display:inline-block;width:100px;height:100px}.lp_mobile .lp-window-root .lp_rotator-container .lp_rotator-container-bg,.lp_tablet .lp-window-root .lp_rotator-container .lp_rotator-container-bg,.lp_desktop .lp-window-root .lp_rotator-container .lp_rotator-container-bg{position:absolute;top:0;right:0;bottom:0;left:0;background-color:rgba(0,0,0,0);opacity:0.92;border-radius:10px}.lp_mobile .lp-window-root .lp_rotator-container .lp_rotator,.lp_tablet .lp-window-root .lp_rotator-container .lp_rotator,.lp_desktop .lp-window-root .lp_rotator-container .lp_rotator{padding-top:12px;text-align:center;position:absolute;top:0;right:0;bottom:0;left:0}.lp_mobile .lp-window-root>.lp_minimized .lp_header,.lp_tablet .lp-window-root>.lp_minimized .lp_header,.lp_desktop .lp-window-root>.lp_minimized .lp_header,.lp_mobile .lp-window-root>.lp_maximized .lp_header,.lp_tablet .lp-window-root>.lp_maximized .lp_header,.lp_desktop .lp-window-root>.lp_maximized .lp_header{border-color:#d6d6d6;border-width:1px;border-style:solid;font-size:1.1em;z-index:2;width:100%;position:absolute}.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper,.lp_desktop .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper{width:100%;height:100%}.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title,.lp_desktop .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title{direction:ltr}.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title>*,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title>*,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title>*,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title>*,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title>*,.lp_desktop .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title>*{vertical-align:middle}.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title .lp_top-text,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title .lp_top-text,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title .lp_top-text,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title .lp_top-text,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title .lp_top-text,.lp_desktop .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title .lp_top-text{overflow:hidden;text-overflow:ellipsis;display:inline-block;margin-left:8px;max-width:150px;white-space:nowrap}.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title .lp_chatting-with-icon.lpHide ~ .lp_top-text,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title .lp_chatting-with-icon.lpHide ~ .lp_top-text,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title .lp_chatting-with-icon.lpHide ~ .lp_top-text,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title .lp_chatting-with-icon.lpHide ~ .lp_top-text,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title .lp_chatting-with-icon.lpHide ~ .lp_top-text,.lp_desktop .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title .lp_chatting-with-icon.lpHide ~ .lp_top-text{margin-left:0}.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_slider.lp_hidden,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_slider.lp_hidden,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_slider.lp_hidden,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_slider.lp_hidden,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_slider.lp_hidden,.lp_desktop .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_slider.lp_hidden{display:none !important}.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_close.lp_hidden,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_close.lp_hidden,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_close.lp_hidden,.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_minimize.lp_hidden,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_minimize.lp_hidden,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_minimize.lp_hidden,.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_maximize.lp_hidden,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_maximize.lp_hidden,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_maximize.lp_hidden,.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_popout.lp_hidden,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_popout.lp_hidden,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_popout.lp_hidden,.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_refresh.lp_hidden,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_refresh.lp_hidden,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_refresh.lp_hidden,.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon.lp_hidden,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon.lp_hidden,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon.lp_hidden,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_close.lp_hidden,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_close.lp_hidden,.lp_desktop .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_close.lp_hidden,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_minimize.lp_hidden,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_minimize.lp_hidden,.lp_desktop .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_minimize.lp_hidden,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_maximize.lp_hidden,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_maximize.lp_hidden,.lp_desktop .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_maximize.lp_hidden,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_popout.lp_hidden,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_popout.lp_hidden,.lp_desktop .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_popout.lp_hidden,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_refresh.lp_hidden,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_refresh.lp_hidden,.lp_desktop .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_refresh.lp_hidden,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon.lp_hidden,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon.lp_hidden,.lp_desktop .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon.lp_hidden{display:none}.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_close:disabled,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_close:disabled,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_close:disabled,.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_minimize:disabled,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_minimize:disabled,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_minimize:disabled,.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_maximize:disabled,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_maximize:disabled,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_maximize:disabled,.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_popout:disabled,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_popout:disabled,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_popout:disabled,.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_refresh:disabled,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_refresh:disabled,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_refresh:disabled,.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon:disabled,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon:disabled,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon:disabled,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_close:disabled,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_close:disabled,.lp_desktop .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_close:disabled,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_minimize:disabled,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_minimize:disabled,.lp_desktop .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_minimize:disabled,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_maximize:disabled,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_maximize:disabled,.lp_desktop .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_maximize:disabled,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_popout:disabled,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_popout:disabled,.lp_desktop .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_popout:disabled,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_refresh:disabled,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_refresh:disabled,.lp_desktop .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_refresh:disabled,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon:disabled,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon:disabled,.lp_desktop .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon:disabled{cursor:default}.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_close:disabled img,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_close:disabled img,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_close:disabled img,.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_minimize:disabled img,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_minimize:disabled img,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_minimize:disabled img,.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_maximize:disabled img,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_maximize:disabled img,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_maximize:disabled img,.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_popout:disabled img,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_popout:disabled img,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_popout:disabled img,.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_refresh:disabled img,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_refresh:disabled img,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_refresh:disabled img,.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon:disabled img,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon:disabled img,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon:disabled img,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_close:disabled img,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_close:disabled img,.lp_desktop .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_close:disabled img,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_minimize:disabled img,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_minimize:disabled img,.lp_desktop .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_minimize:disabled img,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_maximize:disabled img,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_maximize:disabled img,.lp_desktop .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_maximize:disabled img,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_popout:disabled img,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_popout:disabled img,.lp_desktop .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_popout:disabled img,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_refresh:disabled img,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_refresh:disabled img,.lp_desktop .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_refresh:disabled img,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon:disabled img,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon:disabled img,.lp_desktop .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon:disabled img{opacity:0.5}.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper button,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper button,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper button,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper button,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper button,.lp_desktop .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper button{padding:0;background:none;border:none;position:absolute;cursor:pointer}.lp_mobile .lp-window-root>.lp_minimized .lp_header.lp_slider,.lp_tablet .lp-window-root>.lp_minimized .lp_header.lp_slider,.lp_desktop .lp-window-root>.lp_minimized .lp_header.lp_slider,.lp_mobile .lp-window-root>.lp_maximized .lp_header.lp_slider,.lp_tablet .lp-window-root>.lp_maximized .lp_header.lp_slider,.lp_desktop .lp-window-root>.lp_maximized .lp_header.lp_slider{position:absolute;width:22px;height:22px;top:5px;left:5px}.lp_mobile .lp-window-root>.lp_minimized>.lp_main,.lp_tablet .lp-window-root>.lp_minimized>.lp_main,.lp_desktop .lp-window-root>.lp_minimized>.lp_main,.lp_mobile .lp-window-root>.lp_maximized>.lp_main,.lp_tablet .lp-window-root>.lp_maximized>.lp_main,.lp_desktop .lp-window-root>.lp_maximized>.lp_main{padding:0;z-index:1;height:100%;width:100%;position:absolute;right:0;bottom:0}.lp_mobile .lp-window-root>.lp_minimized>.lp_main .lp_wait,.lp_tablet .lp-window-root>.lp_minimized>.lp_main .lp_wait,.lp_desktop .lp-window-root>.lp_minimized>.lp_main .lp_wait,.lp_mobile .lp-window-root>.lp_maximized>.lp_main .lp_wait,.lp_tablet .lp-window-root>.lp_maximized>.lp_main .lp_wait,.lp_desktop .lp-window-root>.lp_maximized>.lp_main .lp_wait{position:absolute;top:0;bottom:0;left:0;right:0}.lp_mobile .lp-window-root>.lp_minimized>.lp_main .lp_wait table,.lp_tablet .lp-window-root>.lp_minimized>.lp_main .lp_wait table,.lp_desktop .lp-window-root>.lp_minimized>.lp_main .lp_wait table,.lp_mobile .lp-window-root>.lp_maximized>.lp_main .lp_wait table,.lp_tablet .lp-window-root>.lp_maximized>.lp_main .lp_wait table,.lp_desktop .lp-window-root>.lp_maximized>.lp_main .lp_wait table{height:100%;width:100%}.lp_mobile .lp-window-root>.lp_minimized>.lp_main .lp_wait table td,.lp_tablet .lp-window-root>.lp_minimized>.lp_main .lp_wait table td,.lp_desktop .lp-window-root>.lp_minimized>.lp_main .lp_wait table td,.lp_mobile .lp-window-root>.lp_maximized>.lp_main .lp_wait table td,.lp_tablet .lp-window-root>.lp_maximized>.lp_main .lp_wait table td,.lp_desktop .lp-window-root>.lp_maximized>.lp_main .lp_wait table td{text-align:center;vertical-align:middle}.lp_mobile .lp-window-root>.lp_minimized>.lp_main>.lp_message,.lp_tablet .lp-window-root>.lp_minimized>.lp_main>.lp_message,.lp_desktop .lp-window-root>.lp_minimized>.lp_main>.lp_message,.lp_mobile .lp-window-root>.lp_maximized>.lp_main>.lp_message,.lp_tablet .lp-window-root>.lp_maximized>.lp_main>.lp_message,.lp_desktop .lp-window-root>.lp_maximized>.lp_main>.lp_message{text-align:center;width:100%;height:100%}.lp_mobile .lp-window-root>.lp_minimized>.lp_main>.lp_message img[src=""],.lp_tablet .lp-window-root>.lp_minimized>.lp_main>.lp_message img[src=""],.lp_desktop .lp-window-root>.lp_minimized>.lp_main>.lp_message img[src=""],.lp_mobile .lp-window-root>.lp_maximized>.lp_main>.lp_message img[src=""],.lp_tablet .lp-window-root>.lp_maximized>.lp_main>.lp_message img[src=""],.lp_desktop .lp-window-root>.lp_maximized>.lp_main>.lp_message img[src=""]{display:none}.lp_mobile .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_text,.lp_tablet .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_text,.lp_desktop .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_text,.lp_mobile .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_text,.lp_tablet .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_text,.lp_desktop .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_text{padding:10px 4px 0 4px;text-align:center}.lp_mobile .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_text:empty,.lp_tablet .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_text:empty,.lp_desktop .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_text:empty,.lp_mobile .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_text:empty,.lp_tablet .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_text:empty,.lp_desktop .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_text:empty{display:none}.lp_mobile .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area,.lp_tablet .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area,.lp_desktop .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area,.lp_mobile .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area,.lp_tablet .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area,.lp_desktop .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area{position:relative;text-align:center;padding:0 5%;height:40px;margin-top:5px}.lp_mobile .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area button,.lp_tablet .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area button,.lp_desktop .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area button,.lp_mobile .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area button,.lp_tablet .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area button,.lp_desktop .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area button{padding:9px 6px;width:45%;float:left;font-size:.9em;border:none;text-align:center;cursor:pointer;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.lp_mobile .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_confirm_button,.lp_tablet .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_confirm_button,.lp_desktop .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_confirm_button,.lp_mobile .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_confirm_button,.lp_tablet .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_confirm_button,.lp_desktop .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_confirm_button{color:#fff;background-color:#0363ad;margin-left:10%;-webkit-border-radius:2px;-moz-border-radius:2px;-ms-border-radius:2px;-o-border-radius:2px;border-radius:2px}.lp_mobile .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_confirm_button:disabled,.lp_tablet .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_confirm_button:disabled,.lp_desktop .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_confirm_button:disabled,.lp_mobile .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_confirm_button:disabled,.lp_tablet .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_confirm_button:disabled,.lp_desktop .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_confirm_button:disabled{opacity:0.5;cursor:default}.lp_mobile .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_confirm_button:hover,.lp_tablet .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_confirm_button:hover,.lp_desktop .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_confirm_button:hover,.lp_mobile .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_confirm_button:focus,.lp_tablet .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_confirm_button:focus,.lp_desktop .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_confirm_button:focus,.lp_mobile .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_confirm_button:hover,.lp_tablet .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_confirm_button:hover,.lp_desktop .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_confirm_button:hover,.lp_mobile .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_confirm_button:focus,.lp_tablet .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_confirm_button:focus,.lp_desktop .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_confirm_button:focus{background-color:#025487}.lp_lpIos .lp_mobile .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button:hover,.lp_mobile .lp_lpIos .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button:hover,.lp_lpIos .lp_tablet .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button:hover,.lp_tablet .lp_lpIos .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button:hover,.lp_lpIos .lp_desktop .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button:hover,.lp_desktop .lp_lpIos .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button:hover,.lp_lpIos .lp_mobile .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button:focus,.lp_mobile .lp_lpIos .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button:focus,.lp_lpIos .lp_tablet .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button:focus,.lp_tablet .lp_lpIos .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button:focus,.lp_lpIos .lp_desktop .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button:focus,.lp_desktop .lp_lpIos .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button:focus,.lp_lpIos .lp_mobile .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button:hover,.lp_mobile .lp_lpIos .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button:hover,.lp_lpIos .lp_tablet .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button:hover,.lp_tablet .lp_lpIos .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button:hover,.lp_lpIos .lp_desktop .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button:hover,.lp_desktop .lp_lpIos .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button:hover,.lp_lpIos .lp_mobile .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button:focus,.lp_mobile .lp_lpIos .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button:focus,.lp_lpIos .lp_tablet .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button:focus,.lp_tablet .lp_lpIos .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button:focus,.lp_lpIos .lp_desktop .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button:focus,.lp_desktop .lp_lpIos .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button:focus{background:#F2F2F2}.lp_mobile .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button,.lp_tablet .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button,.lp_desktop .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button,.lp_mobile .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button,.lp_tablet .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button,.lp_desktop .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_cancel_button{background:transparent;color:#6d6e70}.lp_mobile .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_single_button,.lp_tablet .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_single_button,.lp_desktop .lp-window-root>.lp_minimized>.lp_main>.lp_message .lp_buttons_area .lp_single_button,.lp_mobile .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_single_button,.lp_tablet .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_single_button,.lp_desktop .lp-window-root>.lp_maximized>.lp_main>.lp_message .lp_buttons_area .lp_single_button{float:none;margin-left:0}.lp_mobile .lp-window-root>.lp_maximized,.lp_tablet .lp-window-root>.lp_maximized,.lp_desktop .lp-window-root>.lp_maximized{border:1px solid #d6d6d6;border-radius:5px 5px 0 0;box-shadow:0px 0px 16px 3px rgba(0,0,0,0.2);color:#000}.lp_mobile .lp-window-root>.lp_maximized>.lp_header,.lp_tablet .lp-window-root>.lp_maximized>.lp_header,.lp_desktop .lp-window-root>.lp_maximized>.lp_header{cursor:move}.lp_mobile .lp-window-root>.lp_maximized>.lp_main,.lp_tablet .lp-window-root>.lp_maximized>.lp_main,.lp_desktop .lp-window-root>.lp_maximized>.lp_main{background-color:#fff}.lp_mobile .lp-window-root>.lp_maximized.lp_external-window,.lp_tablet .lp-window-root>.lp_maximized.lp_external-window,.lp_desktop .lp-window-root>.lp_maximized.lp_external-window{border-radius:0;position:fixed;left:0;right:0;bottom:0;top:0;width:100%;height:100%;overflow:hidden}.lp_mobile .lp-window-root>.lp_maximized.lp_external-window>.lp_header,.lp_tablet .lp-window-root>.lp_maximized.lp_external-window>.lp_header,.lp_desktop .lp-window-root>.lp_maximized.lp_external-window>.lp_header{cursor:default}.lp_mobile .lp-window-root>.lp_maximized.lp_external-window>.lp_header .lp_header-content-wrapper .lp_minimize,.lp_tablet .lp-window-root>.lp_maximized.lp_external-window>.lp_header .lp_header-content-wrapper .lp_minimize,.lp_desktop .lp-window-root>.lp_maximized.lp_external-window>.lp_header .lp_header-content-wrapper .lp_minimize{display:none}.lp_mobile .lp-window-root>.lp_maximized>.lp_header,.lp_tablet .lp-window-root>.lp_maximized>.lp_header,.lp_desktop .lp-window-root>.lp_maximized>.lp_header{border-radius:5px 5px 0 0;background-color:#f0f0f0}.lp_mobile .lp-window-root>.lp_minimized,.lp_tablet .lp-window-root>.lp_minimized,.lp_desktop .lp-window-root>.lp_minimized{border-radius:5px 5px 0 0}.lp_mobile .lp-window-root>.lp_minimized .lp_header,.lp_tablet .lp-window-root>.lp_minimized .lp_header,.lp_desktop .lp-window-root>.lp_minimized .lp_header{border-radius:5px 5px 0 0;background-color:#f0f0f0;box-shadow:0px 0px 16px 3px rgba(0,0,0,0.2);height:100%}.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_title,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_title,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_title{color:#000;width:100%;padding:10px 0 0 9px;text-align:left}.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper{-webkit-border-radius:inherit;-moz-border-radius:inherit;-ms-border-radius:inherit;-o-border-radius:inherit;border-radius:inherit}.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper>div,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper>div,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper>div{-webkit-border-radius:inherit;-moz-border-radius:inherit;-ms-border-radius:inherit;-o-border-radius:inherit;border-radius:inherit}.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper{text-align:center;display:table;border-collapse:collapse}.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper>*,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper>*,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper>*,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper>*{vertical-align:middle;display:table-cell}.lp_mobile .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_header-buttons-container,.lp_tablet .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_header-buttons-container,.lp_mobile .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_header-buttons-container,.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_header-buttons-container{display:table}.lp_mobile .lp-window-root>.lp_minimized.lp_webview-window>.lp_header .lp_header-content-wrapper .lp_minimize,.lp_tablet .lp-window-root>.lp_minimized.lp_webview-window>.lp_header .lp_header-content-wrapper .lp_minimize,.lp_mobile .lp-window-root>.lp_maximized.lp_webview-window>.lp_header .lp_header-content-wrapper .lp_minimize,.lp_tablet .lp-window-root>.lp_maximized.lp_webview-window>.lp_header .lp_header-content-wrapper .lp_minimize{display:block}.lp_mobile .lp-window-root>.lp_buffer-strip,.lp_tablet .lp-window-root>.lp_buffer-strip{position:fixed;opacity:0.95;bottom:0;left:0;right:0}.lp_mobile .lp-window-root>.lp_buffer-strip .lp_buffer-strip-container,.lp_tablet .lp-window-root>.lp_buffer-strip .lp_buffer-strip-container{width:100%;height:100%}.lp_mobile .lp-window-root>.lp_maximized,.lp_tablet .lp-window-root>.lp_maximized{z-index:99999999;opacity:0.95;position:fixed;top:0;right:0;bottom:0;left:0;border-radius:0}.lp_mobile .lp-window-root>.lp_maximized>.lp_header,.lp_tablet .lp-window-root>.lp_maximized>.lp_header{direction:ltr;height:8%;min-height:40px}.lp_mobile .lp-window-root>.lp_maximized>.lp_header .lp_title,.lp_tablet .lp-window-root>.lp_maximized>.lp_header .lp_title{width:100%;text-align:center}.lp_mobile .lp-window-root>.lp_maximized>.lp_header .lp_title .lp_top-text,.lp_tablet .lp-window-root>.lp_maximized>.lp_header .lp_title .lp_top-text{text-align:center}.lp_mobile .lp-window-root>.lp_maximized>.lp_header button,.lp_tablet .lp-window-root>.lp_maximized>.lp_header button{top:0;right:0;height:100%;width:40px;text-align:center;position:absolute}.lp_mobile .lp-window-root>.lp_maximized>.lp_header button.lp_close,.lp_tablet .lp-window-root>.lp_maximized>.lp_header button.lp_close{right:0}.lp_mobile .lp-window-root>.lp_maximized>.lp_header button.lp_minimize,.lp_tablet .lp-window-root>.lp_maximized>.lp_header button.lp_minimize{right:auto;left:0}.lp_mobile .lp-window-root>.lp_maximized>.lp_main,.lp_tablet .lp-window-root>.lp_maximized>.lp_main{height:92%;max-height:calc(100% - 40px)}.lp_mobile .lp-window-root>.lp_maximized>.lp_main .lp_buttons_area,.lp_tablet .lp-window-root>.lp_maximized>.lp_main .lp_buttons_area{margin-top:3%}.lp_mobile .lp-window-root>.lp_maximized>.lp_main .lp_buttons_area button,.lp_tablet .lp-window-root>.lp_maximized>.lp_main .lp_buttons_area button{font-size:1.2em}.lp_mobile .lp-window-root>.lp_minimized,.lp_tablet .lp-window-root>.lp_minimized{position:fixed;z-index:99999999;top:28%;right:0;min-width:40px;height:43%;border-radius:5px 0 0 5px}.lp_mobile .lp-window-root>.lp_minimized.lp_top-left,.lp_tablet .lp-window-root>.lp_minimized.lp_top-left{top:5%;right:auto;left:0;transform:rotate(180deg)}.lp_mobile .lp-window-root>.lp_minimized.lp_top-left .lp_notification_number,.lp_tablet .lp-window-root>.lp_minimized.lp_top-left .lp_notification_number{transform:rotate(180deg)}.lp_mobile .lp-window-root>.lp_minimized.lp_top-right,.lp_tablet .lp-window-root>.lp_minimized.lp_top-right{top:5%}.lp_mobile .lp-window-root>.lp_minimized.lp_bottom-right,.lp_tablet .lp-window-root>.lp_minimized.lp_bottom-right{top:52%}.lp_mobile .lp-window-root>.lp_minimized.lp_bottom-left,.lp_tablet .lp-window-root>.lp_minimized.lp_bottom-left{top:52%;right:auto;left:0;transform:rotate(180deg)}.lp_mobile .lp-window-root>.lp_minimized.lp_bottom-left .lp_notification_number,.lp_tablet .lp-window-root>.lp_minimized.lp_bottom-left .lp_notification_number{transform:rotate(180deg)}.lp_mobile .lp-window-root>.lp_minimized.lp_middle-left,.lp_tablet .lp-window-root>.lp_minimized.lp_middle-left{top:30%;right:auto;left:0;transform:rotate(180deg)}.lp_mobile .lp-window-root>.lp_minimized.lp_middle-left .lp_notification_number,.lp_tablet .lp-window-root>.lp_minimized.lp_middle-left .lp_notification_number{transform:rotate(180deg)}.lp_mobile .lp-window-root>.lp_minimized>.lp_main,.lp_tablet .lp-window-root>.lp_minimized>.lp_main{height:100%}.lp_mobile .lp-window-root>.lp_minimized>.lp_main>.lp_header,.lp_tablet .lp-window-root>.lp_minimized>.lp_main>.lp_header{direction:ltr;border-radius:5px 0 0 5px}.lp_mobile .lp-window-root>.lp_minimized>.lp_main>.lp_header button,.lp_tablet .lp-window-root>.lp_minimized>.lp_main>.lp_header button{width:100%;text-align:center}.lp_mobile .lp-window-root>.lp_minimized>.lp_main>.lp_header button.lp_close,.lp_tablet .lp-window-root>.lp_minimized>.lp_main>.lp_header button.lp_close{padding-top:8px}.lp_mobile .lp-window-root>.lp_minimized>.lp_main>.lp_header button.lp_maximize,.lp_tablet .lp-window-root>.lp_minimized>.lp_main>.lp_header button.lp_maximize{margin:31px 0 0 3px;padding:4px 0 10px 0;width:84%;transform:rotate(270deg);outline:none}.lp_mobile .lp-window-root>.lp_minimized>.lp_main>.lp_header .lp_title,.lp_tablet .lp-window-root>.lp_minimized>.lp_main>.lp_header .lp_title{padding:0;position:absolute;top:63%;left:-30px;width:100px;white-space:nowrap;transform:rotate(270deg)}.lp_mobile .lp-window-root>.lp_minimized>.lp_main>.lp_header .lp_title .lp_top-text,.lp_tablet .lp-window-root>.lp_minimized>.lp_main>.lp_header .lp_title .lp_top-text{max-width:94px}.lp_desktop .lp-window-root{font-size:13px}.lp_desktop .lp-window-root>*{width:280px;z-index:99999999;position:fixed;right:20px;bottom:0}.lp_desktop .lp-window-root>* .lp_header{height:36px;padding:0px 5px}.lp_desktop .lp-window-root>* .lp_header button{z-index:99999999}.lp_desktop .lp-window-root>.lp_maximized>.lp_header .lp_title{float:left;padding-top:9px;padding-left:3px}.lp_desktop .lp-window-root>.lp_maximized>.lp_header .lp_header-content-wrapper .lp_header-buttons-container{float:right;direction:ltr !important;font-size:0}.lp_desktop .lp-window-root>.lp_maximized>.lp_header .lp_header-content-wrapper button{position:relative;text-align:center}.lp_desktop .lp-window-root>.lp_maximized>.lp_header .lp_header-content-wrapper button.lp_close,.lp_desktop .lp-window-root>.lp_maximized>.lp_header .lp_header-content-wrapper button.lp_minimize{display:inline-block}.lp_desktop .lp-window-root>.lp_maximized>.lp_header .lp_header-content-wrapper .lp_slider{position:absolute;left:5px;top:5px;width:22px;height:22px}.lp_desktop .lp-window-root>.lp_maximized>.lp_header .lp_header-content-wrapper .lp_slider_gap{margin-left:20px}.lp_desktop .lp-window-root>.lp_maximized>.lp_main{height:auto;top:36px}.lp_desktop .lp-window-root>.lp_maximized>.lp_main .lp_cancel_button:hover,.lp_desktop .lp-window-root>.lp_maximized>.lp_main .lp_cancel_button:focus{background:#F2F2F2}.lp_desktop .lp-window-root>.lp_maximized.lp_external-window{border-radius:0;position:absolute;left:0;right:0;bottom:0;top:0;width:100%;height:100%;margin:0 auto;max-width:600px}.lp_desktop .lp-window-root>.lp_maximized.lp_external-window>.lp_header .lp_close,.lp_desktop .lp-window-root>.lp_maximized.lp_external-window>.lp_header .lp_minimize{display:none}.lp_desktop .lp-window-root>.lp_maximized.lp_external-window.lp_no-top>.lp_header{display:none}.lp_desktop .lp-window-root>.lp_maximized.lp_external-window.lp_no-top>.lp_main{top:0}.lp_desktop .lp-window-root>.lp_minimized{height:36px}.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_title{float:left;padding-top:9px;padding-left:7px;width:auto}.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper .lp_header-buttons-container{float:right;direction:ltr !important;font-size:0}.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper button{position:relative;text-align:center}.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper button.lp_close,.lp_desktop .lp-window-root>.lp_minimized .lp_header .lp_header-content-wrapper button.lp_maximize{display:inline-block}.lp_desktop .lp-window-root>.lp_minimized>.lp_main{width:100%;height:100%}.lp_desktop .lp-window-root .lp_maximized .lp_notification_number.wsdkNotification{text-align:center;display:table;border-collapse:collapse;width:100%;height:100%;cursor:default;float:left;overflow:visible;-webkit-border-radius:50%;-moz-border-radius:50%;-ms-border-radius:50%;-o-border-radius:50%;border-radius:50%;background-color:#ed1c24;width:20px;height:20px;font-size:0.7em;z-index:1000;margin:7px 8px;margin-left:15px;text-indent:-1px}.lp_desktop .lp-window-root .lp_maximized .lp_notification_number.wsdkNotification>*{vertical-align:middle;display:table-cell}.lp_desktop .lp-window-root .lp_maximized .lp_notification_number.wsdkNotification .lp_notification_text{text-align:center;color:white;-webkit-border-radius:inherit;-moz-border-radius:inherit;-ms-border-radius:inherit;-o-border-radius:inherit;border-radius:inherit}.lp_mobile .lp-window-root{font-size:14px}.lp_mobile .lp-window-root .lp_maximized .lp_header .lp_slider{left:40px}.lp_mobile .lp-window-root .lp_maximized .lp_notification_number.wsdkNotification{text-align:center;display:table;border-collapse:collapse;width:100%;height:100%;cursor:default;float:left;overflow:visible;-webkit-border-radius:50%;-moz-border-radius:50%;-ms-border-radius:50%;-o-border-radius:50%;border-radius:50%;background-color:#ed1c24;width:20px;height:20px;font-size:0.7em;margin:7px 8px;z-index:1000;text-indent:-1px;position:absolute;left:60px;top:8px}.lp_mobile .lp-window-root .lp_maximized .lp_notification_number.wsdkNotification>*{vertical-align:middle;display:table-cell}.lp_mobile .lp-window-root .lp_maximized .lp_notification_number.wsdkNotification .lp_notification_text{top:4px;position:absolute;width:20px;height:20px;text-align:center;color:white;-webkit-border-radius:inherit;-moz-border-radius:inherit;-ms-border-radius:inherit;-o-border-radius:inherit;border-radius:inherit}.lp_tablet .lp-window-root{font-size:18px}.lp_tablet .lp-window-root>.lp_minimized{top:38%;height:24%}.lp_tablet .lp-window-root>.lp_minimized.lp_bottom-right,.lp_tablet .lp-window-root>.lp_minimized.lp_bottom-left{top:auto;bottom:5%}.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title .lp_top-text{max-width:250px}.lp_tablet .lp-window-root>.lp_maximized .lp_header .lp_header-content-wrapper .lp_slider{left:40px}.lp_tablet .lp-window-root>.lp_maximized.lp_webview-window>.lp_header .lp_header-content-wrapper .lp_minimize{display:block}.lp_tablet .lp-window-root .lp_maximized .lp_notification_number.wsdkNotification{text-align:center;display:table;border-collapse:collapse;width:100%;height:100%;cursor:default;float:left;overflow:visible;-webkit-border-radius:50%;-moz-border-radius:50%;-ms-border-radius:50%;-o-border-radius:50%;border-radius:50%;background-color:#ed1c24;width:25px;height:25px;font-size:0.6em;margin:7px 8px;z-index:1000;text-indent:-1px;position:absolute;left:60px;top:21px}.lp_tablet .lp-window-root .lp_maximized .lp_notification_number.wsdkNotification>*{vertical-align:middle;display:table-cell}.lp_tablet .lp-window-root .lp_maximized .lp_notification_number.wsdkNotification .lp_notification_text{position:absolute;width:25px;height:25px;top:5px;text-align:center;color:white;-webkit-border-radius:inherit;-moz-border-radius:inherit;-ms-border-radius:inherit;-o-border-radius:inherit;border-radius:inherit}.lp_mobile.lp_landscape .lp-window-root>.lp_minimized{top:16%;height:67%}.lp_mobile.lp_landscape .lp-window-root>.lp_minimized .lp_main .lp_header .lp_title{top:53%}.lp_mobile.lp_landscape .lp-window-root>.lp_minimized .lp_main .lp_header .lp_title .lp_top-text{max-width:63px}.lp_tablet.lp_landscape .lp-window-root>.lp_minimized{top:34%;height:32%}.lp_tablet.lp_landscape .lp-window-root>.lp_minimized .lp_main .lp_header .lp_title{top:53%}.lp_tablet.lp_landscape .lp-window-root>.lp_minimized .lp_main .lp_header .lp_title .lp_top-text{max-width:63px}.lp_tablet.lp_landscape .lp-window-root>.lp_minimized.lp_top-right,.lp_tablet.lp_landscape .lp-window-root>.lp_minimized.lp_top-left{top:5%}.lp_tablet.lp_landscape .lp-window-root>.lp_minimized.lp_bottom-right,.lp_tablet.lp_landscape .lp-window-root>.lp_minimized.lp_bottom-left{top:auto;bottom:5%}.lp-window-root .lp_main{position:absolute;bottom:0;left:0;right:0}.lp-window-root .lp_main .lp_location_top{text-align:center;position:relative;font-weight:normal;vertical-align:middle;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;justify-content:center;align-items:center;text-align:-webkit-center;display:table;width:100%}.lp-window-root .lp_main .lp_location_top .lp_top_header_text{text-align:-webkit-center;display:inline-block;display:table-cell;vertical-align:middle;text-align:center}.lp_lpNativeAndroid .lp-window-root .lp_main .lp_location_top .lp_top_header_text{height:40px}.lp-window-root .lp_main .lp_main_area{position:absolute;top:0;bottom:0;left:0;right:0}.lp-window-root .lp_main .lp_main_area .lp_top_menu{display:block;overflow:hidden;top:5px;height:auto;width:auto;max-width:260px;min-width:190px;position:absolute;z-index:10001;background-color:#fff;right:10px;border:1px solid #d6d6d6;padding-top:12px;border-radius:15px;box-shadow:0 0 20px -5px rgba(43,47,51,0.4)}.lp-window-root .lp_main .lp_main_area .lp_top_menu .lp_action_items_wrapper,.lp-window-root .lp_main .lp_main_area .lp_top_menu .lp_action_items_wrapper_top{width:100%;height:100%;display:-ms-inline-grid;display:inline-grid;-ms-grid-columns:100%;background-color:transparent}.lp-window-root .lp_main .lp_main_area .lp_top_menu .lp_action_items_wrapper button,.lp-window-root .lp_main .lp_main_area .lp_top_menu .lp_action_items_wrapper_top button{background-color:transparent}.lp-window-root .lp_main .lp_main_area .lp_top_menu .lp_action_wrapper{display:-ms-flex;display:-webkit-flex;display:flex;align-items:center}.lp-window-root .lp_main .lp_main_area .lp_top_menu .lp_action_item{width:100%;height:auto;margin:auto;padding:8px 8px 8px 16px;opacity:0.9}.lp-window-root .lp_main .lp_main_area .lp_top_menu .lp_action_item:hover{opacity:1;background:rgba(0,0,0,0.05)}.lp-window-root .lp_main .lp_main_area .lp_top_menu .lp_action_item:disabled{opacity:0.4}.lp-window-root .lp_main .lp_main_area .lp_top_menu .lp_action_item div{float:left;margin-right:8px}.lp-window-root .lp_main .lp_main_area .lp_top_menu .lp_action_item .lp_title{padding-left:5px;max-width:100%}.lp-window-root .lp_main .lp_main_area .lp_top_menu .lp_top_logo_bar{text-align:center;border-top:1px solid #d6d6d6;height:32px;padding-top:7px;padding-bottom:7px;opacity:0.7}.lp-window-root .lp_main .lp_main_area .lp_top_menu .lp_top_logo_bar:hover{opacity:1}.lp-window-root .lp_main .lp_main_area .lp_location_center{z-index:2;overflow-y:auto;overflow-x:hidden;height:calc(100% - 60px);padding:0 0 0 0;transition:bottom .25s}.lp-window-root .lp_main .lp_main_area .lp_location_bottom{display:none;position:absolute;bottom:0;left:0;right:0;z-index:111;height:40px;padding:0 5px 0 5px;border-top:1px solid #d6d6d6;background-color:#fff;transition:bottom .25s}.lp-window-root .lp_main .lp_main_area .lp_location_bottom .lp_actions_button{margin:0;background:#ffffff;border:none;text-align:center;font-family:"Arial";cursor:pointer;box-shadow:none;left:5px;bottom:7px;position:absolute;background:transparent}.lp-window-root .lp_main .lp_main_area .lp_location_bottom .lp_actions_button .lp_enable_image{display:block}.lp-window-root .lp_main .lp_main_area .lp_location_bottom .lp_actions_button .lp_disable_image{display:none}.lp-window-root .lp_main .lp_main_area .lp_location_bottom .lp_actions_button:disabled{cursor:default}.lp-window-root .lp_main .lp_main_area .lp_location_bottom .lp_actions_button:disabled .lp_enable_image{display:none}.lp-window-root .lp_main .lp_main_area .lp_location_bottom .lp_actions_button:disabled .lp_disable_image{display:block}.lp-window-root .lp_main .lp_main_area .lp_location_bottom .lp_actions_button .lp_enable_image{display:block}.lp-window-root .lp_main .lp_main_area .lp_location_bottom .lp_actions_button .lp_rotated_image{display:none}.lp-window-root .lp_main .lp_main_area .lp_location_bottom .lp_emoji_button{margin:0;background:#ffffff;border:none;text-align:center;font-family:"Arial";cursor:pointer;box-shadow:none;right:40px;bottom:6px;background:transparent;position:absolute}.lp-window-root .lp_main .lp_main_area .lp_location_bottom .lp_emoji_button .lp_enable_image{display:block}.lp-window-root .lp_main .lp_main_area .lp_location_bottom .lp_emoji_button .lp_disable_image{display:none}.lp-window-root .lp_main .lp_main_area .lp_location_bottom .lp_emoji_button:disabled{cursor:default}.lp-window-root .lp_main .lp_main_area .lp_location_bottom .lp_emoji_button:disabled .lp_enable_image{display:none}.lp-window-root .lp_main .lp_main_area .lp_location_bottom .lp_emoji_button:disabled .lp_disable_image{display:block}.lp-window-root .lp_main .lp_main_area .lp_location_bottom .lp_emoji_button .lp_enable_image{display:block}.lp-window-root .lp_main .lp_main_area .lp_location_bottom .lp_emoji_button .lp_rotated_image{display:none}.lp-window-root .lp_main .lp_main_area .lp_location_bottom .lp_file_button{background-color:transparent;position:absolute;left:10px;bottom:6px;cursor:pointer}.lp-window-root .lp_main .lp_main_area .lp_location_bottom .lp_file_button input.lp_file_input{width:100%;height:100%;position:absolute;left:0;top:0;opacity:0;cursor:pointer}.lp-window-root .lp_main .lp_main_area .lp_location_bottom .lp_file_button svg{width:20px;height:20px}.lp-window-root .lp_main .lp_main_area .lp_location_bottom .lp_file_button svg path{stroke-width:1px}.lp-window-root .lp_main .lp_main_area .lp_location_bottom .lp_bottom_area{position:absolute;left:0px;top:0;right:0;height:100%;padding:0 40px}.lp-window-root .lp_main .lp_main_area .lp_location_bottom .lp_bottom_area.lp_menu_top{padding-left:20px}.lp-window-root .lp_main .lp_main_area .lp_location_bottom .lp_bottom_area.lp_menu_top.lp_attachment_icon{padding-left:40px}.lp-window-root .lp_main .lp_main_area .lp_location_bottom .lp_emoji_supported{padding:0 73px 0 40px}.lp-window-root .lp_minimized{cursor:pointer}.lp-window-root .lp_minimized:active{cursor:move}.lp-window-root .lp_minimized .lp_notification_number{text-align:center;display:table;border-collapse:collapse;width:100%;height:100%;cursor:default;float:left;overflow:visible;-webkit-border-radius:50%;-moz-border-radius:50%;-ms-border-radius:50%;-o-border-radius:50%;border-radius:50%;background-color:#ed1c24;width:24px;height:24px;font-size:0.9em;margin:-12px 8px 0 8px;z-index:1000}.lp-window-root .lp_minimized .lp_notification_number>*{vertical-align:middle;display:table-cell}.lp-window-root .lp_minimized .lp_notification_number .lp_notification_text{text-align:center;color:white;-webkit-border-radius:inherit;-moz-border-radius:inherit;-ms-border-radius:inherit;-o-border-radius:inherit;border-radius:inherit}.lp-window-root .lp_minimized .lp_close_button{margin:0;background:#ffffff;border:none;text-align:center;font-family:"Arial";cursor:pointer;box-shadow:none;position:absolute;background-color:transparent;top:5px;right:10px;width:22px;height:22px;display:none}.lp-window-root .lp_minimized .lp_close_button .lp_enable_image{display:block}.lp-window-root .lp_minimized .lp_close_button .lp_disable_image{display:none}.lp-window-root .lp_minimized .lp_close_button:disabled{cursor:default}.lp-window-root .lp_minimized .lp_close_button:disabled .lp_enable_image{display:none}.lp-window-root .lp_minimized .lp_close_button:disabled .lp_disable_image{display:block}.lp-window-root .lp_minimized .lp_header_text_container{position:absolute;font-family:myriadpro, Trebuchet;font-weight:normal;font-size:10pt;color:#ffffff;left:0;top:0;height:100%;width:100%}.lp-window-root .lp_minimized .lp_header_text_container .lp_header_text{position:absolute;top:8px;left:0;font-size:0.9em;text-align:center;width:100%;height:100%;line-height:24px;color:#ffffff;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:50%;left:25%}.lp-window-root .lp_input_area{padding:13px 0px 11px 0px}.lp-window-root .lp_input_area .lp_chat_input{background-color:transparent;resize:none;border:none;width:100%;height:100%;padding:13px 0px;color:#525252;font-size:1em;vertical-align:middle}.lp-window-root .lp_input_area .lp_chat_input::-webkit-input-placeholder{font:inherit;font-style:italic;color:inherit}.lp-window-root .lp_input_area .lp_chat_input:-moz-placeholder{font:inherit;font-style:italic;color:inherit}.lp-window-root .lp_input_area .lp_chat_input::-moz-placeholder{font:inherit;font-style:italic;color:inherit}.lp-window-root .lp_input_area .lp_chat_input:-ms-input-placeholder{font:inherit;font-style:italic;color:inherit}.lp-window-root .lp_input_area .lp_expandable_textarea{background-color:transparent;line-height:15px;width:100%;resize:none;color:#525252;font-size:1em;outline-offset:4px;overflow-x:hidden;outline:none}.lp-window-root .lp_input_area .lp_expandable_textarea::-webkit-input-placeholder{font:inherit;font-style:italic;color:inherit;opacity:0.4}.lp-window-root .lp_input_area .lp_expandable_textarea:-moz-placeholder{font:inherit;font-style:italic;color:inherit;opacity:0.4}.lp-window-root .lp_input_area .lp_expandable_textarea::-moz-placeholder{font:inherit;font-style:italic;color:inherit;opacity:0.4}.lp-window-root .lp_input_area .lp_expandable_textarea:-ms-input-placeholder{font:inherit;font-style:italic;color:inherit;opacity:0.4}.lp-window-root .lp_send_button{background-color:transparent;position:absolute;right:9px;bottom:7px}.lp-window-root .lp_send_button:disabled{opacity:0.5}.lp-window-root .lp_paper_plane_button{background-color:transparent;position:absolute;right:9px;bottom:7px}.lp-window-root .lp_paper_plane_button:disabled{opacity:0.5}.lp-window-root input.lp_action_file_input{width:100%;height:100%;position:absolute;left:0;top:0;opacity:0;cursor:pointer}.lp-window-root .chips-wrapper{position:relative;overflow:hidden;padding:0 10px}.lp-window-root .chips-wrapper.chips-readonly .chips-slider .chips-row .chips-item{cursor:default}.lp-window-root .chips-wrapper .chips-slider{position:relative;transition:left .14s}.lp-window-root .chips-wrapper .chips-row{display:flex;height:32px;margin:10px 0}.lp-window-root .chips-wrapper .chips-row>.chips-item{flex-shrink:0;margin:0 10px 0 0;padding:0 10px;border:1px solid #d6d6d6;border-radius:16px;line-height:30px;font-size:12px;white-space:nowrap;outline:0 none;color:#4d4e4e;background:transparent none;cursor:pointer}.lp-window-root .chips-wrapper .chips-row>.chips-item:focus{border-color:#777}.lp-window-root .chips-wrapper .chips-row>.chips-item:last-of-type{margin-right:0}.lp-window-root .chips-wrapper .chips-nav{position:absolute;top:calc(50% - 20px);z-index:1;display:block;width:30px;height:40px;background-color:#e0e0e0;cursor:pointer}.lp-window-root .chips-wrapper .chips-nav.chips-nav-left{left:0;border-top-right-radius:3.75px;border-bottom-right-radius:3.75px}.lp-window-root .chips-wrapper .chips-nav.chips-nav-right{right:0;border-top-left-radius:3.75px;border-bottom-left-radius:3.75px}.lp-window-root .chips-wrapper .chips-nav:after,.lp-window-root .chips-wrapper .chips-nav:before{content:"";position:absolute;width:1px;height:12px;background-color:#777}.lp-window-root .chips-wrapper .chips-nav:before{top:8px;transform-origin:.5px 100%}.lp-window-root .chips-wrapper .chips-nav:after{bottom:8px;transform-origin:.5px 0}.lp-window-root .chips-wrapper .chips-nav.chips-nav-left:after,.lp-window-root .chips-wrapper .chips-nav.chips-nav-left:before{left:10px}.lp-window-root .chips-wrapper .chips-nav.chips-nav-right:after,.lp-window-root .chips-wrapper .chips-nav.chips-nav-right:before{right:10px}.lp-window-root .chips-wrapper .chips-nav.chips-nav-left:before,.lp-window-root .chips-wrapper .chips-nav.chips-nav-right:after{transform:rotate(45deg)}.lp-window-root .chips-wrapper .chips-nav.chips-nav-left:after,.lp-window-root .chips-wrapper .chips-nav.chips-nav-right:before{transform:rotate(-45deg)}@keyframes nodeInserted{0%{opacity:.99}to{opacity:1}}.lp-window-root .lp_chat_line_wrapper{position:relative;max-width:100%;padding:0px 10px 4px 10px;overflow:hidden}.lp-window-root .lp_chat_line_wrapper .agent_avatar{display:none}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line{width:100%}.lp-window-root .lp_chat_line_wrapper.agent_avatar_display .agent_avatar{display:inline-block;width:32px;height:32px;border-radius:16px;margin:0 11px 0 0;position:relative;top:2px;left:0px;-webkit-transition:left 1s ,width 1s, height 0.9s;-moz-transition:left 1s,width 1s, height 0.9s;-o-transition:left 1s,width 1s, height 0.9s;transition:left 1s,width 1s, height 0.5s}.lp-window-root .lp_chat_line_wrapper.agent_avatar_display .agent_avatar.hidden{left:-44px;width:0px;height:0px}.lp-window-root .lp_chat_line_wrapper.agent_avatar_display.lp_agent.avatar-padding .lp_time{left:43px}.lp-window-root .lp_chat_line_wrapper.agent_avatar_display.lp_agent.avatar-padding .lp_time_side{left:0px}.lp-window-root .lp_chat_line_wrapper.agent_avatar_display.lp_agent.lp_grouped .agent_avatar{opactiy:0}.lp-window-root .lp_chat_line_wrapper.agent_avatar_display.lp_agent .lp_chat_arrow_border{left:48px}.lp-window-root .lp_chat_line_wrapper.agent_avatar_display.lp_agent .lp_chat_arrow{left:49px}.lp-window-root .lp_chat_line_wrapper.agent_avatar_display.lp_agent .lp_time.lp_avatar_padding{padding-left:43px}.lp-window-root .lp_chat_line_wrapper.agent_avatar_display .lp_rich_content_line{width:calc(100% - 50px)}.lp-window-root .lp_chat_line_wrapper.agent_avatar_display .lp_rich_content_line.stretch{-webkit-transition-property:width;-webkit-transition-duration:.5s;-webkit-transition-delay:0.3s;-moz-transition-property:width;-moz-transition-duration:.5s;-moz-transition-delay:0.3s;-o-transition-property:width;-o-transition-duration:.5s;-o-transition-delay:0.3s;transition-property:width;transition-duration:.5s;transition-delay:0.3s;width:calc(100% - 20px)}.lp-window-root .lp_chat_line_wrapper .lp_time{text-align:left;position:relative;font-size:.8em;color:#6d6e70;top:0;padding:3px}.lp-window-root .lp_chat_line_wrapper .lp_time .lp_sender{vertical-align:text-top;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:100px;display:inline-block;color:inherit;font-style:inherit;font-family:inherit;font-weight:inherit}.lp-window-root .lp_chat_line_wrapper .lp_time_side{vertical-align:bottom;display:none;padding:0px 3px 0px 3px}.lp-window-root .lp_chat_line_wrapper .lp_time_bottom{padding-top:5px}.lp-window-root .lp_chat_line_wrapper.lp_chat_line_wrapper_auto{padding-left:0px;padding-right:0px}.lp-window-root .lp_chat_line_wrapper .lp_chat_line_auto_message{text-align:center;font-size:0.9em;padding:4px 0 6px}.lp-window-root .lp_chat_line_wrapper .lp_chat_line_auto_message.lp_underline{border-bottom:solid 1px #DCDCDC;margin:0.5em 0;padding-bottom:8px}.lp-window-root .lp_chat_line_wrapper .lp_chat_line_date_message{text-align:center;font-size:0.8em;font-weight:bold !important;padding:20px 0px 0px 0px}.lp-window-root .lp_chat_line_wrapper .lp_chat_line_date_message.lp_underline{border-bottom:groove 2px;margin:0.5em 0}.lp-window-root .lp_chat_line_wrapper .lp_chat_line{padding:10px;max-width:70%;display:inline-block;position:relative;top:2px;text-align:left;word-wrap:break-word}.lp-window-root .lp_chat_line_wrapper .lp_chat_line .lp_title_text{color:#525252;font-size:1em;padding-left:3px;padding-right:3px;line-height:16px;display:block}.lp-window-root .lp_chat_line_wrapper .lp_chat_line .lp_title_text *{color:inherit;line-height:inherit;font-size:inherit;direction:inherit;letter-spacing:inherit;overflow:inherit;text-align:inherit;white-space:inherit;word-spacing:inherit;z-index:inherit;text-indent:inherit;text-transform:inherit;background:inherit}.lp-window-root .lp_chat_line_wrapper .lp_chat_line .lp_title_text a{text-decoration:underline}.lp-window-root .lp_chat_line_wrapper .lp_chat_line .lp_title_text [data-lp-point=cb-offer] button{cursor:pointer}.lp-window-root .lp_chat_line_wrapper .lp_chat_line .lp_title_text [data-lp-point=cb-offer].lp_disable_offer{opacity:0.4}.lp-window-root .lp_chat_line_wrapper .lp_chat_line .lp_title_text [data-lp-point=cb-offer].lp_disable_offer button{cursor:default}.lp-window-root .lp_chat_line_wrapper .lp_chat_line .lp_title_text br{background-color:transparent}.lp-window-root .lp_chat_line_wrapper .lp_chat_line .lp_file_loader,.lp-window-root .lp_chat_line_wrapper .lp_chat_line .lp_file_loader:after{width:30px;height:30px;z-index:999}.lp-window-root .lp_chat_line_wrapper .lp_new_chat_line{padding:10px;max-width:70%;display:inline-block;position:relative;top:2px;text-align:left;word-wrap:break-word}.lp-window-root .lp_chat_line_wrapper .lp_new_chat_line .lp_title_text{color:#525252;font-size:1em;padding-left:3px;padding-right:3px;line-height:16px;display:block}.lp-window-root .lp_chat_line_wrapper .lp_new_chat_line .lp_title_text *{color:inherit;line-height:inherit;font-size:inherit;direction:inherit;letter-spacing:inherit;overflow:inherit;text-align:inherit;white-space:inherit;word-spacing:inherit;z-index:inherit;text-indent:inherit;text-transform:inherit;background:inherit}.lp-window-root .lp_chat_line_wrapper .lp_new_chat_line .lp_title_text a{text-decoration:underline}.lp-window-root .lp_chat_line_wrapper .lp_new_chat_line .lp_title_text [data-lp-point=cb-offer] button{cursor:pointer}.lp-window-root .lp_chat_line_wrapper .lp_new_chat_line .lp_title_text [data-lp-point=cb-offer].lp_disable_offer{opacity:0.4}.lp-window-root .lp_chat_line_wrapper .lp_new_chat_line .lp_title_text [data-lp-point=cb-offer].lp_disable_offer button{cursor:default}.lp-window-root .lp_chat_line_wrapper .lp_new_chat_line .lp_title_text br{background-color:transparent}.lp-window-root .lp_chat_line_wrapper .lp_new_chat_line .lp_file_loader,.lp-window-root .lp_chat_line_wrapper .lp_new_chat_line .lp_file_loader:after{width:30px;height:30px;z-index:999}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line{display:inline-block;position:relative}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock{position:relative}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout,.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock.lp-json-pollock-single-element{border:1px solid #d4d4d5;border-collapse:collapse;max-width:200px;background:#fff}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout{width:100%}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-vertical>.lp-json-pollock-layout{border:none;border-top:1px solid #d4d4d5}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-vertical>.lp-json-pollock-element-button,.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-vertical>.lp-json-pollock-element-image,.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-vertical>.lp-json-pollock-element-map,.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-vertical>.lp-json-pollock-element-text{border-top:1px solid #d4d4d5}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-vertical .lp-json-pollock-element-text+.lp-json-pollock-element-text,.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-vertical>:first-child{border-top:none}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-horizontal{display:table}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-horizontal>.lp-json-pollock-layout{border:none;border-left:1px solid #d4d4d5}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-horizontal>.lp-json-pollock-element-button,.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-horizontal>.lp-json-pollock-element-image,.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-horizontal>.lp-json-pollock-element-map,.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-horizontal>.lp-json-pollock-element-text{border-left:1px solid #d4d4d5}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-horizontal>*{display:table-cell;table-layout:fixed;vertical-align:middle}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-horizontal>:first-child{border-left:none}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-form{border:none;border-collapse:collapse}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-form>.lp-json-pollock-element-text{padding-top:5%;padding-left:12px;color:#000;font-size:17px;word-wrap:break-word;word-break:break-word}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-form .lp-json-pollock-layout-sectionList .lp-json-pollock-layout-section{border:none;margin-bottom:1%}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-form .lp-json-pollock-layout-sectionList .lp-json-pollock-layout-section .lp-json-pollock-element-text{padding-left:12px;color:#000;font-size:13px;word-wrap:break-word;word-break:break-word}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-form .lp-json-pollock-layout-sectionList .lp-json-pollock-layout-section .lp-json-pollock-layout-checklist>.lp-json-pollock-element-checkbox>.lp-json-pollock-border-element{border-top:1px solid #d4d4d5;width:90%;margin:0 5%;padding:.5px 0}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-form .lp-json-pollock-layout-sectionList .lp-json-pollock-layout-section .lp-json-pollock-layout-checklist>.lp-json-pollock-element-checkbox .lp-json-pollock-element-checkbox-wrapper{padding:3px 12px}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-form .lp-json-pollock-layout-sectionList .lp-json-pollock-layout-section .lp-json-pollock-layout-checklist>.lp-json-pollock-element-checkbox .lp-json-pollock-element-checkbox-wrapper .lp-json-pollock-element-checkbox-label{padding:0 6px;color:#000;font-size:13px;word-wrap:break-word;word-break:break-word;display:inline-block;vertical-align:top;width:85%}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-form .lp-json-pollock-layout-sectionList .lp-json-pollock-layout-section .lp-json-pollock-layout-checklist>.lp-json-pollock-element-checkbox .lp-json-pollock-element-checkbox-wrapper .lp-json-pollock-element-checkbox-input{display:inline-block;vertical-align:1.5px;font-size:13px;width:13px;height:13px;margin:0}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-form .lp-json-pollock-layout-buttonList{margin:8% 20% 5%}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-form .lp-json-pollock-layout-buttonList .lp-json-pollock-element-submit-button{margin:6% 0;word-break:break-word;word-wrap:break-word;background-color:#0363ad}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-form .lp-json-pollock-layout-buttonList .lp-json-pollock-element-submit-button input[type=submit]{border:1px solid #d4d4d5;background:none;width:100%;min-height:32px;text-align:center;color:#fff}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-form .lp-json-pollock-layout-buttonList .lp-json-pollock-element-submit-button input[type=submit]:disabled.lp-json-pollock-element-submit-button-disabled{background-color:#f0f0f0;color:#aaa}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-form .lp-json-pollock-layout-buttonList .lp-json-pollock-element-button{margin:6% 0;word-break:break-word;word-wrap:break-word}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-form .lp-json-pollock-layout-buttonList .lp-json-pollock-element-button button{border:1px solid #d4d4d5;background:none;width:100%;min-height:32px;text-align:center;color:#0363ad;padding:0}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-form .lp-json-pollock-layout-buttonList .lp-json-pollock-element-button button:active{background:#f0f0f0}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-carousel-wrapper{overflow:hidden;position:relative}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-carousel-wrapper:hover .lp-json-pollock-layout-carousel-arrow{opacity:1}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-carousel-wrapper>.lp-json-pollock-layout-carousel-arrow{opacity:.5;z-index:1;right:0;cursor:pointer;background-repeat:no-repeat;background-position:50%;background-size:cover;position:absolute;width:40px;height:40px;top:calc(50% - 20px);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAACXBIWXMAAAsSAAALEgHS3X78AAADoUlEQVRYhc2XMWgbZxTH/9+TdNIhH1jRJXQwOOgypJMNGVro4sVLhpDSBhooJoUW2tChLVmauUvB4K0NNFDHlHhIIKFrl5QO7RJQtgz+TjYttJEtWeJ0lU66e6+DrUbn2PHprND+x+++977fve/73veeEhH818qmMdLaXQCwcMinFoBHjlOpjuNPJY2E1u4CEX3KzO8AQDab5VwuS6NzgqDPzExKqa5S6g4zf+04lc0TQ2jtziulbonIG6ZZgGVZKBaLIKJD54dhCN/30Wq1OQxDIqJbzPyl41RaqSC0dq8B+N4wDNh2GaZpHvdTMXmeh52dhohIV0TeOmqbjoRw3dpdEblaKpVw6lRprMVHxcyo17fh+z4AfOA4ldVEELXa5rfM/PGZM6dhWVZqgFHV69vwPA8A3nacysOXQmjtXgbwYJIAoyCdTqcnIq+PHtjY6dLanVZKrVuWNXEAALDtMnK5XIGI7o+OxyCUUt8opfK2XZ44AAAQEWy7DGa+sB/xOITW7rSIXLXtsjrq+g211ejhxyc7qUBM04RlWSCi5RcgAFwjIi4Wi4mcfbj2FGu//ZUKxLKmwMyO1u58DIKI3i8Wi3RcFABgtlzAT5/P48a9jVQgpmkim80ygMsxCGa+YJqFxI7mZqZOCkKZTOY5hNbuWQAwjPxYjk4Cks8bEJEZ4Pkrenb4YVwNQRZX9jLy0puvJbIzDAPMXAYOXNG0mpuZwvKVc/ho7Sm2Gr2x7ScC8eSPDm7c28B3S+cxW05+rg5CbAJAEPRTASyuVLF85VzirQCAfr8PImoAAEQEIoKNDS2dTkfGUfV3T05/8Yvc+fXPsexERJ49q0uttlkVkVieeOz7f7/yCAzV7XY5iqKHQDxP/OD7PidxsNXonQggCPoIw5AAxCEArDIz7b/5x+r20vlUAADQbrdBRHpYaf0L4TiVllJqvdncZeaXB2S2XMClOTsVQBD04XkemPmr4VjsiorI9SiK+s3mbqoFkqher4OIHo+WeTEIx6m0ROSTdruNpNsyHsA2BoNBwMzvjo6/kKwcp7KqlFofqQknBuB5HkTkvYO9yP+32h5Ka/czACumWUCpVErVdzSbuxxFUSAiFx2n8uiweYk6MCK6Paw3xujAEIYhlFLrInI9dQd2AGaBiG4y8yKw9xRnMgTDyIOZEYYDDAYhh2FISqkegAcicnMiveghMNMA5rHfle9XR7tRFP2Mva68elTYJwbxKvQPW8lWJZlhMzkAAAAASUVORK5CYII=)}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-carousel-wrapper>.lp-json-pollock-layout-carousel-arrow.left{visibility:hidden;left:0;transform:rotate(180deg)}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-carousel-wrapper>.lp-json-pollock-layout-carousel-arrow:active{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAACXBIWXMAAAsSAAALEgHS3X78AAACGklEQVRYhcWXP0sjQRiHHyUIh5AoB2lSGHYshCsu9wncYGOnNtea+wa5LmiT5sBy7xOYtDZeaXMYP4FaCBbO4hVpAhI3cAheIBY72dvsbmT2n/6akM07+z4z75vfzCxMJhPeW4Ukg6S0TcCM+OkR6AlhXMV534LuSqjEDWBfI9wBOoAlhHGfGkJKuwZYwKZG8ij9BNpCGI+JIKS0G8BxwuR+OYA5r0yLrwB0MgIAKAGXalJ6EFLaFnq1j6tjKe3d4MNQOVTQaQ4AUzlAzd+wMyshpb2C29V5qhTMESyHpYLy1qa/LB6EWgWtPuiPxvy+e0oL0g5B4BqRtg7OHji9+ZsG4rPyoBmIUNfOU6VYoPu1zNH5MC3IbhAiliNulJeyADE9CCntapI3ZABS9SCmX94BZM0PkUob5SVa9VUOzx7oj8axx2cCcTt45uh8yI/tj1SK8Y8oU4j7NAD7JwNa9VX2Pi3HHf7Hg9A5eOQAAGry/nJcvDEAQC8I8Ut3ZH80zgLAy+lt5WrvGOpC3A7+sbX+IQ3AtRDGrG2rM2BXZ3SlWEgLAO6OzQyEUhP30JG3LoQwOpEQajWaOQM4BHbskFkpQq2yJFQjaAmRjimE0cgJ5JsQRuhfONe2Fcj3jJI7QN3fB1oQCsQCvhDTyALqAlUhjN68gLh30SawoxHu4BpRO5O7aATMClDj/63cxL2NX00/X5t1JhB56AUIMNlUILK0SAAAAABJRU5ErkJggg==)}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-carousel-wrapper>.lp-json-pollock-layout-carousel-arrow:hover{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAACXBIWXMAAAsSAAALEgHS3X78AAADTUlEQVRYhcWXsWslVRSHv3NnJjNbCA9sAhqIbyyUbSIpLGzSCGGriEFcsdh0uliondssCzaCaKdbCFGQDchCUqZc/4DFbRZs7hiIC2lkHwg7M2/m3WOxM2Hey3vJm8lTf+Wde+d+c+bec85PVJX/W36XRdYmG8DGlEcD4EEc9x+1eZ/MGwlrkw0R+URV3wUwRpyIMc05zjmnqgZIReQnVf0qjvtHl4awNlkTkbuq+qbneSwtBfi+j4hMne+coyxLhsOhc05NtfaLOO4POkFYm9wAdj3PEIYRvu9d9FFjKoqCLMtVVVPgrVm/aSaEtck94HoYLhGGYavNm1JV0jSjLEuAnTju/zgXRJL88b2qfnTlSkQQBJ0BmkrTjKIoAN6J4/7BuRDWJlvA/iIBJkAy4PXmgR073dYmPWAvCIKFAwBEUYjnmUhE7jfHzcS870QkjKLuZ+A8iQhhGKGq61XExyGqKFyPolBmXb9ax4OCw9//7gTi+x5BECAiX5+BAG6IiPP9+ZLoZ/tP+OW3mVf/XAVBgKrG1iZrYxAi8qHv++aiKACs9ALu76xy+/CkE4jvexgjDtgag1DV9TbJ6OpydCkQz/ONiGxBVcCsTVYBjGmXEWuQ7d0jAN57o9cCwlCWvHwKAazWD9qqK4gxHqr6Ipy9op10dTnizuYynx884XhQtF6/EIjHJxm3D0/4ZuslVnrtk1wNcQQwGrlOANu7R9zZXG51JpwbISJ/nULUeVy1HURXADj94D9PIQBE5GFRlP8JwHOI0qnqwRiEqv5cluVcoTgeFJcEcDinBjiARimvasfTeUr48aDg8UnG5msvtAYA6ibH9vuvvAqNSFQ94F6e5+6ivnOlF3QGGI0cRVGgql/WY5NX9KZzOszzYacN5lGWpYjIw2abNwZRRePj4XBYt2ILVZpmjEYuV9Xt5viZZFUR7jV6woUBVO97f9KLTM2Ycdz/oAbJ8/xSm6sqz56lNcDOZJMLF/uOT4FvPc8jDMNOviPPc+ec5sC1OO4/mDZvXgf2g6qut3NgBc45gD3gZmcHNgGzISK3VPVtqMu+4HkeqopzDlXnqiSUAfvArYV40SkwPWCNypVX3dFTVf2V56780aywLwzi39A/dO7LSuHpXdoAAAAASUVORK5CYII=)}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-carousel-wrapper .lp-json-pollock-layout-carousel{left:0;transition:left .5s;-webkit-transition:left .5s;-moz-transition:left .5s;-ms-transition:left .5s;-o-transition:left .5s;white-space:nowrap;position:relative}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-carousel-wrapper .lp-json-pollock-layout-carousel>*{border:1px solid #d4d4d5;display:inline-block;width:180px;vertical-align:top}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-carousel-wrapper .lp-json-pollock-element-text{white-space:normal}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-element-text{padding:5px 10px;color:#000;font-size:13px;word-wrap:break-word;word-break:break-word}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-element-button{width:100%;word-break:break-word;word-wrap:break-word}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-element-button button{border:none;background:none;width:100%;min-height:32px;margin-bottom:-1px;text-align:center;color:#0363ad;padding:10px}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-element-button button:active{background:#f0f0f0}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-element-image.loading{background-image:url("data:image/gif;base64,R0lGODlhFAAUAPfdAJiZmpeYmdvb29fX2Jucnby9vvT09NjY2Jmam6Chos/Q0Kmqq6KjpKytrqGio62ur7y8vb2+v/f39/X19dzc3M/P0Jydnvb29u/v76usrd7e3p2en56foK6vsKipqrW2t83OztnZ2tjZ2e7u7v39/ePj47u8vfj4+NHR0rO0tfPz89ra2tzd3c7Oz+Dg4M7Pz93d3b6/wOfn572+vqeoqc3NztjY2dDQ0dHS0rS1tp+goa2trvv7+729vtrb2+fn6K2urvDw8K+wsfr6+rOztL6/v9na2q6vr5qbnLW1tuHh4be4uczNzbGys7S0taOkpb6+v9DR0bu8vKqrq9LS0+rq6uvr6/n5+dPT087P0NDR0vLz87i5usLCw9fY2Ly9vdXW1tPT1JiZmf7+/rKztO3t7dzc3ezs7NLT06qrrNnZ2eLi4svMzNTV1cTExcvLzPz8/Nra2/P09MTFxd/g4N7f39/f36anqL/AwKurrMHBwqysraytrfLy8tTU1fb29+rq68DBwbq7vL/Awebm58XFxt/f4N3e3rKzs9XV1rm6u8zMzdvb3JWWlrm6urS1tcDAwaenqPn5+tvc3NbX17a3uKOjpJydnbu7vOrr6+7v7/f3+M/Pz7Gxsra2t7e3uPDx8fT19cDBwtHR0by+v/Hx8eTk5NTU1MHCwuXl5re4uNvc3dfX17m5usnKyra4udDQ0Kipqc/Q0aWmp8vMzeHh4srLy7Cys/r7+6usrLCxsu3t7sfIycrKy+Lj47CxscbGxufo6PX29rW2tsnJyeDh4fHy8r+/wMTExMPExJaXmOzt7bm7u7q7u8nJysTGxubm5unp6tHS08nLy83NzcjKyuPk5Kanp/v8/Ovs7OLi46WlptbW1////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjNGY0NDNmZC0yZWQwLTQzYWItYjc4Ny04M2VmMjFlZGE2MDMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NUQ5MUYzN0VDNTNBMTFFNjgzN0Y4NDM1QkFDMEVFODIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NUQ5MUYzN0RDNTNBMTFFNjgzN0Y4NDM1QkFDMEVFODIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpjNGY0NDNmZC0yZWQwLTQzYWItYjc4Ny04M2VmMjFlZGE2MDMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6YzRmNDQzZmQtMmVkMC00M2FiLWI3ODctODNlZjIxZWRhNjAzIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkECQAA3QAsAAAAABQAFAAACNsAuwkUaKBFCksIADggwmTLwIfdLlR44ACAxYsOGoCYALFEhA4BABRQcEBElAgAAjyA4GLgiAgLCECgJMCAwAsUREQg4EFKGYEtGlhYQAHiQEMNNjRg0s3AgwAFBBh9SCdGgAyhQFQcMBViCAAJDCKI2vWhnUEImlgCoIBjWYFXogBAkvDA24eEHqSoe3egFUeF1rbt+3AvWcICtQLgirjp08OIgw4tOtWUhp8uYcqkabObBBgiIJHC0vFjyJEH1KAokpJGG6MSKV7EqHFE1xOjkjxJmCAFpwsQAwIAIfkECQAA3QAsAAAAABQAFAAACOkAuwkUqKJCCgYAANBosYXEwIfdLrzYgTBhQg4LxByA2M3FjA4BAECocMCGAhMAEnwI5OKhngUEIAxYYUDgBAEDehDwAAGDQC8fLCygwFGghj0bgIDoRqJRggICig6kUyRAA2FbFgAYIPWhiJQtXmwwEbWr0RgIiNwBcGOCWYEncADgkNDG24ECLALYeLebj4QOACio+ZYHCgBPUiCAencCDgcvKiDkehcUIx4qHgRgXPiCQAVAhBLt2w1DBA8xB1DwHNFK1xJdPiQAYOJGiBBa3vhyK3WAmAUb9BKY4drsHwWzLn5acwJiQAAh+QQJAADdACwAAAAAFAAUAAAI4AC7CRRoQMGjBAAAJPiARdLAhwJ97GCQsCICBkd+QBTYhkgAAAUqHDhQoQCAAEsGQAyRgwCEAQIMCFQhYEABAk7ADJThhMAUHxsFwshDQIiZbpIaBJgBI+hADVAC5DqBhaJKpwNtAHCgIAeCAgKwDmQRAcFBAApkiu0mAQcADgkPrB0YpyIAuXO7rUjoAK1asSeovPUKdq6dQQgQKbA6N8RWNKEyBCiMdZmbAA2GdJskhEAaDVgnyOpCaGCinhFEsLgQ9FQYiAOWfIygRUmqvD+OUASgrEbebiTCEIH7AmtAACH5BAkAAN0ALAAAAAAUABQAAAjzALsJFDgEkCIdAAA4SFFBxcCHAn9c8oAgoUUGDUAYgBjkDaYEAAooOHAgCwQAATrMwTAQg5sGBCAMELCxm4oVAyAQeFBjIAg+BBaYgTiQwhQCXGTYzBCggACiD1l8SWABTgUHAAZAhTgAgAcMKRAUWLH1IYUeSARhVVCzbDcJUQAgBHDA7UMjFunaHYgXAMgbE/ZKwOFXEZIeT+1qiIGADCAPWfeG8NtiiIUEMzS4VYInQAZh3WRwIZChzlYKiCzksTWwRQcCEULsgohBlY4MXawMDFLoQQAAjII8vLCkgCuWDw3UaPCkl9KHN0aU/aPmwt6AACH5BAkAAN0ALAAAAAAUABQAAAjzALsJFMijCooMAAA4IPNCzsCH3QzU6ECDQ8KLDh68mACxxIwHAQAIynLgQIUCAAJ0iFBiIAYoCwhAGCDAgEADAgZAILAgwgiBFYBYWEAB4kAKCyw0ANFNDsgCAow+FFAgwJExChgAGCAV4gAANDTlQAC161QTHPxoVWDTrMAJChDwSXjA7UMRFwHUtStQTUKECi7wlYBC4Y0NBVjwZREBQYoqkQCI4IvXQQUeIItocOviWIAMErqBaLDhQ5WuSnZsAFJD4IgeQkycMarBSAwLOiphGFhCyK8gD1UEi5DyThhofDU82xCpw5wTfLuVsnbjJ8SAACH5BAkAAN0ALAAAAAAUABQAAAjsALsJFCjnBRkHAABkQFGFx8CH3Sa8eIAwYUIONDrUMACxRIQOAQAUqHDgQBZBAAI8mFFi4IgICwhAGCCAYzcDAgZAILAACgaBIBpYWEAB4kAKCywAqdCNx5EABQQYfSiggMoTmWgAGDAV4gAADNDg4GBCateBVRF8SINAwYSzAw0oAPAkoRq4Dw9YBGAE70AbCXUAQCHB7wQFCHaQQYDHLFwBJjiEYZMgQzO/X2loMvZKFDG8GqCoHEMCC6wycF3s2QCkhV8JdUQUIeDhy8+uxWr5kIYn5QMpLuByCZkwQQMmNs+KukikxduHAQEAIfkECQAA3QAsAAAAABQAFAAACO8AuwkUqKJCCgcAAOhQBGjIwIfdDIBowCChRQQeLv2A2A3DnA4BAEDIcuCAggIAEmB6E+RhjQcEIAxYoUKgAQEDIBBo4AaDQBlcCEyhwFGgmQUE+IDoNsRCgi8sig4UUCBABgmAPADwIvXhAAAOqCxBEiFqV4ErCiBIwgEADglnbSoAUBFAiLgDD1gMYBavXgBEmgzA223CjZTZZPjEK6AHEimEB371MCJyNxgFEliAE9lQBgKtZEC8UgLZIbjdJMAQEYHAAyYcf6zqoAeFjzgoigAI8CDZGY5rmN2xaNFBAxAGuo7wtCEhhxQvLkAMCAAh+QQJAADdACwAAAAAFAAUAAAI5QC7CRQoCcuHBAAAJHikwMDAhwJ/HGGAIKFFBjt8QBToZUkAAAUqHDhQoQCAAETaQASTg0CBAQJUCDQgYAAEAjlCDKQghEAeGBsF+phCwImMbgbSBICiIehAGDMCNMC1CKEIpw8HAGAARgiAHk2xChRQAMGHareUDBE7U4FCM8CqsB14IOFciHUB3B1owK2DvWPLfgDcTSsDNANJrMVKNkCGKwKd8fKkxOkhokImDWRViUAMIxokCLzAwkaPookghiHzMQaOFUa0RDi5ZEDQEDsQWkzI4MgPrJtaNNGRUEcSPyQgBgQAIfkECQAA3QAsAAAAABQAFAAACPEAuwkUSGJLCxoAADBIUUHFwIcCB4hZwCGhRQY7XlyAuAbVhwQATCiwcaACBAABOsxwMfDMFw8EItgQMEGggRUDIBBYoGcgrQYE9tSBOJDCAgsfvAgc1iAQHaIPBRRI0EhgEDtloEIcAGCBhG4kTvDQGtXEBhxkoU64AYBGWqg2Er4lekCuBDhzuxlQoHDMmmgO30pFkOREGiRx5nJlQGVMhgAxWJKVGuDB1xVNNuxQotWoBSAKCEKCGUMEjI3dLlDIScBDBAwDNUh5EABAES0hQtwwASDBhy4lIBpg0gCkRQAbFogZQPbPCyLGryn4QzQgACH5BAkAAN0ALAAAAAAUABQAAAjcALsJFNiHCZkEABBYStHCwMCH3UaAaOAAgMWLDh5UuACxWxsaAQAUQaHmgIICAAJ0iFACIhZSkETAkCDQgABKEAgsiDDiYRkNpjoKpLDAQoMWQpN2E1AgwIMTSoUOAOAgStSOTBHkuApxggIATwo5ssJV4IGEKR4QKtvtLAIkAKJc4eoVrC4Eg+xwzZqDDcIQXKdWBZUhQAw6UZk6PUGCSYMNDQwlJWoUabcyUjwQiCCCAsduNnHq5DnQBYQHISNEEWESpUqWXSdWvGgx48akfzjlYJDwSZJRUB8GBAAh+QQJAADdACwAAAAAFAAUAAAI6QC7CRQowcWHDQAAbKvRh8TAhwOtzCCQMOGGBWIGQHw4wdcbLSFC3DABIMGHLiU2Rrwg8AKFARAIeIiAQaVNCgssAFHQkofNhwIKBHggYQgjUD8fDgDAgMoiBzgmJBUYFEGSJwBQ+JxqQAHThD6mDjxQEYAAsQJtJOQAAMcJsRNuAKDRBEEMDWIFmNiAg00CACLELl0gwViDAEXoJA2aoFE3EiCAbNiDVyVOCx+8CMQAwQOBHgMESO1mYAVMAgv0PHQR6MNfEwpsHKgAAUCADjNcbDwgZgHbsgx2vGBpUwKKWAkZJKEiAWJAACH5BAkAAN0ALAAAAAAUABQAAAjkALsJHDjwBYANTaJcIciQYQ1lAAAwOPKjocVUSrREABBgyQCGYU5ZvMBCRAQCThINJNRF1gSLAjWkISBkUrcrDQK4WQZToIACATJcUeAAQIieAwdIRNMJwSA7SH0WQPCBAwAqJ6J2M6AAQFEAK7QKPBAxYhyx3cgCsIpDglauABIQQRCBhdafVKkVtaFVKQMwBnIFgKIBKYwZARrg6mZGCIE8MGD6mIJSxkAwTggUGCBAhUADAgZAIJDjKMEBSwIAKFDhwIEKBTgSaWPxxxEGCMpGZLDDR88xYD4liOjgA5qsBAMCACH5BAkAAN0ALAAAAAAUABQAAAj5ALsJHEiwGwk53LaQKDhwxI2CMno9aVDDQEEMrgosuUAwCCMAAR4UCjLQSpcMOlRhKLgrRAQCHVoMtJXHAiIKDAXWyUCAi4xufTIEwKMk50ANMxJYgMMmAYAQRgkOAOBhRCcEMTREHSigBxIpOgDgkLBV4IQbAJwCMFJ24AEAcNe2FfgWAAcAUciWNaAAAANHSHrgLLuiAIIkVjwAGNB2qgMqPCwk+MJiq4ACATKQlcGFwJTBDM0sIMAHxMAaDwhAGLBChUADAgZAINDAzUqBGOZ0CAAAQpYDBxQUSIvpDUmCBkA0YBAXLgIPl35ElUAliQO4OqSMYBgQACH5BAkAAN0ALAAAAAAUABQAAAj4ALsJFMijSg1tQQYqXNjtxJwOkTY808CQIbQwdwIAiBBMhcIgv4SUGIihkg4LMYxQXHjGhJAeIwTWALJhh5KK3ap82NAARLctGQIcc4FToIYiAR6MYeIAgIiiA0UAiDQCEYIILKAKZFFgA5YEAFBI0NrtggIADQAAUENW4AG1ap+2fQsgAwIFE8gaOPsEBQcTAsgKKIDgQyYaAAaQHQCAARoeRwIUCFx0cNIT3UA0sLCAAk4KCywAqSBwRIQFBCAMEGBAoAEBAyAQWAAFw8ASETpoLFDhwIEsggAknTFS4YQXD5rCBcCBRocarStuQpGCgdoGfmIuDAgAIfkECQAA3QAsAAAAABQAFAAACO4AuwnsRqIUmyYbAAAINLBhQwNMGiRQCCAAF4cOXUh5EAAAHmk+ahXDOBDDFw8EioioI4GkwxZANuxx4VJgGVhYumHjCEVDTYHERL2akIkGgAE/BTbLkKBFFA4mBCTtJgAPgkcZECiYMFUCCgA6FNqYKtAIRQAHyHZTo5ABAAUGpk5QgCBDDgQFpCYVYIKDHwVukSYdAICGJjkc8/4UUCDAkTHdKgCxsICCSwoLLDQAIRADlAUEIAwQELebAQEDIBBYEGHEwBIzOAIQlOXAgQoFKnaIUMKhgRodaHA4C8DBgxdcXY7w06BtChSbHAYEACH5BAkAAN0ALAAAAAAUABQAAAjtALsJFNhnERkOAABsSFJlyMCH3QyAaOAgoUUAd5itgdjtTLIHAQAUQRHHBwo9HVb94MjkAYEIImBIECjhELISVyDKaEUggyGOQLsNsZCgAIygQAF5ADAAKVBFSHoIcDoQg4wzCQDcmEBV4IAmRBIe6CqQRUixZLuFSFhRgYGuEnAA4JACQYEVXVlEQOKoQsWmVL0A8IBBRYYABaYiZfElgQU43UDwIbDATFAKUwhwkSEQg5sGBCAMEPC2m4oVAyAQeFDjYZA3mLIWUHDgQBYIAAJ0mIOB449LHhBcBMCgAYjSQEdI0cE2CZWZDwMCACH5BAkAAN0ALAAAAAAUABQAAAjgALsJFHgFRQoOAADo0MVGzsCHAn8cYZCwIoAEO0JAFDhgSQAAEbQYWYEjBoAAZMJATOSEQA8bLC4IlKDBSAwClVgNnCSEwJRDGwUq8cTLmcBQGQIUEBB04BASAxVQHNC0aQ4ES6sGdQBAgQGtGxMeABsWwFiy3aoAg5Gg61ewQ5TcmnY1K1gNPQB0wjKVrIiLnCQ1CDADhlYNUAKkOdFNRsspPprCyENACIWBIXIQgDBAwFsVAgYUIJADDMQ2RD4WqHDgQIUCJ5d4CepjB0WLCBgc+VH1BJoPXC9+AjMGYkAAIfkEBQAA3QAsAAAAABQAFAAACPUAuwkUSKIPiFkAACRosmjLwIcCB4hZsCGhxQQNmBiAWKLLhwQATNwIEUJLEQABHkjRMBBDBA8EIAygcEHgBRgiYhDwAImEQAVALCygAHGgkh0bmqzopuJBgAICij50ESNAhm4VGAAYIBViHCRpSKRAALXrQxXR1nRzAEDBRrMD4UjolvAAXKkJbdwtegfAjQl7H77YYCLqXR4nfG5ZsHVvGTtBupFolKCsWTqBGgwT6OWDUKJS6+wh0IDWQD0LYg5Y8XaCABsRdn45M9DFjA4BAECocMCGAhMKP6BS+/DCix1aLQLgsEAM164SqCRJHgvFXIgBAQA7");background-repeat:no-repeat;background-position:50%;height:154px}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-element-image.error{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAgCAYAAABpRpp6AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsSAAALEgHS3X78AAAAB3RJTUUH4QUYCiwdGyEQJgAAA/BJREFUWMPNmL+LXFUUxz8zbCESdQUrC9lGxSpj/AO819qESSdJxCGNjcHNriCisBOCTTRhgpIihU4kbkRQHo7Yybm7EruQQbQJiMMKi4XimAjaafN98nJz78ybyU7wNI99c++73/M93/PjboM9NrPQAtrA2HvX2+vvL+0BwGUBdHo+BPwBrLAAW7pLFtvAfmALKIC+nh3v3XgRgBtzsjgGgsCFEpxZKAC8d20WZEtTWHRAJ2Kx570bJtaXDq3MGK0O8GGNpeeBbiNi0VWYJMXihAiMJIViBrA9EeJSJFTWrQjHsFHxsqdD+wI4nOHgmaQgB/uKRtt7N6q55/eG0P8EeO9dmCMB2+XhdRJNBwflQXuW5DQLwyWF5NKcYEumOjXBtkqZee86c+TcuEy6eUtQVw2iqJlcPWDVe9dP/N4FVlXHt7TuDlk2gWElyWa1HrBsFvpTwK5qbScDtldJ9ofLRJdcbwcsdvYrvDOZksUBbYHKmZMMikwFeLWsFN67sqUXYvwOhlEI5ir2CpsDugp7ylaBl1KMqVJsJXKgD7RygMNdyKIKupcCrUiclyxiGwHPJiLckVyTgIscYLOwkmEmBTpMiFQXcGbBZZz5T7OSVzvlYLNy2HIG2CfAd2bhdI16XLbylENjAehmnAnA0Cz8U+l+o+zwo24VqjOsWTgKvKMPrgP3Ay/GNVuODqe1ZtXh68DTs3TSyv7QrPx9myykqTPAWeAacAT4FBiYhc1Ic32gPwVsRyyenAdsaloLkWbeAH7R+9I2gYEY3zELa8C+ciaoMeS05+mo2XnYLIz04ZHmi0PAbmbvM8DbwCO5ECsKBbAcDzlm4ThwGDhRZ/hJSaJa3jaBixPAIpmMgTMZsC1gB7gZJ5DA9oBbSui1ugzHgAvgBYX4ypS968Df3rvXE2CPA9vAt/FQXwH7svLjNWDdLHxZp9umGH4SuCDvmSCH54GDCbCnBegU8CZwDtg2C60I7I1KpI4qF3biOj3xiuS9G5uFH4C/Jux5ANjQNDWK9HoZeDwCNNBzW8/qb6XdUsQOAl+YhUveuxN173QmBsOEjnXde/dBpNfLwK8CFEdnoHe7CbDxumvAu2bhe+BYnB/NxKbPgAMTpq4DwLGow20DV8VSTkphCtjSdlXzr0pKa1Ov+WqPcUl7FPgYOFTWUrNwCjgpnQ4WcKt/Qon5o+QyzF3zv5IsqoA3gI+8d0F6fR94LqPJvbIbYnsd+BnY18ws/FqASzsC3Ae8pbnhG+ApvV8U2GpCXgR+A67kGP5coSjb8Zq62Vij34PAY0rQe2E39c+WbmNCG3wPeAX4Ezjnvdvg/25mwU25q91z+xfs9+kVfxd53AAAAABJRU5ErkJggg==");background-repeat:no-repeat;background-position:50%;height:154px}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-element-image img{display:block;width:100%;height:auto}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-element-map{background-repeat:no-repeat;background-position:50%;background-size:cover;height:154px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAB7CAYAAADzNovBAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsSAAALEgHS3X78AAAAB3RJTUUH4QceDzYJ6Lbw1wAAIABJREFUeNrtvVmsbVl3FvbNuebqdr9Pc7uq+/+/sS3iYMWmEwGDDKKxkIAQGRIrIaKxpfjBio0U8hgpEYgHK5FiCSMBAmHRPICJIoGAJwIBAhZBIIhC5ID9/+WqW/e0u9+rm3PkYa0xz9xrr92efc+pKrGkU3Waffdea84xR/ONb4whfu6XfoYIhLa6wC+//K0Y3U0xnU4hhMCxlzEGb968ge/7+OY3vwkAuLi4QK/XwyeffILhcIhOpwMiWvl3Qgh8+umnyLIMvu/j5cuX8JUCgdY+o+nuiP9LfB8FdJ5D6/KLihyFLmB0Dl3kAGmADAADQQYgAgQgBAEQkMIAEBAQkJIQhgGkVDjlRUSYzReIhr8Mre4Zrq6uEMcx2p0ORjfvUSxHAAhB1MLw5Tdwf/VNZMt5/U0QdYfoDV/i7v03UWRLu0JCSMT9FyCjMZ2MkJOPp7o8z8Pbt29xfX2N+Xze+BrFWyelByEEjDEn+XBjDIQQEEKAiOD7PogIxhiEYYDb8QLZYgKW8ziO0e/30ev1MJlMEEURlFKYjq5QJBMoX0JUQiqlgBQCEBIC1f2ShjEaRhcwJofRGjAaUhAACSlLsfUEICVBBBKo7g/CA4SCEHKDaD8Iy4e4hBCgar3Kz6m+95QrYwAAKT00nUajC0DI8u/08BhEBCIq9wKEp7x4v2W5+FsEkABPKiuAj9F+fGmtHxaXCEop5HkOKSV8P8BksQQliV2UNE0hhECv10On0wEALBczLKf3QDFFW/kglAIitAAa7lECkFIA0odQPiBEuXHCqseNevNhk592k4QApHPweb0EUB2M6pYqCSwPyboEGp2XQra22QSAIKQCYHYtxskvYww8z9shgAA8hBCQVnAefaLtgglIKSGEQJZl9mZmmUAbwsoREeH+/h6z2QztdhvdXg+z6RiGCFIGlbba3/yRqzaeVqaOWC8Cka40nLS3LSCqY6W3KeZyo4vCakha0eOEIl1CSAFZOTPiCZ9Na233v8mC2OPiSXUyAXTNlVIKZ2dnVgNGUQRdFGjLReVrrf6bLMswnU4hhYDn+aX0CK80MU+6dE93SSlBWgNEEOLBfSnlb1V70AYXichs0JACeTIt3Z0vqgkmkHWuH+MDss/nLuzr16/tDeR5jjiOMUoltDbwt9x4nufwgxDFotQC9EVXY8evGgQEyOQgEIIgtCpbQABSATrbS+MboyE8tePTnnYdtdbwPG+jBlQPqlA9WCzXcXVMqJRy5Xv3d1JKeJ5X+Xi+DTrm8zmICL1eD3meY9DvI0mqCFTsEEDfRyIEiAyMAbyndV+eTgSlBzIFyBh0ux2wDhCi8gOduJ+wWUFQpW22ufACBHpCS6K1RhAEu31A13drtVpotVpQSq0IIQudq+lYzWqtobWGEAK+71ttOh6PEUURAKAoCvhBgHw6gzEEeJsd1zzP0W63y10ggEjgKyp/5SOa0odbLJZI0xSDwaC0HMIrgwj2lbcYKKOLygTLjSv1lALomuBNga3is1WYBEQGr1+/tgKTZZkVBhYwrTWKooDW2mrKut8XxzG63S7iOMabN2/s65RSMATMU4LcsQZ5nsNTygqdoa+qCX7w4djq8HpLKUsTvCJBtNEGG1NAeh6EFCBDGwOepzzFrgnerAGFQKpn0FQGCaPRCOPxeM0f3BeeyfMck8kENzc3ODs7Q7vdtgGIIUJACxiptwYVWuvSB/dDmLSA+QrLnxCiAsUJUopKc+jSAkGAnECENvroBKM1POVjG+L31D7gLlhPutpLCIHRaITb29sVH7AeXOy6iqKA7/soigI3NzdIkgRZliEMQxSaMEl3GwFjDIwhyCqqIxJfXQEEgUwBQwaep0BEKIpSAEvR8vbbbJ1DegpbncBnEMBtyot3F93gEp4IMJlMtgKHh4KPSin4vo/lcokoipDnBaTOd/ohRFR6K5UJeg6Q+Cl9QCEEjC7gedIKnud5iKIQcbuPsNXdY901hJBblcVTH2N2vzbJlCoxwBCt4AxZmp0sFWc/QCl4nmd9gSxbIPR2Y3pEBDJkkX2CBBntRIVfMSimEkAhJM7Ozix01ev1APT2coN0UZTrJeQOGObpwjkORLYKYOC10Q7OsJgsTn4Dvu+vhOJ30wK+3O/GAQLJBzNU5ki9r6AGFJCCoIsS75vP59C6zG2XG0jQWuPVq1eQW6wTmcLm9LeZ4KfMhhhjdmvA0Gsj8Dq4WX520uhHKYUgCKz/RwSgWOz99IRVZN/mSL96QGCZAakA5yzLkOf5GtQFAFL6WwSwEq6tJvh4zRcEAYIgsDFBlmVYLpdbP4/vnd2KNR9QQKIbvoQuzMnScCz5UkqEYYgsyxAEPhZpDtJ54/ljX4G/jDEVQ0RaYfyqIjGi3Igq3Yg1bcH4rDEGYpsGJFMxhuTWzzpWCJVSCMMQvu9DKbU1xba3CRZCoh+9wTJZntT/Y7XLoLSUErP5AoFnbETL+JCbWbEmiYFvqSqKH5VR4lcRAwQHIUxIEFuCO3+rcSUyDYyY1VdJYWBIHryfddx3H2SkRDM2a0AlhUTLP8Pt5PZkVCz3FLMmlNKDTmeAkOj3euj1emvwTv2zLZ8QAoDCPMnRQQblB185IZTyIRvSyPkDSljKU5uDCCKQ0dVrdon8cUplDb/cUwNuSsepb/S/D2RK7O5UwgcArVarwrMKq6qzLIXv+xgMBhbxJ6LK4TYr/iMAdDodeB6fVIPAI3hK4St5EVkT3LQPxhgUuoC/RbsR8YH3dpjg4wIllyPgKohDYLk1ARy2PgYRodstcaY8z1EUxcoHHXpKWq2WTeclSQIpJdI0BQBEUQQhgM8++8z+btOpCoIAqmIgeEIjjoKt/s3umzM2CnSY+yu+pam0SJkaqzaVhI1G/bCNQC7hqeg0xrf6cCnIZjmafCshBHRRIGrFm1EUMjBWA2580Uk0oJug2MUUZ45AowAaY6yWevnyJfI8x3K5xGKxQJIkBwsiEVnhc33BxWJhhSrPy8+L49j6e4wXuoSHIAgqnhvBEwWkFzcHIqYoGTOOYJWnVawEL6xkDT0IHtFDgFO+ToCEX9H9130sFQyAfFEt/BHmTAgIImidIStK4WayRQlZ6EZtwTl56XW3iFZlgqXaCvUdG4TwPfC+7gpaWXb4eQaDAUajkXX1pJRQnH5LkgRBEJRs5G4X3W4XWZZhPp9jOp0+JMf38P1YAPkm4zjG3d2djYp9P8CLFy/W0nx8GNhxXcWPNgGoGrNEw5B6+Iur3VwZ2VDzQago/gIwD9lJ66gTSj9UIYMpCuRaIF3M4SsFf29/tPzcPF0gycr30wic+/EBaGhdlPSs2sEXQpSWCUAQtZAuZ+vPQqUWlQ6JY/OdHH4VRYHZbLaiDevaz1UiUkpEUYROp4MkSTAYDBBFEYjIBpmKiKx2SpIESZLg/v4erVYLg8EAZ2dnGA6HmM/nGI/HyLJso0YkIsRxDN/3SzZLlQFhft/Lly8tLrhYLCzbhhk29dN2dnaGfr8PISU0+TA6g1jBwQSKPENhwqpepHZiqxqSUsnISqjEw/c4MBKEAOkM2r9EthjBEzlEsMMEEcGYAqByHYo8R049y0rJoUAV+d6QgtYEpdZ9K3ZjdKERtvpIFuuVi5bEIKPdpv/AgMPzPPvF1oq/mANaRzJcE3x9fY2PPvqoZMRX+53nOdR8Pl+jTRtjMJ1OMZlM0Gq10O/30W630el0kKYpxuOxNc91v4CDD/49LxxjSEx24M/bZt5Z3XsqgM40kjRHFHqOxiywzCQIAgYSGYVWWz0WdN2kO7TR8FXpY+VaA8t5ZT41SEgYkjYSNVTy+aQXQqoIQoWQoYee8sqMhfQBz4fyPAgpISt/qsnasAbM8wxRu4/p/eelxqvR4UjXomAhKvHm7wEPHhjQYiJx/YuFijmhTZCM+73RGlmWwDi0PWPKoLHX6+Pt27cgItzc3GA8HtvnU+4PTRAI+4NBEKDT6SCOY7x48QJaa8xmMyyXS2RZBq01fN9Hq9XCfD5Hr9fDcrlEGIZYLpcrrIhDoicAIC8GIUNSAIXOoLzS38m1hEEAcoTvwwheeWUIkBUCLVkJIHWQFWTNGpNFW70ztHvnkMp33AHnoFa00Af/oNxA7WBtrVbL7ouU0roljJ0OLt+iyFPoIoPOM+udeL5f1gJ3h5CixFGlVwp8yRWsvhzSggv+85orpZBlGZIksSgF/5+/58OiDSEWU/gewUOVaBACnvQxnfkoCoOLi3OMx+M1souqm75NglgUBe7v7zGZTBAEAVqtFrrdLvr9vjXd9ahosVjg/Pwck8kEaZoiyzK0Wi2MRqONZss9WfyQkAEyCqCkhkGAVD/4MgSgIP/kLN9N92eMhoGH3JQ+I5EstZf0IJVCEIboDC4BIVFUGnztgK9pFFifiK8wDLenxaI2gqi9GYnovyiFRWtoY1BoA53nMCYFVULEfjb/vyx9KH3P4XCI6XSK5XK5US5c96Dj54jjFgiBPWzGEJZZjqyC25qgvoNANa4bTpLEmuIoitDv9zEYDAAA0+nU1oPww3FeczQa4cWLF2i325hMJivC6taUsI8RhqF1ZjU8EHnNAcQjBcstIeV7cP9fz9ZEcQzlfw2eV2oXV6Ov+EFKrZUqFEVhN8L9vF0Woe4rx3GM5XKJ+XyONE3XnqseJGwKGppBcbmTSt+EQVIjWP1QTtZkadVjNITWGvP5HLPZDGEY4s2bNyiKwprdKIpWFnyxWCBNU5ydnVkTwznFbRE2q+xDhc0ViiY/p8nv2fcKgsBqDvcgMTTBP7PT7uZT3Z/dkgdeK3bQXXNXF4Svfe1rMMbYqPT0uPiB8NumOhQht7C4HyGA9SuOY2sylVIYjUY4Pz9HkiQrqvfq6goXFxdWS3J9CcMvbu0JALx69aoRI2SNxBvsCplbpef6OZu0IB8m3vSmlJMLLSil1lqP1LUMa3/2j7XWaLfbSNPUwlr1DNCmtGSTIEwmE3S7XYsqPPiXBhKmsvIcnuny/6L8KrsxEDxB0EWOkXn90OLkSAFMc42WbUMhoIslJomPwviAR6fXgPWr2+1a88B4n+d5FuTmhS6KAp9//rnVAvXSTjZVYRjanznwYQFz3QF2zKWUNrXnJsG35S/d7/m93f44nlficWmarhRhdTodi5Eax5/iz2PBqgt9CcLnNju0aVP2uebzOfr9PqIocgRQwBcJekEK6YlKEL0y+pUKWIGdKlwyE8CyWCGx8nNu62hQB7ZT9EG0AIRv/b+F6UMIA8+xFCcXQE7jKaVstMx1wJzPjeO4URCavtx8o2vG6iauiUXjbqb7nq6AuJrHBb1dHxAoibQMO11dXa1ouHa7jSzLMB6Pt2ot92eXmn5szt04qbqiKLBYLNButzGbzaq/Veul1Fo+eF2GKr/XkxBUACLEap8cOuhwCBDXFlR9bUr/T9TckQ+iAfv9vj2Vl5eXVuuxVmJtVxSF1VZ1c+XeZOON1kgILizA6T/2SfnvrjC7WpYxriiKGn0/V0Dq1YH1xTxEmLblRHddDHFJKe09LZdLXFxcrFiYMm+9R02IqKJv4UNAr3lv2yhUm7xAk86BKlFAedKoUeuaUD1W+3EB+3K5tP6fq8E4kmUh2scXy7LMOuJhGKLVauHq6molc7LyEErh448/tozdXZGva6bZB637oUWhkedZ47/d1fFpmwZrAna3RaNxHFu/s46hsssRhqF1f2gDCiqEwHQ2RWHC0iM0Gc46AchoCIQr/6bOetnrcIkQV+lF+flCWbSzjjKcXAO2Wi0LsbDJms3mOD8/w/39PcIwtHXBD7UOZs0suqaw7lu2220rIKzN3E366KOPYIzBYrGwm+JqwDre5QKp5aIwgK0fTJMQQNWNizWBe8/H+G5uEn4f8i/z6FYY0c4m8iGNouhB85PYgBYQUhMixbAUU2EwW46Rkw8tO2tBiOtP762QKv9P1ID3bQL9KAFkM8bwyosXLzCbzRBUICprr+l0ivF4bFNr2+CSJm2zyX9w/+1yucT19fX2eoha5MyYsNQz+EghREn4JDJYZgIZuiAy6Ha7ICIsl0sLk2zrd7JLAA95PW/cYrGw/i+vCWvust6GrU4l3GvrJaCEQUpk/bU5DauYdf0wpGlqkwungnVOHgVzE6KbmxsLlWSFRjeMrLM+Ho9xf39/sL/k+k3bokVTi7B2fUa73V4X5ixBJLOq5LPcxLRY7cPiBjsueH4IJrlYLDZq+m1C6HYXqwc2RVFUHMvq3oSqcDdvlbRRLJsDhz1w1FMJYJMSkcd+CBMP2Ax0Op3SNyOCp8oPyrIMd3d3x6f+hbACuEkD7hLQTalFm8fURdn4aEt73np1f5MrsO8mbEptbbpXt98O19esnJ2KnWTXR8iqjw6tZCPGC4UFnT15a46mg7SiAb/2ta/h/v4ei8UCu/LC9exEp9OxBMNOp2P5aqpqL8HwxWNvfJsA8mv2DQrG4/GaFuj5E8APnD0zkKTX3p+1oAuHnLqQv37xntSj+voB5DQfhICmVeJ92baNAINnuza5H2o+n2MwGGAwGGA6ndrc4i4V3G63wVzCOI6hlMJsPofvBxACuLm5XTMZj8W+Njmyh0AG6/+eQLoAsNoYUkoB6NV7cLUya8BjSxc2Rb1ulMt1MyyEXGftalIun+D2J+X9usKnMUsMMh2uKXiJHBIGEARZYXZlxkQg1wI54g8vgDc3N5YJ3e/3LXt1PB7bxuGbsL/lsuxld35+DqAktA7PzjGbzTCfz0+2MdzWY5uWOCYoYB2ohV8jqAhbe1InTLhuwbFZjG2QlgtUb/o/CyBrY4a/7GZTWS5QvtwgpwCFiFfML0EgkAv0otX+gwKloMwSIMvj1UkEj3y+elLBBiFZliHLMkwmEzsqodVqYbFY4O7ubiWXS0S2qm02m9lApCgKgAihr3B3Mz3pSAO30fUuLXmUmdMCs+kMGiWti4oMOWKbnar7gK4GPKUA7nI13DVl7ctwkvvvDK1mZKRwAw7x8H8DKCVrWZJSIH0vQ5yX/nuCczyml0y9af2aALobfXt7i9FohOFwiHa7jbdv32I2m2E0GllT0O/3La7X6/XgeR7G4zG63a4lH5zy2tbk0DWJXAJwqAbMRB+pcSyUZByL1gSw7gOe6nI1674+OAPn7hwWKYDCiJXnk9DwKIEUBSQVkFLAEwRP5qDGwTUCYRAiCgXybIFl8vheMm4KdSsMwwt8fX2N8XhsteHHH3+MyWRio5nRaAQAtgBpsVjg9evXuL+/P3mNMfeZ2eT0uybxuM/eTvSqC+CHMMF1XxMNmYlN328NwoSHXpSjJ8pquZIwyle41VIRAEmmMsHiJBq+vkdqm0NcFAVub28xnU4tA1ophaIoMJ/P4fs+giDAfD4vu59WZNVTX6zh6urbHQXxIa+n8AFd0kST71cnbPT7ffv3OqmVbCfoSmiq/KzZQEjYJoHCUxBU2CzHYw/XwYxojsQYbjk/P7fYXhiGCIIAt7e3ePnypa0hOKX24yCD86JsjrnxJR8C7sJ66s9u0kzHANG7ot+zszNbJ93UoqQJfHfZPUywyIsCBB9kFoD3+LlwwvNKYPuRIwo2+bh7qw7P8xDHsS1cl1JagmWn04GUsnEgndspgTMih2oGFsCLi4tG4eRalQ8hfO5zuPSvfeuk9xXwJEnW8uJNPzfdV6fTweXlpR0GBOGXg28eJYACpkhQpDMMwwCjbACS0dFCeLQG5IsLka6vr23Y32q1cH9/j16vV059nM0aT+8hDJCma7lcWmiH/R7Oybq9rD+k8DHGxub3lAIIlLU0++GWmx38h9IFCUPchXZTew6UZZ3ub0g47UoMiCSgujCERsrWMRrwaAHsdruWzcs/c0DieZ5lutQ3hf++iYiwrxbkqI/Zv8c0T3/MxQLodnEQXlnqSCfIhuz/HGI1eKpcJNcXFgIojITSednrBuXYhsAXSDIDAwUy5cgbAwFjSv+QKvxQk6y6RUQgqIpRjaO0X51IXJePvQTQ9320223c3d3ZN+r1epjP51a7baovZi7bY4ITpuVzs8unErpGAfE8IAxgoghyOoXIctCwVzaeSTLghE0+1+gCpCEphSfLHouFKGlUvCfMt5SCMCu6WGinNw4Z+Dkh1bIUKkiQQ8N3iaoQD8LWRK3ahk9a7NGpLGT/1F1H25pjHwkeDoeWAs4RGFBSdrrdHqbT6UYNx1Qht3DmMVHos15RCPy//xb0F38W1//HzwFJWvo2UQR8/6+D+IM/CPzybweS9ASOYQ5PJFDCwPc0fI+gpIT0ysLzNEswTj0YEcEYbaEq1owaITStKk5dQ1PqxIRdyQO36MstFNtUXdjEUOp0OpbjuFMDMtu21Wqt9IUZDAbIshxpoXEe+Li+vtoY3UVRtNIZ4bHZkGe78hz05/4q8FN/AcgKGM+9lwnwV/430F//W8B/84ch/uDvA/zjAwCJAoNojChqAeSBGsY6hkGAoMiwNJEN1LaB9Zu0Ors39d4v9YrDprWvCywzzN0JW26k/vr1a1vkZXtH71qM4XAIYwwmk4n1/aSUmEym8MMOsizdiODHcZnMfoz2cx/ukELp0+JAGvhf/gLwp34GiEPAazgInixf9yf+FDCaAj/xw4A6rqGwQoow8FdSZEQEXQF52gC6yJHrkEfp2Xpst+Wdq5HqJav1tayzyPnLHdPWFJ03lZc2CT4La5ZlGI1GlUDTZgHkQp84ji2bWUppeX93swzf/vVzTMf3G+GBcjBNfpLU3K7Bxx/sCnzQX/ubwE9Xwsdgb16A8hSAgPADCL+aUBSHoJ/+GeDrbyD+y/8UyA4PvrQIQZStECS0KTCdJ8jRgyYFEp1qg6lS0OVwx1evXq1pJBYat9jd7QVT/7n+/S4tuo97VC/1FEJAULFdA3LXVMbYGHieTicQfgwlqbHLqWuCV2svHqcBn1z7SQGMp8Cf/OnS/7PClyP83u9G9w/9flBeYPqX/gayf/l/Q/h++ZooLP/N7/ptQDvGoYPuCALaAMrZU+UptKIA48wHSK0FB3zIuddjvQ7GFYJdB7guKKeEs1ZKZ7dpQFbnk8nEpsK4Qut+PMHw7GNkVcOhfQKIU5jgbYOPP4z2C4Cf+RvAfGnNKeUF4t/yfXj9d/+KLbbt//iP4N0P/BdY/r1//KAJ50vgZ/828CM/dHhQQoA2Aj6wgsuZIn8wy0yYFd4KFLNpdofbFLI+fpfX1TXPjE0+Bj7blNFacTc2bWgcx/A8z/p+Sim0223MZ1NM8hjf6EiMx+nWWtdTkTV3DTv5YJdSoH/0z1Z8PsoTXP6Zn4QF3Krr8s/8JL75jV8J4fesT0j/6J9B/OgfAJAeKn8lqbSGIwvpoScnUNJAeRJJRpjkXRgRWEGpb3C/39+pzZr2nxMIpxTAJtKEOj8/x3Q6XTGlnueh1+utaD/Ovb6/vsHbF8OV9Mqu9NWpbv7JgxApgLt794EgZAD19vW6rL59jTXO+909dg5G3mCCC9SL5RXiePUAKsohitXaW/eQrtSKHGGNTulz14m99jOiKMKrV69wdnZm2artdhtSSiwWSxijsZzfodUKkSYJhPQw7IYrwOdpEH48mTA3Ocf1KU1lbz0DciNZIUAmQ/JP/vna+5S/U3Ws5MjUqYTWAmS4jRsBlIFMBp0vkWVLLJIM8xTQpFZMXB2KeQz8dWqL00TkVe/evUOv17N0/NFohMFggCRJMR59DiIgirvo9Ya4u7vDWb8LIiDPs50tzZ5DA27ltzl/a+qktQastlqY/ebfiMn/9a9tna2MWrj+Az+G13//Z6HeflRu/C98guv/6scgo5Z7wxC/5nuAIxGA1ISYLOYgkaLQHgzCsuINns3Z2ubqwMpMFlfbbC6iF2s/0kPa5IMUW7kdxawAaq1xd3eH2WyGi4sLnJ2dQWuNzz79+RKIjvo4Oz+3URazWrgonfmBTZrvlLPnXDigifBQ7zXYhNLXneydmhFA/If/M4x/8k8/TImVEsX7G3zyH3w/ot/wawBtSu0nyr+55ho/+DuPgmEAwMDH3AzWncOtWHlum4XXi9gB7uVczhIRKBunC8rLOhAqIAVhvkixMD07w/jUGtCa40rqFf8iyzJ89tln+PrXv46iyAERIWoFEBUcUw4cLCuyJpMJfN+3bTPqpY6u9ts3d1jvdlVH6bmR0OXl5VoUVzenm0yri4M1UZ2KosBwOEQYhvjkk09KkkGnBfF7fjvwv/6dEl5xruXf/yfl/fs1U5WmwH/yA8B3fhuwWOKprqIoLBBdLoIBpTeAkRCkIUEIpIYnq4RvrRALAkg9DQH5QeqH3dYkAoAR6sFp4Rxv2X1pAikVjNYYDocrPfuKorBaMssy+3c3YHGFiX2JulA1aan67+oIPS8y07Ca+hyv9z1e/X6bb+q+RghRTqZMM+CP/gjof/8/gfliRcutCR5QYn6dDsQf/WFgmeApLx6N8aDhCUokiFTgZFW8LfNDBJQ0thz11Fed2S6EeBBAz/NWhtOwAPHv0jS1TYa4DpivwWBg64TdzWUh6nQ6a5rOrbJzW9RyUZMrZNzc8cWLFxiNRsiybKOvtyvveYTtBz56CfHjfwT03//PQGvHDI5kCfETfwT46NWTz5d1N9gC2to76FE92TwQ6NApmbvcqIe0Ix5YtUEQ4P379/bFXANydXWFs7MzzGYzzGYzdLtddDqdRqp4kwaqdy1lAav7iNsCiKYZuk96/e7fCvyDfwr8g5/bnOPVGviPfzXwe3/HWif8p7iaqvU0RDXubD8ihydkCXLX7j+KIpta5cFGh8IwjVEw3zBrNxdF598xCMyFSUyvWiwWduLRoTfzGDzpWa7Lc4gf+SHQv/m3wN2o+TXdDsQf+kHg4zfACQHcQzTMKi1LgEgBJl0NkLYhkMqHpBQkYqsFLy4urBUDgHfv3m1Nwe46ICsjHjjR8eC6AAAXtUlEQVTHG8exLbUEHgqOJpMJhsOh/f1kMsG7d+/w6aefWnO4qd3upq/HqO+n2MTG+8wL4Lf8Bogf/s83rW4ZrPyu3/4swtcsgIAmcVAqWgoFicK+H896WywWtjCt3+8ftR9NtcGKhwa6dHsWQP59GIa4nqSYj29BRdqY8vmqXC5avwYjLRPgh38I4rP3oD/7l4F2u1QSeQ782u8B/rsfPTEj+jgB9H3/od82BAyJg6biSWlQ1Fwfbl7FBWbHYLyNmRClFKIowmw2W+Ht88itMrgAxqMRiiJ70jqM5zDBW9tulBOhgT/2X0P87t8BLJJS4C7OIH7qfygDFPN8LajYv3Y1IM873mNlyzhYlF0T3MjazYow2P2YLMmKAE6nU9vw2n1BFEU28k2zDPcLKktDn/F0PwUlq2n+x5oQ+j7wx/9b4Hu+C9L3of78/wScDyvOO55dA9YbFe0SQCIDnS+QJEtM5ksUxi/FUQjr67lzXdhCHmOG63uoer2enePGFwPOQRCUuOBohMgzkFW9/Vf54gXmNWgamyqEgOx2gZ/6H9GZLDD9lb8Ci+XyC3H/deIuQUIbU1a+VdVxWhfQBsiNQK49aPJgMAQJjyct2ACEhY7z/u76HBMN11ODSimFyWSysthcgM7jqBbLBTSiZ1/cQ2dXHGPe+YSen5/v1ra/6dcDAOa3t3sFTmuMYKf5+CkFkH03YwwgPCzyAMvcoCABrSWE16nGxQp4gYQvBVRV/+Ga2ul0alu0cLJg1wE9NMizA6vdN4rj2HK3ZrNZVSv61dZ89Q3kxut8apvYxZ7n4fz8HKoBo3SzOk2pQ96EJEkaCaSPOUDcOID9t5zKwqV2t412qwVPKTuutfySkHK9/VAcxxZm497ajN8e249xzQRzb0DWLFwJxUOmy24HQOxxpf3zab8PRclqwqp4Gui2z+N2cHWtzFmlfe71mHkjuw6QMQa+71sTGYYhLi8vrR+XJxNQMQUZA6IUJs9RyB66Zx/j7u4Ws9nMTkC9vb1Fmqa2DR8nEZiMsq2J6T4+tnTbaXAfF97oh4IigVkRlry0Z76eSgD3Zsw0dH8/xDk/tQBytokLwaWUGA6HUErh5uYGv/iL/w6Tm29CZGOgmELoHBIF0mRuNZvW2g4eCsPQzgzhe2WFdYwWrPMFlNtKl4hsKSVQttylih8We9nWEVBPCRI/BZyxD8zgDktsCmT2OURMAj5lO2MOIF2LNh6PMZ1Oy9bDoprYjocCcq1L08r7z7l5br/HRAe3/uQYAeR7GwwGpatQb8DNM349z1tJ+huboBZfaQ3I5tf3/QdHfocGbBqw485G28TW4e9PGVgxFshgcb0csoRmvCrfaxcVUmhkWYJut2dBeFeTpmlqURG3afqh+8Gyxfen6uZASok0TRHHsXOSBTKtIPwnJ3hs9AHddml86rcJ6SELNR6P0W63d0anm95TSmm7XW2ajfchU4vusMimDqrlXE2yA8qEkPCEQZos0e32EIahnczEfmOWZXYsm/uex7RFzvMcNzc3JbxTV418ityh0QChpfJnN8Huxr969cq2B3bxKnfgtTuEkAdS77tA7H7sM/qrSZj0M6XkuE0HayguTF/NjvBETQ1TpEi1QKYDqOoxeAKnK7RsgvnKssz2hznkWe1Uz8oCKPcNwjBc829YAy4LhY6XPnskLIRAt9u1ERh3bGDtzV1T6/M2XO3A0534i7mHTaNjoyiygdlyubTOOcMUYRg+ahrUhwTTfd+3E9s5ty+EBIkIkySF8FsI4yHiKMIw9FeCBF6bKIrg+761Mkqplc78xwRR7r4oLkRyoxy2864GDJ8QhtlG4xdCWPPITdM3aSYWQp7YyelGTjVy9R+/v9baDukLgsAO22Y8sNvtYjab4f7+Hu12u2rSlB2VEXgKAWStx22Nz87OqgMawPPKkV5FnqMocozHCzuugyl4nU4HYRha9gsPIncH9BwbxXP1pep2uxiPx1YA2bbzyam8Giy1Qt9PP4gZrvtGcRzbGhAWDMaPuB0wd2DaNTvEHeLiNtGsU8Tc09xqtWw0eH19bc1xp9PBcDi0c4mn0ylGo9GzmdttJtjVVvwzQyqLxcjur9tjOggCxHGMfr9vgzC2OKz1iAjMHxgMBivMm0P3Ooqi0gQHQYDlcmlvmDXEmzdvKqJCgmya2+5Mx9JwOGpytRbDBJ7nwfd9xHG8M7yfTCYHAaCs5Vhgm/qjsH/IDverV68s+5dfO51O0e124XneRlLmrmY+T5nNYVeFD9znn39u1z4IAstyDsNwrZ44SRLMZjOkaWrbqQ0GA/R6PdsjnNGCQ4vX1yj5vu8jSRIbUbImdDtknZ+XlGqXBe1qmSb7zsVMnU4H7XZ766a4tP3RaITpdLriywRBYBtlHtptdVOgsElz7mrik6ap3YQms8KjWemZIAMOyHzft6WqAHB+fo4wDK1FcPtt89i1+rSBeu2Om8Woj4o9xI/n91B1PIcFMMsyXF1dwfM8hGEEGbbRi5VlyLokVhcGYVPGD8omlIcguriXi5GxqWChc4MIjuSONXVuFZb7uZs0lTEGWZah0+lgPp9bgW+32/B9H6PRaOU93SnoLph/isacx15Zlq2Md2VQmcsu2N9zXa16NWN9Ddk39H3fFpI9pgE9EZXNiersDBdjA4BlkmA0ISRhAk/5ljURhqEt13Sbd7PAcYTJUec+grKrqu3QDXWfjdH3emNFFxzmHjh8Hy9evLACyNPhF4uFPfluWSkfXjdiPDRXeio/kNd7Op1aJeEGlq6G2xcIZ0XA0TXvxabmBNs0ILt7VgPWpwCtPhDK8aUOjMFOfV1oXFN6yCTzD3UxIOtqUE6k10Fu9gW11nZiKI+nICJcX19jsVjY6aIcMfIBbGpr9lzPzYeGUQC+R65sPOa+WADDMLSBCP+8r1vEfjhH1opNZLvdbjRXqMCX2MvXyKi7mh2eurlhne27rwD6vo/JZFJRyx7oVG6zbdbqrOFcUzabzRr9RH6/IAhWusA/l+/nrjsHSNxQnjX85eUlgiA4amgQ93fmxqV8qA/NCTMFMMuyko51f3+/corXiJQVGyYMng/vYobG+fk5er2e7QJa911ciMXWLgjCZDKC1rT2nk0lpdv66MVxjFarZYH75XJpU1YfOsV2yMXaKU1TXF9f2wGBr1+/Rrvdxmw2O7j3H7dwYavJLgzT8w9ROBxdq88++8wSIzcPhibEMi+rq56JksWRZRzHFifcdsJc7Xx3f4XR6FO02y8gpTpaSzPG5sIv7P+w5kvT9AuDC7Kr5HIWp9Pp6livAy/+N77vI01T2xx933V0+YBCiDIIcU9ukwYUlR9IX4BTfX9/b6ni9ah201hTXWjErSEyPUMsh6BHPAlz4xieYvYQd5KtEyOe8+KGUi6rhwXo2BSaW6TEhAXGFY+ZhqCapLOxZSsIhiQ88bx1r5yjPPTyVRuzu/eIz84eTekJgmAlb/7AHP/ilC1wJMxAdB2zPfZeOQgNw9BSvzjLckzEL+sbvLXhJL7kl1An2dimvtiuRuHA59Rs52O0dZ0w4OK9h8BYUkqEYYjBYGCfNwgCK4DM7zuJBmzq4WFHiH1pL4If+id5pyYsks0c506VUjDG4Pb29tm6SHDmwhVADqCaslj15p6s6d0o3x27wbxBl8r3aAF0mQ6u5stJoi0bTJ+gkzSC2uiXEQA6xQYK5GZ2Uue+DvfU/c9nmW3ScFD4cHArZs5K1Qd/c+qOgXjmUCZJYlOjLNRv3ryxma4sy+xUhUO1oGpCqV3VaxcVZQS88vayQB5cw4hT8ASpUSgVtaCSV492AIgIoT84SYCwjn8KeJ6CgFgLhJ5zxJjbNzoIApyfn9u9ffXq1UrbYo7gkyTBaDRambDk1i67MsH/3q0VTpLkoGdVrq3fnOYSyIxEU02IETmMyD7UEoKEf5KNiKIQX//6r7Islse2iCsZwT6MLlBggWk6hvEMpA5XNE+n04HneZY8+xxB23A4xGAwsM/carXWCAiHFFIxbMcCyNEvC+Cue3LfTzX9cV0DEkKpv7ReIBMp2Xw+XhsJfJr8Y+RyCiOqlJsqi7aUN0BsfjVClNgY+1wuBPLUUAwXmCdJYvs7vn//vrFd2iFAMlPTHtMtQW4SwDV/gprGv3854mLuALbPSd/30t4cEAYSChIKAh4EFLRYoDAJyABGE4pcI881dEHVayQAg7IBmngSDUhEuL29xWQywXK5tCSSx3Q6Y/oeBzicktv3/Ro14Lai7PL19TfnBf1ia78wDCGlPClWJ0wAyHVhJlFgSr8AMy9AMNCUQYsMhnIYlcGIDAQNgoakCN3iOz+oILLG56h8sVig3+8jCIIjupyuTucEgF6vZ/1cFsh9JmhtDEJcPPAh09CcghMQECS+8JaZOWuHOsjbt0Ju/P1SXCNBVagkqQqniEN6x36MEOtXUNT/YNbEJQwweydJEtsTcntQ5gxrIANJS5AMUU5y0ri9vbXcR5fKdohgqyYq1Zq9Jw9KGHxZL5cYe6pLSr+qrRUbgqdiixZ5+C6XM/h68Kj04FZXoeI9uiW37BduQyMECNIsECqDwMsRKAkpgNulj5ykrQ2ZTCaW3n9+fn5wpwdVDqYpVogILM0WNTcSgZd/qTMhX5T87BpYLCeA/nAmhNNlnDpkv7DX65VtOkwKKQhCAh6lCDwD5WkE0sBTYZU9Kqe3C0FQYoGceiu+nNs30GVh7yWAt7e31iHlm3RvWIBQkIQvTNWe48t3MRvEzYk+2gSTPInrUYgp8AHdGBZA1ngrheu+j5b4HMr3oSQglV95ZaosXgdVCvHh8IaewdKsry83NXLZ5NsgGEt+mUwmuLu7s5wxPiGuD6hJfKm1H5vek05/pAMGwMDYwINQVObZQMBDrF8DH9i94eyF2+VUa13N+iMEQQjhBVXHBOZqNNVmC4TKQNTG0nI2JEkSO6uuaZJVu93Gy5cvAQDD4bDMxLCQcQKdQdpSQssMsC++vBgga/THMDaaPTlvT02pEJkLKGpBmAgeAkgEENWYVVHyjD64ALp1wVYAwxDpQiE44CgpP4Kaz5DLPqR8KOHgYicmDLvkYHcOX57nGI/H6Ha7uLi4eIiCmb0xm83K9AoWmHj/BgYFEv0NxN4YklrwTPtLJXxuNZdLoXq8AO6nTX3qolt8Z33w1bM8vzsNoXSzIkwzoB3TRoErNSLBGI1CGxRaQvottKM2er2uNb/10W31dCVDe1dXVzZb0u/3H0Z1cWFS2RmrBU0pUnGLXCZIPR8j/xcgKURbfwei4uWXzgRzNdepevFJyL0EqQRgzLNaELdnoNt8tNVqwUiviuQJRBraaBgjQJDVlwcDwIgOZOsccejjPI6sf8kml0tQmbDAvEHutNHpdCz+yPnpFRyQw/Q0TTEcnmGpx9AmRVH0EfpjCPJBMJh7/x9CfW5NyAePXnEa8oAbWD1p9I0CRmSQFD6bABpjLDmVDx/nb2UwwHz+OchrQ6gYnoogPR9KhRBeCM8PoTwJAlBkGbI8x/39/Qox9ezsDKPRaK3Xtcs9HI1GiOMYFxcXyLLMUrnsvGAuNi5NVYD72QQGOci0IdXn9gQbFMjkLUL9Cl8mimpTL+fHiJUw3l7z/7RcohALBBQ923oxlZ6nnGZZZv3iwdkreOIFpKcghAdRrVGW58jSFLP5va1zaSp74EAjjuONQD/HFO/fv0e327VVisvlshRA7svCCDnBYJGPAIiqO/6DCRGQWHrvEOnXXzpf8LTXfsJskEPLOWCGz/r8rPG4oRAXdbFJXCxTW6m2b20Hs4JcRvS2dWZNuIIDAiU9JwxDjMdjxHEMTRmWxT0EBLy1NxTIxRQz/+cR649AWyEEOkCnbAr9C2ixxL5ECBLro3Q0NDz1GoUuoMUCEH4Vf0qAZOUDyQOeQxz0bAXmIOi9I+cPpQGBcnYzzwDhtiMucfaYxlNZlm2tUtwKRPu+b6dhpmlaFjLTw9BiahifLSCwkJ8i9a7gbTQtZQfO3T6ccMRvvRqPCCD/qtG1X38rUx0IsWouISHVt2OeX2MU/AsoEVcMFh/SKAgoCFKQQkEYvzRF5EHChyDPMl2EkTCiQCFnWKrP9iJiCIhS6GtcSrEzKBGNeOKxZpxNbpqmePfu3Vpfm8cId5Iktlmn29hoLwE8Pz+HlBJJkth+LwBw2foOfGs8gdiQ0xSQMKRhMNuxJicwfYe8Ra1/oSGDs+gtfK+Fz6b/CiQ0tFg8HCvP6ZcsBAR5ACQEyUrAyv+X2lKAhIFBAoNszxsTKOQcS+8dAuo7olSARIn6EgCIAhAPB9GA28VpQBQQ8BHqF1DUOToQczvdH9tir0lLsnY9pjRTsepMksSSJ6fTKS4638C7yRRG/fyOhf5iA9SB18bL9ndBQGCWX5X5z9o9W21ErGUMGvtwiuOfe6G+hWW9tcle2uzhNal3jX72H8Gj+ChNxY3GuZfLLiF0a8V5TCsTW+saEIDtGXOQBuS2+Xmeo9/vI89z3N3dodX6GG+734NP5p9WxTwGX8ZsyHn0beiGL/H/3PxtvGr/Cvy70T+shPBJvbDNbsMhkTwSpPIWLf3x0YFIp9NpTEmudCuoCLxBECAKQ3jKs25Zr9fDt771rZWcOsM8h3RIsALI8x8Yirm9vYXWGu+vrvHi8hL/YfwDeDf7VxinnyHTC2jK1sTwsGWlDZ7SA7DrailRzbAl/t71o1iQCCtCxd+HXhsf9b4Xo+SXYMgg03Ocx9+GTC8gRWWKqhmgrmtxVMRMD+9ApGHIgETVJYFM+TMMDBXQlKEwuU3BPXye2OobCkgk3udo6Y8OVgZuXxeuFXY70wZhBF8p+IoghQDpDEZn0MsRimKJosiRUhvDy7dot9uYTCYrgUuaplVuWR1Ee1NRFNkJOXwCut0uCiMwmc4w6HXxtf6vxTKfINVjLPMxUj1fkSPpydUNZOdclBkDssCFDylkVcopncUWKw69dAWwQRgfPsspBhfeQ9BRfe/LCFJ4aPln+I7h90NKDxKqek3l230IbUioBK6AIQNBBpo0DAwM5ShMisKkyPUSmVkgKxbIzRyZXpSHXBTOYRPOWgloMUcqbxDrNzDWP98jI1PlgoGydS8XS0kpYfQSlIxASY7c5AAZkM5AVJS9dISAB40smSEvNFqtlm1FwleSJLaB5yF1N8odbwDARsRsNuwIV7+H2O9hEL2FId3gGjmTlGoF7bR35Peh/MDWk1vc8hAF9ohsyhsZ0iAq2TKm0pxFscCimCAtJkiLKZZmjGV+X0FMElP188jlCKF+BUUR5MooXar9l2yqlbsaSCkxn8+t0rl690s4CxeAVEB1IIWUEA5NQQgJSQWKPFvD/Fy2+aGMI1WPalZD8g2TgIR36H78+2sTnC08QHgAHCKn6qKDlzUNZrBIbzHJ32OavMOsuEXivbdC51EEQSE8RPCYdWNaUIghRYAXL16sdPC6u7vDcDispmAqUDVDZLMJl/A8gyJLIFuttSJ0zpQcTEj99yLw5biEkGhHl2hHl3jd/W4AwDIbYZHdYJK9x0LfQVOOgu6RmgwGGgICLe8C3+h9H4IgxPX1tZ39wVWC/X4fYRSjSMfwfVNZL9Ho4ioPKIqHQYX1SJqnJx3SFP5LJYCPodUzI6Z+MUPGHWfFuNaubvk7tVutWeYpgF/3ioMB4mCAc3xHKQDFDMuC/fQplIxx2fpl8GUb19dXmM1mtq3cy5cvMZlMkCQJeoMLZNMCxuSATmBMDg8E2NxwNUtFaKRFZtfNhWNYs3I3rn0Dkb0EcLFYbJxItA+WtCmB7f6de5dwLrKpec4xQug2T68/AxHh8vLSTgVQSuH6+npFAN17PPRz6+PC6oNxuC0wczEPNV9rvq7qIFAd9KOP1g4fzwzxfb+a/bJEr9dDURTIcoJsv0agPECnMDoHFSlMsYDOl4DJQEUCTwB5ulihdrkXU7wOavpJG1bWGIPZbIbJZHLyjp9NHxnHsa3YeqoCIiKybSsA4O7ubi26+/CmdTUHy23P+Itrmj/Es9cH00ynUwgpEVUjNoKA6zsIpHPobA4NH1GrhyzL7Iw8boXc7XZhjMHV1dXeMvP/A/Zxklvs6kVGAAAAAElFTkSuQmCC")}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .direction-rtl{direction:rtl;float:none;text-align:right}.lp-window-root .lp_chat_line_wrapper .lp_rich_content_line .lp-json-pollock{padding:4px 0 8px 0}.lp-window-root .lp_chat_line_wrapper.lp_agent{direction:ltr;text-align:left}.lp-window-root .lp_chat_line_wrapper.lp_agent .lp_chat_line{background-color:#0363ad;border-radius:4px;padding:5px 4px;text-align:left;left:0px}.lp-window-root .lp_chat_line_wrapper.lp_agent .lp_chat_line .lp_title_text{color:white}.lp-window-root .lp_chat_line_wrapper.lp_agent .lp_new_chat_line{background-color:#0363ad;border-radius:4px;padding:5px 4px;text-align:left;left:0px}.lp-window-root .lp_chat_line_wrapper.lp_agent .lp_new_chat_line .lp_title_text{color:white}.lp-window-root .lp_chat_line_wrapper.lp_visitor{text-align:right}.lp-window-root .lp_chat_line_wrapper.lp_visitor .lp_time{text-align:right}.lp-window-root .lp_new_window .lp_chat_line_wrapper{animation:pop-in .25s}.lp-window-root .lp_resume .lp_chat_line_wrapper{-webkit-animation:popOpacity .25s ease-out;-moz-animation:popOpacity .25s ease-out;-ms-animation:popOpacity .25s ease-out;-o-animation:popOpacity .25s ease-out;animation:popOpacity .25s ease-out}.lp-window-root .lp_chat_line_wrapper.lp_visitor .lp_chat_line{background-color:white;border:1px #b6b6b6 solid;border-radius:3px;color:#404041;padding:5px}.lp-window-root .lp_chat_line_wrapper.lp_visitor .lp_new_chat_line{background-color:white;border:1px #b6b6b6 solid;border-radius:14px 14px 0px 14px;color:#404041;padding:5px;z-index:100}.lp-window-root .lp_chat_line_wrapper.lp_visitor .lp_new_chat_line.lp_line_grouped_start{border-bottom-right-radius:0}.lp-window-root .lp_chat_line_wrapper.lp_visitor .lp_new_chat_line.lp_line_grouped_body{border-radius:14px 0 0 14px}.lp-window-root .lp_chat_line_wrapper.lp_visitor .lp_new_chat_line.lp_line_grouped_end{border-top-right-radius:0;border-bottom-right-radius:14px}.lp-window-root .lp_chat_line_wrapper .lp_chat_line.lp_image_sharing_line{padding:0}.lp-window-root .lp_chat_line_wrapper .lp_chat_line.lp_image_sharing_line .lp_title_text{padding:5px 3px}.lp-window-root .lp_chat_line_wrapper .lp_chat_line.lp_image_sharing_line .lp_image_sharing_line_content_wrapper{width:130px;height:130px;overflow:hidden;position:relative;margin:0 auto}.lp-window-root .lp_chat_line_wrapper .lp_chat_line.lp_image_sharing_line .lp_image_sharing_line_content_wrapper.icon{width:35px;height:45px}.lp-window-root .lp_chat_line_wrapper .lp_chat_line.lp_image_sharing_line .lp_image_sharing_line_content_wrapper .lp_image_sharing_line_content{position:absolute;left:50%;top:50%;bottom:0;margin:auto;-ms-transform:translate(-50%, -25%);-webkit-transform:translate(-50%, -25%);transform:translate(-50%, -25%)}.lp-window-root .lp_chat_line_wrapper .lp_chat_line.lp_image_sharing_line .lp_image_sharing_link,.lp-window-root .lp_chat_line_wrapper .lp_chat_line.lp_image_sharing_line .lp_image_sharing_link:focus{outline:none}.lp-window-root .lp_chat_line_wrapper .lp_chat_line.lp_image_sharing_line .lp_image_sharing_upload_error_overlay{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(255,255,255,0.8);z-index:100}.lp-window-root .lp_chat_line_wrapper .lp_chat_line.lp_image_sharing_line .lp_image_sharing_upload_error_overlay .lp_image_sharing_upload_error{height:130px;width:100%;background-color:transparent;position:relative}.lp-window-root .lp_chat_line_wrapper .lp_chat_line.lp_image_sharing_line .lp_image_sharing_upload_error_overlay .lp_image_sharing_upload_error .lp_image{display:inline-block;vertical-align:middle;overflow:hidden !important;width:34px !important;height:34px !important;position:absolute !important;top:0;bottom:0;right:0;left:0;margin:auto}.lp-window-root .lp_chat_line_wrapper .lp_chat_line.lp_image_sharing_line .lp_image_sharing_upload_error_overlay.can_retry{cursor:pointer}.lp-window-root .lp_chat_line_wrapper .lp_chat_line.lp_image_sharing_line .lp_image_sharing_upload_error_overlay.icon .lp_image_sharing_upload_error{height:45px}.lp-window-root .lp_chat_line_wrapper .lp_new_chat_line.lp_image_sharing_line{padding:0}.lp-window-root .lp_chat_line_wrapper .lp_new_chat_line.lp_image_sharing_line .lp_title_text{padding:5px 3px}.lp-window-root .lp_chat_line_wrapper .lp_new_chat_line.lp_image_sharing_line .lp_image_sharing_line_content_wrapper{width:130px;height:130px;overflow:hidden;position:relative;margin:0 auto}.lp-window-root .lp_chat_line_wrapper .lp_new_chat_line.lp_image_sharing_line .lp_image_sharing_line_content_wrapper.icon{width:35px;height:45px}.lp-window-root .lp_chat_line_wrapper .lp_new_chat_line.lp_image_sharing_line .lp_image_sharing_line_content_wrapper .lp_image_sharing_line_content{position:absolute;left:50%;top:50%;bottom:0;margin:auto;-ms-transform:translate(-50%, -25%);-webkit-transform:translate(-50%, -25%);transform:translate(-50%, -25%)}.lp-window-root .lp_chat_line_wrapper .lp_new_chat_line.lp_image_sharing_line .lp_image_sharing_link,.lp-window-root .lp_chat_line_wrapper .lp_new_chat_line.lp_image_sharing_line .lp_image_sharing_link:focus{outline:none}.lp-window-root .lp_chat_line_wrapper .lp_new_chat_line.lp_image_sharing_line .lp_image_sharing_upload_error_overlay{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(255,255,255,0.8);z-index:100}.lp-window-root .lp_chat_line_wrapper .lp_new_chat_line.lp_image_sharing_line .lp_image_sharing_upload_error_overlay .lp_image_sharing_upload_error{height:130px;width:100%;background-color:transparent;position:relative}.lp-window-root .lp_chat_line_wrapper .lp_new_chat_line.lp_image_sharing_line .lp_image_sharing_upload_error_overlay .lp_image_sharing_upload_error .lp_image{display:inline-block;vertical-align:middle;overflow:hidden !important;width:34px !important;height:34px !important;position:absolute !important;top:0;bottom:0;right:0;left:0;margin:auto}.lp-window-root .lp_chat_line_wrapper .lp_new_chat_line.lp_image_sharing_line .lp_image_sharing_upload_error_overlay.can_retry{cursor:pointer}.lp-window-root .lp_chat_line_wrapper .lp_new_chat_line.lp_image_sharing_line .lp_image_sharing_upload_error_overlay.icon .lp_image_sharing_upload_error{height:45px}.lp-window-root .lp_chat_line_wrapper.lp_system{text-align:center}.lp-window-root .lp_chat_line_wrapper.lp_system .lp_time{margin-top:5px;text-align:center}.lp-window-root .lp_chat_line_wrapper.lp_system .lp_chat_line{position:relative;text-align:center;padding-top:0;padding-bottom:5px;padding-left:0;padding-right:0;max-width:100%}.lp-window-root .lp_chat_line_wrapper.lp_system .lp_chat_line .lp_title_text,.lp-window-root .lp_chat_line_wrapper.lp_system .lp_chat_line .lp_title_text *{text-align:center;font-size:0.9em}.lp-window-root .lp_chat_line_wrapper.lp_system .lp_new_chat_line{position:relative;text-align:center;padding-top:0;padding-bottom:5px;padding-left:0;padding-right:0;max-width:100%}.lp-window-root .lp_chat_line_wrapper.lp_system .lp_new_chat_line .lp_title_text,.lp-window-root .lp_chat_line_wrapper.lp_system .lp_new_chat_line .lp_title_text *{text-align:center;font-size:0.9em}.lp-window-root .lp_chat_line_wrapper .lp_chat_line .lp_chat_line_text{position:relative;min-width:50px;max-width:230px}.lp-window-root .lp_chat_line_wrapper .lp_new_chat_line .lp_chat_line_text{position:relative;min-width:50px;max-width:230px}.lp-window-root .lp_chat_line_wrapper.lp_visitor{text-align:right;margin-right:0}.lp-window-root .lp_chat_line_wrapper .lp_chat_arrow_border,.lp-window-root .lp_chat_line_wrapper .lp_chat_arrow{bottom:10px;position:absolute;background-color:transparent;width:0;height:2px;display:inline-block}.lp-window-root .lp_chat_line_wrapper.lp_agent .lp_chat_line{border:1px #b6b6b6 solid;right:-26px}.lp-window-root .lp_chat_line_wrapper.lp_agent .lp_new_chat_line{border:1px #b6b6b6 solid;border-radius:14px 14px 14px 0px;right:-26px;margin-left:0px;padding:5px}.lp-window-root .lp_chat_line_wrapper.lp_agent .lp_new_chat_line.lp_line_grouped_start{border-bottom-left-radius:0}.lp-window-root .lp_chat_line_wrapper.lp_agent .lp_new_chat_line.lp_line_grouped_body{border-radius:0 14px 14px 0}.lp-window-root .lp_chat_line_wrapper.lp_agent .lp_new_chat_line.lp_line_grouped_end{border-top-left-radius:0;border-bottom-left-radius:14px}.lp-window-root .lp_chat_line_wrapper.lp_agent.lp_bubble_style.agent_avatar_display .agent_avatar{margin-right:5px}.lp-window-root .lp_chat_line_wrapper.lp_agent.lp_bubble_style.agent_avatar_display .lp_chat_line{max-width:calc(100% - 37px - 60px)}.lp-window-root .lp_chat_line_wrapper.lp_agent.lp_bubble_style.agent_avatar_display .lp_new_chat_line{max-width:calc(100% - 37px - 60px)}.lp-window-root .lp_chat_line_wrapper.lp_agent.lp_bubble_style.avatar-padding .lp_time{left:37px}.lp-window-root .lp_chat_line_wrapper.lp_agent.lp_bubble_style.avatar-padding .lp_time_side{left:0px}.lp-window-root .lp_chat_line_wrapper.lp_grouped{padding-bottom:3px}.lp-window-root .lp_chat_line_wrapper.lp_grouped.lp_agent .lp_chat_line{padding-top:8px;padding-bottom:8px}.lp-window-root .lp_chat_line_wrapper.lp_grouped.lp_agent .lp_new_chat_line{padding-top:8px;padding-bottom:8px}.lp-window-root .lp_chat_line_wrapper.lp_grouped.lp_agent.agent_avatar_display .lp_chat_line{max-width:calc(100% - 43px - 60px)}.lp-window-root .lp_chat_line_wrapper.lp_grouped.lp_agent.agent_avatar_display .lp_new_chat_line{max-width:calc(100% - 43px - 60px)}.lp-window-root .lp_chat_line_wrapper.lp_grouped.lp_visitor .lp_chat_line{padding-top:8px;padding-bottom:8px}.lp-window-root .lp_chat_line_wrapper.lp_grouped.lp_visitor .lp_new_chat_line{padding-top:8px;padding-bottom:8px}.lp-window-root .lp_chat_line_wrapper.lp_grouped .lpc_rich_content_grouped{margin-left:0px !important}.lp-window-root .lp_chat_line_wrapper.lp_grouped.lp_system{padding:4px;margin:0px}.lp-window-root .lp_chat_line_wrapper.lp_grouped.lp_system .lp_time{padding-bottom:2px}.lp-window-root .lp_chat_line_wrapper.lp_grouped.lp_system .lp_time_bottom{padding-top:3px}.lp-window-root .lp_chat_line_wrapper.lp_grouped.lp_system .lp_chat_line{padding-bottom:0px}.lp-window-root .lp_chat_line_wrapper.lp_grouped .lp_chat_line_auto_message{padding-top:20px}.lp-window-root .lp_maximized_large .lp_chat_line_wrapper.lp_system{padding-left:20px;padding-right:20px}.lp-window-root .lp_chat_line_wrapper.lp_line_grouped_end{margin-bottom:24px}.lp-window-root .lp_chat_line_wrapper.lp_agent .lp_chat_arrow{left:6px;margin-top:-2px;border-top:6px solid transparent;border-right:5px solid #0363ad;border-bottom:5px solid transparent}.lp-window-root .lp_chat_line_wrapper.lp_agent .lp_chat_arrow_border{left:5px;margin-top:-2px;border-top:6px solid transparent;border-right:5px solid #b6b6b6;border-bottom:5px solid transparent}.lp-window-root .lp_chat_line_wrapper.lp_agent.lp_ts_bottom .lp_chat_arrow{bottom:28px}.lp-window-root .lp_chat_line_wrapper.lp_agent.lp_ts_bottom .lp_chat_arrow_border{bottom:28px}.lp-window-root .lp_chat_line_wrapper.lp_visitor .lp_chat_arrow{right:-5px;border-top:6px solid transparent;border-left:6px solid white;border-bottom:6px solid transparent;z-index:2;margin-top:-2px}.lp-window-root .lp_chat_line_wrapper.lp_visitor .lp_chat_arrow_border{right:-6px;border-top:6px solid transparent;border-left:6px solid #b6b6b6;border-bottom:6px solid transparent;margin-top:-2px}.lp-window-root .lp_chat_line_wrapper.lp_visitor.lp_image_line_wrapper .lp_chat_arrow{right:-6px;bottom:5px}.lp-window-root .lp_chat_line_wrapper.lp_visitor.lp_image_line_wrapper .lp_chat_arrow_border{right:-7px;bottom:5px}.lp-window-root .lp_chat_line_wrapper.lp_agent.lp_image_line_wrapper .lp_chat_arrow{left:-5px;bottom:5px}.lp-window-root .lp_chat_line_wrapper.lp_agent.lp_image_line_wrapper .lp_chat_arrow_border{left:-6px;bottom:5px}.lp-window-root .lp_time_side_wrapper{position:relative}.lp-window-root .lp_time_side_wrapper .lp_time_side{position:absolute;bottom:-3px;font-size:0.8em;left:-85px;text-align:right;padding:3px 2px;background-color:transparent;vertical-align:super;top:unset;white-space:nowrap}.lp-window-root .lp_line_state_wrapper{position:relative}.lp-window-root .lp_line_state_wrapper .lp_line_state{width:75px;position:absolute;bottom:-3px;font-size:0.8em;left:-85px;text-align:right;padding:3px 2px;background-color:transparent;vertical-align:super}.lp-window-root .lp_line_state_wrapper .lp_line_state .lp-state-visual{position:relative;top:4px}.lp-window-root .lp_line_state_wrapper .lp_line_state .lp-state-visual.lp-read-notification{width:14px;height:6px;left:2px}.lp-window-root .lp_line_state_wrapper .lp_line_state .lp-state-visual.lp-sent-notification{width:11px;height:11px}.lp-window-root .lp_line_state_wrapper .lp_line_state .lp-state-visual.lp-accept-notification{width:11px;height:7px;left:2px}.lp-window-root .lp_line_state_wrapper .lp_line_state .lp-state-visual.lp-pending-notification{width:14px;height:5px}.lp-window-root .lp_line_state_wrapper .lp_line_state .lp-state-visual.lp-failed-notification{width:11px;height:11px}.lp-window-root .lp_line_state_wrapper.lp_image_caption{padding:5px}.lp-window-root .lp_chat_line_wrapper.state_ERROR{padding-bottom:35px}.lp-window-root .lp_chat_line_wrapper.state_ERROR .lp_line_state{bottom:-32px;right:0;white-space:nowrap;left:auto;width:auto}.lp-window-root .lp_chat_line_wrapper.state_ERROR .lp_line_state .lp_error_text{color:#c0392b}.lp-window-root .lp_chat_line_wrapper.state_ERROR .lp_line_state span{vertical-align:middle}.lp-window-root .lp_chat_line_wrapper.state_ERROR .lp_line_state span.lp_warning{font-weight:bold;background:red;border-radius:51px;margin:-2px 0 0 5px;width:15px;height:15px;display:inline-block;color:white;text-align:center;line-height:15px;position:relative;overflow:hidden}.lp-window-root .lp_chat_line_wrapper.state_ERROR .lp_line_state span.lp_warning .lp_voice_error{position:absolute;top:0;left:100px;font-size:0;line-height:0}.lp-window-root .lp_transcript_widget{padding-bottom:5px}.lp-window-root .lp_agent_is_typing{display:none;overflow:hidden;font-size:.8em;font-style:italic;padding-left:4px;position:absolute;top:-14px;left:5px;overflow:visible;height:10px;background-color:transparent;color:#6d6e70}.lp_ie8 .lp-window-root .lp_agent_is_typing{font-style:normal}.lp-window-root .lp_transcript_scroll{position:relative;left:0;right:0;top:0;bottom:0;min-height:100%}.lp-window-root .lp_transcript_rotator_wrapper{width:100%;height:47px;text-align:center !important;margin-top:22px;border-bottom:groove 2px}.lp-window-root .lp_transcript_rotator_wrapper .lp_transcript_rotator_image,.lp-window-root .lp_transcript_rotator_wrapper .lp_transcript_rotator_text{display:inline-block}.lp-window-root .lp_transcript_rotator_wrapper .lp_transcript_rotator_text a{color:#66f}.lp-window-root .lp_transcript_rotator_wrapper .lp_transcript_rotator_text{color:#6d6e70;font-size:.9em;padding:3px}.lp-window-root .lp_transcript_rotator_wrapper .lp_image{vertical-align:middle;max-height:100%}.lp-window-root .lp_actions_bar_container{direction:ltr;position:absolute;bottom:-200px;height:200px;left:0;right:0;overflow:hidden;background-color:#fff;z-index:5;display:none;transition:bottom .25s}.lp-window-root .lp_actions_bar_container .lp_emoji_bar{position:absolute;top:0;bottom:28px;left:0;right:0;overflow:hidden;height:200px;display:none}.lp-window-root .lp_actions_bar_container .lp_emoji_bar .lp_emoji_table{width:100%;height:200px}.lp-window-root .lp_actions_bar_container .lp_emoji_bar .lp_emoji_table td{text-align:center;vertical-align:middle;font-size:2.0em}.lp-window-root .lp_actions_bar_container .lp_actions_bar{position:absolute;top:0;bottom:28px;left:0;right:0;overflow:hidden}.lp-window-root .lp_actions_bar_container .lp_actions_bar .lp_action_items_wrapper,.lp-window-root .lp_actions_bar_container .lp_actions_bar .lp_action_placeholder_wrapper{position:absolute;width:100%;height:100%;background:transparent;direction:ltr}.lp-window-root .lp_actions_bar_container .lp_actions_bar .lp_action_item,.lp-window-root .lp_actions_bar_container .lp_actions_bar .lp_action_placeholder{position:relative;background-color:transparent;vertical-align:top;display:inline-block;width:33.3%;height:50%}.lp-window-root .lp_actions_bar_container .lp_actions_bar .lp_action_item:focus,.lp-window-root .lp_actions_bar_container .lp_actions_bar .lp_action_placeholder:focus{outline-offset:-2px}.lp-window-root .lp_actions_bar_container .lp_actions_bar .lp_action_placeholder{background:none;border-bottom-width:1px;border-left-width:1px;border-color:#d6d6d6;border-style:solid}.lp-window-root .lp_actions_bar_container .lp_actions_bar .lp_action_placeholder:nth-child(1),.lp-window-root .lp_actions_bar_container .lp_actions_bar .lp_action_placeholder:nth-child(2),.lp-window-root .lp_actions_bar_container .lp_actions_bar .lp_action_placeholder:nth-child(3){border-top-width:1px}.lp-window-root .lp_actions_bar_container .lp_actions_bar .lp_action_placeholder:nth-child(1),.lp-window-root .lp_actions_bar_container .lp_actions_bar .lp_action_placeholder:nth-child(4){border-left-width:0}.lp-window-root .lp_actions_bar_container .lp_actions_bar .lp_action_item{float:left;cursor:pointer}.lp-window-root .lp_actions_bar_container .lp_actions_bar .lp_action_item:disabled{opacity:0.5;cursor:auto}.lp-window-root .lp_actions_bar_container .lp_actions_bar .lp_action_item .lp_action_wrapper{vertical-align:middle;text-align:center;align-content:center;height:50%}.lp-window-root .lp_actions_bar_container .lp_actions_bar .lp_action_item .lp_action_wrapper .lp_image{text-align:center}.lp-window-root .lp_actions_bar_container .lp_actions_bar .lp_action_item .lp_action_wrapper .lp_image .lp_action_image{margin:0 auto}.lp-window-root .lp_actions_bar_container .lp_actions_bar .lp_action_item .lp_action_wrapper .lp_title{text-align:center;padding:0 0.5em;font-size:.8em;word-wrap:break-word;color:#6d6e71}.lp-window-root .lp_actions_bar_container .lp_actions_bar div.lp_action_item div.lp_action_wrapper{position:relative;top:25%}.lp-window-root .lp_actions_bar_container .lp_bottom_logo_bar{position:absolute;left:0;right:0;bottom:0;height:28px;text-align:center;padding-top:5px}.lp-window-root .lp_main .lp_location_bottom.lp_show{display:block}.lp-window-root .lp_main .lp_no-animation .lp_main_area .lp_location_center,.lp-window-root .lp_main .lp_no-animation .lp_main_area .lp_location_bottom,.lp-window-root .lp_main .lp_no-animation .lp_main_area .lp_actions_bar_container{transition:none}.lp-window-root .lp_main .lp_actions_visible .lp_main_area .lp_location_center{height:calc(100% - 250px)}.lp-window-root .lp_main .lp_actions_visible .lp_main_area .lp_location_center.lp_no-animation{transition:none}.lp-window-root .lp_main .lp_actions_visible .lp_main_area .lp_location_bottom{bottom:196px}.lp-window-root .lp_main .lp_actions_visible .lp_main_area .lp_location_bottom .lp_actions_button{margin:0;background:#ffffff;border:none;text-align:center;font-family:"Arial";cursor:pointer;box-shadow:none;background:transparent}.lp-window-root .lp_main .lp_actions_visible .lp_main_area .lp_location_bottom .lp_actions_button .lp_enable_image{display:block}.lp-window-root .lp_main .lp_actions_visible .lp_main_area .lp_location_bottom .lp_actions_button .lp_disable_image{display:none}.lp-window-root .lp_main .lp_actions_visible .lp_main_area .lp_location_bottom .lp_actions_button:disabled{cursor:default}.lp-window-root .lp_main .lp_actions_visible .lp_main_area .lp_location_bottom .lp_actions_button:disabled .lp_enable_image{display:none}.lp-window-root .lp_main .lp_actions_visible .lp_main_area .lp_location_bottom .lp_actions_button:disabled .lp_disable_image{display:block}.lp-window-root .lp_main .lp_actions_visible .lp_main_area .lp_location_bottom .lp_actions_button .lp_enable_image{display:none}.lp-window-root .lp_main .lp_actions_visible .lp_main_area .lp_location_bottom .lp_actions_button .lp_rotated_image{display:block}.lp-window-root .lp_main .lp_actions_visible .lp_main_area .lp_location_bottom.lp_no-animation{transition:none}.lp-window-root .lp_main .lp_actions_visible .lp_main_area .lp_actions_bar_container.lp_no-animation{transition:none}.lp-window-root .lp_dialog_container{position:absolute;left:0;right:0;top:0;bottom:0;background-color:#fdfdfd;z-index:10000;color:black}.lp-window-root .lp_dialog_container .lp_center_div_wrapper{width:100%;height:100%;padding:0 10px;display:table}.lp-window-root .lp_dialog_container .lp_center_div_wrapper .lp_center_div_inner{text-align:center;display:table-cell;overflow:visible;vertical-align:middle}.lp_ios6 .lp-window-root .lp_dialog_container .lp_center_div_wrapper .lp_center_div_inner{margin-top:45%;display:block}.lp_ios6.lp_landscape .lp-window-root .lp_dialog_container .lp_center_div_wrapper .lp_center_div_inner{margin-top:15%}.lp_ie8 .lp-window-root .lp_dialog_container .lp_center_div_wrapper .lp_center_div_inner{display:block;padding-top:40%;height:50%}.lp_native_android .lp-window-root .lp_dialog_container .lp_center_div_wrapper .lp_center_div_inner{vertical-align:top;padding-top:15px}.lp_landscape.lp_ios.lp_lpKeyboardOpen .lp-window-root .lp_dialog_container .lp_center_div_wrapper .lp_center_div_inner{vertical-align:top;padding-top:5%}.lp_android.lp_landscape .lp-window-root .lp_dialog_container .lp_center_div_wrapper .lp_center_div_inner{min-height:80px}.lp-window-root .lp_dialog_container .lp_title{display:block;padding:5px 15px 5px 15px;font-size:1.1em;text-align:center}.lp-window-root .lp_dialog_container legend{box-sizing:border-box;display:table;max-width:100%;white-space:normal;word-break:break-all;word-break:break-word}.lp-window-root .lp_dialog_container .lp_subtitle{display:block;padding:5px 15px 5px 15px;color:#515151;font-size:.9em;text-align:center}.lp-window-root .lp_dialog_container .lp_title_large_padding{padding:10px 15px 10px 15px}.lp-window-root .lp_dialog_container .lp_dialog_input{padding:7px 10px 7px 10px;display:block;width:100%;background-color:#fff;border:1px #b6b6b6 solid;border-radius:3px;box-sizing:border-box}.lp-window-root .lp_dialog_container .lp_dialog_input.lp_error{border-color:red}.lp-window-root .lp_dialog_container .lp_idnv_container{text-align:center;padding:20px 0px 40px 0px}.lp-window-root .lp_dialog_container .lp_idnv_container .lp_idnv_wrapper{display:inline-block;padding:0px 15px 0px 15px;text-align:center}.lp-window-root .lp_dialog_container .lp_idnv_container .lp_idnv_input{width:31px;height:36px;margin-top:5px}.lp-window-root .lp_dialog_container .lp_icons_area{position:relative;text-align:center;padding-bottom:7px}.lp-window-root .lp_dialog_container .lp_icons_area .icon{text-align:center;width:auto;height:auto}.lp-window-root .lp_dialog_container .lp_buttons_area{position:relative;text-align:center;padding:0 5%;height:40px;margin-top:5px}.lp-window-root .lp_dialog_container .lp_buttons_area button{padding:9px 6px;width:45%;float:left;font-size:.9em;border:none;text-align:center;cursor:pointer;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.lp-window-root .lp_dialog_container .lp_buttons_area .lp_confirm_button{background-color:#0363ad;margin-left:10%;-webkit-border-radius:2px;-moz-border-radius:2px;-ms-border-radius:2px;-o-border-radius:2px;border-radius:2px}.lp-window-root .lp_dialog_container .lp_buttons_area .lp_confirm_button:disabled{opacity:0.5;cursor:default}.lp-window-root .lp_dialog_container .lp_buttons_area .lp_confirm_button:hover,.lp-window-root .lp_dialog_container .lp_buttons_area .lp_confirm_button:focus{background-color:#025487}.lp-window-root .lp_dialog_container .lp_buttons_area .lp_cancel_button:hover,.lp-window-root .lp_dialog_container .lp_buttons_area .lp_cancel_button:focus{background:#F2F2F2}.lp_lpIos .lp-window-root .lp_dialog_container .lp_buttons_area .lp_cancel_button:hover,.lp_lpIos .lp-window-root .lp_dialog_container .lp_buttons_area .lp_cancel_button:focus{background:#F2F2F2}.lp-window-root .lp_dialog_container .lp_buttons_area .lp_cancel_button{background:transparent;color:#5e5e5e}.lp-window-root .lp_dialog_container .lp_buttons_area .lp_single_button{float:none;margin-left:0}.lp-window-root .lp_dialog_container .lp_dialog_alert{text-align:center}.lp-window-root .lp_dialog_container .lp_dialog_input_error{display:none;padding:5px 0 5px 0px;margin:2px 0px 2px 0px;font-size:1.1em;color:red}.lp-window-root .lp_dialog_container .lp_dialog_input_error .lp_email_error_text{color:#de0a23;display:inline;margin-left:3px;margin-right:3px;width:91%}.lp-window-root .lp_dialog_container .lp_dialog_input_error .lp_email_error_img{vertical-align:top}.lp-window-root .lp_dialog_container .lp_dialog_input_error.lp_error{display:block}.lp-window-root .lp_dialog_container .lp_error .lp_dialog_input_error{display:block}.lp-window-root .lp_dialog_container .lp_error .lp_dialog_input{border-color:red}.lp-window-root .lp_thank_you_container{position:absolute;left:0;right:0;top:0;bottom:0;background-color:#fdfdfd;z-index:10000}.lp-window-root .lp_thank_you_container .lp_title{padding:5px 40px 5px 40px;position:absolute;top:42%;color:inherit;font-size:1.2em;text-align:center;text-align:-webkit-center;width:100%}.lp-window-root .lp_thank_you_container .lp_image{position:absolute;top:30%;left:50%;width:46px;height:46px;margin-left:-23px}.lp-window-root .lp_drop_image_wrapper{width:100%;height:100%;position:absolute;top:0;right:0;z-index:10000;background-color:#fdfdfd;opacity:0.9}.lp-window-root .lp_drop_image_wrapper .lp_drop_image{border:1px dashed #0363ad;position:absolute;right:0;top:0;left:0;bottom:0;margin:5px}.lp-window-root .lp_drop_image_wrapper .lp_drop_image .lp_title{padding:5px 40px 5px 40px;position:absolute;top:50%;color:#6d6d6d;pointer-events:none;font-size:1.2em;text-align:center;text-align:-webkit-center;width:100%}.lp-window-root .lp_drop_image_wrapper .lp_drop_image .lp_image{position:absolute;top:30%;left:49%;width:58px;height:49px;margin-left:-23px;pointer-events:none}.lp-window-root .lp_tooltip{position:absolute;left:0px;right:0px;top:0px;opacity:0.2;z-index:10001;border-radius:3px;text-align:center}.lp-window-root .lp_tooltip.lp_tooltip_notification{background-color:black}.lp-window-root .lp_tooltip.lp_tooltip_call{background-color:#0363ad;cursor:pointer}.lp-window-root .lp_tooltip.lp_tooltip_call .lp_title{background-color:#0363ad;width:auto}.lp-window-root .lp_tooltip.lp_tooltip_call button.lp_maximize{display:inline;position:relative;float:left;left:10px;background-color:transparent;cursor:pointer;top:1px}.lp-window-root .lp_tooltip.lp_tooltip_success{background-color:#e1e1e1;opacity:1}.lp-window-root .lp_tooltip.lp_tooltip_success .lp_title{color:black;background-color:#e1e1e1}.lp-window-root .lp_tooltip .lp_title{width:100%;color:white;font-size:1em;background-color:black;display:inline-block;text-align:center;padding:5px 15px 5px 15px}.lp-window-root .lp_tooltip button.lp_maximize{display:none}.lp-window-root .lp_location_center .lp_agent_image_area_wrapper{left:0;right:0;height:93px;border-bottom:1px solid #d6d6d6;background:#fff;text-align:center;margin-bottom:10px;overflow:hidden;text-align:center}.lp-window-root .lp_location_center .lp_agent_image_area_wrapper .lp_image{height:100%;max-width:100%}.lp-window-root .lp_maximized_large .lp_location_center .lp_agent_image_area_wrapper{height:108px}.lp-window-root.lp_main_rtl *{direction:rtl;text-align:right}.lp-window-root.lp_main_ltr *{direction:ltr;text-align:left}.lp-window-root.lp_main_ltr .lp_rtl,.lp-window-root.lp_main_ltr .lp_rtl *,.lp-window-root.lp_main_rtl .lp_rtl,.lp-window-root.lp_main_rtl .lp_rtl *{direction:rtl;text-align:right}.lp-window-root.lp_main_ltr .lp_ltr,.lp-window-root.lp_main_ltr .lp_ltr *,.lp-window-root.lp_main_rtl .lp_ltr,.lp-window-root.lp_main_rtl .lp_ltr *{direction:ltr;text-align:left}.lp-window-root input[type=email],.lp-window-root input[type=number],.lp-window-root input[type=tel]{direction:ltr;text-align:left}.lp-window-root .lp_paging_wrapper{z-index:100;height:100%}.lp-window-root .lp_survey_area{position:absolute;top:0;bottom:0;left:0;right:0;z-index:120;background-color:#fdfdfd;overflow-y:auto;overflow-x:hidden}.lp-window-root .lp_survey_area .lp_survey_container{position:absolute;top:0;bottom:0px;left:0;right:0;overflow-x:hidden;overflow-y:auto;margin:2px}.lp-window-root .lp_survey_area .lp_survey_header_area{padding:10px 18px 10px 18px;margin-bottom:10px;border-bottom:1px solid #d6d6d6}.lp-window-root .lp_survey_area .lp_survey_footer_area{padding:10px 18px 10px 18px;margin-top:10px}.lp-window-root .lp_survey_area .lp_header_text,.lp-window-root .lp_survey_area .lp_footer_text{text-align:center;font-size:1.0em;word-break:break-word}.lp-window-root .lp_survey_area .lp_pages_area{position:relative;overflow-y:auto;width:100%;top:0;right:0;left:0}.lp-window-root .lp_survey_area .lp_pages_area .lp_content{margin:10px 0px 0px 0px;background:none}.lp-window-root .lp_survey_area .lp_pages_area .lp_content ::-webkit-input-placeholder{font:inherit;color:#323336;font-style:italic}.lp-window-root .lp_survey_area .lp_pages_area .lp_content :-moz-placeholder{font:inherit;color:#323336;font-style:italic}.lp-window-root .lp_survey_area .lp_pages_area .lp_content ::-moz-placeholder{font:inherit;color:#323336;font-style:italic}.lp-window-root .lp_survey_area .lp_pages_area .lp_content :-ms-input-placeholder{font:inherit;color:#323336;font-style:italic}.lp-window-root .lp_survey_area .lp_pages_area .lp_survey_header_error{margin-bottom:5px;padding:10px 15px 0px 15px}.lp-window-root .lp_survey_area .lp_pages_area .lp_question_wrapper{padding-bottom:10px;margin-bottom:5px;box-sizing:border-box}.lp-window-root .lp_survey_area .lp_pages_area .lp_question_wrapper .lp_question{margin-top:10px;margin-left:15px;margin-right:15px}.lp-window-root .lp_survey_area .lp_pages_area .lp_question_label{font-size:1.1em;color:inherit;word-wrap:break-word;overflow-y:visible;width:100%;text-indent:inherit}.lp-window-root .lp_survey_area .lp_pages_area .lp_mandatory{padding-left:3px}.lp-window-root .lp_survey_area .lp_pages_area input{font-size:1em}.lp-window-root .lp_survey_area .lp_pages_area .lp_input-field::-ms-clear{display:none}.lp-window-root .lp_survey_area .lp_pages_area .lp_input-field::placeholder{color:#525252;opacity:1}.lp-window-root .lp_survey_area .lp_pages_area .lp_input-field:-ms-input-placeholder{color:#525252}.lp-window-root .lp_survey_area .lp_pages_area .lp_input-field::-ms-input-placeholder{color:#525252}.lp-window-root .lp_survey_area .lp_pages_area .lp_input-field{color:#525252;vertical-align:middle;background-color:white;border:1px solid gainsboro;border-radius:1px;box-sizing:border-box;width:100%;padding:6px 8px}.lp-window-root .lp_survey_area .lp_pages_area .lp_input-field:hover{border-color:#c1c2c3}.lp-window-root .lp_survey_area .lp_pages_area .lp_error .lp_input-field,.lp-window-root .lp_survey_area .lp_pages_area .lp_error .lp_textarea_field,.lp-window-root .lp_survey_area .lp_pages_area .lp_error .lp_select_field{border-color:#de0a23}.lp-window-root .lp_survey_area .lp_pages_area .lp_error .lp_checkbox_wrapper,.lp-window-root .lp_survey_area .lp_pages_area .lp_error .lp_radiobutton_wrapper{width:100%;border:1px solid #de0a23}.lp-window-root .lp_survey_area .lp_pages_area .lp_survey_header_error .lp_surveyError_wrapper,.lp-window-root .lp_survey_area .lp_pages_area .lp_question.lp_error .lp_surveyError_wrapper{margin-top:5px}.lp-window-root .lp_survey_area .lp_pages_area .lp_survey_header_error .lp_surveyError_wrapper .lp_error_text,.lp-window-root .lp_survey_area .lp_pages_area .lp_question.lp_error .lp_surveyError_wrapper .lp_error_text{color:#de0a23;display:inline-block;padding-left:3px;padding-right:3px;width:91%}.lp-window-root .lp_survey_area .lp_pages_area .lp_survey_header_error .lp_surveyError_wrapper .lp_error_img,.lp-window-root .lp_survey_area .lp_pages_area .lp_question.lp_error .lp_surveyError_wrapper .lp_error_img{float:left}.lp-window-root .lp_survey_area .lp_pages_area .lp_radio_button,.lp-window-root .lp_survey_area .lp_pages_area .lp_checkbox_button{width:100%;margin-top:7px;margin-left:3px;margin-right:3px}.lp-window-root .lp_survey_area .lp_pages_area .lp_radio_button label,.lp-window-root .lp_survey_area .lp_pages_area .lp_checkbox_button label{font-size:1em;padding:0px 5px;margin-top:-2px;width:90%;display:inline-block}.lp-window-root .lp_survey_area .lp_pages_area .lp_radio_button input,.lp-window-root .lp_survey_area .lp_pages_area .lp_radio_button label,.lp-window-root .lp_survey_area .lp_pages_area .lp_checkbox_button input,.lp-window-root .lp_survey_area .lp_pages_area .lp_checkbox_button label{vertical-align:top}.lp-window-root .lp_survey_area .lp_pages_area span.lp_radio_button{display:table}.lp-window-root .lp_survey_area .lp_pages_area .lp_radio_button input[type=radio]:checked+label,.lp-window-root .lp_survey_area .lp_pages_area .lp_radio_button input[type=radio]:hover+label,.lp-window-root .lp_survey_area .lp_pages_area .lp_checkbox_button input[type=checkbox]:checked+label,.lp-window-root .lp_survey_area .lp_pages_area .lp_checkbox_button input[type=checkbox]:hover+label{font-weight:bold}.lp-window-root .lp_survey_area .lp_pages_area .lp_textarea_field{color:#525252;padding:8px 8px;width:100%;background-color:white;resize:none;line-height:100%;height:60px;-moz-box-sizing:border-box;border:1px solid gainsboro}.lp-window-root .lp_survey_area .lp_pages_area .lp_select_field{width:100%;padding:3px 5px;border-radius:1px;border:1px solid gainsboro;color:#525252;height:auto;min-height:30px}.lp_mac_osx .lp-window-root .lp_survey_area .lp_pages_area .lp_select_field{height:30px}.lp-window-root .lp_survey_area .lp_pages_area .lp_select_field:first-child{color:#000}.lp-window-root .lp_survey_area .lp_buttons_area{direction:ltr;position:relative;text-align:center;height:55px;width:90%;margin-left:15px;margin-right:15px}.lp-window-root .lp_survey_area .lp_buttons_area button{padding:9px 6px;margin:2px;width:45%;min-width:57px;max-width:185px;font-size:1.1em;border:none;text-align:center;cursor:pointer;overflow:hidden;white-space:nowrap}.lp-window-root .lp_survey_area .lp_buttons_area .lp_cancel_button,.lp-window-root .lp_survey_area .lp_buttons_area .lp_prev_button{background:transparent;color:#5e5e5e;left:0}.lp-window-root .lp_survey_area .lp_buttons_area .lp_cancel_button{-webkit-border-radius:2px;-moz-border-radius:2px;-ms-border-radius:2px;-o-border-radius:2px;border-radius:2px}.lp-window-root .lp_survey_area .lp_buttons_area .lp_prev_button:disabled{color:#5e5e5e}.lp-window-root .lp_survey_area .lp_buttons_area .lp_next_button:disabled{color:#e5e5e5}.lp-window-root .lp_survey_area .lp_buttons_area .lp_submit_button:disabled{cursor:default;opacity:0.5}.lp-window-root .lp_survey_area .lp_buttons_area .lp_close_survey_button,.lp-window-root .lp_survey_area .lp_buttons_area .lp_next_button,.lp-window-root .lp_survey_area .lp_buttons_area .lp_submit_button{background-color:#0363ad;color:#ffffff;-webkit-border-radius:2px;-moz-border-radius:2px;-ms-border-radius:2px;-o-border-radius:2px;border-radius:2px}.lp-window-root .lp_survey_area .lp_buttons_area .lp_close_survey_button:disabled,.lp-window-root .lp_survey_area .lp_buttons_area .lp_next_button:disabled,.lp-window-root .lp_survey_area .lp_buttons_area .lp_submit_button:disabled{opacity:0.5;cursor:default}.lp-window-root .lp_survey_area .lp_buttons_area .lp_next_button,.lp-window-root .lp_survey_area .lp_buttons_area .lp_submit_button{right:0}.lp-window-root .lp_survey_area .lp_buttons_area .lp_close_survey_button{position:static}.lp-window-root .lp_survey_area .lp_buttons_area .lp_close_survey_button:hover,.lp-window-root .lp_survey_area .lp_buttons_area .lp_close_survey_button:focus,.lp-window-root .lp_survey_area .lp_buttons_area .lp_next_button:hover,.lp-window-root .lp_survey_area .lp_buttons_area .lp_next_button:focus,.lp-window-root .lp_survey_area .lp_buttons_area .lp_submit_button:hover,.lp-window-root .lp_survey_area .lp_buttons_area .lp_submit_button:focus{background-color:#025487}.lp-window-root .lp_survey_area .lp_buttons_area .lp_cancel_button:hover,.lp-window-root .lp_survey_area .lp_buttons_area .lp_cancel_button:focus{background:#F2F2F2;color:#58585a}.lp_lpIos .lp-window-root .lp_survey_area .lp_buttons_area .lp_cancel_button:hover,.lp_lpIos .lp-window-root .lp_survey_area .lp_buttons_area .lp_cancel_button:focus{background:#F2F2F2}.lp-window-root .lp_survey_area .lp_buttons_area .lp_cancel_button:disabled{color:#5e5e5e !important}.lp-window-root .lp_survey_area .lp_pager{display:none;text-align:center}.lp-window-root .lp_survey_area .lp_pager .lp_dot{border-radius:50%;height:8px;width:8px;background-color:#fff;display:inline-block;margin-left:3px;margin-right:3px;border:1px solid #e5e5e5}.lp-window-root .lp_survey_area .lp_pager .lp_dot.lp_selected{background:#5e5e5e}.lp-window-root .lp_survey_area .lp_survey_bottom_spacer{height:3px;box-shadow:-8px -1px 14px 2px rgba(255,255,255,0.95);position:absolute;background-color:#fdfdfd;width:100%;bottom:0;z-index:1000}.lp-window-root .lp_survey_area .lp_survey_view_container{position:relative;height:100%}.lp-window-root.lp_main_rtl .lp_survey_area .lp_pages_area .lp_survey_header_error .lp_surveyError_wrapper .lp_error_img,.lp-window-root.lp_main_rtl .lp_survey_area .lp_pages_area .lp_question.lp_error .lp_surveyError_wrapper .lp_error_img{float:right}.lp-window-root.lp_main_rtl .lp_csat_rater_stars{direction:ltr}.lp-window-root.lp_main_ltr .lp_csat_rater_stars{direction:rtl}.lp-window-root .lp_csat_rater *{text-align:center}.lp-window-root .lp_csat_rater_stars{list-style:none;padding:0;margin:15px 0;font-size:0}.lp-window-root .lp_csat_rater_star{display:inline-block;font-size:24px;text-decoration:none;padding:3px}.lp-window-root .lp_csat_rater_star:before{content:""}.lp-window-root .lp_csat_rater_star:hover:before,.lp-window-root .lp_csat_rater_star:hover ~ .lp_csat_rater_star:before,.lp-window-root .lp_csat_rater_star.chosen:before,.lp-window-root .lp_csat_rater_star.chosen ~ .lp_csat_rater_star:before{content:""}.lp-window-root .lp_csat_rater_current_rating{height:16px;margin-bottom:10px}.lp-window-root .lp_csat_rater_current_rating:focus{width:50%;margin:auto;margin-bottom:10px}.lp-window-root .lp_survey_disclaimer{padding:20px 7px 0}.lp-window-root .lp_chatting-with-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:15px !important;min-width:15px;height:15px !important}.lp-window-root .lp_chatting-with-icon.lp_icon-white img{top:-40px !important;left:-920px !important}.lp-window-root .lp_chatting-with-icon.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp_chatting-with-icon img{top:0px !important;left:-920px !important;position:absolute !important}.lp-window-root .lp_chatting-with-icon svg path{fill:#656668}.lp-window-root .lp_bottom-logo-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:105px !important;min-width:105px;height:15px !important}.lp-window-root .lp_bottom-logo-icon.lp_icon-white img{top:-30px !important;left:-5px !important}.lp-window-root .lp_bottom-logo-icon.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp_bottom-logo-icon img{top:-5px !important;left:-5px !important;position:absolute !important}.lp-window-root .lp_bottom-logo-icon svg path{fill:#656668}.lp-window-root .lp_top_menu-logo-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:81px !important;min-width:81px;height:14px !important}.lp-window-root .lp_top_menu-logo-icon.lp_icon-white img{top:0 !important;left:0 !important}.lp-window-root .lp_top_menu-logo-icon.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp_top_menu-logo-icon img{top:0 !important;left:0 !important;position:absolute !important}.lp-window-root .lp_top_menu-logo-icon svg path{fill:#656668}.lp-window-root .lp_print-transcript-action-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp-window-root .lp_print-transcript-action-icon.lp_icon-white img{top:-40px !important;left:-80px !important}.lp-window-root .lp_print-transcript-action-icon.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp_print-transcript-action-icon img{top:0 !important;left:-80px !important;position:absolute !important}.lp-window-root .lp_print-transcript-action-icon svg path{fill:#656668}.lp-window-root .lp_email-transcript-action-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp-window-root .lp_email-transcript-action-icon.lp_icon-white img{top:-40px !important;left:-40px !important}.lp-window-root .lp_email-transcript-action-icon.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp_email-transcript-action-icon img{top:0 !important;left:-40px !important;position:absolute !important}.lp-window-root .lp_email-transcript-action-icon svg path{fill:#656668}.lp-window-root .lp_mute-action-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp-window-root .lp_mute-action-icon.lp_icon-white img{top:-40px !important;left:0px !important}.lp-window-root .lp_mute-action-icon.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp_mute-action-icon img{top:0 !important;left:0px !important;position:absolute !important}.lp-window-root .lp_mute-action-icon svg path{fill:#656668}.lp-window-root .lp_mark_urgency-action-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp-window-root .lp_mark_urgency-action-icon.lp_icon-white img{top:-40px !important;left:-1200px !important}.lp-window-root .lp_mark_urgency-action-icon.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp_mark_urgency-action-icon img{top:0 !important;left:-1200px !important;position:absolute !important}.lp-window-root .lp_mark_urgency-action-icon svg path{fill:#656668}.lp-window-root .lp_dismiss_urgency-action-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp-window-root .lp_dismiss_urgency-action-icon.lp_icon-white img{top:-40px !important;left:-1160px !important}.lp-window-root .lp_dismiss_urgency-action-icon.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp_dismiss_urgency-action-icon img{top:0 !important;left:-1160px !important;position:absolute !important}.lp-window-root .lp_dismiss_urgency-action-icon svg path{fill:#656668}.lp-window-root .lp_unmute-action-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp-window-root .lp_unmute-action-icon.lp_icon-white img{top:-40px !important;left:-680px !important}.lp-window-root .lp_unmute-action-icon.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp_unmute-action-icon img{top:0 !important;left:-680px !important;position:absolute !important}.lp-window-root .lp_unmute-action-icon svg path{fill:#656668}.lp-window-root .lp_actions-opened-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp-window-root .lp_actions-opened-icon.lp_icon-white img{top:-40px !important;left:-480px !important}.lp-window-root .lp_actions-opened-icon.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp_actions-opened-icon img{top:0 !important;left:-480px !important;position:absolute !important}.lp-window-root .lp_actions-opened-icon svg path{fill:#656668}.lp-window-root .lp_actions-closed-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp-window-root .lp_actions-closed-icon.lp_icon-white img{top:-40px !important;left:-520px !important}.lp-window-root .lp_actions-closed-icon.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp_actions-closed-icon img{top:0 !important;left:-520px !important;position:absolute !important}.lp-window-root .lp_actions-closed-icon svg path{fill:#656668}.lp-window-root .lp_actions-emoji-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp-window-root .lp_actions-emoji-icon.lp_icon-white img{top:-40px !important;left:-1477px !important}.lp-window-root .lp_actions-emoji-icon.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp_actions-emoji-icon img{top:0 !important;left:-1477px !important;position:absolute !important}.lp-window-root .lp_actions-emoji-icon svg path{fill:#656668}.lp-window-root .lp_paper_plane-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp-window-root .lp_paper_plane-icon.lp_icon-white img{top:-40px !important;left:-1477px !important}.lp-window-root .lp_paper_plane-icon.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp_paper_plane-icon img{top:0 !important;left:-1477px !important;position:absolute !important}.lp-window-root .lp_paper_plane-icon svg path{fill:#656668}.lp-window-root .lp_actions-forget-me-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp-window-root .lp_actions-forget-me-icon.lp_icon-white img{top:-40px !important;left:-1600px !important}.lp-window-root .lp_actions-forget-me-icon.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp_actions-forget-me-icon img{top:0 !important;left:-1600px !important;position:absolute !important}.lp-window-root .lp_actions-forget-me-icon svg path{fill:#656668}.lp-window-root .lp_end-chat-action-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp-window-root .lp_end-chat-action-icon.lp_icon-white img{top:-40px !important;left:-120px !important}.lp-window-root .lp_end-chat-action-icon.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp_end-chat-action-icon img{top:0 !important;left:-120px !important;position:absolute !important}.lp-window-root .lp_end-chat-action-icon svg path{fill:#656668}.lp-window-root .lp_share-image-action-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp-window-root .lp_share-image-action-icon.lp_icon-white img{top:-40px !important;left:-360px !important}.lp-window-root .lp_share-image-action-icon.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp_share-image-action-icon img{top:0 !important;left:-360px !important;position:absolute !important}.lp-window-root .lp_share-image-action-icon svg path{fill:#656668}.lp-window-root .lp_send-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp-window-root .lp_send-icon.lp_icon-white img{top:-40px !important;left:-560px !important}.lp-window-root .lp_send-icon.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp_send-icon img{top:0 !important;left:-560px !important;position:absolute !important}.lp-window-root .lp_send-icon svg path{fill:#656668}.lp-window-root .lp_close-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp-window-root .lp_close-icon.lp_icon-white img{top:-40px !important;left:-480px !important}.lp-window-root .lp_close-icon.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp_close-icon img{top:0 !important;left:-480px !important;position:absolute !important}.lp-window-root .lp_close-icon svg path{fill:#656668}.lp-window-root .lp_minimize-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp-window-root .lp_minimize-icon.lp_icon-white img{top:-40px !important;left:-600px !important}.lp-window-root .lp_minimize-icon.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp_minimize-icon img{top:0 !important;left:-600px !important;position:absolute !important}.lp-window-root .lp_minimize-icon svg path{fill:#656668}.lp-window-root .lp_chevron-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp-window-root .lp_chevron-icon.lp_icon-white img{top:-40px !important;left:-1680px !important}.lp-window-root .lp_chevron-icon.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp_chevron-icon img{top:0 !important;left:-1680px !important;position:absolute !important}.lp-window-root .lp_chevron-icon svg path{fill:#656668}.lp-window-root .lp_maximize-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp-window-root .lp_maximize-icon.lp_icon-white img{top:-40px !important;left:-960px !important}.lp-window-root .lp_maximize-icon.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp_maximize-icon img{top:0 !important;left:-960px !important;position:absolute !important}.lp-window-root .lp_maximize-icon svg path{fill:#656668}.lp-window-root .lp_minimize-left-slider-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp-window-root .lp_minimize-left-slider-icon.lp_icon-white img{top:-40px !important;left:-1000px !important}.lp-window-root .lp_minimize-left-slider-icon.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp_minimize-left-slider-icon img{top:0 !important;left:-1000px !important;position:absolute !important}.lp-window-root .lp_minimize-left-slider-icon svg path{fill:#656668}.lp-window-root .lp_minimize-right-slider-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp-window-root .lp_minimize-right-slider-icon.lp_icon-white img{top:-40px !important;left:-1040px !important}.lp-window-root .lp_minimize-right-slider-icon.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp_minimize-right-slider-icon img{top:0 !important;left:-1040px !important;position:absolute !important}.lp-window-root .lp_minimize-right-slider-icon svg path{fill:#656668}.lp-window-root .lp-slider-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp-window-root .lp-slider-icon.lp_icon-white img{top:-40px !important;left:-720px !important}.lp-window-root .lp-slider-icon.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp-slider-icon img{top:0 !important;left:-720px !important;position:absolute !important}.lp-window-root .lp-slider-icon svg path{fill:#656668}.lp-window-root .lp_refresh_slider_icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp-window-root .lp_refresh_slider_icon.lp_icon-white img{top:-40px !important;left:-1080px !important}.lp-window-root .lp_refresh_slider_icon.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp_refresh_slider_icon img{top:0 !important;left:-1080px !important;position:absolute !important}.lp-window-root .lp_refresh_slider_icon svg path{fill:#656668}.lp-window-root .lp_icon-warning{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp-window-root .lp_icon-warning.lp_icon-white img{top:-40px !important;left:-1356px !important}.lp-window-root .lp_icon-warning.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp_icon-warning img{top:0 !important;left:-1356px !important;position:absolute !important}.lp-window-root .lp_icon-warning svg path{fill:#656668}.lp-window-root .lp_icon-retry{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp-window-root .lp_icon-retry.lp_icon-white img{top:-40px !important;left:-1316px !important}.lp-window-root .lp_icon-retry.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp_icon-retry img{top:0 !important;left:-1316px !important;position:absolute !important}.lp-window-root .lp_icon-retry svg path{fill:#656668}.lp-window-root .lp_add-attachment-action-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;height:22px !important}.lp-window-root .lp_menu-top-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp-window-root .lp_menu-top-icon.lp_icon-white img{top:-40px !important;left:0 !important}.lp-window-root .lp_menu-top-icon.lp_icon-white svg path{fill:#ffffff;stroke:#ffffff}.lp-window-root .lp_menu-top-icon img{top:0 !important;left:0 !important;position:absolute !important}.lp-window-root .lp_menu-top-icon svg path{stroke:#656668;fill:#656668}.lp-window-root .lp_file-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;min-width:22px;height:22px !important}.lp-window-root .lp_file-icon.lp_icon-white img{top:-40px !important;left:0 !important}.lp-window-root .lp_file-icon.lp_icon-white svg path{fill:#ffffff}.lp-window-root .lp_file-icon img{top:0 !important;left:0 !important;position:absolute !important}.lp-window-root .lp_file-icon svg path{fill:#656668}.lp-window-root .lp_maximized .lp_slider .lp_slider_container>*{height:100%;width:100%}.lp-window-root .lp_slider_animate_open.lp_maximized{box-shadow:0px 0px 16px 3px transparent !important;border:1px solid transparent !important}.lp-window-root .lp_slider_animate_open.lp_maximized .lp_slider{box-shadow:none !important;border:none !important}.lp-window-root .lp_maximized .lp_slider{position:absolute;top:0;overflow:hidden}.lp-window-root .lp_maximized .lp_slider .lp_slider_header{border:1px solid #d6d6d6;font-size:1.1em;width:100%;position:absolute;border-radius:5px 5px 0 0;height:36px;cursor:move}.lp-window-root .lp_maximized .lp_slider .lp_slider_header .lp_header-content-wrapper{width:100%}.lp-window-root .lp_maximized .lp_slider .lp_slider_header .lp_header-content-wrapper .lp_top-text{overflow:hidden;text-overflow:ellipsis;display:inline-block;margin-left:8px;max-width:calc(400px - 70px);white-space:nowrap}.lp-window-root .lp_maximized .lp_slider .lp_slider_header .lp_header-content-wrapper .lp_minimize{position:relative;float:right;right:10px;top:6px;background-color:transparent;cursor:pointer}.lp-window-root .lp_maximized .lp_slider .lp_slider_header .lp_header-content-wrapper .lp_refresh{position:relative;float:left;top:6px;left:12px;background-color:transparent;cursor:pointer}.lp-window-root .lp_maximized .lp_slider .lp_slider_container{position:absolute;background-color:white;right:0;left:0;bottom:0;top:36px}.lp-window-root .lp_external-window.lp_maximized.lp_slider_open{min-width:calc(280px + 400px);max-width:1000px}.lp-window-root .lp_external-window.lp_maximized.lp_slider_open .lp_slider{height:100%}.lp-window-root .lp_external-window.lp_maximized.lp_slider_open .lp_main{width:calc(100% - 400px);min-width:280px}.lp-window-root .lp_external-window.lp_maximized.lp_slider_open .lp_header{width:calc(100% - 400px);min-width:280px}.lp-window-root .lp_maximized.lp_right_slider .lp_slider{right:0}.lp-window-root .lp_maximized.lp_right_slider .lp_slider .lp_slider_header{box-shadow:inset 3px 0px 4px -3px rgba(0,0,0,0.2);box-sizing:border-box}.lp-window-root .lp_maximized.lp_left_slider .lp_slider{right:280px}.lp-window-root .lp_maximized.lp_left_slider .lp_slider .lp_slider_header{box-shadow:inset -3px 0px 4px -3px rgba(0,0,0,0.2)}.lp-window-root .lp_maximized.lp_slider_open{width:calc(280px + 400px)}.lp-window-root .lp_maximized.lp_slider_open .lp_main{width:280px}.lp-window-root .lp_maximized.lp_slider_open .lp_header{width:280px}.lp-window-root .lp_maximized.lp_slider_open.lp_right_slider .lp_slider_container{box-shadow:inset 4px -1px 4px -2px rgba(0,0,0,0.2);padding-left:2px}.lp-window-root .lp_maximized.lp_slider_open.lp_right_slider .lp_main,.lp-window-root .lp_maximized.lp_slider_open.lp_right_slider .lp_header{left:0;right:auto}.lp-window-root .lp_maximized.lp_slider_open.lp_left_slider .lp_main{left:auto}.lp-window-root .lp_maximized.lp_slider_open.lp_left_slider .lp_header{right:0px}.lp-window-root .lp_maximized.lp_slider_open.lp_left_slider .lp_slider_container{box-shadow:inset -2px -1px 5px -1px rgba(0,0,0,0.2);padding-right:2px}.lp-window-root .lp_maximized .lp_slider{width:400px;height:400px}.lp-window-root .lp_maximized .lp_slider .lp_slider_header .lp_title{padding:9px;display:inline-block;float:left;height:30px}.lp-window-root .lp_maximized.lp_maximized_large.lp_right_slider .lp_slider{right:0}.lp-window-root .lp_maximized.lp_maximized_large.lp_right_slider .lp_slider .lp_slider_header{box-shadow:inset 3px 0px 4px -3px rgba(0,0,0,0.2);box-sizing:border-box}.lp-window-root .lp_maximized.lp_maximized_large.lp_left_slider .lp_slider{right:340px}.lp-window-root .lp_maximized.lp_maximized_large.lp_left_slider .lp_slider .lp_slider_header{box-shadow:inset -3px 0px 4px -3px rgba(0,0,0,0.2)}.lp-window-root .lp_maximized.lp_maximized_large.lp_slider_open{width:calc(340px + 400px)}.lp-window-root .lp_maximized.lp_maximized_large.lp_slider_open .lp_main{width:340px}.lp-window-root .lp_maximized.lp_maximized_large.lp_slider_open .lp_header{width:340px}.lp-window-root .lp_maximized.lp_maximized_large.lp_slider_open.lp_right_slider .lp_slider_container{box-shadow:inset 4px -1px 4px -2px rgba(0,0,0,0.2);padding-left:2px}.lp-window-root .lp_maximized.lp_maximized_large.lp_slider_open.lp_right_slider .lp_main,.lp-window-root .lp_maximized.lp_maximized_large.lp_slider_open.lp_right_slider .lp_header{left:0;right:auto}.lp-window-root .lp_maximized.lp_maximized_large.lp_slider_open.lp_left_slider .lp_main{left:auto}.lp-window-root .lp_maximized.lp_maximized_large.lp_slider_open.lp_left_slider .lp_header{right:0px}.lp-window-root .lp_maximized.lp_maximized_large.lp_slider_open.lp_left_slider .lp_slider_container{box-shadow:inset -2px -1px 5px -1px rgba(0,0,0,0.2);padding-right:2px}.lp-window-root .lp_maximized.lp_maximized_large .lp_slider{width:400px;height:100%}.lp-window-root .lp_maximized.lp_maximized_large .lp_slider .lp_slider_header .lp_title{padding:9px;display:inline-block;float:left;height:30px}.lp-window-root button.lp_refresh.lp_hidden{display:none}.lp-window-root button.lp_refresh:disabled{cursor:default}.lp-window-root button.lp_refresh:disabled img{opacity:0.5}.lp-window-root .submit_secure_form_state .secure_form_message,.lp-window-root .error_secure_form_state .secure_form_message,.lp-window-root .timeout_secure_form_state .secure_form_message,.lp-window-root .viewedOnAnotherTab_secure_form_state .secure_form_message{display:block}.lp-window-root .submit_secure_form_state iframe,.lp-window-root .error_secure_form_state iframe,.lp-window-root .timeout_secure_form_state iframe,.lp-window-root .viewedOnAnotherTab_secure_form_state iframe{display:none}.lp-window-root .send_secure_form_state .secure_form_message,.lp-window-root .viewed_secure_form_state .secure_form_message,.lp-window-root .received_secure_form_state .secure_form_message{display:none}.lp-window-root .send_secure_form_state iframe,.lp-window-root .viewed_secure_form_state iframe,.lp-window-root .received_secure_form_state iframe{display:block}.lp-window-root .lp_secure_form_iframe{border:none;width:100%;height:100%}.lp-window-root .secure_form_message{position:absolute;left:0;right:0;top:0;bottom:0;background-color:transparent;z-index:10000}.lp-window-root .secure_form_message .lp_title{padding:5px 40px 5px 40px;position:absolute;top:42%;color:inherit;font-size:1.2em;text-align:center;text-align:-webkit-center;width:100%}.lp-window-root .secure_form_message .lp_image{position:absolute;top:30%;left:50%;width:46px;height:46px;margin-left:-23px}.lp-window-root .lp_cobrowse_error_widget{display:block !important}.lp-window-root .lp_cobrowse_error_widget .lp_cb_error_headline{font-size:20px;margin-top:20px;padding-bottom:20px;text-align:center;line-height:20px}.lp-window-root .lp_cobrowse_error_widget .lp_image{text-align:center}.lp-window-root .lp_cobrowse_error_widget .lp_cb_error_text{font-size:17px;margin-top:20px;text-align:center}.lp-window-root .lp_cobrowse_invitation_widget{padding:40px}.lp-window-root .lp_cobrowse_invitation_widget .lp_image{position:relative;left:50%;margin-left:-24px;margin-bottom:15px}.lp-window-root .lp_cobrowse_invitation_widget .lp_image img{height:42px}.lp-window-root .lp_cobrowse_invitation_widget .lp_cb_invitation_text{font-size:16px;padding-bottom:20px;text-align:center;line-height:20px}.lp-window-root .lp_cobrowse_invitation_widget .lp_cb_invitation_text a:link{text-decoration:underline}.lp-window-root .lp_cobrowse_invitation_widget .lp_cb_button{float:none;border-radius:3px;border:1px solid #eb8200;font-size:1.1em;padding:6px 9px;margin-right:10px;margin-top:10px;min-width:80px;text-align:center}.lp-window-root .lp_cobrowse_invitation_widget .lp_cb_offer{text-align:center}.lp-window-root .lp_cobrowse_invitation_widget .lp_cb_invitation_text_sub{display:none}.lp-window-root .lp_cobrowse_invitation_widget .lp_cobrowse_callscreen_container{width:100%;height:100%}.lp-window-root .lp_logo_area_wrapper{position:relative;border-bottom:1px solid #d6d6d6}.lp-window-root .lp_logo_area_wrapper .lp_logo_image_wrapper{max-width:100%;height:34px;line-height:normal}.lp-window-root .lp_logo_area_wrapper .lp_logo_image_wrapper .lp_image{vertical-align:middle;max-height:100%}.lp-window-root .lp_logo_area_wrapper .lp_logo_link{display:block;width:auto;height:34px;margin:2px}.lp-window-root .lp_logo_area_wrapper .lp_logo_link.disableLinkClass{cursor:default}.lp-window-root .lp_logo_top_margin{margin-top:38px}.lp-window-root .lp_maximized_large .lp_logo_image_wrapper{height:41px}.lp-window-root .lp_maximized_large .lp_logo_link{height:41px}.lp-window-root .lp_maximized_large .lp_logo_top_margin{margin-top:45px}.lp-window-root .lp_overlay{position:fixed;top:0;bottom:0;right:0;left:0;margin:auto;background-color:rgba(0,0,0,0.7);z-index:2147483647;width:100%;height:100%;font-size:18px}.lp-window-root .lp_overlay .lp_overlay_header{position:absolute;width:100%;height:84px;top:0;left:0;right:0;background-image:linear-gradient(to bottom, #151515 0%, rgba(21,21,21,0) 100%);background-color:transparent}.lp-window-root .lp_overlay .lp_preview_download_message{position:absolute;color:white;max-width:240px;cursor:pointer}.lp-window-root .lp_overlay .lp_download{cursor:pointer;text-align:center;background-color:transparent}.lp-window-root .lp_overlay .lp_download.lp_download_inline{position:absolute;text-align:center}.lp-window-root .lp_overlay .lp_download img{width:21px;height:21px;object-fit:contain}.lp-window-root .lp_overlay .lp_close{position:absolute;right:20px;top:20px;cursor:pointer;text-align:center;background-color:transparent}.lp-window-root .lp_overlay .lp_close img{width:18px;height:18px;object-fit:contain}.lp-window-root .lp_overlay .lp_file_loader,.lp-window-root .lp_overlay .lp_file_loader:after{width:50px;height:50px}.lp-window-root .lp_overlay .lp_preview_image{position:fixed;top:0;bottom:0;right:0;left:0;margin:auto;max-width:90%;max-height:90%}.lp-window-root .lp_overlay .lp_preview_image.clickable{cursor:pointer}.lp-window-root .lp_overlay .lp_preview_caption{position:absolute;padding:16px 15px;background-color:#3a3a3a;color:#fff;font-weight:normal;font-style:normal;font-stretch:normal;letter-spacing:normal;min-height:64px;max-height:96px;overflow-x:hidden;overflow-y:auto;word-wrap:break-word;line-height:32px}.lp-window-root .lp_overlay .lp_preview_title{left:0;color:white;margin:20px;position:absolute;background-color:transparent}.lp-window-root .lp_image_preview_background{background-color:rgba(21,21,21,0);position:absolute;top:0;left:0;width:100%;height:100%;z-index:2147483647;-webkit-transition:all 0.5s linear;-moz-transition:all 0.5s linear;-o-transition:all 0.5s linear;transition:all 0.5s linear}.lp-window-root .lp_image_preview_background .lp_image_preview_content{background:transparent;-webkit-transition:all 0.5s linear;-moz-transition:all 0.5s linear;-o-transition:all 0.5s linear;transition:all 0.5s linear;position:absolute;top:100%;width:100%;height:calc(100% - 20px)}.lp-window-root .lp_image_preview_background .lp_image_preview_content .lp_preview_close_wrapper{height:32px;width:100%;background-color:#fff}.lp-window-root .lp_image_preview_background .lp_image_preview_content .lp_preview_close_wrapper .lp_close{position:absolute;right:4px;top:4px;cursor:pointer;width:25px;height:25px}.lp-window-root .lp_image_preview_background .lp_image_preview_content .lp_image_preview_wrapper{width:100%;height:calc(100% - 70px);background:#fff}.lp-window-root .lp_image_preview_background .lp_image_preview_content .lp_image_preview_wrapper .lp_image_preview{width:100%;height:100%;background-color:#fff;background-position:center center;background-size:contain;background-repeat:no-repeat}.lp-window-root .lp_image_preview_background .lp_image_preview_content .lp_image_preview_wrapper .lp_image_preview.icon{background-size:auto}.lp-window-root .lp_image_preview_background .lp_image_preview_content .lp_image_preview_wrapper .lp_preview_caption{width:100%;min-height:40px;background:#fff;position:absolute;bottom:0;left:0;border-top:solid 1px #c1c1c1}.lp-window-root .lp_image_preview_background .lp_image_preview_content .lp_image_preview_wrapper .lp_preview_caption .lp_input_area{margin:0 5px;width:calc(100% - 50px)}.lp-window-root .lp_image_preview_background .lp_image_preview_content .lp_image_preview_wrapper .lp_preview_caption .lp_input_area textarea{outline:none}.lp-window-root .lp_image_preview_background .lp_image_preview_content .lp_image_preview_wrapper .lp_send_button{cursor:pointer}.lp-window-root .lp_image_preview_background .lp_image_preview_content .lp_image_preview_wrapper .lp_paper_plane_button{cursor:pointer}.lp-window-root .lp_image_preview_background.open{background-color:rgba(21,21,21,0.5)}.lp-window-root .lp_image_preview_background.open .lp_image_preview_content{top:20px;-webkit-transition:all 0.5s linear;-moz-transition:all 0.5s linear;-o-transition:all 0.5s linear;transition:all 0.5s linear}.lp-window-root .lp_file_loader,.lp-window-root .lp_file_loader:after{border-radius:50%}.lp-window-root .lp_file_loader{margin:auto;font-size:10px;position:absolute;top:0;bottom:0;right:0;left:0;text-indent:-9999em;border-top:2px solid rgba(255,255,255,0.2);border-right:2px solid #ffffff;border-bottom:2px solid #ffffff;border-left:2px solid #ffffff;-ms-transform:translateZ(0);-webkit-transform:translateZ(0);-moz-transform:translateZ(0);transform:translateZ(0);-webkit-animation:imageLoader 1.1s infinite linear;-moz-animation:imageLoader 1.1s infinite linear;animation:imageLoader 1.1s infinite linear;background:rgba(0,0,0,0.7)}@-moz-keyframes imageLoader{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes imageLoader{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes imageLoader{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}';
b=-1===b.indexOf("@@")&&b||this.loadResource(a+"EmbeddedStyle.css");P.addStyleTag(b,{id:"embedded"});var c=this.getFirstElement(this.LPViewMap.closeButton,this.maximizedView);if(this.topMenuEnabled&&this.topMenuButtonStyle.value){this.show({view:this.topMenuButton,display:"inline-block",useClasses:!0});this.hide(c)}else{this.hide(this.topMenuButton);this.show({view:c,display:"inline-block",useClasses:!0})}y.call(this,{newValue:this.getModelParam(this.uiPath.STATE)});this.addLocalizationClasses();this.maximizedEl=this.getFirstElement(this.LPViewMap.maximized);K.call(this);L.call(this)}});var Q=lpTag.unifiedWindow.WrapperWindowExtenderBase.prototype;Q.bindTopMenuDismissEvent=function(){this.featureStateManager.isMenuTop()&&this.bindViewEvent({view:this.maximizedView,DOMEvent:(this.appContext.deviceDetector.isMobile()||this.appContext.deviceDetector.isTablet())&&this.appContext.deviceDetector.isIOS()?"touchend":"click",callback:this.dismissTopMenu,context:this})};Q.dismissTopMenu=function(a){var b=this.getFirstElement(this.LPViewMap.topMenu,this.maximizedView),c=a.target;b.contains(c)||this.topMenuButton.contains(c)||this.appContext.uiStateManager.setVisibility(this.uiPath.TOP_MENU_VISIBLE,!1)};Q.setWidgetSDKView=function(){P.addClass(this.titleDiv,this.LPClassesMap.lp_slider_gap);P.addClass(this.chattingWithIcon,"lp_hidden");this.sliderButton.title=this.translate("tooltip_open_widgets");a.call(this,this.models.chatModel.get(this.chatPath.SDK_BUTTON_ENABLE))};Q.dispose=function(){this.appContext&&this.appContext.browserStateManager&&this.appContext.browserStateManager.off(this.appContext.browserStateManager.EVENT_NAME.FOCUS_CHANGE,E);lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)};Q.addLocalizationClasses=function(){var a=this.isLanguageRTL()?"lp_main_rtl":"lp_main_ltr",b=this.appContext.conf.engConf;P.addClass(this.mainWindow,a);"string"==typeof b.lang&&P.addClass(this.mainWindow,"lp_"+b.lang)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){if(!this.maxDragInstance||!this.maxDragInstance.draggingInMotion){this.preventDefault(a);this.changeMode(this.states.MINIMIZED,!0)}}function b(a){if(!this.minDragInstance||!this.minDragInstance.draggingInMotion){this.preventDefault(a);this.changeMode(this.states.MAXIMIZED,!0)}}function c(){var a=this.appContext.conf.unifiedConf,b=this.getModelParam(this.uiPath.WINDOW_EMBEDDED);a.poppedOut||a.external||(b?this.appContext.wrapperWindow.show():this.appContext.wrapperWindow.hide())}function d(){this.createKeyframe(this.LPClassesMap.hideMaximizedKeyframes,[{percent:0,animate:"bottom: 0;"},{percent:40,animate:"bottom: "+this.LPWindowSizesMap[this.windowSize].bottom+";"},{percent:100,animate:"bottom: "+this.LPWindowSizesMap[this.windowSize].bottom+";"}],400);this.createKeyframe(this.LPClassesMap.showMaximizedKeyframes,[{percent:0,animate:"bottom: "+this.LPWindowSizesMap[this.windowSize].bottom+"; -webkit-transform: scale(1, 1);"},{percent:40,animate:"bottom: "+this.LPWindowSizesMap[this.windowSize].bottom+"; -webkit-transform: scale(1, 1);"},{percent:60,animate:"bottom: 0; -webkit-transform: scale(0.98, 1.02);"},{percent:100,animate:"bottom: 0; -webkit-transform: scale(1, 1);"}],400);this.createKeyframe(this.LPClassesMap.hideMinimizedKeyframes,[{percent:0,animate:"bottom: 0;"},{percent:40,animate:"bottom: -80px;"},{percent:100,animate:"bottom: -80px;"}],200);this.createKeyframe(this.LPClassesMap.showMinimizedKeyframes,[{percent:0,animate:"bottom: -40px; -webkit-transform: scale(1, 1);"},{percent:40,animate:"bottom: -40px; -webkit-transform: scale(1, 1);"},{percent:60,animate:"bottom: 0; -webkit-transform: scale(0.98, 1.2);"},{percent:100,animate:"bottom: 0; -webkit-transform: scale(1, 1);"}],200)}function e(a){function b(a){return{left:a.left,right:a.right,bottom:0}}var c=b(a.newValue),d=b(a.newValue),e=i.call(this);c.display=this.maximizedVisible?"none":"block";this.css(this.minimizedView,c);d.display=this.maximizedVisible?"block":"none";this.css(this.maximizedView,d);this.logger.debug("_windowPositionChanged: special="+e+" maximizedVisible="+this.maximizedVisible,this.ControllerName)}function f(a){var b,c=this.getModelParam(this.uiPath.WINDOW_POSITION),d=c.left&&"auto"!==c.left?"left":"right",e=this.getComputedStyle(this.appContext.wrapperWindow.getMaximizedElement()).width;e=g(e);if(a&&a.width<g(c[d])+e){b=a.width>e?a.width-e-20:0;this.wasResized=!0;var f="right"===d?{right:b,bottom:0,left:"auto"}:{right:"auto",bottom:0,left:b};this.appContext.uiStateManager.setWindowPosition(f);this.wasResized=!1;this.logger.debug("_documentResized, window size:"+a.width+" position.right:"+c.right+"position.left:"+c.left,this.ControllerName)}}function g(a){var b=parseInt(a,10);return isNaN(b)?0:b}function h(a){this.logger.debug("_handleMaximizedStateChange: "+a.newValue,this.ControllerName);this.maximizedVisible=a?a.newValue:!0;this.maximizedVisible?j.call(this):k.call(this);this.loaded=!0}function i(){return!this.loaded||this.wasBlurred||this.wasResized?!0:!1}function j(a){this.logger.debug("Maximizing view desktop",this.ControllerName);o.call(this,l)}function k(){this.logger.debug("Minimizing view desktop",this.ControllerName);n.call(this,m)}function l(a){var b=this;this.logger.debug("_showMaximized",this.ControllerName);this.animateKeyframe({view:this.maximizedView,showBefore:!0,classname:this.LPClassesMap.showMaximizedKeyframes,showAnimation:!i.call(this),callback:function(){b.logger.debug("_showMaximized: animation complete",b.ControllerName);b.maximizedVisible=!0;b.appContext.events.trigger({appName:b.ControllerName,eventName:b.VCEvents.MAXIMIZE_VISIBLE});b.runCallback(a,b);b.focusOnElement(b.LPViewMap.minimizeButton,b.maximizedView)}})}function m(a){var b=this;this.logger.debug("_showMinimized",this.ControllerName);this.animateKeyframe({view:this.minimizedView,classname:this.LPClassesMap.showMinimizedKeyframes,showBefore:!0,showAnimation:!i.call(this),callback:function(){b.logger.debug("_showMinimized: animation complete",b.ControllerName);b.appContext.events.trigger({appName:b.ControllerName,eventName:b.VCEvents.MINIMIZE_VISIBLE});b.runCallback(a,b);b.focusOnElement(b.LPViewMap.maximizeButton,b.minimizedView)}})}function n(a){var b=this;this.logger.debug("_hideMaximized",this.ControllerName);this.animateKeyframe({view:this.maximizedView,classname:this.LPClassesMap.hideMaximizedKeyframes,showBefore:!0,hideAfter:!0,showAnimation:!i.call(this),callback:function(){b.maximizedVisible=!1;b.logger.debug("_hideMaximized: animation complete",b.ControllerName);b.runCallback(a,b)}})}function o(a){var b=this;this.logger.debug("_hideMinimized",this.ControllerName);this.animateKeyframe({view:this.minimizedView,classname:this.LPClassesMap.hideMinimizedKeyframes,showBefore:!0,hideAfter:!0,showAnimation:!i.call(this),callback:function(){b.logger.debug("_hideMinimized: animation complete",b.ControllerName);b.runCallback(a,b)}})}var p;lpTag.unifiedWindow.WrapperWindowExtender=lpTag.unifiedWindow.WrapperWindowExtenderBase.extend({ControllerName:"WrapperWindowExtender",LPClassesMap:{hideMaximizedKeyframes:"hide_maximized_keyframes",showMaximizedKeyframes:"show_maximized_keyframes",hideMinimizedKeyframes:"hide_minimized_keyframes",showMinimizedKeyframes:"show_minimized_keyframes"},LPWindowSizesMap:{small:{value:"small",bottom:"-400px"},large:{value:"large",bottom:"-580px"}},initialize:function(){this.windowWidth=280;this.windowSize=this.appContextConf.uiState.window.size?this.appContextConf.uiState.window.size:this.LPWindowSizesMap.small.value;d.call(this)},events:function(){this.bindViewEvent({view:this.minimizedView,DOMEvent:"click",callback:b,context:this});this.bindViewEvent({inView:this.maximizedView,selector:this.LPViewMap.minimizeButton,DOMEvent:"click",callback:a,context:this});this.bindModel({path:this.uiPath.WINDOW_EMBEDDED,callback:c,context:this});this.bindModel({path:this.uiPath.WINDOW_MAXIMIZED,callback:h,context:this})},render:function(){var a=this.appContext.conf.unifiedConf;if(!a.poppedOut&&!a.external){this.appContext.browserStateManager.on(this.appContext.browserStateManager.EVENT_NAME.RESIZE,f,this);this.bindModel({path:this.uiPath.WINDOW_POSITION,callback:e,context:this});this.maxDragInstance=this.dragableView({view:this.appContext.wrapperWindow.getMaximizedElement(),anchor:this.getFirstElement(this.LPViewMap.header,this.maximizedView),container:document.body,horizontal:!0,vertical:!1,sticky:!0,stickyHorizontal:!1,stickyVertical:!1,onDragEnd:this.dragComplete,context:this});this.minDragInstance=this.dragableView({view:this.minimizedView,anchor:this.getFirstElement(this.LPViewMap.header,this.minimizedView),container:document.body,horizontal:!0,vertical:!1,sticky:!0,stickyHorizontal:!1,stickyVertical:!1,onDragEnd:this.dragComplete,context:this})}}});p=lpTag.unifiedWindow.WrapperWindowExtender.prototype;p.changeMode=function(a,b){b&&this.appContext.uiStateManager.setWindowState(a)};p.dispose=function(){this.appContext&&this.appContext.browserStateManager&&this.appContext.browserStateManager.off(this.appContext.browserStateManager.EVENT_NAME.RESIZE,f);lpTag.unifiedWindow.WrapperWindowExtenderBase.prototype.dispose.call(this)};p.dragComplete=function(a){this.dragging=a.dragging;this.dragging||this.appContext.uiStateManager.setWindowPosition({left:a.left,right:a.right,bottom:0})}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){if(this.headerText){var b=this.createView({template:"<div class='lp_lpview_survey_header lp_survey_header_area lpc_survey-area__header {{deviceClass}}'><div class='lp_header_text lp_text'>{{text}}</div></div>",wrapWithDiv:!1,doNotAddChild:!0,textInjection:{text:this.headerText}});this.addView({viewToAdd:b,targetView:a,beforeView:a.firstChild})}}function b(a){if(this.footerText){var b=this.createView({template:"<div class='lp_lpview_survey_footer lp_survey_footer_area'><div class='lp_footer_text lp_text'>{{text}}</div></div>",wrapWithDiv:!1,doNotAddChild:!0,textInjection:{text:this.footerText}});this.addView({viewToAdd:b,targetView:a})}}function c(a){return a&&a.isViewController}function d(){var a;a=this.parent.isCloseSurveyVisible?this.LPViewMap.closeSurveyButton:this.parent.isSubmitSurveyDisabled?this.LPViewMap.cancelButton:this.LPViewMap.submitButton;this.focusOnElement(a)}var e,f=lpTag.unifiedWindow.applicationUtils;lpTag.unifiedWindow.PagingViewControllerBase=lpTag.unifiedWindow.BaseViewController.extend({utils:lpTag.taglets.lpUtil,ControllerName:"PagingViewControllerBase",className:"lp_paging_wrapper",LPViewMap:{pagesArea:"^pages_area",pager:"^pager",prevButton:"^prev_button",nextButton:"^next_button",submitButton:"^submit_button",cancelButton:"^cancel_button",closeSurveyButton:"^close_survey_button"},LPClassesMap:{selected:"lp_selected"},initialize:function(a){this.headerText=a.headerText;this.footerText=a.footerText;this.appContext=a.appContext;this.submitFunc=a.submitCallback;this.cancelFunc=a.cancelCallback;this.validatorFunc=a.validatorCallback;this.dataContext=a.context;this.addClass(this.view,this.className);this.isLogicalSurvey=a.isLogicalSurvey;this.renderPages(a.pages);a.activeQuestions&&this.refresh(a.activeQuestions)},events:function(){this.bindViewEvent({selector:this.LPViewMap.submitButton,DOMEvent:"click",callback:this.submitClicked});this.bindViewEvent({selector:this.LPViewMap.cancelButton,DOMEvent:"click",callback:this.cancelClicked});this.bindViewEvent({selector:this.LPViewMap.closeSurveyButton,DOMEvent:"click",callback:this.cancelClicked});0===this.pages.length&&this.appContext.events.bind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:d})},onInitialize:function(){0===this.pages.length&&d.call(this);this.toggleSubmitButtonAvailability()}});e=lpTag.unifiedWindow.PagingViewControllerBase.prototype;e.enableSubmit=function(a){var b=this.getFirstElement(this.LPViewMap.submitButton);b&&(a?b.removeAttribute("disabled"):b.setAttribute("disabled","disabled"))};e.submitClicked=function(){this.utils.runCallback(this.submitFunc,this.dataContext)};e.cancelClicked=function(){this.utils.runCallback(this.cancelFunc,this.dataContext)};e.renderPages=function(b){this.pages=[];if(0===b.length)a.call(this,this.getFirstElement(this.LPViewMap.pagesArea));else for(var c=0;c<b.length;c++)this.addPage(b[c],0===c,c===b.length-1)};e.refresh=function(a){};e.isIncludedId=function(a,b){var c=f.indexOf(a,b);return-1!==c};e.addPage=function(d,e,f){var g={};g.controller=c(d)?d:null;g.view=c(d)?d.view:d;g.view.style["-webkit-overflow-scrolling"]="touch";"undefined"!=typeof this.headerText&&e&&this.loadSingleResource("<div class='lp_lpview_survey_header lp_survey_header_area lpc_survey-area__header {{deviceClass}}'><div class='lp_header_text lp_text'>{{text}}</div></div>",function(){a.call(this,g.view)});"undefined"!=typeof this.footerText&&f&&this.loadSingleResource("<div class='lp_lpview_survey_footer lp_survey_footer_area'><div class='lp_footer_text lp_text'>{{text}}</div></div>",function(){b.call(this,g.view)});this.getFirstElement(this.LPViewMap.pagesArea).appendChild(g.view);this.pages.push(g)};e.displayButton=function(a,b){b?this.show({view:a,useClasses:!0}):this.hide({view:a,useClasses:!0})};e.toggleSubmitButtonAvailability=function(){this.setEnabled(!this.parent.isSubmitSurveyDisabled,this.LPViewMap.submitButton)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){var a,b;lpTag.unifiedWindow.PagingViewController=lpTag.unifiedWindow.PagingViewControllerBase.extend({ControllerName:"PagingViewController",events:function(){this.bindViewEvent({selector:this.LPViewMap.submitButton,DOMEvent:"keydown",callback:this.toggleWaitingForKeyUp});this.bindViewEvent({selector:this.LPViewMap.submitButton,DOMEvent:"keyup",callback:this.submitKeyUp});this.bindViewEvent({selector:this.LPViewMap.cancelButton,DOMEvent:"keydown",callback:this.toggleWaitingForKeyUp});this.bindViewEvent({selector:this.LPViewMap.cancelButton,DOMEvent:"keyup",callback:this.cancelKeyUp});this.bindViewEvent({selector:this.LPViewMap.closeSurveyButton,DOMEvent:"keydown",callback:this.toggleWaitingForKeyUp});this.bindViewEvent({selector:this.LPViewMap.closeSurveyButton,DOMEvent:"keyup",callback:this.cancelKeyUp})},render:function(){this.updateButtonsEnablement()}});a=lpTag.unifiedWindow.PagingViewController.prototype;b=lpTag.unifiedWindow.PagingViewControllerBase.prototype;a.updateButtonsEnablement=function(){this.displayButton(this.LPViewMap.prevButton,!1);this.displayButton(this.LPViewMap.nextButton,!1);this.displayButton(this.LPViewMap.submitButton,!this.parent.isCloseSurveyVisible);this.displayButton(this.LPViewMap.cancelButton,!this.parent.isCloseSurveyVisible);this.displayButton(this.LPViewMap.closeSurveyButton,this.parent.isCloseSurveyVisible)};a.submitClicked=function(a){this.waitingForKeyUp||b.submitClicked.call(this)};a.submitKeyUp=function(a){if(this.waitingForKeyUp){b.submitClicked.call(this);this.waitingForKeyUp=!1}};a.cancelClicked=function(a){this.waitingForKeyUp||b.cancelClicked.call(this)};a.cancelKeyUp=function(a){if(this.waitingForKeyUp){b.cancelClicked.call(this);this.waitingForKeyUp=!1}};a.toggleWaitingForKeyUp=function(a){13===a.keyCode&&(this.waitingForKeyUp=!0)};a.refresh=function(a){var b,c,d;if(a)for(var e=0;e<this.pages.length;e++){b=this.pages[e];c=this.isIncludedId(a,b.controller.question.id);d={view:b.view,useClasses:!0};c?this.show(d):this.hide(d)}};a.updateActivePages=function(a){this.refresh(a)}}();!function(){function a(){if(this.sliderCurrentTimeout){clearTimeout(this.sliderCurrentTimeout);this.sliderCurrentTimeout=void 0}this.keepWidgetOpen||(this.appContext.WidgetManager&&this.appContext.WidgetManager.getLastSliderState()?this.appContext.WidgetManager.onWidgetStateChanged(!1):this.hideSlider())}function b(){this.isSliderOpen&&(this.sliderCurrentTimeout=setTimeout(a.bind(this),this.autoCloseTimeout))}var c,d=lpTag.taglets.lpUtil;lpTag.unifiedWindow.SliderViewControllerBase=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"SliderViewControllerBase",applicationName:"SliderViewController",template:"<div class='lpc_slider lp_slider {{deviceClass}}' data-lp-point='slider' data-lp-cust-id='sliderMaximizedWindow'><div class='lp_slider_header lpc_slider-header {{deviceClass}}' data-lp-point='header' data-lp-cust-id='top'><div class='lp_header-content-wrapper'><button class='lpc_slider-header__refresh-button {{deviceClass}} lp_refresh lp_hidden' data-lp-point='refresh' title='{{tooltip_refresh_slider}}' tabindex='0'><div class='lp_refresh_slider_icon' data-lp-point='refresh-slider-icon' data-lp-type='icon'><img class='lpc_slider-header__refresh-button-asset {{deviceClass}}' src='{{iconsRepository}}/sprites_v1.png' alt='{{tooltip_refresh_slider}}' aria-hidden='true' data-lp-point='minimize-img'></div></button><div class='lp_title'><span data-lp-point='sliderHeaderText' data-lp-cust-id='top_text' class='lp_top-text lpc_slider-header__text {{deviceClass}}'>{{sliderHeader}}</span></div><button class='lpc_slider-header__minimize-button {{deviceClass}} lp_minimize' data-lp-point='minimize-slider' title='{{tooltip_minimize_slider}}' tabindex='0'><div class='lp_minimize-right-slider-icon' data-lp-point='minimize-icon' data-lp-type='icon'><img class='lpc_slider-header__minimize-button-asset {{deviceClass}}' src='{{iconsRepository}}/sprites_v1.png' alt='{{tooltip_minimize_slider}}' aria-hidden='true' data-lp-point='minimize-img'></div></button></div></div><div class='lpc_slider__body lp_slider_container {{deviceClass}}' data-lp-point='container' data-lp-cust-id='surveyArea'></div></div>",isSliderOpen:!1,inProgress:!1,sliderCurrentTimeout:void 0,views:{},LPViewMap:{minimizeButton:"^minimize-slider",minimizeImg:"^minimize-img",container:"^container",headerText:"^sliderHeaderText",header:"^header",slider:"^slider",minimizeIcon:"^minimize-icon",refreshButton:"^refresh",mainArea:"^main"},LPClassesMap:{sliderOpen:"lp_slider_open",cssCustomization:{window:"lpc_window_slider-open",header:"lpc_maximized-header_slider-open",mainArea:"lpc_body_slider-open"}},autoCloseTimeout:3e3,keepWidgetOpen:!1,initialize:function(a){var b=this.appContext.conf.widgetSDK;this.unifiedConf=this.appContext.conf.unifiedConf;this.maximized=this.appContext.wrapperWindow.getMaximizedElement();this.showRefreshButton=Array.isArray(b)&&(b[0].showRefreshButton===!0||"true"===b[0].showRefreshButton);this.maximizedHeader=this.getFirstElement(this.LPViewMap.header,this.maximized);this.maximizedMainArea=this.getFirstElement(this.LPViewMap.mainArea,this.maximized);if(this.unifiedConf.connectorsSfConfig){var c=this.getFirstElement(this.LPViewMap.minimizeButton);c.style.visibility="hidden";this.keepWidgetOpen=!0}},events:function(){this.bindViewEvent({inView:this.view,selector:this.LPViewMap.minimizeButton,DOMEvent:"click",callback:a,context:this});this.bindViewEvent({inView:this.view,selector:this.LPViewMap.refreshButton,DOMEvent:"click",callback:this.refreshView,context:this});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.viewController.PREPARE_SLIDER_CLOSED_TIMEOUT,context:this,func:b})},render:function(){this.hide()},setSliderToolbarViewByType:function(a){var b=this.getFirstElement(this.LPViewMap.refreshButton);b&&(a===lpTag.unifiedWindow.consts.slider.viewType.widgetSDKView&&this.showRefreshButton?d.removeClass(b,"lp_hidden"):d.addClass(b,"lp_hidden"))}});c=lpTag.unifiedWindow.SliderViewControllerBase.prototype;c.isInProgress=function(){return this.inProgress};c.addView=function(a,b,c,d,e){this.views[c]={view:a,header:b,type:d||""};e&&(this.views[c].callbacks=e);var f=this.getFirstElement(this.LPViewMap.container);f.appendChild(a);this.selectedViewId!==c&&this.hide(a)};c.removeView=function(a){if("object"==typeof this.views[a]&&!lpTag.taglets.lpUtil.getPropertyFromObject(this,"unifiedConf.connectorsSfConfig",!1)){var b=this.getFirstElement(this.LPViewMap.container);b.removeChild(this.views[a].view);delete this.views[a]}};c.setSelectedView=function(a){var b;if("object"==typeof this.views[a]){this.setSliderToolbarViewByType(this.views[a].type);this.selectedViewId&&this.views[this.selectedViewId]&&this.hide(this.views[this.selectedViewId].view);this.selectedViewId=a;var c=this.getFirstElement(this.LPViewMap.slider),d=this.getFirstElement(this.LPViewMap.headerText,c);d.innerHTML=this.views[this.selectedViewId].header;b=this.views[this.selectedViewId];this.show(b.view);this.appContext.events.trigger({appName:"slider",eventName:this.VCEvents.SLIDER_VIEW_CHANGE,data:{id:this.selectedViewId,type:b.type}})}};c.getSelectedViewId=function(){return this.selectedViewId};c.getSelectedViewType=function(){return this.views&&this.views[this.selectedViewId]&&this.views[this.selectedViewId].type};c.hideSlider=function(){if(this.isVisible(this.view)&&!this.unifiedConf.connectorsSfConfig){this.hide();this.removeClass(this.maximized,this.LPClassesMap.sliderOpen);this.removeClass(this.maximized,this.LPClassesMap.cssCustomization.window);this.removeClass(this.maximizedHeader,this.LPClassesMap.cssCustomization.header);this.removeClass(this.maximizedMainArea,this.LPClassesMap.cssCustomization.mainArea);this.isSliderOpen=!1;this.appContext.events.trigger({appName:"slider",eventName:this.VCEvents.SLIDER_CLOSED,data:this.views&&this.views[this.selectedViewId]})}};c.refreshView=function(a){var b=this.views[this.selectedViewId]&&this.views[this.selectedViewId].callbacks;a&&a.context;b&&this.isVisible(this.view)&&d.runCallback(b.reload,b.context,this.getFirstElement(a.eventSelector))};c.showSlider=function(){if(!this.isVisible(this.view)){this.addClass(this.maximized,this.LPClassesMap.sliderOpen);this.addClass(this.maximized,this.LPClassesMap.cssCustomization.window);this.addClass(this.maximizedHeader,this.LPClassesMap.cssCustomization.header);this.addClass(this.maximizedMainArea,this.LPClassesMap.cssCustomization.mainArea);this.show();this.isSliderOpen=!0}};c.removeAllViews=function(){for(var a in this.views)this.views.hasOwnProperty(a)&&this.removeView(a);this.views=[]};c.focusOnMinimize=function(){var a=this.getFirstElement(this.LPViewMap.minimizeButton);a&&"function"==typeof a.focus&&a.focus()};c.dispose=function(){this.removeAllViews();this.hideSlider();this.appContext.events.unbind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.viewController.PREPARE_SLIDER_CLOSED_TIMEOUT,context:this,func:b});lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)}}();!function(){function a(){this.inProgress=!0;this.leftSlider=this.isExternal?this.leftSlider:h.call(this);this.addClass(this.maximized,this.leftSlider?this.LPClassesMap.leftSlider:this.LPClassesMap.rightSlider);this.addClass(this.maximized,this.LPClassesMap.sliderOpen);this.addClass(this.maximized,this.LPClassesMap.cssCustomization.window);this.addClass(this.maximizedHeader,this.LPClassesMap.cssCustomization.header);this.addClass(this.maximizedMainArea,this.LPClassesMap.cssCustomization.mainArea);q.call(this,this.leftSlider);this.isExternal?k.call(this,!0):c.call(this)}function b(){this.inProgress=!0;this.isExternal?k.call(this,!1):d.call(this)}function c(){var a=this.getFirstElement(this.LPViewMap.slider);a.style.width=0;this.show();this.addClass(this.maximized,this.LPClassesMap.sliderAnimate);this.leftSlider||(a.style.right=H+"px");this.animateKeyframe({view:a,classname:this.leftSlider?this.LPClassesMap.showLeftSliderKeyframes:this.LPClassesMap.showRightSliderKeyframes,showAnimation:!0,showBefore:!0,callback:e})}function d(){var a=this.getFirstElement(this.LPViewMap.slider);this.addClass(this.maximized,this.LPClassesMap.sliderAnimate);this.animateKeyframe({view:a,classname:this.leftSlider?this.LPClassesMap.hideLeftSliderKeyframes:this.LPClassesMap.hideRightSliderKeyframes,showAnimation:!0,hideAfter:!0,callback:f})}function e(){var a=this.getFirstElement(this.LPViewMap.slider);a.style.width="";a.style.right="";this.removeClass(this.maximized,this.LPClassesMap.sliderAnimate);this.show();this.inProgress=!1}function f(){this.hide();this.removeClass(this.maximized,this.LPClassesMap.sliderOpen);this.removeClass(this.maximized,this.LPClassesMap.rightSlider);this.removeClass(this.maximized,this.LPClassesMap.leftSlider);this.removeClass(this.maximized,this.LPClassesMap.sliderAnimate);this.removeClass(this.maximized,this.LPClassesMap.cssCustomization.window);this.removeClass(this.maximizedHeader,this.LPClassesMap.cssCustomization.header);this.removeClass(this.maximizedMainArea,this.LPClassesMap.cssCustomization.mainArea);this.inProgress=!1;if(this.redraw){this.redraw=!1;a.call(this)}}function g(a){var c=a?a.newValue:!0,d=this.models.uiModel.get(this.uiPath.WIDGET_SLIDER_VISIBLE);c||d&&b.call(this)}function h(a){var b=z.call(this,a);D=P.getWindowSize().width;return J>=D?this.leftSlider:i(b.right)?this.leftSlider?D-b.right-J>=0:this.isVisible(this.view)===!1&&b.right<=J:this.leftSlider?this.isVisible(this.view)===!0||b.left>=H:D-b.left-J<0}function i(a){var b=Number(a);return!isNaN(b)&&""!==a}function j(){F?F=!1:E=C(P.getWindowSize().width)}function k(a){if(this.isExternal)if(a){this.show();l(K,!0,e,this)}else l(E,!1,f,this)}function l(a,b,c,d){var e=P.getWindowSize(),f=e.width;if(b&&e.width<a-N||!b&&e.width>a){if(b){f+=M;f=f>a?a:f}else{f-=M;f=a>f?a:f}F=!0;window.resizeTo(f,e.height);setTimeout(m(a,f,b,c,d),O)}else{d.show();lpTag.taglets.lpUtil.runCallback(c,d)}}function m(a,b,c,d,e){return function(){var f=P.getWindowSize().width;b-N>f&&c&&window.moveBy(-M,0);l(a,c,d,e)}}function n(a){return function(){a.isVisible(a.view)&&window.resizeTo(C(E),P.getWindowSize().height)}}function o(){this.bindModel({path:this.uiPath.WINDOW_POSITION,callback:r,context:this})}function p(){this.unbindModel({path:this.uiPath.WINDOW_POSITION,callback:r,context:this})}function q(a){var b=this.getFirstElement(this.LPViewMap.minimizeIcon);this.removeClass(b,a?this.LPClassesMap.rightSliderMinimizeIcon:this.LPClassesMap.leftSliderMinimizeIcon);this.addClass(b,a?this.LPClassesMap.leftSliderMinimizeIcon:this.LPClassesMap.rightSliderMinimizeIcon)}function r(a,b){var c=z.call(this,a);D=P.getWindowSize().width;var d,e,f;if(b&&J>=D){f=this.leftSlider?"0px":"auto";e=this.leftSlider?"auto":"0px"}else if(h.call(this,a)){f=s(c,D);e="auto";d=this.isVisible(this.view)&&!this.leftSlider}else{e=t(c,D);f="auto";d=this.isVisible(this.view)&&this.leftSlider}u.call(this,d);this.appContext.uiStateManager.setWindowPosition({left:e,right:f,bottom:0,top:"auto"})}function s(a,b){var c=i(a.right)?a.right:b-(a.width+a.left);c=c>0?c:0;return c+"px"}function t(a,b){var c=i(a.left)?a.left:b-a.right-a.width;c=c>0?c:0;return c+"px"}function u(a){if(a){this.redraw=!0;b.call(this);this.redraw=!0}}function v(){var b=this.models.uiModel.get(this.uiPath.WIDGET_SLIDER_VISIBLE);b&&this.isSliderOpen&&a.call(this)}function w(){this.createKeyframe(this.LPClassesMap.showLeftSliderKeyframes,x(5,[{prop:"width",asc:!0}],H),L);this.createKeyframe(this.LPClassesMap.showRightSliderKeyframes,x(5,[{prop:"width",asc:!0},{prop:"right",asc:!1}],H),L);this.createKeyframe(this.LPClassesMap.hideLeftSliderKeyframes,x(5,[{prop:"width",asc:!1}],H),L);this.createKeyframe(this.LPClassesMap.hideRightSliderKeyframes,x(5,[{prop:"width",asc:!1},{prop:"right",asc:!0}],H),L)}function x(a,b,c){var d,e=[];a-=1;for(var f=0;a>=f;f++){d={};d.percent=f*(100/a);d.animate=y(b,a,f,c);e.push(d)}return e}function y(a,b,c,d){for(var e,f="",g=0;g<a.length;g++){f+=a[g].prop+": ";e=a[g].asc?c*(100/b):(b-c)*(100/b);f+=Math.floor(e/100*d);f+="px; "}return f.trim()}function z(a){var b=this.getComputedStyle(this.minimized);return{right:A(a&&a.newValue.right,this.minimized.style.right),left:A(a&&a.newValue.left,this.minimized.style.left),width:B(b.width)}}function A(a,b){a=a||b;return"auto"===a?a:B(a)}function B(a){var b=parseInt(a,10);return isNaN(b)?"":b}function C(a){return I+10>a?I+10:a}var D,E,F,G,H=400,I=280,J=H+I,K=J+20,L=150,M=120,N=20,O=50,P=lpTag.unifiedWindow.applicationUtils;lpTag.unifiedWindow.SliderViewController=lpTag.unifiedWindow.SliderViewControllerBase.extend({ControllerName:"SliderViewController",LPClassesMap:{rightSlider:"lp_right_slider",leftSlider:"lp_left_slider",sliderAnimate:"lp_slider_animate_open",showLeftSliderKeyframes:"show_left_slider_animation",showRightSliderKeyframes:"show_right_slider_animation",hideLeftSliderKeyframes:"hide_left_slider_animation",hideRightSliderKeyframes:"hide_right_slider_animation",leftSliderMinimizeIcon:"lp_minimize-left-slider-icon",rightSliderMinimizeIcon:"lp_minimize-right-slider-icon"},initialize:function(a){this.minimized=this.appContext.wrapperWindow.getMinimizedElement();this.isExternal=this.appContext.conf.unifiedConf.poppedOut||this.unifiedConf.external;this.leftSlider=this.isExternal?!1:!0;this.isExternal&&this.appContext.browserStateManager.on(this.appContext.browserStateManager.EVENT_NAME.RESIZE,j,this);w.call(this)},events:function(){if(this.isExternal)window.onunload=n(this);else{this.bindModel({path:this.uiPath.WINDOW_MAXIMIZED,callback:g,context:this});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:v});this.bindModel({path:this.uiPath.WINDOW_EMBEDDED,callback:b,context:this})}},render:function(){this.isExternal||(this.dragInstance=this.dragableView({view:this.maximized,anchor:this.getFirstElement(this.LPViewMap.header),container:document.body,horizontal:!0,vertical:!1,sticky:!0,stickyHorizontal:!1,stickyVertical:!1,callback:this.dragComplete}));this.preventScroll({view:this.view});E=C(P.getWindowSize().width);this.hide()}});G=lpTag.unifiedWindow.SliderViewController.prototype;G.dragComplete=function(a){this.appContext.uiStateManager.setWindowPosition({left:a.left,right:a.right,bottom:0})};G.showSlider=function(){if(!this.isVisible(this.view)&&!this.inProgress){if(!this.isExternal){r.call(this,null,!0);o.call(this)}a.call(this);this.isSliderOpen=!0}};G.hideSlider=function(){if(this.isVisible(this.view)&&!this.inProgress){this.isSliderOpen=!1;b.call(this);this.isExternal||p.call(this);this.appContext.events.trigger({appName:"slider",eventName:this.VCEvents.SLIDER_CLOSED,data:this.views&&this.views[this.selectedViewId]})}};G.dispose=function(){this.removeAllViews();this.hideSlider();f.call(this);this.appContext.events.unbind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:v});this.appContext.browserStateManager.off(this.appContext.browserStateManager.EVENT_NAME.RESIZE,j);lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)}}();!function(){function a(a){var d=this.appContext&&this.appContext.browserStateManager&&(!this.appContext.browserStateManager.isHidden()||this.appContext.browserStateManager.isFocus()),e=this.models.uiModel.get(this.uiPath.WINDOW_MAXIMIZED);d&&a>0?b.call(this,a):0>=a&&c.call(this);e||j.call(this)}function b(a){g.call(this,a);i.call(this);this.notificationCount=a}function c(){h.call(this);this.notificationCount=0}function d(){return f.call(this)+e.call(this)}function e(){var a=0;"number"==typeof this.widgetNotifications?a=this.widgetNotifications:this.models&&this.models.chatModel&&(a=this.models.chatModel.get(lpTag.unifiedWindow.chatModelPath.SDK_NOTIFICATIONS)||0);return a}function f(){var a=0,b=this.getModelParam(this.chatPath.LINES)||[],c=this.getModelParam(this.uiPath.LAST_LINE_VIEWED);if(c)for(var d=b.length-1;d>=0;d--){if(b[d]["@id"]===c["@id"]&&b[d].convId===c.convId)return a;isNaN(b[d]["@id"])||"agent"!==b[d].source||b[d].history||a++}return 0}function g(a){var b,c=1===a?this.translate("tooltip_Message"):this.translate("tooltip_Messages"),d=this.getFirstElement(this.LPViewMap.notificationText);this.translator.extendDictionary({notificationCount:a,notificationMsg:c},{locale:this.engConf.lang});b=this.translate("tooltip_NewMessageNotification");d.innerHTML=""+lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(a).cleanText;d.title=b;this.show({view:this.LPViewMap.notificationCounter,
useClasses:!0})}function h(){this.hide({view:this.LPViewMap.notificationCounter,useClasses:!0})}function i(){this.appContext.deviceDetector.isDesktop()?this.shakeX(this.view):this.shakeY(this.view)}function j(){this.appContext.events.trigger({appName:this.unifiedWindowAppName,eventName:"notification",global:!0,data:{count:this.notificationCount}})}function k(){this.appContext.events.trigger({appName:"*",eventName:"keyboard_visible",data:{}})}function l(){var a=d.call(this);if(a){c.call(this);j.call(this);this.appContext.events.trigger({appName:"*",eventName:this.VCEvents.LINES_VIEWED})}}var m;lpTag.unifiedWindow.MinimizedViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"MinimizedViewController",applicationName:"minimized_view",LPViewMap:{notificationText:"^notification_text",notificationCounter:"^notification_counter",minimized:"^header"},LPClassesMap:{visible:"lp_visible"},initialize:function(a){this.models=a.models;this.featureStateManager=a.appContext.featureStateManager;this.unifiedWindowAppName=lpTag.unifiedWindow.apps.UNIFIED_WINDOW;this.appEvents=this.appContext.events;this.windowConf=this.appContext.conf.windowConf;this.unifiedConf=this.appContext.conf.unifiedConf;this.engConf=this.appContext.conf.engConf;this.widgetNotifications=0},events:function(){this.bindModel({path:this.chatPath.LINES,context:this,callback:this.checkNotificationCount});this.bindModel({path:this.uiPath.LAST_LINE_VIEWED,context:this,callback:this.checkNotificationCount});this.bindModel({path:lpTag.unifiedWindow.chatModelPath.SDK_NOTIFICATIONS,context:this,callback:this.onWidgetNotifications});this.appEvents.bind({appName:this.unifiedWindowAppName,eventName:lpTag.unifiedWindow.events.uiState.MINIMIZED,context:this,func:this.checkNotificationCount});this.appEvents.bind({appName:this.unifiedWindowAppName,eventName:lpTag.unifiedWindow.events.uiState.MAXIMIZED,context:this,func:l});this.appContext.browserStateManager.on(this.appContext.browserStateManager.EVENT_NAME.FOCUS_CHANGE,this.checkNotificationCount,this);this.appContext.deviceDetector.isIOS()&&this.bindViewEvent({selector:this.LPViewMap.minimized,callback:k,DOMEvent:"click"})},render:function(){this.checkNotificationCount();if(this.featureStateManager.isMenuTop()){var a=this.getFirstElement("^close",this.view);this.addClass(a,"lpHide")}}});m=lpTag.unifiedWindow.MinimizedViewController.prototype;m.onWidgetNotifications=function(a){this.widgetNotifications=a&&"number"==typeof a.newValue&&a.newValue||0;this.checkNotificationCount()};m.checkNotificationCount=function(){var b=d.call(this),c="undefined"==typeof this.notificationCount||this.notificationCount!==b;c&&a.call(this,b)};m.dispose=function(){this.appContext&&this.appContext.browserStateManager&&this.appContext.browserStateManager.off(this.appContext.browserStateManager.EVENT_NAME.FOCUS_CHANGE,this.checkNotificationCount);lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)}}();!function(){function a(){var a=this.getFirstElement(this.LPViewMap.bottomLogo);this.isLogoEnabled?this.show(a):this.hide(a)}function b(a){var b=a&&a.type||"";"focus"===b?this.bottomArea.style.borderTop="1px solid #0085ef":"blur"===b&&(this.bottomArea.style.borderTop="1px solid #d6d6d6")}function c(a,b,c){this.createView({template:"<div class='lp_lpview_mp lp_thank_you_container' data-lp-cust-id='dialogArea' role='alert'><div class='lp_image'><img src='{{imagesRepository}}/thank-you-dark.png' alt=''></div><div class='lp_lpview_title lp_title'>{{message}}</div></div>",target:this.LPViewMap.mainArea,wrapWithDiv:!1,textInjection:a,callback:b,context:c})}function d(a){return function(b){var c=e.bind(a);a.thankYouView=b;a.bindViewEvent({view:a.thankYouView,DOMEvent:"click",callback:c});a.animate(b,{duration:a.fadeInTimeout},null);a.appContext.events.trigger({appName:a.ControllerName,eventName:a.VCEvents.THANK_YOU_PAGE});a.closeThankYouTimeout=setTimeout(c,a.thankYouTimeout)}}function e(){this.rendered&&this.closeThankYouPage()}function f(a){var b=a&&a.visible;b?this.addClass(this.view,this.LPClassesMap.actionsVisibility):this.removeClass(this.view,this.LPClassesMap.actionsVisibility)}function g(a){var b=a&&a.newValue,c=this.getFirstElement("^top_menu"),d=this.getFirstElement("^menu-top-btn",this.mainWindow);if(b){d.title=this.translate("tooltip_CollapseActionMenu");d.setAttribute("aria-expanded","true");this.removeClass(c,"lpHide")}else{d.title=this.translate("tooltip_ExpandActionMenu");d.setAttribute("aria-expanded","false");this.addClass(c,"lpHide")}d.setAttribute("aria-label",d.title)}function h(){if(!this.chatDOMAdded){this.addLogo&&!this.logoDOMAdded&&this.addLogoViewController();this.transcriptVC=new lpTag.unifiedWindow.TranscriptViewController({models:this.models,appContext:this.appContext,wrapWithDiv:!1,sliderAPI:this.slider});this.chatVC=new lpTag.unifiedWindow.ChatViewController({models:this.models,appContext:this.appContext,textInjection:this.unifiedConf,wrapWithDiv:!1,resizeEvent:{onResize:this.onChatVCResize,onResizeContext:this,transitionView:this.view}});this.actionsVc=new lpTag.unifiedWindow.ActionsManagerViewController({models:this.models,appContext:this.appContext,textInjection:this.appContext.conf.unifiedConf});this.addViewController({viewController:this.transcriptVC,target:this.LPViewMap.engagementArea});this.addViewController({viewController:this.chatVC,target:this.LPViewMap.bottomArea});this.addViewController({viewController:this.coBrowseVC});this.addViewController({viewController:this.actionsVc,target:"^top_menu",beforeView:this.getFirstElement("^bottom_logo")});this.transcriptVC.show();this.chatVC.show();this.chatDOMAdded=!0}}function i(a,b){m.call(this);this.chatVC&&this.chatVC.closeActions();this.addLogo&&!this.logoDOMAdded&&this.addLogoViewController();this.survey=new lpTag.unifiedWindow.SurveyViewController({models:this.models,appContext:this.appContext,target:this.LPViewMap.mainArea,survey:a,surveyType:b,defaultSelect:this.translate("defaultSelect"),iconsRepository:this.unifiedConf.iconsRepository,imagesRepository:this.unifiedConf.imagesRepository});this.hideTranscriptArea();this.addViewController(this.survey);lpTag.hooks&&lpTag.hooks.exec&&lpTag.hooks.exec({name:lpTag.unifiedWindow.hooks.AFTER_LOAD_SURVEY,data:{context:this.appContext,surveyType:b,surveyData:a}})}function j(a){var b=a.data;b.appContext=this.appContext;b.target=this.getFirstElement(this.LPViewMap.mainArea);b.wrapWithDiv=!1;var c=new lpTag.unifiedWindow[b.ControllerName](b);this.addViewController({viewController:c,target:b.target});k.call(this,!1);return c}function k(a){if(a){this.show(this.bottomArea);this.show(this.engagementArea)}else{this.hide(this.bottomArea);this.hide(this.engagementArea)}}function l(){k.call(this,!0)}function m(){this.appContext.wrapperWindow.removeMessage(!0)}function n(){this.connectionUnavailable=!0;this.showTooltip({text:this.translate("tooltip_ConnectionIssue"),type:this.tooltipType.notification})}function o(a){var b,c=a.channelType;c===lpTag.unifiedWindow.consts.engagementTypes.CHAT_ENGAGEMENT?b="tooltip_CloseToStartConversation":c===lpTag.unifiedWindow.consts.engagementTypes.MESSAGING_ENGAGEMENT&&(b="tooltip_CloseToStartChat");this.showTooltip({text:this.translate(b),type:this.tooltipType.notification,tooltipTimeout:5e3})}function p(a){var b;if(a.validation===lpTag.unifiedWindow.consts.fileSharing.fileAttributes.TYPE)b="tooltip_FileTypeValidationExpanded";else if(a.validation===lpTag.unifiedWindow.consts.fileSharing.fileAttributes.SIZE){b="tooltip_FileSizeValidation";a.extraData&&15===a.extraData&&(b="tooltip_FileSizeValidation15")}this.showTooltip({text:this.translate(b),type:this.tooltipType.notification,tooltipTimeout:5e3})}function q(){this.showTooltip({text:this.translate("startConversationError"),type:this.tooltipType.notification})}function r(){this.animate(this.tooltip,{duration:this.fadeOutTimeout,opacity:"0"},function(){if(this.tooltip){this.tooltip.parentNode.removeChild(this.tooltip);delete this.tooltip}})}function s(){if(this.connectionUnavailable){this.connectionUnavailable=!1;this.showTooltip({text:this.translate("tooltip_ConnectionReEstablished"),type:this.tooltipType.success,tooltipTimeout:3e3})}}function t(){var a=this;this.appContext.wrapperWindow.showClose(!1);j.call(this,{context:this,data:{header_key:"relogin",appContext:this.appContext,callbackTimeout:6e3,ControllerName:lpTag.unifiedWindow.ReauthenticationDialogViewController.ControllerName,callback:function(){window.location.href=a.appContext.appConfigurationManager.getExternalResourceURL(a.appContext.conf.engConf,a.appContext.conf.unifiedConf,a.appContext.conf.unifiedConf.poppedOut,!0)}}})}function u(a){if(a&&"SKIPPED"===a.status){this.closeSurvey();this.showTranscriptArea()}}function v(a){a.preventDefault();if(this.appContext.featureStateManager.isFileSharingEnabled()&&this.appContext.fileSharingManager){this.animate(this.dragImageView,{duration:this.fadeOutTimeout,opacity:"0"},function(){this.hide(this.dragImageView);this.removeView(this.dragImageView);this.dragImageView=null});this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.FILE_SHARE,eventName:lpTag.unifiedWindow.events.imageShare.IMAGE_SELECTED,data:{image:a.dataTransfer.files[0]}})}}function w(a){a.preventDefault();!this.dragImageView&&this.appContext.featureStateManager.isFileSharingEnabled()&&this.appContext.fileSharingManager&&(this.dragImageView=this.createView({template:"<div class='lp_lpview_mp lp_drop_image_wrapper' data-lp-point='drag_image_area' role='alert'><div class='lp_drop_image'><div class='lp_lpview_title lp_title'>{{message}}</div><div class='lp_image'><img src='{{imagesRepository}}/drop-images-icon.svg' alt=''></div></div></div>",target:this.LPViewMap.mainArea,wrapWithDiv:!1,textInjection:{imagesRepository:this.appContext.conf.unifiedConf.imagesRepository,message:this.appContext.translator.translate("dragFilesMessage")}}))}function x(a){a.preventDefault();!document.body.contains(a.fromElement)&&this.dragImageView&&this.animate(this.dragImageView,{duration:this.fadeOutTimeout,opacity:"0"},function(){this.hide(this.dragImageView);this.removeView(this.dragImageView);this.dragImageView=null})}function y(a){a.preventDefault();A.call(this,this.appContext.translator.translate("dropFilesMessage"))}function z(a){a.preventDefault();A.call(this,this.appContext.translator.translate("dragFilesMessage"))}function A(a){if(this.dragImageView){var b=this.getFirstElement(".lp_title",this.dragImageView);b&&(b.innerText=a)}}function B(){this.bottomArea.style.position="relative";this.bottomArea.style.bottom="3%"}function C(){this.bottomArea.style.removeProperty("position");this.bottomArea.style.removeProperty("bottom")}function D(){window.screen.availHeight<700?this.mainWindow.style.height="47vh":this.mainWindow.style.height="50vh";setTimeout(function(){window.scrollTo(0,0)},375)}function E(){this.mainWindow.style.removeProperty("height")}var F,G=lpTag.taglets.lpUtil;lpTag.unifiedWindow.MaximizedViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"MaximizedViewController",applicationName:"maximize_view",template:"<div class='lp_lpview_mp lp_main_area' data-lp-point='main_area'><div class='lp_wait lpHide' data-lp-point='wait'></div><div class='lp_top_menu lpHide lpc_menu {{deviceClass}}' data-lp-cust-id='topMenu' data-lp-point='top_menu'><div class='lp_top_logo_bar lpc_menu__banner {{deviceClass}} {{logoClass}}' data-lp-point='bottom_logo'><span data-lp-type='icon' class='lp_top_menu-logo-icon'><a href='https://www.liveperson.com' target='_blank' style='display:block'><svg width='81px' height='14px' viewBox='0 0 81 14' version='1.1' xmlns='http://www.w3.org/2000/svg'><g id='designs---September19' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'><g id='Window---Powered-by-Copy' transform='translate(-1063.000000, -510.000000)'><g id='Menu-Copy-12' transform='translate(1009.000000, 303.000000)'><g id='elements/LPAuto_logo' transform='translate(53.000000, 206.000000)'><g id='LP_Auto_1c_full'><rect id='Rectangle' x='0' y='0' width='156' height='15.9545455'></rect><path d='M4.12143237,4.95774537 L3.12718399,4.0968319 L4.17105293,3.08580117 L5.05870908,4.04980721 C5.23906053,3.91705445 5.42815565,3.79621339 5.62475069,3.68807886 L5.04768228,2.51969631 L6.40949018,1.97710379 L6.84872376,3.19612831 C7.06868091,3.13968058 7.29213981,3.09738946 7.51768203,3.06952339 L7.44233234,1.77272727 L8.91257027,1.77272727 L8.83905837,3.06409747 C9.06402303,3.09179001 9.28688212,3.13408381 9.50617883,3.19070239 L9.95092581,1.97167786 L11.3127337,2.51427038 L10.7356653,3.67722702 C10.9322604,3.78536154 11.1213555,3.90620257 11.3017069,4.03895537 L12.1893631,3.07494932 L13.2313942,4.08598005 L12.2371458,4.9468935 C12.3760024,5.11928248 12.5030893,5.3005444 12.6175699,5.48948602 L13.8176516,4.92880709 L14.3818554,6.24911556 L13.1229642,6.69223278 C13.1815105,6.90496115 13.2257138,7.1212633 13.2552856,7.33972652 L14.5876887,7.26738084 L14.5876887,8.6962078 L13.2552856,8.62386215 C13.2257138,8.84232535 13.1815105,9.05862753 13.1229642,9.27135589 L14.3818554,9.69819533 L13.8176516,11.0166951 L12.6157321,10.4542076 C12.5012515,10.6431492 12.3741646,10.8244111 12.235308,10.9968001 L13.2295564,11.8577136 L12.1893631,12.8777875 L11.3017069,11.9137815 C11.1213555,12.0465342 10.9322604,12.1673753 10.7356653,12.2755098 L11.3127337,13.4384664 L9.95092581,13.9810589 L9.50985442,12.7638431 C9.29055771,12.8204616 9.06769862,12.8627554 8.84273396,12.890448 L8.91624587,14.1818182 L7.44600793,14.1818182 L7.52135762,12.890448 C7.2958154,12.8625819 7.0723565,12.8202908 6.85239935,12.7638431 L6.41316577,13.9810589 L5.05135787,13.4384664 L5.63210187,12.2809357 C5.43550683,12.1728012 5.24641174,12.0519602 5.06606026,11.9192074 L4.17105293,12.8777875 L3.12718399,11.8667568 L4.12143237,11.0058433 C3.98316714,10.8334292 3.85669325,10.652166 3.74284612,10.4632508 L2.54276439,11.0166951 L1.97856058,9.69819533 L3.24296521,9.27135589 C3.18441891,9.05862753 3.14021555,8.84232535 3.11064378,8.62386215 L1.77272727,8.6962078 L1.77272727,7.26738084 L3.1032926,7.33972652 C3.13527963,7.12109832 3.18193921,6.90479409 3.24296521,6.69223278 L1.97856058,6.26539334 L2.54276439,4.94508487 L3.74284612,5.5057638 C3.85648514,5.31498845 3.98296283,5.13190702 4.12143237,4.95774537 Z M5.08076263,7.98179432 C5.06136389,9.22193848 5.80581407,10.350529 6.96472541,10.8378922 C8.12363671,11.3252553 9.4669421,11.0746397 10.3641971,10.2036652 C11.2614521,9.33269058 11.5345337,8.01426289 11.0552782,6.86715083 C10.5760228,5.72003877 9.43957219,4.97196706 8.17928909,4.97396748 C6.48029575,4.96399651 5.09391067,6.30977464 5.08076263,7.98179432 Z M75.9021243,4.76060341 L80.8255834,9.55892993 L80.8255834,5.00838733 L81.5331355,5.00838733 L81.5331355,11.1577692 L76.6041629,6.35763406 L76.6041629,10.8792384 L75.9021243,10.8792384 L75.9021243,4.76060341 Z M67.2975565,7.94562151 C67.2975565,9.27135589 68.4535312,10.376436 69.8851753,10.376436 C71.3168198,10.376436 72.4727941,9.27135589 72.4727941,7.94562151 C72.4727941,6.6198871 71.3333597,5.51480702 69.8851753,5.51480702 C68.4369909,5.51480702 67.2975565,6.61446119 67.2975565,7.94562151 Z M73.1785083,7.94562151 C73.1785083,9.63489286 71.686217,10.9750964 69.8870132,10.9750964 C68.0878097,10.9750964 66.5973558,9.63489286 66.5973558,7.94562151 C66.5973558,6.25635013 68.0859718,4.89986881 69.8870132,4.89986881 C71.6880548,4.89986881 73.1766705,6.27081925 73.1766705,7.9546647 L73.1785083,7.94562151 Z M63.6587176,6.14602298 C63.4069395,5.74088722 63.1073784,5.5057638 62.568904,5.5057638 C62.0304294,5.5057638 61.5231971,5.88015265 61.5231971,6.41008468 C61.5231971,6.91650436 62.0837252,7.14981913 62.5100943,7.3306833 L62.929112,7.50069563 C63.7506075,7.83710299 64.445295,8.22415234 64.445295,9.15379418 C64.445295,10.1811027 63.5576388,10.9624359 62.4604738,10.9624359 C61.5144498,11.0011371 60.6804113,10.3567652 60.4940307,9.44317685 L61.179529,9.26231267 C61.2651766,9.88472733 61.8057136,10.3486474 62.4439336,10.3474977 C63.1220808,10.3474977 63.7414186,9.86459038 63.7414186,9.20262749 C63.7414186,8.54066463 63.1643502,8.28383749 62.5780929,8.03424494 L62.1939933,7.87870177 C61.4588742,7.56761538 60.8193207,7.21673887 60.8193207,6.37572046 C60.8193207,5.47139962 61.6500051,4.87997375 62.5872818,4.87997375 C63.2582448,4.86555097 63.8838444,5.21221463 64.2192461,5.78429463 L63.6587176,6.14602298 Z M55.4897081,7.71954128 L55.708406,7.71954128 C56.5023345,7.71954128 57.3072898,7.57846722 57.3072898,6.66691178 C57.3072898,5.7010971 56.544604,5.60704773 55.6992172,5.60704773 L55.4897081,5.60704773 L55.4897081,7.71954128 Z M55.4897081,10.8738125 L54.7858317,10.8738125 L54.7858317,5.00838733 L55.7047304,5.00838733 C56.9029745,5.00838733 58.0148418,5.30500456 58.0148418,6.63616488 C58.0148418,7.54048576 57.4046932,8.17893628 56.4324984,8.26394243 L58.4430488,10.8973248 L57.5792838,10.8973248 L55.6642991,8.30373255 L55.4805192,8.30373255 L55.4897081,10.8738125 Z M48.7817476,5.00838733 L52.0548647,5.00838733 L52.0548647,5.61609095 L49.4819483,5.61609095 L49.4819483,7.36143021 L51.9758397,7.36143021 L51.9758397,7.96913385 L49.485624,7.96913385 L49.485624,10.2733434 L52.0585404,10.2733434 L52.0585404,10.881047 L48.7817476,10.881047 L48.7817476,5.00838733 Z M43.6984,7.70507215 L44.1670382,7.70507215 C44.9462643,7.70507215 45.6060337,7.48622651 45.6060337,6.6452081 C45.6060337,5.68662798 44.7771871,5.61609095 43.952016,5.61609095 L43.6928865,5.61609095 L43.6984,7.70507215 Z M43.6984,10.8828557 L42.9945236,10.8828557 L42.9945236,5.00838733 L44.0420681,5.00838733 C44.5934073,5.00838733 45.1447465,5.02466511 45.6078715,5.32128234 C46.0543084,5.62238068 46.3178712,6.12348959 46.3099101,6.65605994 C46.3154205,7.14640737 46.0935094,7.6124851 45.7071125,7.92210917 C45.2807434,8.2494733 44.7367556,8.31277577 44.2093076,8.31277577 L43.6984,8.31277577 L43.6984,10.8828557 Z M37.9093381,5.99952299 L37.9093381,7.29270184 L39.7912427,7.29270184 L39.7912427,8.29107208 L37.9093381,8.29107208 L37.9093381,9.88086816 L39.8629166,9.88086816 L39.8629166,10.8774297 L36.7276343,10.8774297 L36.7276343,5.01019596 L39.8629166,5.01019596 L39.8629166,6.00675755 L37.9093381,5.99952299 Z M31.8133641,8.4954486 L33.2578728,5.0029614 L34.5296287,5.0029614 L31.8372554,11.2029853 L29.1650979,5.01019596 L30.4423671,5.01019596 L31.8133641,8.4954486 Z M26.9799567,10.8774297 L25.7964152,10.8774297 L25.7964152,5.01019596 L26.9799567,5.01019596 L26.9799567,10.8774297 Z M21.8616909,9.88086816 L23.5340866,9.88086816 L23.5340866,10.8774297 L20.6799872,10.8774297 L20.6799872,5.01019596 L21.8616909,5.01019596 L21.8616909,9.88086816 Z' id='Shape' fill='#98999A' fill-rule='nonzero'></path></g></g></g></g></g></svg></a></span></div></div><div class='lp_location_center' data-lp-point='engagement_area'></div><div class='lp_location_bottom lpc_composer lpc_composer_maximized {{deviceClass}}' data-lp-point='bottom' data-lp-cust-id='input'></div></div>",thankYouTimeout:3e3,fadeOutTimeout:500,fadeInTimeout:150,endedHash:"#RIP",tooltipType:{notification:"notification",success:"success",call:"call"},LPViewMap:{bottomLogo:"^bottom_logo",mainArea:"^main_area",engagementArea:"^engagement_area",waitArea:"^wait",locationBottom:"^bottom",bottomArea:".lp_location_bottom",mainWindow:"^maximized",dragImageArea:"^drag_image_area"},LPClassesMap:{actionsVisibility:"lp_actions_visible",noAnimation:"lp_no-animation",logo_top_margin:"lp_logo_top_margin",lpDropImageContainer:"lp_drop_image_wrapper",lpDropImage:"lp_drop_image"},initialize:function(a){this.transcriptState={isShownAfterChatEnd:!1};this.models=a.models;this.slider=a.slider;this.unifiedConf=this.appContext.conf.unifiedConf;this.chatDOMAdded=!1;this.logoDOMAdded=!1;this.addLogo=this.appContext.conf.windowConf&&this.appContext.conf.windowConf.logoPinToTop;this.chatViewsDisposed=!1;this.isLogoEnabled=!this.unifiedConf.hide_lp_logo},events:function(){this.appContext.events.bind({appName:"*",eventName:this.VCEvents.DIALOG,context:this,func:j});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.DIALOG_CLOSED,context:this,func:l});this.appContext.events.bind({appName:"tooltip",eventName:"show",func:this.showTooltip,context:this});this.appContext.events.bind({appName:"tooltip",eventName:"close",func:this.closeTooltip,context:this});this.appContext.events.bind({appName:"*",eventName:this.EventName.application.PROCESSING,func:this.showWait,context:this});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.EventName.application.POST_CHAT_SURVEY,func:u,context:this});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.chat.MULTIPLE_CHANNELS_REQUESTED,func:o,context:this});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.FILE_SHARE,eventName:lpTag.unifiedWindow.events.imageShare.FILE_VALIDATION,func:p,context:this});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.CHAT,eventName:lpTag.unifiedWindow.events.chat.FAILED_START_CONVERSATION,func:q,context:this});this.appContext.events.bind({appName:"*",eventName:lpTag.unifiedWindow.events.uiState.ACTIONS_TOGGLE,func:f,context:this});this.appContext.events.bind({appName:"*",eventName:lpTag.unifiedWindow.events.uiState.FOCUS_CHANGE_EVENT,func:b,context:this});this.bindModel({path:this.chatPath.SURVEYS_PRECHAT,callback:this.handlePreChatSurvey,context:this});this.bindModel({path:this.chatPath.SURVEYS_EXIT,callback:this.handleExitSurvey,context:this});this.bindModel({path:this.chatPath.SURVEYS_OFFLINE,callback:this.handleOfflineSurvey,context:this});this.bindModel({path:this.uiPath.STATE,callback:this.stateChanged,context:this});this.bindModel({path:this.uiPath.ACTIONS_VISIBLE,callback:f,context:this});this.bindModel({path:this.uiPath.TOP_MENU_VISIBLE,context:this,callback:g});this.bindModel({path:this.chatPath.SURVEYS_PRESMS,callback:this.handlePreSmsSurvey,context:this});if(lpTag.device.browser()){this.bindViewEvent({view:this.getFirstElement(this.LPViewMap.dragImageArea),DOMEvent:"drop",callback:v,context:this});this.bindViewEvent({view:this.getFirstElement(this.LPViewMap.dragImageArea),DOMEvent:"dragleave",callback:z,context:this});this.bindViewEvent({view:this.getFirstElement(this.LPViewMap.mainArea),DOMEvent:"dragover",callback:y,context:this});this.bindViewEvent({view:document,DOMEvent:"dragleave",callback:x,context:this});this.bindViewEvent({view:document,DOMEvent:"dragenter",callback:w,context:this})}this.appContext.events.bind({appName:"*",eventName:"adjust_styles",context:this,func:B});this.appContext.events.bind({appName:"*",eventName:"remove_styles",context:this,func:C});this.appContext.events.bind({appName:"*",eventName:"keyboard_visible",context:this,func:D});this.appContext.events.bind({appName:"*",eventName:"reset_window",context:this,func:E})},render:function(){if(!this.rendered){this.rendered=!0;this.mainWindow=this.getFirstElement(this.LPViewMap.mainWindow,document.body);this.engagementArea=this.getFirstElement(this.LPViewMap.engagementArea);this.bottomArea=this.getFirstElement(this.LPViewMap.locationBottom);this.waitArea=this.getFirstElement(this.LPViewMap.waitArea);this.createView({template:"<table class='lp_centralizer'><tbody><td><div class='lp_rotator-container'><div class='lp_rotator-container-bg'></div><div class='lp_rotator'><img src='{{imagesRepository}}/{{imageUrl}}' alt='{{imageAltText}}' role='alert'></div></div></td></tbody></table>",target:this.waitArea,wrapWithDiv:!1,textInjection:{imagesRepository:this.unifiedConf.imagesRepository,imageUrl:"loader_on_warmGray5_75.gif"}});a.call(this);this.addClass(this.bottomArea,this.LPClassesMap.noAnimation,500);this.addClass(this.engagementArea,this.LPClassesMap.noAnimation,500)}}});F=lpTag.unifiedWindow.MaximizedViewController.prototype;F.showWait=function(a){a="undefined"==typeof a?!0:a;var b={view:this.waitArea,useClasses:!0};if(a){this.closeSurvey();m.call(this);this.appContext.wrapperWindow.setTitle(this.translate("connecting"));this.show(b)}else this.hide(b)};F.disposeChatViews=function(){if(!this.chatViewsDisposed){this.appContext.conf.widgetSDK?this.slider.getSelectedViewType()!==lpTag.unifiedWindow.consts.slider.viewType.widgetSDKView&&this.slider.hideSlider():this.slider.dispose();this.secureFormManagerVC&&this.secureFormManagerVC.dispose();this.cobrowseInvitationVC&&this.cobrowseInvitationVC.dispose();this.richContentWidgetManagerVC&&this.richContentWidgetManagerVC.dispose();this.chatViewsDisposed=!0}};F.addChatViews=function(){this.secureFormManagerVC=this.secureFormManagerVC||new lpTag.unifiedWindow.SecureFormsManagerViewController({models:this.models,appContext:this.appContext,sliderAPI:this.slider});this.cobrowseInvitationVC=this.cobrowseInvitationVC||new lpTag.unifiedWindow.CoBrowseInvitationManagerViewController({models:this.models,appContext:this.appContext,sliderAPI:this.slider});this.richContentWidgetManagerVC=this.richContentWidgetManagerVC||new lpTag.unifiedWindow.RichContentWidgetManagerViewController({appContext:this.appContext,sliderAPI:this.slider})};F.handlePreChatSurvey=function(a){i.call(this,a,lpTag.unifiedWindow.SurveyType.PRE_CHAT)};F.handleExitSurvey=function(a){i.call(this,a,lpTag.unifiedWindow.SurveyType.EXIT_CHAT)};F.handleOfflineSurvey=function(a){i.call(this,a,lpTag.unifiedWindow.SurveyType.OFFLINE)};F.handlePreSmsSurvey=function(a){i.call(this,a,lpTag.unifiedWindow.SurveyType.PRE_SMS)};F.showTranscriptArea=function(){this.show(this.engagementArea);this.appContext.conf.unifiedConf.connectorsSfConfig||this.show(this.LPViewMap.locationBottom);this.chatVC&&(this.chatVC.transcriptWasShown=!0)};F.hideTranscriptArea=function(){this.hide(this.engagementArea);this.hide(this.LPViewMap.locationBottom)};F.addLogoViewController=function(){this.logoVC=new lpTag.unifiedWindow.LogoViewController({appContext:this.appContext,parent:this});G.addClass(this.getFirstElement(this.LPViewMap.mainArea),this.LPClassesMap.logo_top_margin);this.addViewController({viewController:this.logoVC,target:this.LPViewMap.mainArea});this.logoDOMAdded=!0};F.stateChanged=function(a){var b=a.newValue;switch(b){case lpTag.unifiedWindow.State.APP_ENDED:case lpTag.unifiedWindow.State.NOT_FOUND:var c=this.survey&&this.survey.surveyType===lpTag.unifiedWindow.SurveyType.PRE_SMS;this.chatVC&&this.chatVC.closeActions();this.closeSurvey();this.showThankYouPage(c);break;case lpTag.unifiedWindow.State.REQUESTED:this.closeSurvey();break;case lpTag.unifiedWindow.State.WAITING:this.showWait(!1);m.call(this);this.closeSurvey();h.call(this);this.showTranscriptArea();this.addChatViews();break;case lpTag.unifiedWindow.State.CHATTING:this.showWait(!1);m.call(this);this.closeSurvey();this.addChatViews();h.call(this);this.showTranscriptArea();this.transcriptState.isShownAfterChatEnd=!0;break;case lpTag.unifiedWindow.State.POST_CHAT:this.showWait(!1);h.call(this);this.showTranscriptArea();this.transcriptState.isShownAfterChatEnd=!0;break;case lpTag.unifiedWindow.State.ENDED:this.chatVC&&this.chatVC.agentIsTyping(!1);this.disposeChatViews();break;case lpTag.unifiedWindow.State.AUTH_ERROR:this.dispose();break;case lpTag.unifiedWindow.State.CONNECTION_ISSUE:n.call(this);break;case lpTag.unifiedWindow.State.RESTART_AUTHENTICATION:t.call(this)}b!==lpTag.unifiedWindow.State.CONNECTION_ISSUE&&s.call(this)};F.closeSurvey=function(){if(this.survey){this.removeViewController(this.survey);this.survey=null}};F.showThankYouPage=function(a){var b=d(this),e={imagesRepository:this.appContext.conf.unifiedConf.imagesRepository};if(a){var f=this.models.uiModel.get(lpTag.unifiedWindow.uiModelPath.PRE_SMS_CONTEXT);e.message=this.injectTextDefaults(this.appContext.translator.translate("thankYouMessagePreSms",!0),{phoneNumber:f&&f.From})}else e.message=this.appContext.translator.translate("thankYouMessage");this.thankYouView||G.getPropertyFromObject(this.appContext,"conf.engConf.async")&&!G.getPropertyFromObject(this.appContext,"conf.engConf.externalTargets.0")?this.transcriptState.isShownAfterChatEnd&&this.showTranscriptArea():c.call(this,e,b,this)};F.closeThankYouPage=function(){var a=this;this.closeThankYouTimeout&&clearTimeout(this.closeThankYouTimeout);!this.unifiedConf.poppedOut&&!this.unifiedConf.external||G.getPropertyFromObject(this.appContext,"conf.engConf.async")||(window.location.hash=this.endedHash);if(this.transcriptState.isShownAfterChatEnd)this.animate(this.thankYouView,{duration:this.fadeOutTimeout,opacity:"0"},function(){a.hide(a.thankYouView);a.removeView(a.thankYouView);a.thankYouView=null;a.showTranscriptArea()});else if(!this.unifiedConf.poppedOut&&!this.unifiedConf.external){a.hide(a.thankYouView);a.removeView(a.thankYouView);a.thankYouView=null;a.appContext.events.trigger({appName:"Application",eventName:a.EventName.application.ENDED})}};F.showTooltip=function(a){function b(b){var d={duration:c.fadeInTimeout};d.opacity=a.type===c.tooltipType.success?"1":"0.92";c.animate(b,d,null);isNaN(a.tooltipTimeout)||(c.closeTooltip=setTimeout(function(){r.call(c)},a.tooltipTimeout))}var c=this;c.getTooltip(a.text,a.type,b)};F.closeTooltip=function(){r.call(this)};F.getTooltip=function(a,b,c){var d=this;this.tooltip&&this.tooltip.parentNode.removeChild(this.tooltip);this.createView({template:"<div class='lp_tooltip lp_tooltip_{{type}}'><button class='lp_maximize' data-lp-point='maximize-slider' title='{{tooltip_maximize_slider}}' tabindex='0'><div class='lp_minimize-right-slider-icon lp_icon-white' data-lp-point='minimize-icon' data-lp-type='icon'><img src='{{iconsRepository}}/sprites_v1.png' alt='{{tooltip_maximize_slider}}' aria-hidden='true' data-lp-point='maximize-img'></div></button><div class='lp_title' role='log' aria-live='assertive' aria-relevant='all' aria-atomic='false'>{{text}}</div></div>",target:this.LPViewMap.mainArea,wrapWithDiv:!1,textInjection:{text:a,type:b||this.tooltipType.notification,tooltip_maximize_slider:this.translate("tooltip_maximize_slider"),iconsRepository:this.unifiedConf.iconsRepository},callback:function(a){this.bindViewEvent({selector:".lp_tooltip",DOMEvent:"click",context:this,callback:function(){if(b===this.tooltipType.call){this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.coBrowseEvents.MAXIMIZE});this.closeTooltip()}}});d.tooltip=a;c&&"function"==typeof c&&c(d.tooltip)}});return this.tooltip};F.onChatVCResize=function(a){this.bottomArea.style.height=a.bottomAreaSize+"px";this.engagementArea.style.height="calc(100% - "+(a.bottomAreaSize+a.actionsAreaSize+15)+"px)"}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){var b=a.newValue;if(Array.isArray(this.enableState)&&this.enableState.indexOf(b)>=0||this.enableState===b)this.enable();else if(Array.isArray(this.disableState)&&this.disableState.indexOf(b)>=0||this.disableState===b)this.disable();else if(this.enableState||this.disableState||this.disableOnEnd||!this.enableOnStart)switch(b){case lpTag.unifiedWindow.State.APP_ENDED:case lpTag.unifiedWindow.State.NOT_FOUND:case lpTag.unifiedWindow.State.ERROR:case lpTag.unifiedWindow.State.POST_CHAT:this.disableOnEnd&&this.disable();break;case lpTag.unifiedWindow.State.WAITING:case lpTag.unifiedWindow.State.CHATTING:this.enableOnStart&&this.enable()}else this.enable()}function b(a){var b=a.context,c={context:b,data:{}};b.clicked&&!1===b.clicked.call(b,c)||b.appContext.events.trigger({appName:b.ControllerName,eventName:b.VCEvents.CLICKED,data:c})}function c(a,b){a.innerText?a.innerText=b:a.innerHTML=b}function d(a,b){if(a){a.alt=b;a.setAttribute("aria-hidden","true")}}function e(b){var c=this.getModelParam(this.uiPath.STATE);b.visible?a.call(this,{newValue:c}):this.shouldDisableOnActionsHidden&&!this.featureStateManager.isMenuTop()&&this.disable();this.view.setAttribute("aria-hidden",(!b.visible).toString())}function f(a){this.view.setAttribute("aria-hidden",(!a.newValue).toString())}var g;lpTag.unifiedWindow.ActionViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"ActionViewController",
template:"<button class='lp_action_item lpc_menu__item {{deviceClass}}' type='button' aria-hidden='true' disabled='disabled'><div class='lp_action_wrapper' aria-hidden='true'><div data-lp-point='icon' class='lp_{{className}}' data-lp-type='icon'><img src='{{iconsRepository}}/sprites_v1.png'></div><div class='lp_title' data-lp-point='title' data-lp-cust-id='actionsMenu_actionItem_text'>{{title}}</div></div></button>",iconClass:"",shouldDisableOnActionsHidden:!0,LPViewMap:{title:"^title",icon:"^icon"},spriteName:"sprites_v1.png",initialize:function(a){this.textInjection=a.textInjection;this.models=a.models;this.isEnabled=!0;this.icon=this.getFirstElement(this.LPViewMap.icon);this.wrapper=this.getFirstElement(this.LPViewMap.wrapper);this.featureStateManager=a.appContext.featureStateManager;this.parser=new DOMParser},events:function(){this.bindModel({path:this.uiPath.STATE,callback:a,context:this});this.bindViewEvent({view:this.view,DOMEvent:"click",callback:b});this.appContext.events.bind({appName:"*",eventName:this.EventName.uiState.ACTIONS_TOGGLE,context:this,func:e});this.bindModel({path:this.uiPath.TOP_MENU_VISIBLE,context:this,callback:f})},render:function(){this.setTitle();this.addIconImage();this.setIconClass();"undefined"!=typeof this.isEnabled&&this.setActionState(this.isEnabled)}});g=lpTag.unifiedWindow.ActionViewController.prototype;g.addIconImage=function(){if(this.featureStateManager.isMenuTop()){var a=this.getFirstElement("img",this);this.icon.removeChild(a);if(this.svgFile){var b=this.getFirstElement(this.LPViewMap.icon),c=document.createElement("img");c.setAttribute("src",this.textInjection.iconsRepository+"/"+this.spriteName);this.loadResource(this.svgFile,function(a){var d=this.parser.parseFromString(a,"image/svg+xml").lastChild;if(d&&d instanceof SVGElement){d.appendChild(c);b.appendChild(d)}else b.appendChild(c)},function(){b.appendChild(c)})}else this.svgFiles&&this.loadSvgMap()}};g.loadSvgMap=function(){var a=[],b=[];for(var c in this.svgFiles){b.push(c);a.push(this.svgFiles[c])}this.loadMultiResource(a,function(a){for(var c=0;c<a.length;c++)this.svgFiles[b[c]]=this.parser.parseFromString(a[c],"image/svg+xml").lastChild})};g.setIconClass=function(){this.iconClass&&this.icon&&this.addClass(this.icon,this.iconClass)};g.setTitle=function(a){var b=a||this.translate(this.title);this.featureStateManager.isMenuTop()&&(b=this.replaceCharacter(b,"\n"," "));var e=this.getFirstElement(this.LPViewMap.title);if(e){c(e,b);e.setAttribute("aria-hidden","true")}else this.view.title=b;this.view.setAttribute("aria-label",b);d(this.icon,b)};g.enableAction=function(){this.view.removeAttribute("disabled")};g.disableAction=function(){this.view.setAttribute("disabled","disabled")};g.setActionState=function(a){a?this.enableAction():this.disableAction()};g.setIconURL=function(a){if(this.icon){a.indexOf("/")<0&&(a=this.appContext.conf.unifiedConf.iconsRepository+"/"+a);this.icon.width=this.iconWidth;this.icon.height=this.iconHeight;this.icon.src=a;this.icon.children&&this.icon.children.length>0&&this.icon.children[0]&&(this.icon.children[0].src=a)}};g.disable=function(){if(this.isEnabled){this.isEnabled=!1;this.setActionState(this.isEnabled,this.iconDisabled)}};g.enable=function(){if(!this.isEnabled){this.isEnabled=!0;this.setActionState(this.isEnabled,this.iconEnabled)}};g.focusOnView=function(a){a.origin===this.appConsts.dialog.actions.CANCEL&&a.dialogOpenedFrom!==this.appConsts.views.TOP_MENU&&setTimeout(function(a){a.focus()},0,this.view)};g.toggleSvg=function(a){var b=this.getFirstElement("svg",this.icon);b&&this.icon.removeChild(b);a?this.icon.appendChild(this.svgFiles.disabled):this.icon.appendChild(this.svgFiles.enabled)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};window.lpTag.unifiedWindow.actions=window.lpTag.unifiedWindow.actions||{};!function(){var a;lpTag.unifiedWindow.actions.MuteSoundAction=lpTag.unifiedWindow.ActionViewController.extend({ControllerName:"MuteSoundAction",applicationType:"MuteSoundAction",titles:{mute:"MuteSoundAction",unMute:"UnmuteSoundAction"},title:"MuteSoundAction",isEnabled:!0,disableOnEnd:!0,enableState:[lpTag.unifiedWindow.State.WAITING,lpTag.unifiedWindow.State.CHATTING],iconClasses:{mute:"lp_mute-action-icon",unmute:"lp_unmute-action-icon"},svgFiles:{disabled:"<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'><g fill='none' fill-rule='evenodd'><path fill='#98999A' d='M11.845 3.402c.42.43.655 1.006.655 1.606v9.984a2.296 2.296 0 0 1-3.902 1.64L6.13 14.215a1.5 1.5 0 0 0-1.05-.428H3.949A2.448 2.448 0 0 1 1.5 11.339V8.661a2.448 2.448 0 0 1 2.448-2.448H5.08a1.5 1.5 0 0 0 1.049-.428l2.47-2.417a2.296 2.296 0 0 1 3.246.034zm-2.547.68L6.828 6.5a2.5 2.5 0 0 1-1.748.713H3.948c-.8 0-1.448.648-1.448 1.448v2.678c0 .8.648 1.448 1.448 1.448H5.08a2.5 2.5 0 0 1 1.749.713l2.469 2.418a1.296 1.296 0 0 0 2.202-.926V5.008a1.296 1.296 0 0 0-2.202-.926zm8.991 3.134l.707.707-1.789 1.789 1.92 1.92-.708.707-1.919-1.92-1.92 1.92-.707-.707 1.919-1.92-1.788-1.789.707-.707L16.5 9.005l1.79-1.789z'/></g></svg>",enabled:"<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'><g fill='none' fill-rule='evenodd'><path fill='#98999A' d='M11.823 3.161c.433.43.677 1.014.677 1.623v10.432a2.284 2.284 0 0 1-3.907 1.607l-2.466-2.489a1.5 1.5 0 0 0-1.065-.444H3.948A2.448 2.448 0 0 1 1.5 11.442V8.558A2.448 2.448 0 0 1 3.948 6.11h1.114c.4 0 .784-.16 1.065-.444l2.466-2.49a2.284 2.284 0 0 1 3.23-.015zm-2.52.72L6.838 6.37a2.5 2.5 0 0 1-1.776.74H3.948c-.8 0-1.448.648-1.448 1.448v2.884c0 .8.648 1.448 1.448 1.448h1.114a2.5 2.5 0 0 1 1.776.74l2.465 2.49a1.284 1.284 0 0 0 2.197-.904V4.784a1.284 1.284 0 0 0-2.197-.904zm8.91 1.445l.23.443c1.466 2.816 1.548 5.557.147 8.197l-.156.282-.248.434-.868-.496.248-.434c1.336-2.335 1.357-4.72.132-7.24l-.142-.281-.23-.444.887-.461zm-3.097.977l.29.406c1.61 2.253 1.646 4.488-.013 6.6l-.309.393-.786-.618.309-.393c1.374-1.75 1.346-3.497-.014-5.4l-.29-.407.813-.581z'/></g></svg>"},initialize:function(a){this.featureStateManager=a.appContext.featureStateManager;var b=this.getModelParam(this.uiPath.WINDOW_SOUND);this.setIconClass(b)},events:function(){this.bindModel({path:this.uiPath.WINDOW_SOUND,callback:this.soundStateChanged})}});a=lpTag.unifiedWindow.actions.MuteSoundAction.prototype;a.setIconClass=function(a){this.removeClass(this.icon,a?this.iconClasses.unmute:this.iconClasses.mute);this.addClass(this.icon,a?this.iconClasses.mute:this.iconClasses.unmute)};a.clicked=function(){this.isEnabled&&this.appContext.uiStateManager.setSoundState(!this.soundMuted)};a.soundStateChanged=function(a){if(a&&a.newValue!==this.soundMuted){this.soundMuted=a.newValue;this.featureStateManager.isMenuTop()?this.toggleSvg(this.soundMuted):this.setIconClass(this.soundMuted);this.setTitle(this.soundMuted?this.translate(this.titles.mute):this.translate(this.titles.unMute));this.setActionState(this.isEnabled,this.isEnabled?this.iconEnabled:this.iconDisabled)}}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};window.lpTag.unifiedWindow.actions=window.lpTag.unifiedWindow.actions||{};!function(){function a(a){var d,e,f="",h="";if(a){this.isAsync&&(a=j.sortByKeyValue(a,"time"));for(var i=0;i<a.length;++i){d=c.call(this,a[i]);d&&(f+=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(d.innerHTML).cleanText)}e=window.open("","_blank","scrollbars=yes, resizable=yes, left=0, top=0, width=600, height=600");h=b();e.document.head.innerHTML=h;e.document.body.innerHTML=f;g.call(this,e.document.body,this.isLanguageRTL());e.print();e.opener=null}}function b(){return"<head><style>"+i+"</style></head>"}function c(a){var b,c,g,h=d.call(this,a)?this.templateRepository.systemLine:this.templateRepository.line;if(a.time){b=lpTag.lpUtils.getTime(a.time,this.getMonthNames(),this.translate("dayMonthGap"),this.translate("daySuffix"));this.translator.extendDictionary({time:b},{locale:this.appContext.conf.engConf.lang})}c=e.call(this,a);c&&c.trim()&&(g=this.createView({template:h,wrapWithDiv:!0,doNotAddChild:!0,textInjection:{source:f.call(this,a),text:c,time:b||""}}));return g}function d(a){return"system"===a.source&&this.appContext.conf.engConf.async===!0}function e(a){var b;if(a.textKey){a.dictionaryKey&&this.translator.extendDictionary(a.dictionaryKey,{locale:this.appContext.conf.engConf.lang});b=this.translate(a.textKey)}else if(!b&&a.json||a.type===lpTag.unifiedWindow.consts.chatEvents.RICH_CONTENT)b=this.translate(this.richContentSentKey);else if(!b&&a.fileData||a.type===lpTag.unifiedWindow.consts.chatEvents.FILE_SHARING)b=this.templateString(k,{type:a.fileData.fileType,text:this.translate(this.imageSentKey),caption:a.fileData.caption||""});else{var c,d;a.text=a&&a.text?a.text:"";if(this.appContext.conf.engConf.async&&a&&a.text&&a&&"visitor"!==a.source&&a&&a.type&&"line"===a.type&&this.hyperlinksHelper.textContainsMarkDownSyntax(a.text)){var e=this.hyperlinksHelper.convertMarkdownToTempId(a.text),f=this.hyperlinksHelper.convertAHREFToTempId(e);d=!1;var g=this.sanitizeText(f,{noFormatLink:d}).text,h=this.hyperlinksHelper.convertTempIdToMarkdown(g),i=this.hyperlinksHelper.convertTempIdToAHREF(h),j=this.hyperlinksHelper.parseAllMarkdownFormat(i);c=this.reTargetElementsByType(["A","FORM"],j);b=c;this.hyperlinksHelper.setMarkDownToTemp([]);this.hyperlinksHelper.setAHREFToTemp([])}else{var l=this.hyperlinksHelper.textContainsAHREFSyntax(a.text);this.appContext.conf.engConf.async&&a.text&&l&&"visitor"!==a.source&&a&&a.type&&"line"===a.type&&(a.text=this.hyperlinksHelper.convertAHREFToTempId(a.text));d=!1;a.text=this.sanitizeText(a.text,{noFormatLink:d}).text;if(this.appContext.conf.engConf.async&&a.text&&l&&"visitor"!==a.source&&a&&a.type&&"line"===a.type){var m=this.hyperlinksHelper.convertTempIdToAHREF(a.text),n=this.reTargetElementsByType(["A","FORM"],m);a.text=n;this.hyperlinksHelper.setAHREFToTemp([])}b=a.text}}b=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(b).cleanText;return b}function f(a){var b="";switch(a.source){case"agent":b="info"===a.by?this.translate("info"):lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(a.by).cleanText;break;case"visitor":b=this.getModelParam(this.chatPath.VISITOR_NAME);break;case"system":b=this.translate("info")}return b}function g(a,b){if(b){a.style.direction="rtl";a.style.textAlign="right"}else{a.style.direction="ltr";a.style.textAlign="left"}}var h,i=".lp_print_line_text DIV {display: inline;}",j=lpTag.unifiedWindow.applicationUtils,k="[{{type}}] {{text}} {{caption}}";lpTag.unifiedWindow.actions.PrintTranscriptAction=lpTag.unifiedWindow.ActionViewController.extend({ControllerName:"PrintTranscriptAction",applicationType:"PrintTranscriptAction",iconClass:"lp_print-transcript-action-icon",title:"PrintTranscriptAction",richContentSentKey:"richContentSent",imageSentKey:"imageContentSent",templateRepository:{line:"<div class='lp_print_line'><div class='lp_print__line_time'>{{time}}</div><div class='lp_print_line_text'><span>{{source}}: {{text}}</span></div><div class='lp_print__line_time lp_time_bottom lpHide'>{{time}}</div></div>",systemLine:"<div class='lp_print_line'><div class='lp_print_line_text'><span>{{source}}: {{text}}</span></div></div>"},svgFile:"<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'><g fill='none' fill-rule='evenodd'><path fill='#98999A' d='M14.545 2.227a1.41 1.41 0 0 1 1.403 1.274l.007.135v2.227h.409c1.227 0 2.23.954 2.312 2.16l.006.159v4.545a2.318 2.318 0 0 1-2.16 2.313l-.158.005h-.41v2.228c0 .778-.63 1.409-1.409 1.409h-9.09a1.41 1.41 0 0 1-1.41-1.41v-2.227h-.409a2.318 2.318 0 0 1-2.312-2.159l-.006-.159V8.182c0-1.227.953-2.231 2.16-2.313l.158-.005h.41V3.635a1.41 1.41 0 0 1 1.273-1.402l.136-.007h9.09zm.41 10.091h-9.91v4.955c0 .226.184.409.41.409h9.09a.41.41 0 0 0 .41-.41v-4.954zm-2.637 3.091v1H7.682v-1h4.636zm0-1.818v1H7.682v-1h4.636zm4.046-2.273v1h-.41v1.727h.41c.682 0 1.244-.518 1.311-1.183l.007-.135V8.182c0-.683-.519-1.244-1.184-1.312l-.134-.006H3.636c-.682 0-1.244.518-1.311 1.183l-.007.135v4.545c0 .683.519 1.244 1.184 1.312l.134.006h.41v-1.728l-.41.001v-1h12.728zm-.91-2.727v1h-.909v-1h.91zm-1.818 0v1h-.909v-1h.91zm.91-5.364H5.454a.41.41 0 0 0-.401.327l-.009.082v2.228h9.91V3.636a.41.41 0 0 0-.41-.409z'/></g></svg>",enableOnStart:!0,initialize:function(){this.isAsync=this.appContext.conf.engConf.async;this.hyperlinksHelper=this.appContext.hyperlinksHelper}});h=lpTag.unifiedWindow.actions.PrintTranscriptAction.prototype;h.clicked=function(){var a=this.getModelParam(this.chatPath.LINES);this.printLines(a)};h.printLines=function(b){var c=this;this.loadResource(this.templateRepository.line,function(){a.call(c,b)})}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};window.lpTag.unifiedWindow.actions=window.lpTag.unifiedWindow.actions||{};!function(){var a;lpTag.unifiedWindow.actions.EmailTranscriptAction=lpTag.unifiedWindow.ActionViewController.extend({ControllerName:"EmailTranscriptAction",applicationType:"EmailTranscriptAction",iconClass:"lp_email-transcript-action-icon",title:"EmailTranscriptAction",disableOnEnd:!0,enableOnStart:!0,enableState:lpTag.unifiedWindow.State.CHATTING,isEnabled:!1,iconEnabled:"email_normal.png",iconDisabled:"email_dimmed.png",svgFile:"<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'><g fill='none' fill-rule='evenodd'><path fill='#98999A' d='M16.364 3.136a2.318 2.318 0 0 1 2.318 2.319v10a2.318 2.318 0 0 1-2.318 2.318H3.636a2.318 2.318 0 0 1-2.318-2.318v-10a2.318 2.318 0 0 1 2.318-2.319h12.728zm0 1H3.636c-.728 0-1.318.59-1.318 1.319v10c0 .728.59 1.318 1.318 1.318h12.728c.728 0 1.318-.59 1.318-1.318v-10c0-.728-.59-1.319-1.318-1.319zm-2.169 2.756l.707.707L10 12.501 5.098 7.6l.707-.707L10 11.087l4.195-4.195z'/></g></svg>",initialize:function(){this.isEnabled=!1},events:function(){this.appContext.events.bind({appName:lpTag.unifiedWindow.EmailTranscriptDialogViewController.ControllerName,eventName:this.VCEvents.DIALOG_CLOSED,context:this,func:this.focusOnView})}});a=lpTag.unifiedWindow.actions.EmailTranscriptAction.prototype;a.clicked=function(){if(this.isEnabled){var a={context:this,data:{ControllerName:lpTag.unifiedWindow.EmailTranscriptDialogViewController.ControllerName,dialogOpenedFrom:this.appConsts.views.ACTION_MENU}};this.appContext.events.trigger({appName:this.ControllerName,eventName:this.VCEvents.DIALOG,data:a})}}}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.actions=lpTag.unifiedWindow.actions||{};!function(){var a,b;lpTag.unifiedWindow.actions.EndChatAction=lpTag.unifiedWindow.ActionViewController.extend({ControllerName:"EndChatAction",applicationType:"EndChatAction",iconClass:"lp_end-chat-action-icon",title:"EndChatAction",isEnabled:!0,disableOnEnd:!0,iconEnabled:"end_normal.png",iconDisabled:"end_dimmed.png",svgFile:"<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'><g fill='none' fill-rule='evenodd'><path fill='#FA5A64' d='M5.58 4.395l.805 1.1a6.136 6.136 0 1 0 7.257.02l.81-1.097a7.5 7.5 0 1 1-8.872-.024zm5.102-1.668v9.091H9.318v-9.09h1.364z'/></g></svg>",initialize:function(){b=!0;if(this.appContext.conf.engConf.async){this.enableState=lpTag.unifiedWindow.State.CHATTING;this.featureStateManager.isMenuTop()||(this.disableState=[lpTag.unifiedWindow.State.WAITING,lpTag.unifiedWindow.State.CONNECTION_ISSUE])}else this.enableState=[lpTag.unifiedWindow.State.WAITING,lpTag.unifiedWindow.State.CHATTING]},events:function(){this.appContext.events.bind({appName:lpTag.unifiedWindow.EndChatDialogViewController.ControllerName,eventName:this.VCEvents.DIALOG_CLOSED,context:this,func:this.focusOnView});this.bindModel({path:this.chatPath.CURRENT_DIALOG_TYPE,callback:this.dialogTypeUpdated,context:this})}});a=lpTag.unifiedWindow.actions.EndChatAction.prototype;a.setCloseClass=function(){this.addClass(this,"lp_top_close_action")};a.enable=function(){if(!this.isEnabled&&b){this.isEnabled=!0;this.setActionState(this.isEnabled,this.iconEnabled)}};a.clicked=function(){if(this.isEnabled){this.appContext.events.trigger({appName:this.ControllerName,eventName:this.EventName.viewController.INITIATE_END_CHAT});this.appContext.uiStateManager.setVisibility(this.uiPath.TOP_MENU_VISIBLE,!1)}};a.dialogTypeUpdated=function(a){if(a.newValue===lpTag.AMSStatics.dialog.types.MAIN){b=!0;this.enable()}else if(a.newValue===lpTag.AMSStatics.dialog.types.POST_SURVEY){b=!0;this.enable()}else if(this.featureStateManager.isMenuTop()){b=!0;this.enable()}else{b=!1;this.disable()}this.render()}}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.actions=lpTag.unifiedWindow.actions||{};!function(){var a;lpTag.unifiedWindow.actions.ForgetMeAction=lpTag.unifiedWindow.ActionViewController.extend({ControllerName:"ForgetMeAction",applicationType:"ForgetMeAction",iconClass:"lp_actions-forget-me-icon",title:"ForgetMeAction",isEnabled:!1,disableOnEnd:!1,enableState:[lpTag.unifiedWindow.State.CHATTING,lpTag.unifiedWindow.State.WAITING,lpTag.unifiedWindow.State.POST_CHAT],disableState:[lpTag.unifiedWindow.State.ERROR,lpTag.unifiedWindow.State.APP_ENDED],enableOnStart:!0,iconEnabled:"end_normal.png",iconDisabled:"end_dimmed.png",svgFile:"<svg width='20px' height='20px' viewBox='0 0 20 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><g id='20px/light/clearHistory' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'><path d='M13.2272727,11.8181818 L13.2272727,16.3636364 C13.2272727,16.5613292 13.3675017,16.7262698 13.5539175,16.764416 L13.6363636,16.7727273 L17.2727273,16.7727273 C17.4704201,16.7727273 17.6353607,16.6324983 17.6735069,16.4460825 L17.6818182,16.3636364 L17.6818182,11.8181818 L18.6818182,11.8181818 L18.6818182,16.3636364 C18.6818182,17.0960782 18.1229839,17.6979972 17.4084321,17.7662769 L17.2727273,17.7727273 L13.6363636,17.7727273 C12.9039218,17.7727273 12.3020028,17.213893 12.2337231,16.4993412 L12.2272727,16.3636364 L12.2272727,11.8181818 L13.2272727,11.8181818 Z M14.5454545,2.22727273 C15.7724053,2.22727273 16.7767251,3.18046952 16.8582883,4.38673759 L16.8636364,4.54545455 L16.8636364,7.73093484 L15.8636364,7.73093484 L15.8636364,4.54545455 C15.8636364,3.86294356 15.3449322,3.30158243 14.680231,3.23407835 L14.5454545,3.22727273 L3.63636364,3.22727273 C2.95385265,3.22727273 2.39249152,3.74597692 2.32498744,4.41067811 L2.31818182,4.54545455 L2.31818182,11.8181818 C2.31818182,12.5006928 2.83688601,13.0620539 3.5015872,13.129558 L3.63636364,13.1363636 L5.24924538,13.1363636 C5.49470527,13.1363636 5.69885375,13.3132388 5.74118971,13.546488 L5.74924538,13.6363636 L5.74924538,15.9126983 L9.36831813,13.2344498 C9.43287924,13.1866722 9.50766588,13.1553875 9.5862025,13.1427313 L9.66574929,13.1363636 L10.9802246,13.1363636 L10.9802246,14.1363636 L9.8306382,14.1363636 L6.27161396,16.7701739 C5.8478514,17.083774 5.2501009,16.9944696 4.93650085,16.5707071 C4.83920824,16.4392372 4.77774031,16.2855562 4.75704484,16.1246675 L4.74924538,16.0028839 L4.74924538,14.1363636 L3.63636364,14.1363636 C2.40941286,14.1363636 1.40509312,13.1831668 1.32352993,11.9768988 L1.31818182,11.8181818 L1.31818182,4.54545455 C1.31818182,3.31850377 2.27137861,2.31418403 3.47764668,2.23262084 L3.63636364,2.22727273 L14.5454545,2.22727273 Z M15.0454545,13.1818182 L15.0454545,15.9090909 L14.0454545,15.9090909 L14.0454545,13.1818182 L15.0454545,13.1818182 Z M16.8636364,13.1818182 L16.8636364,15.9090909 L15.8636364,15.9090909 L15.8636364,13.1818182 L16.8636364,13.1818182 Z M19.0909091,10.4090909 L19.0909091,11.4090909 L11.8181818,11.4090909 L11.8181818,10.4090909 L19.0909091,10.4090909 Z M16.8181818,9.04545455 L16.8181818,10.0454545 L14.0909091,10.0454545 L14.0909091,9.04545455 L16.8181818,9.04545455 Z M10,8.59090909 L10,9.59090909 L5.45454545,9.59090909 L5.45454545,8.59090909 L10,8.59090909 Z M12.7272727,6.31818182 L12.7272727,7.31818182 L5.45454545,7.31818182 L5.45454545,6.31818182 L12.7272727,6.31818182 Z' id='Combined-Shape' fill='#979797' fill-rule='nonzero'></path></g></svg>",initialize:function(){},events:function(){this.appContext.events.bind({appName:lpTag.unifiedWindow.ForgetMeDialogViewController.ControllerName,eventName:this.VCEvents.DIALOG_CLOSED,context:this,func:this.focusOnView})}});a=lpTag.unifiedWindow.actions.ForgetMeAction.prototype;a.clicked=function(){if(this.isEnabled){this.appContext.events.trigger({appName:this.ControllerName,eventName:this.EventName.viewController.SHOW_FORGET_ME});this.appContext.uiStateManager.setVisibility(this.uiPath.TOP_MENU_VISIBLE,!1)}}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};window.lpTag.unifiedWindow.actions=window.lpTag.unifiedWindow.actions||{};!function(){function a(){var a=this.getModelParam(this.chatPath.TTR)||{};return a.markUrgencyEnabled?!0:!1}var b,c,d;lpTag.unifiedWindow.actions.MarkUrgencyAction=lpTag.unifiedWindow.ActionViewController.extend({ControllerName:"MarkUrgencyAction",applicationType:"MarkUrgencyAction",titles:{urgent:"MarkUrgentAction",dismiss:"DismissUrgentAction"},title:"MarkUrgentAction",isEnabled:!0,onOffHours:!1,disableOnEnd:!0,disableState:[lpTag.unifiedWindow.State.WAITING,lpTag.unifiedWindow.State.CONNECTION_ISSUE],enableState:lpTag.unifiedWindow.State.CHATTING,iconClasses:{urgent:"lp_mark_urgency-action-icon",dismiss:"lp_dismiss_urgency-action-icon"},svgFiles:{enabled:"<svg width='20px' height='20px' viewBox='0 0 20 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><g stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'><path d='M11.9519742,1.40909091 C12.6845503,1.40909091 13.2784205,2.00296114 13.2784205,2.73553719 L13.278,3.853 L17.9950521,3.85323307 C18.6818422,3.85323307 19.2467228,4.37518933 19.3146501,5.04405793 L19.3215896,5.17967936 C19.3215896,5.46102315 19.232042,5.73508031 19.0660573,5.96224417 L16.7290457,8.16063924 C16.645225,8.27535494 16.645225,8.43111121 16.7290457,8.54582691 L19.0660573,11.744222 C19.4982559,12.3357218 19.3691167,13.1655933 18.7776169,13.597792 C18.5504531,13.7637766 18.2763959,13.8532331 17.9950521,13.8532331 L8.10039136,13.8532331 C7.36781531,13.8532331 6.77394508,13.2593628 6.77394508,12.5267868 L6.77394508,11.6178755 C6.77394508,11.5431361 6.79034361,11.4722268 6.81973895,11.4085493 L2.6446281,11.4090909 C2.53178543,11.4090909 2.42223382,11.3950002 2.3176368,11.3684823 L2.31818182,18.9075392 C2.31818182,19.1836815 2.09432419,19.4075392 1.81818182,19.4075392 C1.57272193,19.4075392 1.36857345,19.230664 1.32623749,18.9974148 L1.31818182,18.9075392 L1.31818182,2.73553719 C1.31818182,2.00296114 1.91205205,1.40909091 2.6446281,1.40909091 L11.9519742,1.40909091 Z M13.278,4.853 L13.2784205,10.0826446 C13.2784205,10.5426049 13.0443068,10.9478851 12.6887398,11.1858246 C12.6414345,11.2581487 12.573551,11.3193125 12.4890928,11.3598524 L12.4890928,11.3598524 L9.37618182,12.8530909 L17.9950521,12.8532331 C18.0642925,12.8532331 18.1317396,12.8312173 18.1876459,12.7903675 C18.3332176,12.6840009 18.3649995,12.4797646 18.2586328,12.334193 L15.9216213,9.13579789 C15.5810331,8.6696746 15.5810331,8.03679154 15.9216213,7.57066826 L18.2586328,5.37227319 C18.2994826,5.31636682 18.3215208,5.24891973 18.3215208,5.17967936 C18.3215208,4.99938805 18.1753434,4.85323307 17.9950521,4.85323307 L13.278,4.853 Z M10.0771818,11.4080909 L7.72815121,11.4085493 C7.75754655,11.4722268 7.77394508,11.5431361 7.77394508,11.6178755 L7.77318182,12.5140909 L10.0771818,11.4080909 Z M11.9519742,2.40909091 L2.6446281,2.40909091 C2.4643368,2.40909091 2.31818182,2.55524589 2.31818182,2.73553719 L2.31818182,10.0826446 C2.31818182,10.2629359 2.4643368,10.4090909 2.6446281,10.4090909 L11.9519742,10.4090909 C12.1322655,10.4090909 12.2784205,10.2629359 12.2784205,10.0826446 L12.2784205,2.73553719 C12.2784205,2.55524589 12.1322655,2.40909091 11.9519742,2.40909091 Z' id='Combined-Shape' fill='#98999A'></path></g></svg>",disabled:"<svg width='20px' height='20px' viewBox='0 0 20 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><g stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'><path d='M1.81818182,5.2265625 C2.06364171,5.2265625 2.26779019,5.40343766 2.31012615,5.63668687 L2.31818182,5.7265625 L2.31818182,10.0826446 C2.31818182,10.2403995 2.43008172,10.3720188 2.57883779,10.4024587 L2.6446281,10.4090909 L8.2489624,10.4090909 C8.52510478,10.4090909 8.7489624,10.6329485 8.7489624,10.9090909 C8.7489624,11.1545508 8.57208724,11.3586993 8.33883803,11.4010352 L8.2489624,11.4090909 L7.72815121,11.4085493 C7.75754655,11.4722268 7.77394508,11.5431361 7.77394508,11.6178755 L7.77394508,12.5267868 C7.77394508,12.7070781 7.92010006,12.8532331 8.10039136,12.8532331 L10.628418,12.8532331 C10.9045603,12.8532331 11.128418,13.0770907 11.128418,13.3532331 C11.128418,13.6293754 10.9045603,13.8532331 10.628418,13.8532331 L8.10039136,13.8532331 C7.36781531,13.8532331 6.77394508,13.2593628 6.77394508,12.5267868 L6.77394508,11.6178755 C6.77394508,11.5431361 6.79034361,11.4722268 6.81973895,11.4085493 L2.6446281,11.4090909 C2.53178543,11.4090909 2.42223382,11.3950002 2.3176368,11.3684823 L2.31818182,18.9075392 C2.31818182,19.1836815 2.09432419,19.4075392 1.81818182,19.4075392 C1.57272193,19.4075392 1.36857345,19.230664 1.32623749,18.9974148 L1.31818182,18.9075392 L1.31818182,5.7265625 C1.31818182,5.45042013 1.54203944,5.2265625 1.81818182,5.2265625 Z M1,1.29289322 L18.2071068,18.5 L17.5,19.2071068 L0.292893219,2 L1,1.29289322 Z M11.9519742,1.40909091 C12.6387643,1.40909091 13.2036449,1.93104716 13.2715722,2.59991576 L13.2784205,2.73553719 L13.278,3.853 L17.9950521,3.85323307 C18.6818422,3.85323307 19.2467228,4.37518933 19.3146501,5.04405793 L19.3215896,5.17967936 C19.3215896,5.41413252 19.2593759,5.64352552 19.1426124,5.84493783 L19.0660573,5.96224417 L16.7290457,8.16063924 C16.6619891,8.2524118 16.6485778,8.37045032 16.6888117,8.47272927 L16.7290457,8.54582691 L19.0660573,11.744222 C19.4982559,12.3357218 19.3691167,13.1655933 18.7776169,13.597792 C18.5883137,13.7361125 18.3664457,13.8212885 18.1349334,13.8458382 L17.9950521,13.8532331 L14.6396484,13.8532331 C14.3635061,13.8532331 14.1396484,13.6293754 14.1396484,13.3532331 C14.1396484,13.1077732 14.3165236,12.9036247 14.5497728,12.8612887 L14.6396484,12.8532331 L17.9950521,12.8532331 C18.0642925,12.8532331 18.1317396,12.8312173 18.1876459,12.7903675 C18.3124216,12.6991961 18.3535967,12.5361205 18.2958315,12.3997161 L18.2586328,12.334193 L15.9216213,9.13579789 C15.6094154,8.70851821 15.5833983,8.141114 15.8435698,7.69048024 L15.9216213,7.57066826 L18.2586328,5.37227319 C18.2994826,5.31636682 18.3214984,5.24891973 18.3214984,5.17967936 C18.3214984,5.02192447 18.2095985,4.8903052 18.0608424,4.8598653 L17.9950521,4.85323307 L13.278,4.853 L13.2784205,10.0826446 C13.2784205,10.7133897 12.8350728,11.2530478 12.2248172,11.3808976 C11.9545424,11.4375207 11.6895394,11.2643218 11.6329163,10.9940471 C11.5762932,10.7237723 11.7494921,10.4587693 12.0197668,10.4021462 C12.1442037,10.3760764 12.2408664,10.2793151 12.2696307,10.1580064 L12.2784205,10.0826446 L12.2784205,2.73553719 C12.2784205,2.5777823 12.1665206,2.44616303 12.0177645,2.41572314 L11.9519742,2.40909091 L3.6446281,2.40909091 C3.36848572,2.40909091 3.1446281,2.18523328 3.1446281,1.90909091 C3.1446281,1.66363102 3.32150326,1.45948254 3.55475247,1.41714658 L3.6446281,1.40909091 L11.9519742,1.40909091 Z' id='Combined-Shape' fill='#98999A' fill-rule='nonzero'></path></g></svg>"},initialize:function(){c=!1;d=!0},events:function(){this.bindModel({path:this.chatPath.TTR,callback:this.urgencyStateChanged,context:this});this.bindModel({path:this.chatPath.CURRENT_DIALOG_TYPE,callback:this.dialogTypeUpdated,context:this})},render:function(){this.setIconClass();this.setTitle(c?this.translate(this.titles.dismiss):this.translate(this.titles.urgent));this.featureStateManager.isMenuTop()?this.toggleSvg(c):this.setIconClass()}});b=lpTag.unifiedWindow.actions.MarkUrgencyAction.prototype;b.enable=function(){if(!this.isEnabled&&a.call(this)&&d){this.isEnabled=!0;this.setActionState(this.isEnabled,this.iconEnabled)}};b.urgencyStateChanged=function(a){c=a.newValue.isUrgent;a.newValue.markUrgencyEnabled?this.enable():this.disable();this.render()};b.setIconClass=function(){this.removeClass(this.icon,c?this.iconClasses.urgent:this.iconClasses.dismiss);this.addClass(this.icon,c?this.iconClasses.dismiss:this.iconClasses.urgent)};b.clicked=function(){if(this.isEnabled){c=!c;this.render();this.appContext.conversationManager.setConversationUrgency(c)}};b.dialogTypeUpdated=function(a){if(a.newValue===lpTag.AMSStatics.dialog.types.MAIN){d=!0;this.enable()}else{d=!1;this.disable()}this.render()}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};window.lpTag.unifiedWindow.actions=window.lpTag.unifiedWindow.actions||{};!function(){function a(){this.setIconURL(this.appContext.conf.unifiedConf.imagesRepository+"/Icon_attach.png");var a=document.createElement("div");a.className=this.wrapper.className;a.innerHTML=this.wrapper.innerHTML;a.setAttribute("aria-label",this.wrapper.getAttribute("aria-label"));this.view.parentNode.replaceChild(a,this.view);this.view=a;var c=document.createElement("input");c.id="LPfileUpload";c.type="file";c.setAttribute("accept",e);c.setAttribute("class","lp_action_file_input");c.onchange=b.bind(this);this.view.appendChild(c);this.fileUploader=c}function b(){if(this.fileUploader.files.length>0){d=this.fileUploader.files[0];this.fileUploader.value="";if(d){this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.FILE_SHARE,eventName:lpTag.unifiedWindow.events.imageShare.IMAGE_SELECTED,data:{image:d}});d=null}}}var c,d,e=".png, .jpg, .gif, .pdf, .docx, .xlsx, .pptx";lpTag.unifiedWindow.actions.PhotoSharingAction=lpTag.unifiedWindow.ActionViewController.extend({ControllerName:"PhotoSharingAction",applicationType:"PhotoSharingAction",iconClass:"lp_add-attachment-action-icon",title:"AddAttachmentAction",isEnabled:!0,disableOnEnd:!0,enableOnStart:!0,enableState:lpTag.unifiedWindow.State.CHATTING,initialize:function(a){},events:function(){},render:function(){a.call(this)}});c=lpTag.unifiedWindow.actions.PhotoSharingAction.prototype;c.disable=function(){if(this.isEnabled){this.isEnabled=!1;this.disableAction();this.fileUploader.setAttribute("disabled","disabled")}};c.enable=function(){if(!this.isEnabled){this.isEnabled=!0;this.enableAction();this.fileUploader.removeAttribute("disabled")}}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){var a,b,c,d,e;lpTag.unifiedWindow.ActionsManagerViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"ActionsManagerViewController",template:"<div class='lp_action_placeholder_wrapper' data-lp-point='action_placeholder_wrapper'></div><div class='lp_action_items_wrapper' data-lp-point='action_items_wrapper' data-lp-cust-id='action_items_wrapper'></div>",LPViewMap:{actionsBar:"^actions_bar",actionItemsWrapper:"^action_items_wrapper",actionPlaceholderWrapper:"^action_placeholder_wrapper",actionWrapper:"^action_placeholder"},initialize:function(a){b=this.appContext.conf.unifiedConf;c=this.appContext.conf.engConf;d=this.appContext.deviceDetector;e=this.appContext.featureStateManager;this.actions=[];this.models=a.models},events:function(){},render:function(){var a=this;this.loadResource("<div class='lp_action_placeholder' data-lp-cust-id='actionsMenu_actionItem'></div>",function(b){a.actionsResourceLoaded(b);a.customize(a.view);a.handleWindowLocation(a.view)})}});a=lpTag.unifiedWindow.ActionsManagerViewController.prototype;a.addAction=function(a){var b={action:a};this.actions.push(b);var c=this.getFirstElement(this.LPViewMap.actionItemsWrapper,this.view);c.appendChild(a.view);this.css(a.view,{display:"inline-block"});e.isMenuTop()&&d.isIE()&&this.css(a.view,{"-ms-grid-row":this.actions.length});"EndChatAction"===a.ControllerName&&e.isMenuTop()&&this.addClass(a.view,"lp_top_close_action")};a.actionsResourceLoaded=function(a){this.addActionsMenuWrappers(a);
this.addActions()};a.addActionsMenuWrappers=function(a){for(var c=3,d=2,e=0;d*c>e;e++)this.createView({template:a,target:this.LPViewMap.actionPlaceholderWrapper,wrapWithDiv:!1,textInjection:b})};a.addActions=function(){var a=lpTag.unifiedWindow.actions,b=this.appContext.conf.windowConf,f=this.getActionViewData();c.async&&b.sendImage&&!e.isMenuTop()&&this.addAction(new a.PhotoSharingAction(f));(!b||b.email!==!1&&!c.async)&&this.addAction(new a.EmailTranscriptAction(f));b&&b.print===!1||!d.isDesktop()||this.addAction(new a.PrintTranscriptAction(f));b&&b.sound===!1||!d.isDesktop()||this.addAction(new a.MuteSoundAction(f));if(c.async){b.markAsUrgent!==!1&&this.addAction(new a.MarkUrgencyAction(f));c.allowUnauthMsg===!0&&b.clearHistory&&this.addAction(new a.ForgetMeAction(f))}this.addAction(new a.EndChatAction(f))};a.handleWindowLocation=function(){e.isMenuTop()&&this.addClass("^action_items_wrapper","lp_action_items_wrapper_top")};a.getActionViewData=function(){return{engConf:c,wrapWithDiv:!1,appContext:this.appContext,models:this.models,unifiedConf:b,textInjection:b}}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a,c){var d=c.newValue,e=this.getFirstElement(this.LPViewMap[a]);if(d){this.activeMenu=a;this.show(e)}else this.hide(e);b.call(this,a)}function b(a){var b=this.getFirstElement(this.LPViewMap.bottomLogo);this.isLogoEnabled&&a!==this.ActionType.EMOJI||this.activeMenu===this.ActionType.MENU?this.show(b):this.hide(b)}var c,d,e;lpTag.unifiedWindow.ActionsBarViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"ActionsBarViewController",templateFile:"<div class='lp_actions_bar_container lpc_menu {{deviceClass}}' data-lp-point='actions_bar_container' data-lp-cust-id='actionsMenu'><div class='lp_actions_bar' data-lp-point='actions_bar'></div><div class='lp_emoji_bar' data-lp-point='emoji_bar'></div><div class='lp_bottom_logo_bar lpc_menu__banner {{deviceClass}} {{logoClass}}' data-lp-point='bottom_logo'><span data-lp-type='icon' class='lp_bottom-logo-icon'><img src='{{imagesRepository}}/LP-logo-bottom.png' data-lp-cust-id='bottomLogo' alt='LivePerson'></span></div></div>",LPViewMap:{actionsBarContainer:"^actions_bar_container",bottomLogo:"^bottom_logo",MENU:"^actions_bar",EMOJI:"^emoji_bar",MENU_TOP:"^top_menu"},ActionType:{EMOJI:"EMOJI",MENU:"MENU",MENU_TOP:"MENU_TOP"},preInitView:function(a){a.textInjection.logoClass=a.textInjection.hide_lp_logo?"lpHide":""},initialize:function(a){c=this.appContext.conf.unifiedConf;d=this.appContext.conf.engConf;e=this.appContext.deviceDetector;this.actions=[];this.featureStateManager=a.appContext.featureStateManager;this.models=a.models;this.isLogoEnabled=!a.textInjection.hide_lp_logo;this.emojiEnabled=this.featureStateManager.emojiEnabled();this.activeMenu=null;this.actionsVC=new lpTag.unifiedWindow.ActionsManagerViewController({models:this.models,appContext:this.appContext,textInjection:this.appContext.conf.unifiedConf});this.addViewController({viewController:this.actionsVC,target:this.LPViewMap.MENU});this.hide(this.getFirstElement(this.LPViewMap[this.ActionType.MENU]));if(this.emojiEnabled){this.emojiVC=new lpTag.unifiedWindow.EmojiManagerViewController({textareaDomEl:a.textareaDomEl,models:this.models,appContext:this.appContext,textInjection:this.appContext.conf.unifiedConf});this.addViewController({viewController:this.emojiVC,target:this.LPViewMap.EMOJI});this.hide(this.getFirstElement(this.LPViewMap[this.ActionType.EMOJI]))}},events:function(){this.bindModel({path:this.uiPath.ACTIONS_VISIBLE,callback:a.bind(this,this.ActionType.MENU)});this.bindModel({path:this.uiPath.EMOJI_VISIBLE,callback:a.bind(this,this.ActionType.EMOJI)})}});var f=lpTag.unifiedWindow.ActionsBarViewController.prototype;f.getActiveMenu=function(){return this.activeMenu};f.hideActionBar=function(){this.emojiEnabled&&this.appContext.uiStateManager.setVisibility(this.uiPath.EMOJI_VISIBLE,!1);this.appContext.uiStateManager.setVisibility(this.uiPath.ACTIONS_VISIBLE,!1)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){var b=this;a.addEventListener("click",function(a){e.call(b,a)})}function b(a){var b=this.textareaDomEl.value+a;if(b){this.textareaDomEl.value=b;c.call(this);d.call(this)}}function c(){this.appContext.events.trigger({appName:"*",eventName:"sendButton",data:{enabled:!0}})}function d(){this.appContext.events.trigger({appName:"*",eventName:"emojiFocus"})}function e(a){var c=a.target&&a.target.innerText;c&&b.call(this,c)}lpTag.unifiedWindow.EmojiManagerViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"EmojiManagerViewController",templateFile:"<table class='lp_emoji_table lp_disable_select'><tbody class='lp_emoji_table_body'><tr><td><button>&#128512;</button></td><td><button>&#128513;</button></td><td><button>&#128521;</button></td><td><button>&#128540;</button></td><td><button>&#128533;</button></td><td><button>&#128544;</button></td><td><button>&#128556;</button></td></tr><tr><td><button>&#128077;</button></td><td><button>&#128078;</button></td><td><button>&#128526;</button></td><td><button>&#128514;</button></td><td><button>&#128515;</button></td><td><button>&#128522;</button></td><td><button>&#128523;</button></td></tr><tr><td><button>&#128524;</button></td><td><button>&#128564;</button></td><td><button>&#128555;</button></td><td><button>&#128549;</button></td><td><button>&#128563;</button></td><td><button>&#128527;</button></td><td><button>&#128543;</button></td></tr><tr><td><button>&#128545;</button></td><td><button>&#128561;</button></td><td><button>&#128553;</button></td><td><button>&#128532;</button></td><td><button>&#128079;</button></td><td><button>&#128076;</button></td><td><button>&#128591;</button></td></tr></tbody></table>",LPViewMap:{button:"^emoji_clicker",emojiTable:"lp_emoji_table"},initialize:function(a){this.textareaDomEl=a.textareaDomEl;this.appContext=a.appContext},events:function(){},render:function(){for(var b=this.getElements("td",this.view),c=0;c<b.length;c++)a.call(this,b[c])}})}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){var b={line:a.line,targetToReplace:a.view,callback:this.addEvent.bind(this,a.line.history,a.line.track),context:this,replace:!0};this.chatLineFactory.createLine(b)}function b(a,b){var c=this.getWidgetContent(),d=this.getFirstElement(this.LPViewMap.linesArea,c);a&&this.isDOMNode(b)&&this.isDOMNode(d)&&d.replaceChild(a,b)}function c(a){var b=this.getFirstElement(this.LPViewMap.dateLine,this.view),c=this.getFirstElement(this.LPViewMap.dateLine,a),d=this.getWidgetContent(),e=this.getFirstElement(this.LPViewMap.linesArea,d),f=e.firstElementChild,g=c?c.parentElement:null,h=b?b.parentElement:null,i=this.util.getPropertyFromObject(g,"previousElementSibling.classList",!1);i&&i.contains("lp_chat_line_wrapper_auto")&&(c.style.paddingTop="3px");if(h&&f&&h===f){b.style.paddingTop="3px";if(this.lastFirstDateLine!==h){this.lastFirstDateLine&&(this.lastFirstDateLine.style.paddingTop="");this.lastFirstDateLine=h}}}function d(a){this.trackInView({view:a,inView:this.view.parentNode,callback:q,bindOnce:!0,trackBottom:!1})}function e(a,b){var c=this.getWidgetContent(),d=this.getFirstElement(this.LPViewMap.linesArea,c);b&&this.firstLineView?d.insertBefore(a,this.firstLineView):d.appendChild(a)}function f(a){a.view.setAttribute("role","alert")}function g(a){a.view&&a.view.removeAttribute("role")}function h(a,b){var c=this,d="number"==typeof a?a:this.scrollToBottomTimeout;setTimeout(function(){if(c.view&&c.view.parentNode){c.view.parentNode.scrollTop=c.getWidgetContent().scrollHeight;c.changedScroll=!0;b&&"function"==typeof b&&b.call(c)}},d);i.call(this)}function i(){this.appContext&&this.appContext.events&&this.appContext.events.trigger({appName:"*",eventName:this.VCEvents.LINES_VIEWED})}function j(){return lpTag.unifiedWindow.State.CHATTING===this.getModelParam(this.uiPath.STATE)}function k(a){var b=a.newValue;this.firstLineView=this.getFirstElement(this.LPViewMap.lineWrapper,this.view);if(b&&b.length>0){var c=j.call(this),d=G.call(this,b);d&&(d.text=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(d.text).cleanText);if(b[0].isWelcomeMessage){b[0].text=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(b[0].text).cleanText;if(b.length>1){var e=b.shift();b.push(e)}}var f,g=null,h=null,i=!1;if(this.view&&this.isDOMNode(this.view)&&this.view.parentNode&&this.isDOMNode(this.view.parentNode)&&this.getWidgetContent()){g=this.view.parentNode.scrollTop;h=this.getWidgetContent().scrollHeight-this.view.parentNode.clientHeight;m.call(this)&&(i=!0)}for(var k=0;k<b.length;k++){f=b[k];if(f.update)t.call(this,f,b[k-1]);else{l.call(this);this.isLineGroupingEnabled&&r.call(this,f);s.call(this,f);n.call(this,f);var o=p.call(this,f);if(o||c&&!f.history&&d&&f.localId===d.localId){C.call(this);B.call(this,f)}this.lastLine=f;this.lastLineHistory=f.history?f:this.lastLineHistory}}if(this.view&&this.isDOMNode(this.view)&&this.view.parentNode&&this.isDOMNode(this.view.parentNode)&&this.getWidgetContent()){var q=null;if(i)q=this.getWidgetContent().scrollHeight;else if(0===g)q=0;else if(g&&h){var u=this.getWidgetContent().scrollHeight-this.view.parentNode.clientHeight;q=g+(u-h)}if(q){this.view.parentNode.scrollTop=q;this.changedScroll=!0}}c&&d&&!d.history&&"visitor"===d.source&&!d.update&&C.call(this)}}function l(){this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.RICH_CONTENT,eventName:this.EventName.richContent.DISABLE_RICH_CONTENT})}function m(){return this.view&&this.isDOMNode(this.view)&&this.view.parentNode&&this.isDOMNode(this.view.parentNode)?this.view.parentNode.scrollHeight-this.view.parentNode.scrollTop===this.view.parentNode.clientHeight:null}function n(a){var b=o.call(this,a);b&&C.call(this)}function o(a){if(!a.history&&this.windowConf.welcomeMessage&&this.windowConf.welcomeMessage.quickRepliesState&&this.windowConf.welcomeMessage.quickRepliesState.isRequired&&this.windowConf.welcomeMessage.quickRepliesState.isRenedered&&!this.windowConf.welcomeMessage.quickRepliesState.isRemoved){this.windowConf.welcomeMessage.quickRepliesState.isRemoved=!0;return!0}return!1}function p(a){if(a.isWelcomeMessage&&this.windowConf.welcomeMessage&&this.windowConf.welcomeMessage.quickRepliesState&&this.windowConf.welcomeMessage.quickRepliesState.isRequired&&!this.windowConf.welcomeMessage.quickRepliesState.isRenedered){this.windowConf.welcomeMessage.quickRepliesState.isRenedered=!0;this.windowConf.welcomeMessage.quickRepliesState.isRemoved=!1;return!0}return!1}function q(){this.appContext.events.trigger({appName:"*",eventName:this.VCEvents.CONVERSATIONS_VIEWED,data:{retry:!1,changedScroll:this.changedScroll}});if(this.changedScroll){this.changedScroll=!1;d.call(this,this.getFirstElement(this.LPViewMap.lineWrapper,this.view))}}function r(a){var b=this.appContext.featureStateManager.getBubbleStyles(),c=a.history?this.lastLineHistory:this.lastLine,d=a.history?this.groupingTimeHistory:this.groupingTime,e=this.timeStampManager.getEpochTime(a.time);if("visitor"===a.source||"agent"===a.source||"system"===a.source){var f=d?3e5>e-d&&e-d>0:!1;if(c&&a.source===c.source&&f)("system"!=a.source||a.text)&&(a.grouped="end");else{if(a.history){this.lastLineHistory=null;this.groupingTimeHistory=e}else{this.lastLine=null;this.groupingTime=e}c=null;a.grouped="start"}}!c||"visitor"!==c.source&&"agent"!==c.source&&"system"!==c.source||"end"!==a.grouped||"start"===c.grouped&&"default"!==b[c.source]?c&&"start"===c.grouped?z.call(this,c,{dispose:!0,nextLine:a}):c&&z.call(this,c,{dispose:!0}):z.call(this,c,{grouped:"body",nextLine:a})}function s(a){if(a.state===this.messageStates.PENDING&&this.isAsync){delete a.state;setTimeout(u.bind(this,a.localId),this.updatePendingStateTimeOut)}x.call(this,a)}function t(a){this.isAsync&&"visitor"===a.source&&v.call(this,a)}function u(a){for(var b,c=this.models.chatModel.get(this.chatPath.LINES)||[],d=0;d<c.length;d++)if(c[d].localId===a){b=c[d];break}b&&b.state===this.messageStates.PENDING&&t.call(this,b)}function v(a){var b=this.appContext.conf.windowConf.readNotificationsType?this.appContext.conf.windowConf.readNotificationsType:this.LPReadNotificationsTypes.text.value;if(!isNaN(a.localId)){var c,d=this.getFirstElement("#"+this.LINE_ID_PREFIX+a.localId,this.view),e=d.className,f=e.match(this.STATE_CLASS_PREFIX_REGEX),g=this.LINE_CLASS_PREFIX+a.state;f&&this.removeClass(d,f[0]);a.state===this.messageStates.ERROR&&this.LPReadNotificationsTypes.visual.value===b?this.addClass(d,g+"_"+this.LPReadNotificationsTypes.visual.value):this.addClass(d,g);c=this.getFirstElement(this.LPViewMap.lineState,d);O.call(this,a,c);z.call(this,a.localId-1,{nextLine:a})}}function w(a){var b=a.line,c=a.timeStamp;if(!isNaN(b.localId)){var d=this.getFirstElement("#"+this.LINE_ID_PREFIX+b.localId,this.view);if(d){var e=this.getFirstElement(this.LPViewMap.time,d),f=this.getFirstElement(this.LPViewMap.time+"_bottom",d),g=this.getFirstElement(this.LPViewMap.time+"_side",d);P.call(this,b,e,c);P.call(this,b,f,c);P.call(this,b,g,c,!0)}}}function x(a){var b={line:a,callback:this.addEvent.bind(this,a.history,a.track),context:this};if(this.timeStampGroupingEnabled){var c=this.timeStampManager.getDayId(b.line.time),d=this.getFirstElement("#lp_date_line_"+c,this.view),e=this.getWidgetContent(),f=this.getFirstElement(this.LPViewMap.linesArea,e),g=d?d.parentElement:null,h=this.timeStampManager.getEpochTime(a.time);if(d){if(h&&h<this.DateLineState[c]){this.firstLineView===g&&(this.firstLineView=this.firstLineView.nextElementSibling);f.removeChild(g);this.DateLineState[c]=h;y.call(this,b,c)}}else{this.DateLineState[c]=h;y.call(this,b,c)}}if(a.textType===this.appConsts.RichContent.RICH_CONTENT_LINE)this.richContentFactory.createRichContentLine(b);else switch(a.type){case this.appConsts.chatEvents.SECURE_FORM:this.secureFormLineFactory.createSecureFormLine(b);break;case this.appConsts.chatEvents.INFO:this.autoMessageFactory.createAutoMessage(b);break;case this.appConsts.chatEvents.RICH_CONTENT:this.richContentFactory.createRichContentLine(b);break;case this.appConsts.chatEvents.FILE_SHARING:this.fileContentFactory.createFileContentLine(b);break;default:this.chatLineFactory.createLine(b)}}function y(a,b){var c={line:this.util.clone(a.line),callback:this.addEvent.bind(this,a.line.history,a.line.track),context:this},d=this.timeStampManager.getDayString(a.line.time);c.line.source="system";c.line.subType="dateGrouping";c.line.html=d;c.line.localId=b;c.callback=this.addEvent.bind(this,c.line.history,c.line.track);this.dateLineFactory.createDateMessage(c)}function z(a,b){var c="number"==typeof a.localId?a.localId:a;"number"==typeof c&&this.appContext.events.trigger({appName:"*",eventName:this.VCEvents.LINE_UPDATE+c,data:{newValue:b}})}function A(a){return a&&a.quickReplies}function B(a){if(A(a)){var b=this.getWidgetContent(),c=this.getFirstElement(this.LPViewMap.linesArea,b);this.quickRepliesDecorator.decorate(c,a);h.call(this)}}function C(){this.quickRepliesDecorator.dispose()}function D(a){return a.type===this.appConsts.chatEvents.INFO||"system"===a.source}function E(a){return!(D.call(this,a)&&"conversationResolved"!==a.subType||F.call(this,a))}function F(a){return"REGULAR"===a.subType&&""===a.text&&"line"===a.type&&"plain"===a.textType}function G(a){var b=a||this.models.chatModel.get(this.chatPath.LINES)||[];return b.filter(E.bind(this)).pop()}function H(){C.call(this)}function I(){if(this.addLogo){this.logoVC=new lpTag.unifiedWindow.LogoViewController({appContext:this.appContext,context:this});this.addViewController({viewController:this.logoVC,target:this.LPViewMap.logoArea})}}function J(a,b){if(this.addAgentImage&&!this.appContext.conf.unifiedConf.connectorsSfConfig){"undefined"==typeof a&&(b=this.DEFAULT_AGENT_IMAGE);this.createView({template:"<div class='lp_agent_image_area_wrapper lpc_hero-image-area__image-wrapper lpc_hero-image-area__image-wrapper_maximized {{deviceClass}}' data-lp-cust-id='agent'><img class='lp_image lpc_hero-image-area__image lpc_hero-image-area__image_maximized {{deviceClass}}' src='{{url}}' alt='' data-lp-cust-id='agentImage' aria-hidden='true'></div>",wrapWithDiv:!1,textInjection:{url:K.call(this,b)},target:this.getFirstElement(this.LPViewMap.agentImageArea),context:this})}}function K(a){var b=this.appContext.conf.unifiedConf;return a.indexOf(this.LE_LEGACY_AGENT_URL_PREFIX)>-1?b.agentImageRepository+"/"+a.replace(/^.*[\\\/]/,""):L(a)?a:b.agentImageRepository+"/"+a}function L(a){return null!==a.match(/^http[s]*/)}function M(){if(this.addRotator){this.rotator=new lpTag.unifiedWindow.RotatorViewController({models:this.models,appContext:this.appContext,context:this});this.addViewController({viewController:this.rotator,target:this.LPViewMap.rotatorArea})}}function N(){var a=this.getWidgetContent();a.setAttribute("aria-live","assertive");a.setAttribute("aria-relevant","additions");a.setAttribute("aria-atomic","false")}function O(a,b){var c=this.appContext.conf.windowConf.readNotificationsType?this.appContext.conf.windowConf.readNotificationsType:this.LPReadNotificationsTypes.text.value,d=this.translate(this.LINE_STATE_TRANSLATE_PREFIX+a.state),e=d;this.lineStateSupported&&(e=this.getLineStateText(c,a));if(a.state===this.messageStates.ERROR&&this.LPReadNotificationsTypes.visual.value!==c){b.innerHTML="";e=Q.call(this,a)||e;var f=R.call(this,a);this.createView({template:f,target:b,textInjection:{wrapperClass:this.LPClassMap.transcriptError,text:e,url:this.errorIconURL,id:a.localId,error:this.translate("errorIconAltText")}});a.type===lpTag.unifiedWindow.consts.chatEvents.FILE_SHARING&&this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.FILE_SHARE,eventName:lpTag.unifiedWindow.events.imageShare.FILE_DONE_UPLOADED+":"+a.localId,data:{showLoader:!1,error:!0,canRetry:a.canRetry}})}else{b.innerHTML=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(e).cleanText||"";b.title=e?d:""}}function P(a,b,c,d){var e=b&&b.childNodes||[],f=e.length>0?e[e.length-1]:{},g=c.replace(/&nbsp;/g," ");d&&(g=g.replace(" - ",""));f.textContent=g||"";b&&("visitor"===a.source?b.title=this.getModelParam(this.chatPath.VISITOR_NAME)+g:b.title=a.by+g)}function Q(a){switch(a.type){case lpTag.unifiedWindow.consts.chatEvents.FILE_SHARING:return a.canRetry?this.translate("messagingState_image_RETRY"):this.translate("messagingState_image_ERROR")}}function R(a){switch(a.type){case lpTag.unifiedWindow.consts.chatEvents.FILE_SHARING:return this.chatLineErrorStateNoIcon;default:return this.chatLineErrorState}}function S(){T.call(this);if(this.scrollOnMaximized){this.scrollOnMaximized=!1;h.call(this,0)}}function T(){var a=this.getModelParam(this.uiPath.WINDOW_MAXIMIZED),b=this.lastLineViewedOnMinimize,c=this.appContext.conf.unifiedConf.scrollChatWindowOnMaximize;if(a&&b&&c===this.ScrollChatWindowOnMaximizeOptions.toBottom){var d=this.getModelParam(this.uiPath.LAST_LINE_VIEWED)||{};d&&b.localId!==d.localId&&h.call(this)}this.lastLineViewedOnMinimize={}}function U(){this.lastLineViewedOnMinimize=this.getModelParam(this.uiPath.LAST_LINE_VIEWED)||{}}function V(){var a=this.getModelParam(this.uiPath.WINDOW_MAXIMIZED);this.scrollOnMaximized=!a}var W;lpTag.unifiedWindow.TranscriptViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"TranscriptViewController",applicationType:"TranscriptViewController",template:"<div class='lp_lpview_widgetContent transcript_scroll lpc_layout lpc_layout_maximized {{deviceClass}}' data-lp-cust-id='transcriptArea' role='log' aria-label='{{transcriptAreaLabel}}'><div class='lpc_banner-image-area lpc_banner-image-area_maximized {{deviceClass}}' data-lp-point='logo_area'></div><div class='lpc_hero-image-area lpc_hero-image-area_maximized {{deviceClass}}' data-lp-point='agent_image_area'></div><div class='lpc_history-spinner lpc_history-spinner_maximized {{deviceClass}}' data-lp-point='rotator_area'></div><div class='lpc_transcript lpc_transcript_maximized {{deviceClass}}' data-lp-point='lines_area'></div></div>",className:"lp_transcript_widget",scrollToBottomTimeout:300,removeAccessibilityAttrsTimeout:100,STATE_CLASS_PREFIX_REGEX:/state_[\w]+/gi,LINE_ID_PREFIX:"lp_line_",LINE_CLASS_PREFIX:"state_",LINE_STATE_TRANSLATE_PREFIX:"messagingState_",DEFAULT_AGENT_IMAGE:"agent1.png",LE_LEGACY_AGENT_URL_PREFIX:"/campaigns/assets/img/engagementWindow",messageStates:lpTag.unifiedWindow.MessageState,uiPath:lpTag.unifiedWindow.uiModelPath,chatLineErrorState:"<div class='{{wrapperClass}}wrapper'><span id='error_message_{{id}}' class='lp_error_text lp_text' data-lp-point='errorText' role='alert'>{{text}}</span> <span class='lp_warning'>!<span class='lp_voice_error'>{{error}}</span></span></div>",chatLineErrorStateNoIcon:"<div class='{{wrapperClass}}wrapper'><span id='error_message_{{id}}' class='lp_error_text lp_text lp_rtl' data-lp-point='errorText' role='alert'>{{text}}</span></div>",updatePendingStateTimeOut:2e3,scrollOnMaximized:!1,changedScroll:!1,util:lpTag.taglets.lpUtil,LPViewMap:{widgetContent:".lp_lpview_widgetContent",linesArea:"^lines_area",element:".lp_lpview_agent_is_typing",lineState:"^lp_line_state",agentImage:".lp_agent_image_area_wrapper",lineWrapper:".lp_chat_line_wrapper",logoArea:"^logo_area",agentImageArea:"^agent_image_area",rotatorArea:"^rotator_area",time:".lp_time",dateLine:".lp_chat_line_date_message"},LPClassMap:{transcriptError:"lp_TranscriptError_"},ScrollChatWindowOnMaximizeOptions:{toBottom:"toBottom",toLastPosition:"toLastPosition"},DateLineState:{},initialize:function(a){this.appContext=a.appContext;this.models=a.models;this.imagesRepository=this.appContext.conf.unifiedConf.imagesRepository;this.errorIconURL=this.imagesRepository+"/error-15x15.png";this.isAsync=this.appContext.conf.engConf.async;this.browserStateManager=this.appContext.browserStateManager;this.windowConf=this.appContext.conf.windowConf;this.addAgentImage=this.windowConf.agentImage!==!1;this.addLogo=this.windowConf&&!this.windowConf.logoPinToTop;this.addRotator=this.isAsync;this.lineStateSupported=a.appContext.conf.engConf.async;this.lastLineViewedOnMinimize={};this.featureStateManager=this.appContext.featureStateManager;this.isLineGroupingEnabled=this.featureStateManager.isLineGroupingEnabled();this.lastConvId=null;this.createLineTypeFactories();this.lastLine=null;this.lastLineHistory=null;this.groupingTime=null;this.groupingTimeHistory=null;this.lastFirstDateLine=null;this.hide()},events:function(){this.appContext.deviceDetector.isDesktop()?this.preventScroll({view:this.view.parentNode}):this.appContext.deviceDetector.isIOS()&&this.limitScroll({view:this.view.parentNode});this.isAsync&&this.appContext.events.bind({appName:"*",eventName:lpTag.unifiedWindow.events.chat.CONVERSATION_CLOSED,func:H.bind(this)});this.bindModel({path:this.chatPath.LINES,callback:k.bind(this)});this.browserStateManager.on(this.browserStateManager.EVENT_NAME.ORIENTATION_CHANGE,i,this);this.appContext.events.bind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:S});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.MINIMIZE_VISIBLE,context:this,func:U});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.LINES_VIEWED,context:this,func:V});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.UPDATE_TIME_STAMP,context:this,func:w});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.RICH_CONTENT,eventName:this.EventName.richContent.UPDATE_RICH_CONTENT_LINE,context:this,func:a});this.isAsync&&this.browserStateManager.on(this.browserStateManager.EVENT_NAME.FOCUS_CHANGE,i,this)},render:function(){I.call(this);J.call(this,this.windowConf.agentImage,this.windowConf.agentUrl);M.call(this);this.appContext.deviceDetector.isDesktop()&&N.call(this)}});W=lpTag.unifiedWindow.TranscriptViewController.prototype;W.createLineTypeFactories=function(){this.chatLineFactory=new lpTag.unifiedWindow.ChatLineViewController({models:this.models,appContext:this.appContext,wrapWithDiv:!1});this.autoMessageFactory=new lpTag.unifiedWindow.AutoMessageViewController({models:this.models,appContext:this.appContext,wrapWithDiv:!1});this.secureFormLineFactory=new lpTag.unifiedWindow.SecureFormLineViewController({models:this.models,appContext:this.appContext,wrapWithDiv:!1});this.richContentFactory=new lpTag.unifiedWindow.RichContentViewController({models:this.models,appContext:this.appContext,wrapWithDiv:!1});this.quickRepliesDecorator=new lpTag.unifiedWindow.QuickRepliesDecorator({appContext:this.appContext});this.fileContentFactory=new lpTag.unifiedWindow.FileSharingViewController({models:this.models,appContext:this.appContext,wrapWithDiv:!1});this.dateLineFactory=new lpTag.unifiedWindow.DateLineViewController({models:this.models,appContext:this.appContext,wrapWithDiv:!1})};W.addEvent=function(a,i,j){if(j.template){var k=document.createElement("div");k.innerHTML=j.template;j.view=k}if(!this.appContext.deviceDetector.isDesktop()){f(j);setTimeout(g.bind(this,j),this.removeAccessibilityAttrsTimeout)}var l=document.createDocumentFragment();l.appendChild(j.view);j.replace&&j.targetToReplace?b.call(this,l,j.targetToReplace):e.call(this,l,a);a?d.call(this,i&&j.view):setTimeout(function(){h.call(this,null,d.bind(this,i&&j.view))}.bind(this));this.timeStampGroupingEnabled&&c.call(this,j.view)};W.getWidgetContent=function(){this.widgetContent||(this.widgetContent=this.getFirstElement(this.LPViewMap.widgetContent));return this.widgetContent};W.scrollToBottom=h;W.dispose=function(){this.browserStateManager.off(this.browserStateManager.EVENT_NAME.ORIENTATION_CHANGE,i);this.isAsync&&this.browserStateManager.off(this.browserStateManager.EVENT_NAME.FOCUS_CHANGE,i);this.richContentFactory&&this.richContentFactory.dispose();this.quickRepliesDecorator&&this.quickRepliesDecorator.dispose();this.fileContentFactory&&this.fileContentFactory.dispose();this.appContext.events.unbind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:S});this.appContext.events.unbind({appName:"*",eventName:this.VCEvents.MINIMIZE_VISIBLE,context:this,func:U});this.appContext.events.unbind({appName:"*",eventName:this.VCEvents.LINES_VIEWED,context:this,func:V});this.appContext.events.unbind({appName:"*",eventName:this.VCEvents.UPDATE_TIME_STAMP,context:this,func:w});this.appContext.events.unbind({appName:lpTag.unifiedWindow.apps.RICH_CONTENT,eventName:this.EventName.richContent.UPDATE_RICH_CONTENT_LINE,context:this,func:b});lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(){this.fileAttachment.setAttribute("aria-label",this.translate("AddAttachmentAction"));var a=document.createElement("input");a.id="LPfileUpload";a.type="file";a.setAttribute("accept",this.ALLOWED_EXTENSIONS);a.setAttribute("class","lp_file_input");a.style.display="none";a.onchange=b.bind(this);this.fileAttachment.appendChild(a);this.fileUploader=a;this.bindViewEvent({selector:this.LPViewMap.fileAttachment,callback:function(){this.fileUploader.click()},DOMEvent:"click"})}function b(){if(this.fileUploader.files.length>0){this.currentImage=this.fileUploader.files[0];this.fileUploader.value="";if(this.currentImage){this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.FILE_SHARE,eventName:lpTag.unifiedWindow.events.imageShare.IMAGE_SELECTED,data:{image:this.currentImage}});this.currentImage=null}}}function c(){clearTimeout(this.visitorTypingTimeoutRef);this.visitorTypingTimeoutRef=setTimeout(this.setTypingState.bind(this,!1),this.VISITOR_TYPING_TIMEOUT)}function d(){var a=this.getModelParam(this.uiPath.STATE),b=a===lpTag.unifiedWindow.State.CHATTING,c=this.appContext.conf.engConf.async&&a!==lpTag.unifiedWindow.State.CONNECTION_ISSUE&&a!==lpTag.unifiedWindow.State.PENDING;return c||b}function e(){var a=this.getModelParam(this.uiPath.EMOJI_VISIBLE);a&&this.appContext.uiStateManager.setVisibility(this.uiPath.EMOJI_VISIBLE,!1);this.appContext.uiStateManager.setVisibility(this.uiPath.ACTIONS_VISIBLE,!this.getModelParam(this.uiPath.ACTIONS_VISIBLE))}function f(){var a=this.getModelParam(this.uiPath.ACTIONS_VISIBLE);a&&this.appContext.uiStateManager.setVisibility(this.uiPath.ACTIONS_VISIBLE,!1);this.appContext.uiStateManager.setVisibility(this.uiPath.EMOJI_VISIBLE,!this.getModelParam(this.uiPath.EMOJI_VISIBLE))}function g(){this.appContext.uiStateManager.setActionsVisibility(!1)}function h(a,b){var c=i.call(this);if(this.transcriptWasShown){this.inProcess=!0;this.actions.isVisible[a]=b.newValue;var d=b.newValue||this.isActionBarVisible();if(d){var e=this.getFirstElement(this.LPViewMap.actionsBarContainer);this.show(e)}c?j.call(this):this.appContext.events.trigger({appName:"*",eventName:this.EventName.uiState.ACTIONS_TOGGLE,data:{visible:d}});m.call(this,d,a)}}function i(){return"undefined"==typeof this.inProcess}function j(){var a=this.getFirstElement(this.LPViewMap.actionsBarContainer),b=this.isActionBarVisible();b||this.hide(a);this.inProcess=!1;this.textarea&&x.call(this,this.textarea.textareaHeight);this.appContext.events.trigger({appName:"*",eventName:this.EventName.uiState.ACTIONS_TOGGLE,data:{visible:b}});a.setAttribute("aria-hidden",(!b).toString())}function k(a){var b=this.getFirstElement(this.LPViewMap.emojiButton),c=this.emojiIconStyle.classes?this.emojiIconStyle.classes:[];if(a){this.show(b);G.addClassByArray(b,c)}else this.hide(b)}function l(a){var b=this.getFirstElement(this.LPViewMap.sendButton),c=this.getFirstElement(this.LPViewMap.paperPlaneButton);if(a===this.BUTTON_TYPES.PAPER_PLANE){this.hide(b);this.show(c)}else{this.hide(c);this.show(b)}}function m(a,b){var c=this.getFirstElement(this.LPViewMap.actionsButton);if(a&&b===this.actions.TYPE.ACTION_MENU){this.removeClass(this.actionsButtonImage,this.LPClassesMap.actionsClosedIcon);this.addClass(this.actionsButtonImage,this.LPClassesMap.actionsOpenedIcon);c.title=this.translate("tooltip_CollapseActionMenu");c.setAttribute("aria-expanded","true");c.setAttribute("aria-label",c.title)}else{this.removeClass(this.actionsButtonImage,this.LPClassesMap.actionsOpenedIcon);this.addClass(this.actionsButtonImage,this.LPClassesMap.actionsClosedIcon);c.title=this.translate("tooltip_ExpandActionMenu");c.setAttribute("aria-label",c.title);c.setAttribute("aria-expanded","false")}}function n(a){var b={text:this.textarea.getValue()};b.text=this.trim(b.text);this.textarea.setValue("");a&&this.textarea.lpFocus();return b}function o(a){this.isMessaging&&!this.appContext.transcriptManager.currentConversationActive()&&(a.text=lpTag.HtmlSanitizerUtils.sanitizeAndCleanHtml(a.text));if(a.text&&""!==a.text){a.text=p.call(this,a.text);this.appContext.transcriptManager.sendLine(a);this.setTypingState(!1)}this.actionsBarVc.getActiveMenu()===this.actionsBarVc.ActionType.EMOJI&&this.actionsBarVc.hideActionBar()}function p(a){var b;if(u()){b=lpTag.taglets.cleanCCPatterns.clean(a);if(b!==a){a=b;q.call(this)}}return a}function q(){this.appContext.events.trigger({appName:"tooltip",eventName:"show",data:{text:this.translate("tooltip_AutoBlockCreditCardPatternsMessage"),tooltipTimeout:this.TOOLTIP_TIMEOUT}});r.call(this)}function r(){this.appContext.deviceDetector.isIOS()&&this.textareaDomEl.blur()}function s(a){this.appContext.events.trigger({appName:this.ControllerName,eventName:this.VCEvents.VISITOR_HAS_TYPED,data:{typing:a&&document.activeElement===this.textareaDomEl}})}function t(a){a?this.show(this.agentTyping):this.hide(this.agentTyping)}function u(){return lpTag.taglets&&lpTag.taglets.cleanCCPatterns}function v(a){return"which"in a?a.which:a.keyCode}function w(a){return!/^\s*$/.test(a)}function x(a,b){this.view.style.height=a+"px";this.onResize&&this.onResizeContext&&this.onResize.call(this.onResizeContext,{bottomAreaSize:a+z.call(this),actionsAreaSize:y.call(this)})}function y(){var a=this.getFirstElement(this.LPViewMap.actionsBarContainer),b=0;a&&this.isActionBarVisible()&&(b=a.clientHeight);
return b}function z(){var a=this.getFirstElement(this.LPViewMap.inputContainer),b=0,c=0,d=0;if(a){c=this.getComputedStyle(a,"paddingTop");d=this.getComputedStyle(a,"paddingBottom");b=parseInt(c,10)+parseInt(d,10)}return b}function A(){var a=this.isActionBarVisible();a||this.appContext.events.trigger({appName:"*",eventName:"adjust_styles",data:{}})}function B(){this.appContext.events.trigger({appName:"*",eventName:"remove_styles",data:{}})}function C(){this.appContext.events.trigger({appName:"*",eventName:"keyboard_visible",data:{}})}function D(){this.appContext.events.trigger({appName:"*",eventName:"reset_window",data:{}})}function E(){setTimeout(function(){window.scrollTo(0,0)},375)}var F,G=(lpTag.taglets.lpUtil,lpTag.unifiedWindow.applicationUtils);lpTag.unifiedWindow.ChatViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"ChatViewController",applicationType:"ChatViewController",template:"<div class='lpview_bottom_container'><div class='lp_lpview_agent_is_typing lp_agent_is_typing lpc_typing-indication lpc_typing-indication_agent {{deviceClass}}' data-lp-point='agent_is_typing' role='region'>{{agentIsTypingText}}</div><div class='lp_bottom_area' data-lp-cust-id='input' data-lp-point='bottom_area' role='region' aria-live='polite'><button class='lp_actions_button lpc_composer__menu-button {{deviceClass}}' data-lp-point='actions_button' data-lp-cust-id='actions_button' type='button'><div data-lp-point='actions_button_image' data-lp-type='icon' class='lp_actions-closed-icon'><img class='lpc_composer__menu-button-asset {{deviceClass}}' src='{{iconsRepository}}/sprites_v1.png' alt='' aria-hidden='true'></div></button> <button class='lp_emoji_button lpc_composer__emoji-button {{deviceClass}}' data-lp-point='emoji_button' title='{{tooltip_EmojiIcon}}'><div data-lp-point='emoji_button_image' data-lp-type='icon' class='lp_actions-emoji-icon'><svg class='lpc_composer__emoji-button-asset {{deviceClass}}' xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'><g fill='none'><path d='M10 1C15 1 19 5 19 10 19 15 15 19 10 19 5 19 1 15 1 10 1 5 5 1 10 1ZM10 2C5.6 2 2 5.6 2 10 2 14.4 5.6 18 10 18 14.4 18 18 14.4 18 10 18 5.6 14.4 2 10 2ZM13.5 11.6L14.3 12C13.5 13.8 11.8 15 10 15 8.3 15 6.7 13.9 5.8 12.3L5.7 12 6.5 11.6C7.2 13.2 8.6 14.1 10 14.1 11.5 14.1 12.8 13.2 13.5 11.6ZM13.4 8.2L13.4 9.5 12 9.5 12 8.2 13.4 8.2ZM8 8.2L8 9.5 6.6 9.5 6.6 8.2 8 8.2Z' fill='#65686E'/></g></svg></div></button><div data-lp-point='actionsBar_placeholder_wrapper'></div><div class='lp_input_area lpc_composer__text-area-wrapper {{deviceClass}}' data-lp-point='input_container'></div><button class='lp_file_button lpc_composer__file-attachment-button {{deviceClass}}' data-lp-point='file_button' title='{{AddAttachmentAction}}'><div class='lp_file-icon' data-lp-type='icon' data-lp-point='file_input_image'><svg class='lpc_composer__file-attachment-button-asset {{deviceClass}}' width='20' height='20' viewBox='0 0 20 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><g stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'><path d='M9.00364374,0.931666646 C10.9714618,0.931666646 12.5787125,2.47543931 12.6803584,4.41794732 L12.6854619,4.61348483 L12.6854619,5.4741915 L12.6854619,13.9847117 C12.6854619,15.1394889 11.74933,16.0756208 10.5945528,16.0756208 C9.43977563,16.0756208 8.50364374,15.1394889 8.50364374,13.9847117 L8.50364374,5.17234491 C8.50364374,4.89620254 8.72750137,4.67234491 9.00364374,4.67234491 C9.27978612,4.67234491 9.50364374,4.89620254 9.50364374,5.17234491 L9.50364374,13.9847117 C9.50364374,14.5872042 9.99206038,15.0756208 10.5945528,15.0756208 C11.1970453,15.0756208 11.6854619,14.5872042 11.6854619,13.9847117 L11.6854619,5.4741915 L11.6854619,4.61348483 C11.6854619,3.13235754 10.484771,1.93166665 9.00364374,1.93166665 C7.57948289,1.93166665 6.41460124,3.04177288 6.32710171,4.44388242 L6.32182556,4.61348483 L6.32182556,14.2119845 C6.32182556,16.6972658 8.33654419,18.7119845 10.8218256,18.7119845 C13.2360989,18.7119845 15.2063146,16.810748 15.3169276,14.4238202 L15.3218256,14.2119845 L15.3218256,11.0029779 C15.3218256,10.7268355 15.5456832,10.5029779 15.8218256,10.5029779 C16.0672854,10.5029779 16.2714339,10.6798531 16.3137699,10.9131023 L16.3218256,11.0029779 L16.3218256,14.2119845 C16.3218256,17.2495506 13.8593917,19.7119845 10.8218256,19.7119845 C7.85834641,19.7119845 5.44228642,17.3682045 5.32619276,14.4331916 L5.32182556,14.2119845 L5.32182556,4.61348483 C5.32182556,2.58007279 6.97023171,0.931666646 9.00364374,0.931666646 Z' id='Combined-Shape' fill='#848586' transform='translate(10.821826, 10.321826) rotate(45.000000) translate(-10.821826, -10.321826) '></path></g></svg></div></button> <button class='lp_paper_plane_button lpc_composer__send-button {{deviceClass}}' data-lp-point='paper_plane_button' title='{{tooltip_SendIcon}}'><div class='lp_paper_plane-icon' data-lp-type='icon' data-lp-point='paper_plane_button_image'><svg class='lpc_composer__send-button-asset {{deviceClass}}' width='22px' height='22px' viewBox='0 0 22 22' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><g id='ic/light/send' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'><polygon id='Fill-7' points='0 22 22 22 22 0 0 0'></polygon><path d='M19,2.19367271 L19,16.7718891 C19,17.2774929 18.4775539,17.6127908 18.0199381,17.4008778 L12.8802219,15.0207741 L8.7725359,19.2871113 C8.34107114,19.7352405 7.58518171,19.4288503 7.58518171,18.8058322 L7.58518171,12.3866797 L2.47708231,10.7201639 C1.89021237,10.5286977 1.82926232,9.72006391 2.38076107,9.44225506 L17.9994769,1.57457178 C18.4587316,1.34322941 19,1.67815395 19,2.19367271 Z M18,2.74685062 L3.62657435,9.98723848 L8.58518171,11.6049826 L8.58518171,17.9985142 L12.6621183,13.7641141 L18,16.2359844 L18,2.74685062 Z M15.4797336,5.51684905 L15.4830453,5.52055333 L15.8984138,5.9969535 C15.9697315,6.07875015 15.9628055,6.20249688 15.8828058,6.27582452 L11.1229586,10.6386934 C11.041532,10.7133288 10.9150188,10.7078236 10.8403833,10.626397 C10.8392641,10.625176 10.8381602,10.6239411 10.8370717,10.6226927 L10.4217031,10.1462925 C10.3503855,10.0644959 10.3573114,9.94074917 10.4373111,9.86742153 L15.1971583,5.50455268 C15.2785849,5.42991722 15.4050982,5.43542249 15.4797336,5.51684905 Z' id='Combined-Shape' fill='#000000'></path></g></svg></div></button> <button class='lp_send_button lpc_composer__send-button {{deviceClass}}' data-lp-point='send_button' title='{{tooltip_SendIcon}}'><div class='lp_send-icon' data-lp-type='icon' data-lp-point='send_button_image'><img class='lpc_composer__send-button-asset {{deviceClass}}' src='{{iconsRepository}}/sprites_v1.png' alt=''></div></button></div></div>",type:"html",dialogDisplayed:!1,visitorTypingTimeoutRef:null,TOOLTIP_TIMEOUT:1e4,VISITOR_TYPING_TIMEOUT:5e3,actionVisibleAnimationTime:300,lineTemplateFile:{visitor:"<div id='lp_line_{{_id}}' class='lp_chat_line_wrapper lp_{{source}} {{stateClass}} lpc_message-area lpc_message-area_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_visitor_parent'><div class='lp_time lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} {{deviceClass}}' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'><div class='lp_sender'>{{sender}}</div>{{time}}</div><div id='lp_line_bubble_{{_id}}' class='lp_chat_line lpc_message lpc_message_{{source}} {{deviceClass}} {{grouped}}' data-lp-point='lineBubble' data-lp-cust-id='transcript_bubble_visitor'><div class='lp_chat_arrow_border lpc_message-tail__border lpc_message-tail__border_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_visitorArrowBorder'></div><div class='lp_chat_arrow lpc_message-tail lpc_message-tail_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_visitorArrow'></div><div class='lp_line_state_wrapper'><span class='lp_title_text lpc_message__text lpc_message__text_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_visitor_text'>{{text}}</span> <span title='{{stateToolTip}}' data-lp-point='lp_line_state' data-lp-cust-id='transcript_time' class='lpc_message-area__indicator lpc_message-area__indicator_{{source}} {{deviceClass}} lp_line_state'>{{state}}</span></div><div class='lp_time_side_wrapper'><div class='lp_time lp_time_side lpc_message-area__side-timestamp lpc_message-area__side-timestamp_{{source}} lpc_message-area__side-timestamp_{{avatarCustomModifier}} {{deviceClass}}' title='{{sender}} {{time}}' style='display:none' data-lp-cust-id='transcript_time'>{{sideTime}}</div></div></div><div class='lp_time lp_time_bottom lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} {{deviceClass}} lpHide' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'><div class='lp_sender'>{{sender}}</div>{{time}}</div></div>",agent:"<div id='lp_line_{{_id}}' class='lp_chat_line_wrapper lp_{{source}} {{avatarVisibility}} lpc_message-area lpc_message-area_{{source}} lpc_message-area_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_agent_parent'><div class='lp_time lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} lpc_message-area__timestamp_{{avatarCustomModifier}} {{deviceClass}}' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'><div class='lp_sender'>{{sender}}</div>{{time}}</div><img class='agent_avatar lpc_message-area__avatar lpc_message-area__avatar_{{source}} lpc_message-area__avatar_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='agentAvatarUrl' alt='' aria-hidden='true'><div id='lp_line_bubble_{{_id}}' class='lp_chat_line lpc_message lpc_message_{{source}} lpc_message_{{avatarCustomModifier}} {{deviceClass}} {{grouped}}' data-lp-point='lineBubble' data-lp-cust-id='transcript_bubble_agent'><div class='lp_title_text lpc_message__text lpc_message__text_{{source}} lpc_message__text_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_agent_text'>{{text}}</div></div><div class='lp_chat_arrow_border lpc_message-tail__border lpc_message-tail__border_{{source}} lpc_message-tail__border_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_agentArrowBorder'></div><div class='lp_chat_arrow lpc_message-tail lpc_message-tail_{{source}} lpc_message-tail_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_agentArrow'></div><div class='lp_time lp_time_side lpc_message-area__side-timestamp lpc_message-area__side-timestamp_{{source}} lpc_message-area__side-timestamp_{{avatarCustomModifier}} {{deviceClass}}' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'>{{sideTime}}</div><div class='lp_time lp_time_bottom lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} lpc_message-area__timestamp_{{avatarCustomModifier}} {{deviceClass}} lpHide' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'><div class='lp_sender'>{{sender}}</div>{{time}}</div></div>",system:"<div id='lp_line_{{_id}}' class='lp_chat_line_wrapper lp_{{source}} lpc_message-area lpc_message-area_{{source}} {{deviceClass}}'><div class='lp_time lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} {{deviceClass}}' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'><div class='lp_sender'>{{sender}}</div>{{time}}</div><div class='lp_chat_line lpc_message lpc_message_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_message'><div class='lp_title_text lpc_message__text lpc_message__text_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_message'>{{text}}</div></div><div class='lp_chat_arrow_border lpc_message-tail__border lpc_message-tail__border_{{source}} {{deviceClass}}'></div><div class='lp_chat_arrow lpc_message-tail lpc_message-tail_{{source}} {{deviceClass}}'></div><div class='lp_time lp_time_bottom lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} {{deviceClass}} lpHide' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'><div class='lp_sender'>{{sender}}</div>{{time}}</div></div>"},LPViewMap:{sendButton:"^send_button",sendButtonImage:"^send_button_image",paperPlaneButton:"^paper_plane_button",paperPlaneButtonImage:"^paper_plane_button_image",input:"^chat_input",inputContainer:"^input_container",lineText:".lp_title_text",chatViewContainer:".lpview_bottom_container",actionsBarPlaceholderWrapper:"^actionsBar_placeholder_wrapper",agentIsTyping:"^agent_is_typing",actionsButtonImage:"^actions_button_image",actionsButton:"^actions_button",actionsBarContainer:"^actions_bar_container",fileAttachment:"^file_button",emojiButton:"^emoji_button",emojiBarContainer:"^emoji_bar_container",bottomArea:"^bottom_area"},LPClassesMap:{actionsVisibility:"lp_actions_visible",noAnimation:"lp_no-animation",actionsClosedIcon:"lp_actions-closed-icon",actionsOpenedIcon:"lp_actions-opened-icon",textAreaClass:"lp_expandable_textarea",emojiSupportedClass:"lp_emoji_supported",attachmentIconClass:"lp_attachment_icon"},actions:{TYPE:{EMOJI_MENU:"EMOJI",ACTION_MENU:"ACTION"},isVisible:{EMOJI:!1,ACTION:!1}},menuLocationMap:{TOP:"top"},ALLOWED_EXTENSIONS:".png, .jpg, .gif, .pdf, .docx, .xlsx, .pptx",BUTTON_TYPES:{ARROW:"arrow",PAPER_PLANE:"paper_plane"},initialize:function(a){this.featureStateManager=this.appContext.featureStateManager;this.renderMap=this.featureStateManager.renderMap;this.isMessaging=!!this.appContext.conf.engConf.async;this.currentImage=null;this.span=1;this.models=a.models;this.transcriptWasShown=!1;this.attachmentIconStyle=this.featureStateManager.getStyleConfig(this.renderMap.ATTACHMENT_ICON);this.emojiIconStyle=this.featureStateManager.getStyleConfig(this.renderMap.EMOJI_ICON);this.sendIconType=this.featureStateManager.getSendIconType();this.bottomAreaStyle=this.featureStateManager.getStyleConfig(this.renderMap.BOTTOM_AREA);this.actionsButtonStyle=this.featureStateManager.getStyleConfig(this.renderMap.ACTIONS_BUTTON);if(a.resizeEvent){this.onResize=a.resizeEvent.onResize;this.onResizeContext=a.resizeEvent.onResizeContext;this.bindViewEvent({view:a.resizeEvent.transitionView,DOMEvent:"transition",callback:j,context:this})}this.browserNotificationsManager=this.appContext.browserNotificationsManager;this.textarea=new lpTag.unifiedWindow.ExpandableTextAreaViewController({appContext:this.appContext,targetView:this.getFirstElement(this.LPViewMap.inputContainer),minRows:1,maxRows:4,resizeCallback:x,context:this});this.textareaDomEl=this.textarea.textarea;k.call(this,this.emojiIconStyle.value);l.call(this,this.sendIconType);this.sendIconTypeToUse=this.sendIconType===this.BUTTON_TYPES.PAPER_PLANE?this.LPViewMap.paperPlaneButton:this.LPViewMap.sendButton;this.sendIconImageTypeToUse=this.sendIconType===this.BUTTON_TYPES.PAPER_PLANE?this.LPViewMap.paperPlaneButtonImage:this.LPViewMap.sendButtonImage;this.actionsBarVc=new lpTag.unifiedWindow.ActionsBarViewController({textareaDomEl:this.textareaDomEl,models:this.models,appContext:this.appContext,textInjection:this.appContext.conf.unifiedConf,emojiEnabled:this.featureStateManager.emojiEnabled()});this.addViewController({viewController:this.actionsBarVc,target:this.LPViewMap.actionsBarPlaceholderWrapper});var b=this.getFirstElement(this.LPViewMap.actionsBarContainer);this.actions.isVisible.ACTION=this.getModelParam(this.uiPath.ACTIONS_VISIBLE);this.actions.isVisible.EMOJI=this.getModelParam(this.uiPath.EMOJI_VISIBLE);b&&this.addClass(b,this.LPClassesMap.noAnimation,500);this.fileAttachment=this.getFirstElement(this.LPViewMap.fileAttachment);this.addClass(this.fileAttachment,"lpHide");this.bottomArea=this.getFirstElement(this.LPViewMap.bottomArea);G.addClassByArray(this.bottomArea,this.bottomAreaStyle.classes);this.hide()},events:function(){this.bindViewEvent({selector:this.sendIconTypeToUse,callback:this.sendButtonClicked,DOMEvent:"click"});this.bindViewEvent({selector:this.sendIconTypeToUse,callback:this.sendButtonClicked,DOMEvent:this.appContext.deviceDetector.isMobile()||this.appContext.deviceDetector.isTablet()&&"touchend"});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.CLOSE_ACTIONS,context:this,func:g});this.appContext.events.bind({appName:"actions",eventName:"close",func:g,context:this});this.appContext.events.bind({appName:"*",eventName:this.EventName.uiState.EMOJI_FOCUS_ON_CLICK,func:this.focusOnChatInput,context:this});this.appContext.deviceDetector.isDesktop()||this.appContext.events.bind({appName:"input",eventName:"focus",func:g,context:this});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:this.focusOnChatInput});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.DIALOG,context:this,func:this.dialogOpen});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.DIALOG_CLOSED,context:this,func:this.dialogClose});this.appContext.events.bind({appName:"*",eventName:this.EventName.uiState.POP_OUT,context:this,func:j});this.appContext.events.bind({appName:"*",eventName:this.EventName.uiState.SEND_BUTTON,context:this,func:this.setSendButtonStateHandler});this.bindViewEvent({selector:this.LPViewMap.input,callback:this.inputKeyPress,DOMEvent:"keypress",context:this});this.bindViewEvent({selector:this.LPViewMap.input,callback:this.inputKeyUp,DOMEvent:"keyup",context:this});this.bindViewEvent({selector:this.LPViewMap.input,callback:this.inputPaste,DOMEvent:"paste",context:this});this.bindViewEvent({selector:this.LPViewMap.input,callback:this.inputBlur,DOMEvent:"blur",context:this});this.bindViewEvent({view:window,callback:this.onBeforeUnload.bind(this),DOMEvent:"beforeunload",context:this});this.bindViewEvent({selector:this.LPViewMap.actionsButton,DOMEvent:(this.appContext.deviceDetector.isMobile()||this.appContext.deviceDetector.isTablet())&&this.appContext.deviceDetector.isIOS()?"touchend":"click",callback:e,context:this});this.bindViewEvent({selector:this.LPViewMap.emojiButton,DOMEvent:(this.appContext.deviceDetector.isMobile()||this.appContext.deviceDetector.isTablet())&&this.appContext.deviceDetector.isIOS()?"touchend":"click",callback:f,context:this});this.appContext.deviceDetector.isAndroid()&&this.bindViewEvent({selector:this.LPViewMap.input,callback:this.inputFocus,DOMEvent:"focus"});if(this.appContext.deviceDetector.isIpadChrome()){this.bindViewEvent({selector:this.LPViewMap.input,callback:A,DOMEvent:"click"});this.bindViewEvent({selector:this.LPViewMap.input,callback:B,DOMEvent:"blur"})}this.bindModel({path:this.uiPath.ACTIONS_VISIBLE,callback:h.bind(this,this.actions.TYPE.ACTION_MENU)});this.featureStateManager.emojiEnabled()&&this.bindModel({path:this.uiPath.EMOJI_VISIBLE,callback:h.bind(this,this.actions.TYPE.EMOJI_MENU)});this.bindModel({path:this.uiPath.STATE,callback:this.stateChanged});this.bindModel({path:this.chatPath.AGENT_IS_TYPING,callback:this.agentIsTyping});this.appContext.deviceDetector.isDesktop()&&this.preventScroll({view:this.textareaDomEl});if(this.appContext.deviceDetector.isIOS()){this.limitScroll({view:this.textareaDomEl});this.bindViewEvent({selector:this.LPViewMap.input,callback:C,DOMEvent:"click"});this.bindViewEvent({selector:this.LPViewMap.input,callback:D,DOMEvent:"blur"});this.bindViewEvent({selector:this.LPViewMap.input,callback:E,DOMEvent:"focus"});this.bindViewEvent({selector:this.LPViewMap.paperPlaneButton,callback:C,DOMEvent:"click"});this.bindViewEvent({selector:this.LPViewMap.sendButton,callback:C,DOMEvent:"click"})}},render:function(){this.agentTyping=this.getFirstElement(this.LPViewMap.agentIsTyping);this.actionsButtonImage=this.getFirstElement(this.LPViewMap.actionsButtonImage);this.actionsButton=this.getFirstElement(this.LPViewMap.actionsButton);this.show();this.focusOnChatInput();if(this.attachmentIconStyle.value){a.call(this);this.removeClass(this.fileAttachment,"lpHide")}this.actionsButtonStyle.value||this.hide(this.actionsButton)}});F=lpTag.unifiedWindow.ChatViewController.prototype;F.dispose=function(){clearTimeout(this.visitorTypingTimeoutRef);this.appContext.events.unbind({appName:"actions",eventName:"close",func:g,context:this});this.appContext.deviceDetector.isDesktop()||this.appContext.events.unbind({appName:"input",eventName:"focus",func:g,context:this});lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)};F.stateChanged=function(a){var b=!!this.appContext.conf.engConf.async;if(a.newValue)switch(a.newValue){case lpTag.unifiedWindow.State.WAITING:this.setInputState(!0);this.setSendButtonState(b);j.call(this);break;case lpTag.unifiedWindow.State.CONNECTION_ISSUE:case lpTag.unifiedWindow.State.PENDING:this.setSendButtonState(!1);break;case lpTag.unifiedWindow.State.CHATTING:this.setTypingState(!1);this.setInputState(!0);this.setSendButtonState(!0);break;case lpTag.unifiedWindow.State.APP_ENDED:this.setInputState(!1);this.setSendButtonState(!1);j.call(this);break;default:this.setInputState(!1);this.setSendButtonState(!1)}};F.setSendButtonStateHandler=function(a){"boolean"==typeof a.enabled&&this.setSendButtonState.call(this,a.enabled)};F.setSendButtonState=function(a,b){var c=this.getFirstElement(this.sendIconTypeToUse),d=this.getFirstElement(this.sendIconImageTypeToUse);b=b||this.getFirstElement(this.LPViewMap.input).value;if(a){c.title=this.translate("tooltip_SendIcon");this.removeClass(d,"lp_disabled")}else{c.title=this.translate("tooltip_SendIconDisabled");this.addClass(d,"lp_disabled")}c.disabled=a&&w(b)?null:"disabled"};F.setInputState=function(a){var b=this.getFirstElement(this.LPViewMap.input);if(a){this.alignInput();b.placeholder=this.translate("insertTextHere");b.disabled=null}else{b.value="";b.placeholder="";b.disabled="disabled"}};F.inputKeyPress=function(a){var b=v(a);if(13===b){if(d.call(this)){var c=n.call(this,!0);o.call(this,c);this.focusOnChatInput()}this.stopPropagation(a);this.preventDefault(a)}};F.alignInput=function(){this.applyDirOnElement(this.textareaDomEl,this.textarea.getValue())};F.inputFocus=function(){this.appContext.uiStateManager.setActionsVisibility(!1)};F.inputBlur=function(){s.call(this,!1);this.setTypingState(!1)};F.inputKeyUp=function(){s.call(this,this.hasInputValue());d.call(this)&&this.setTypingState();this.alignInput()};F.inputPaste=function(){var a=this;setTimeout(function(){a.inputKeyUp()},0)};F.setTypingState=function(a){"boolean"!=typeof a&&(a=this.hasInputValue());a?c.call(this):clearTimeout(this.visitorTypingTimeoutRef);this.appContext.transcriptManager.setVisitorTyping(a);this.setSendButtonState(d.call(this),this.textarea.getValue())};F.hasInputValue=function(){var a=this.textarea.getValue();return"undefined"!=typeof a&&a.length>0};F.agentIsTyping=function(a){var b=a&&a.newValue;t.call(this,b)};F.sendButtonClicked=function(a){if(d.call(this)){this.textareaDomEl.blur();var b=n.call(this);o.call(this,b);this.focusOnChatInput()}this.stopPropagation(a);this.preventDefault(a)};F.focusOnChatInput=function(){if(this.uiPath){var a,b=this.getModelParam(this.uiPath.STATE);if(this.isFocusInsideApp()&&!this.dialogDisplayed&&lpTag.unifiedWindow.State&&(b===lpTag.unifiedWindow.State.WAITING||b===lpTag.unifiedWindow.State.CHATTING||b===lpTag.unifiedWindow.State.APP_ENDED||b===lpTag.unifiedWindow.State.PENDING)){a=this.getFirstElement(this.LPViewMap.input);a&&a.focus()}}};F.closeActions=function(){g.call(this)};F.isActionBarVisible=function(){var a=!1;for(var b in this.actions.isVisible)if(this.actions.isVisible[b]){a=!0;break}return a};F.dialogOpen=function(){this.dialogDisplayed=!0};F.onBeforeUnload=function(a){this.setTypingState(!1)};F.dialogClose=function(a){this.dialogDisplayed=!1;var b=a&&a.origin;if(b&&"confirm"===b){var c=this,d=this.focusOnChatInput;setTimeout(function(){d.call(c)},500)}}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){return a===this.SENT_STATE_MAP.state_ERROR||a===this.SENT_STATE_MAP.state_image_ERROR||a===this.SENT_STATE_MAP.state_image_RETRY}function b(a,b,c){var d=this.lineStyle[b.source];if(d===this.LINE_STYLE.CURVY){var e=this.getFirstElement(this.LPViewMap.bubble,a);this.removeClass(e,this.LPClassesMap.grouped[b.grouped]);this.addClass(e,this.LPClassesMap.grouped[c.grouped])}else{var f=this.getFirstElement("."+this.LPClassesMap.lineArrow,a),g=this.getFirstElement("."+this.LPClassesMap.lineBoarder,a);this.addClass(f,"lpHide");this.addClass(g,"lpHide")}}function c(a,b){var c=this.getFirstElement(this.LPViewMap.avatarImage,a);c&&(b?c.style.opacity="1":c.style.opacity="0")}function d(b,c,d){var e=b.className,f=e.match(this.STATE_CLASS_PREFIX_REGEX),g=this.SENT_STATE_MAP[f];c.state=g;if(g===d.nextLine.state&&!a.call(this,g)){var h=this.getFirstElement(this.LPViewMap.state,b);this.addClass(h,"lpHide")}}function e(a,b){var c=this.getFirstElement(".lp_time",a),d=this.getFirstElement(".lp_time_bottom",a);if(b)if(this.isTimeStampAbove){this.removeClass(c,"lpHide");this.addClass(d,"lpHide")}else{this.removeClass(d,"lpHide");this.addClass(c,"lpHide")}else{this.addClass(c,"lpHide");this.addClass(d,"lpHide")}}function f(a,b){var c=this.isTimeStampAbove&&"start"===a.grouped,d=!(this.isTimeStampAbove||"end"!==a.grouped&&(b&&b.source===a.source||"start"!==a.grouped));return c||d}function g(a,b){return"agent"===a.source&&(!b||"end"===a.grouped||"start"===b.grouped||"agent"!==b.source)}function h(a,h,i){var j=h.newValue,l=a.localId,m=this.getFirstElement("#"+this.LPClassesMap.line+l,window)||i;h.dirOnView&&(m=i);if(this.isLineGroupingEnabled){if(j.grouped){b.call(this,m,a,j);"end"===a.grouped&&(a.grouped=j.grouped)}"start"===a.grouped&&(m.style.marginTop="20px");!j.nextLine||"body"!==a.grouped&&"start"!==a.grouped||"visitor"!==a.source||d.call(this,m,a,j);e.call(this,m,f.call(this,a,j.nextLine));this.avatarEnabled&&"agent"===a.source&&c.call(this,m,g.call(this,a,j.nextLine))}else e.call(this,m,!0);j.dispose===!0&&k.call(this,a)}function i(a,b){h.call(this,a,b);j.call(this,a)}function j(a){var b=this.util.clone(a);k.call(this,a);this.appContext.events.bind({appName:"*",eventName:this.VCEvents.LINE_UPDATE+b.localId,context:this,func:this.handleLineUpdate(b)})}function k(a){this.appContext.events.unbind({appName:"*",eventName:this.VCEvents.LINE_UPDATE+a.localId})}function l(a,b,c){var d,e,f,g=this.getFirstElement(this.LPViewMap.lineText,c);if(this.appContext.conf.engConf.async&&a.line.text&&"visitor"!==a.line.source&&a.line.type===this.appConsts.chatEvents.LINE&&this.hyperlinksHelper.textContainsMarkDownSyntax(a.line.text)){a.line.text=this.hyperlinksHelper.convertMarkdownToTempId(a.line.text);a.line.text=this.hyperlinksHelper.convertAHREFToTempId(a.line.text);f=!1;p(a.line,g,this,f);a.line.text=this.formatLinks(a.line.text);var h=this.hyperlinksHelper.convertTempIdToMarkdown(a.line.text);a.line.text=h;g.innerHTML=h;var i=this.hyperlinksHelper.convertTempIdToAHREF(a.line.text);a.line.text=i;g.innerHTML=i;var j=this.hyperlinksHelper.parseAllMarkdownFormat(a.line.text);g.innerHTML=j;e=this.reTargetElementsByType(["A","FORM"],j);a.line.text=e;g.innerHTML=e;this.hyperlinksHelper.setMarkDownToTemp([]);this.hyperlinksHelper.setAHREFToTemp([])}else{var k=this.hyperlinksHelper.textContainsAHREFSyntax(a.line.text);if(this.appContext.conf.engConf.async&&a.line.text&&k&&"visitor"!==a.line.source&&a.line.type===this.appConsts.chatEvents.LINE){var l=this.hyperlinksHelper.convertAHREFToTempId(a.line.text);a.line.text=l;g.innerHTML=l}f=!1;p(a.line,g,this,f);if(this.appContext.conf.engConf.async&&a.line.text&&k&&"visitor"!==a.line.source&&a.line.type===this.appConsts.chatEvents.LINE){var m=this.hyperlinksHelper.convertTempIdToAHREF(g.innerHTML),n=this.reTargetElementsByType(["A","FORM"],m);a.line.text=n;g.innerHTML=n;this.hyperlinksHelper.setAHREFToTemp([])}}"agent"!==a.line.source&&this.applyDirOnElement(g,a.line.text);g&&g.innerHTML&&(g.innerHTML=g.innerHTML.replace(/(\r\n|\n|\r)/gm,"<br/>"));if(b&&"string"==typeof b){d=this.getFirstElement(this.LPViewMap.avatarImage,c);d&&(d.src=b)}if(a&&a.line&&a.line.isWelcomeMessage){var o=this.getFirstElement(this.LPViewMap.timeAndSender,c),q=this.getFirstElement(this.LPViewMap.timeAndSender+"_bottom",c);v.addClass(o,"lp_hidden");v.addClass(q,"lp_hidden")}this.addWrapperBubbleClass.call(this,a,c);this.setLineAndTsGrouping.call(this,a,b,c);a.replace&&a.targetToReplace?u.runCallback(a.callback,a.context,{view:c,replace:a.replace,targetToReplace:a.targetToReplace}):u.runCallback(a.callback,a.context,{view:c})}function m(a){return a&&a.line&&(a.line.text||a.line.textKey)}function n(a,b){var c=b.localId,d=a.querySelector("#"+this.LPClassesMap.lineBubble+c);if(b.textType!==this.appConsts.RichContent.RICH_CONTENT_LINE&&b.type!==this.appConsts.chatEvents.RICH_CONTENT||"agent"!==b.source){this.bindViewEvent({view:d,DOMEvent:"mouseover",callback:o.bind(this,a,!0,b),context:this});this.bindViewEvent({view:d,DOMEvent:"mouseout",callback:o.bind(this,a,!1,b),context:this});if(!this.appContext.deviceDetector.isDesktop()){this.bindViewEvent({view:d,DOMEvent:"touchstart",callback:o.bind(this,a,!0,b),context:this});this.bindViewEvent({view:d,DOMEvent:"touchend",callback:o.bind(this,a,!1,b),context:this})}}else{this.bindViewEvent({view:d,DOMEvent:"mouseover",callback:o.bind(this,a,!0,b),context:this});this.bindViewEvent({view:d,DOMEvent:"mouseout",callback:o.bind(this,a,!1,b),context:this});if(!this.appContext.deviceDetector.isDesktop()){this.bindViewEvent({view:d,DOMEvent:"touchstart",callback:o.bind(this,a,!0,b),context:this});this.bindViewEvent({view:d,DOMEvent:"touchend",callback:o.bind(this,a,!1,b),context:this})}}}function o(a,b,c,d){var e=c.localId,f="visitor"===c.source,g=a.querySelector("#"+this.LPClassesMap.lineBubble+e),h=this.getFirstElement(this.LPViewMap.timeAndSender+"_side",a),i=null;f&&(i=this.getFirstElement(this.LPViewMap.state,a));if(b){h.style.display="inline-block";if(i){i.style.width="auto";h.style.position="absolute";this.appConsts.chatEvents.FILE_SHARING===c.type&&"visitor"===c.source?h.style.right=132+i.offsetWidth+10+"px":h.style.right=0+g.offsetWidth+i.offsetWidth+4+"px";0===i.offsetWidth?h.style.bottom="-10px":i.childElementCount>0&&(h.style.bottom="-8px");i.style.width=""}else if((c.textType===this.appConsts.RichContent.RICH_CONTENT_LINE||c.type===this.appConsts.chatEvents.RICH_CONTENT)&&"agent"===c.source){var j=this.getFirstElement(".lp-json-pollock-layout-carousel",a),k=j;k?k.style.display="inline-block":h.style.display="none"}}else h.style.display="none"}function p(a,b,c,d){var e,f=a.text||c.translate(a.textKey);if("visitor"===a.source){b.innerHTML="";var g=document.createTextNode(f);b.appendChild(g)}else if(c.sanitize===!1)b.innerHTML=f;else{e=c.sanitizeText(f,{noFormatLink:d}).text;-1!==e.indexOf("idnv_question")&&(e=c.removeElementByType(["IMG","A"],e));b.innerHTML=e}}function q(a){var b=this.getModelParam(this.chatPath.PARTICIPANTS)||{};return b&&b[a]&&b[a].imgUrl}function r(a){var b=this.getModelParam(this.uiPath.AGENT_PICTURE_URL);return a.agentPictureUrl||b&&b[a.by]}function s(a){var b="";switch(a.source){case"agent":b=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(a.by).cleanText;break;case"visitor":b=this.getModelParam(this.chatPath.VISITOR_NAME);break;case"system":b=this.translate("info")}return b}var t,u=lpTag.lpUtils,v=lpTag.taglets.lpUtil;lpTag.unifiedWindow.ChatLineViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"ChatLineViewController",applicationType:"ChatLineViewController",STATE_CLASS_PREFIX:"state_",SPACE_HTML_ENTITY:"&nbsp;",STATE_CLASS_PREFIX_REGEX:/state_[\w]+/gi,lineTemplateFile:{visitor:"<div id='lp_line_{{_id}}' class='lp_chat_line_wrapper lp_{{source}} {{stateClass}} lpc_message-area lpc_message-area_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_visitor_parent'><div class='lp_time lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} {{deviceClass}}' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'><div class='lp_sender'>{{sender}}</div>{{time}}</div><div id='lp_line_bubble_{{_id}}' class='lp_chat_line lpc_message lpc_message_{{source}} {{deviceClass}} {{grouped}}' data-lp-point='lineBubble' data-lp-cust-id='transcript_bubble_visitor'><div class='lp_chat_arrow_border lpc_message-tail__border lpc_message-tail__border_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_visitorArrowBorder'></div><div class='lp_chat_arrow lpc_message-tail lpc_message-tail_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_visitorArrow'></div><div class='lp_line_state_wrapper'><span class='lp_title_text lpc_message__text lpc_message__text_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_visitor_text'>{{text}}</span> <span title='{{stateToolTip}}' data-lp-point='lp_line_state' data-lp-cust-id='transcript_time' class='lpc_message-area__indicator lpc_message-area__indicator_{{source}} {{deviceClass}} lp_line_state'>{{state}}</span></div><div class='lp_time_side_wrapper'><div class='lp_time lp_time_side lpc_message-area__side-timestamp lpc_message-area__side-timestamp_{{source}} lpc_message-area__side-timestamp_{{avatarCustomModifier}} {{deviceClass}}' title='{{sender}} {{time}}' style='display:none' data-lp-cust-id='transcript_time'>{{sideTime}}</div></div></div><div class='lp_time lp_time_bottom lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} {{deviceClass}} lpHide' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'><div class='lp_sender'>{{sender}}</div>{{time}}</div></div>",
agent:"<div id='lp_line_{{_id}}' class='lp_chat_line_wrapper lp_{{source}} {{avatarVisibility}} lpc_message-area lpc_message-area_{{source}} lpc_message-area_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_agent_parent'><div class='lp_time lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} lpc_message-area__timestamp_{{avatarCustomModifier}} {{deviceClass}}' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'><div class='lp_sender'>{{sender}}</div>{{time}}</div><img class='agent_avatar lpc_message-area__avatar lpc_message-area__avatar_{{source}} lpc_message-area__avatar_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='agentAvatarUrl' alt='' aria-hidden='true'><div id='lp_line_bubble_{{_id}}' class='lp_chat_line lpc_message lpc_message_{{source}} lpc_message_{{avatarCustomModifier}} {{deviceClass}} {{grouped}}' data-lp-point='lineBubble' data-lp-cust-id='transcript_bubble_agent'><div class='lp_title_text lpc_message__text lpc_message__text_{{source}} lpc_message__text_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_agent_text'>{{text}}</div></div><div class='lp_chat_arrow_border lpc_message-tail__border lpc_message-tail__border_{{source}} lpc_message-tail__border_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_agentArrowBorder'></div><div class='lp_chat_arrow lpc_message-tail lpc_message-tail_{{source}} lpc_message-tail_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_agentArrow'></div><div class='lp_time lp_time_side lpc_message-area__side-timestamp lpc_message-area__side-timestamp_{{source}} lpc_message-area__side-timestamp_{{avatarCustomModifier}} {{deviceClass}}' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'>{{sideTime}}</div><div class='lp_time lp_time_bottom lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} lpc_message-area__timestamp_{{avatarCustomModifier}} {{deviceClass}} lpHide' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'><div class='lp_sender'>{{sender}}</div>{{time}}</div></div>",system:"<div id='lp_line_{{_id}}' class='lp_chat_line_wrapper lp_{{source}} lpc_message-area lpc_message-area_{{source}} {{deviceClass}}'><div class='lp_time lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} {{deviceClass}}' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'><div class='lp_sender'>{{sender}}</div>{{time}}</div><div class='lp_chat_line lpc_message lpc_message_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_message'><div class='lp_title_text lpc_message__text lpc_message__text_{{source}} {{deviceClass}}' data-lp-cust-id='transcript_message'>{{text}}</div></div><div class='lp_chat_arrow_border lpc_message-tail__border lpc_message-tail__border_{{source}} {{deviceClass}}'></div><div class='lp_chat_arrow lpc_message-tail lpc_message-tail_{{source}} {{deviceClass}}'></div><div class='lp_time lp_time_bottom lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} {{deviceClass}} lpHide' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'><div class='lp_sender'>{{sender}}</div>{{time}}</div></div>"},LPViewMap:{avatarImage:".agent_avatar",lineText:".lp_title_text",timeAndSender:".lp_time",bubble:"^lineBubble",state:"^lp_line_state"},LPClassesMap:{avatarDisplay:"agent_avatar_display",avatarHidden:"agent_avatar_hidden",lineBubble:"lp_line_bubble_",lineWrapperBubble:"lp_bubble_style",line:"lp_line_",lineArrow:"lp_chat_arrow",lineBoarder:"lp_chat_arrow_border",grouped:{start:"lp_line_grouped_start",body:"lp_line_grouped_body",end:"lp_line_grouped_end"}},LPCustomizationClasses:{avatarDisplay:"avatar-shown",avatarHidden:"avatar-hidden"},GROUP_STATE:{INIT:"init",START:"start",BODY:"body",END:"end"},LINE_STYLE:{DEFAULT:"default",CURVY:"curvy"},SENT_STATE_MAP:{state_SENT:"SENT",state_ACCEPT:"ACCEPT",state_PENDING:"PENDING",state_READ:"READ",state_ERROR:"ERROR",state_image_ERROR:"image_ERROR",state_image_RETRY:"image_RETRY"},FORMATTER:{markdownToHtml:{regexp:new RegExp("#md#\\[(.*?)]\\((.*?)\\)#/md#","gim")},anchorTagRegex:{regexp:new RegExp("<a[\\s]+([^>]+)>((?:.(?!</a>))*.)</a>","gim")}},markdownToTemp:[],ahrefToTemp:[],initialize:function(a){this.appContext=a.appContext;this.lineStateSupported=this.appContext.conf.engConf.async;this.util=lpTag.unifiedWindow.applicationUtils;this.featureStateManager=this.appContext.featureStateManager;this.hyperlinksHelper=this.appContext.hyperlinksHelper;this.lineStyle=this.featureStateManager.getBubbleStyles();this.isTimeStampAbove=this.featureStateManager.isTimeStampAbove();this.timeStampLocation=this.featureStateManager.timeStampLocationEnabled();this.isLineGroupingEnabled=this.featureStateManager.isLineGroupingEnabled();this.avatarEnabled=this.featureStateManager.avatarEnabled();this.agentAvatarPaddingEnabled=this.featureStateManager.agentAvatarPaddingEnabled()}});t=lpTag.unifiedWindow.ChatLineViewController.prototype;t.createLine=function(a){var b=this.getAvatarUrl(a);if(m(a)){var c={template:this.lineTemplateFile[a.line.source],wrapWithDiv:!1,callback:l.bind(this,a,b),textInjection:this.getTextInjection(a,b)};a.replace&&(c.doNotAddChild=a.replace);return this.createView(c)}};t.handleLineUpdate=function(a){return i.bind(this,a)};t.getTextInjection=function(a,b){var c,d,e,f=this.appContext.conf.windowConf.readNotificationsType?this.appContext.conf.windowConf.readNotificationsType:this.LPReadNotificationsTypes.text.value,g=this.translate("messagingState_"+a.line.state);if(this.lineStateSupported){c=this.getLineStateText(f,a.line);d=a.line.state?this.STATE_CLASS_PREFIX+a.line.state:void 0}if(!this.appContext.conf.engConf.async&&"html"===a.line.textType&&a.line.text&&"agent"===a.line.source){var h=a.line.text,i="",j="font-weight: inherit;",k=h.indexOf(';"',h.indexOf('style="')),l=h.indexOf("span");if(-1!==k){k++;i=h.substr(0,k)+j+h.substr(k);a.line.text=i}if(-1!==l){if(i){h=i;l=h.indexOf("span")}l+=4;var m=h.substr(0,l)+' style="'+j+'"'+h.substr(l);a.line.text=m}}var n=a.line.time?this.timeStampManager.getTimeString(a.line.time):"",o=a.line.time?this.timeStampManager.getSideTimeString(a.line.time,!this.timeStampGroupingEnabled):"";e={_id:a.line.localId,source:a.line.source,sender:s.call(this,a.line),time:n,sideTime:o,state:c||"",stateToolTip:c?g:"",stateClass:d||"",iconsRepository:this.appContext.conf.unifiedConf.iconsRepository,imagesRepository:this.appContext.conf.unifiedConf.imagesRepository,grouped:a.line.grouped?this.LPClassesMap.grouped[a.line.grouped]:""};if(b&&"string"==typeof b){e.avatarVisibility=this.LPClassesMap.avatarDisplay;e.avatarCustomModifier=this.LPCustomizationClasses.avatarDisplay}else{e.avatarVisibility=this.LPClassesMap.avatarHidden;e.avatarCustomModifier=this.LPCustomizationClasses.avatarHidden}return e};t.getAvatarUrl=function(a){var b,c=this.appContext.conf.windowConf.agentAvatar;if(c===!0||"true"===c){b=q.call(this,a.line.originatorId)||r.call(this,a.line);"string"!=typeof b&&(b=this.appContext.conf.windowConf.agentAvatarUrl)}return b};t.setLineAndTsGrouping=function(a,b,c){var d=a.line.localId;this.isLineGroupingEnabled&&this.addClass(c,"lp_grouped");this.isTimeStampAbove||this.addClass(c,"lp_ts_bottom");a.replace&&k.call(this,a.line);this.appContext.events.bind({appName:"*",eventName:this.VCEvents.LINE_UPDATE+d,context:this,func:this.handleLineUpdate(a.line)});this.isLineGroupingEnabled&&n.call(this,c,a.line);this.agentAvatarPaddingEnabled&&this.avatarEnabled&&this.addClass(c,"avatar-padding");var e={newValue:{initial:!0},dirOnView:a&&a.replace||!1};h.call(this,a.line,e,c)};t.addWrapperBubbleClass=function(a,b){var c=this.lineStyle[a.line.source];c===this.LINE_STYLE.CURVY&&this.addClass(b,this.LPClassesMap.lineWrapperBubble)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){return function(b){var c=this.getFirstElement(this.LPViewMap.autoMessage,b);c&&c.innerHTML&&(c.innerHTML=c.innerHTML.replace(/(\r\n|\n|\r)/gm,"<br/>"));this.isLineGroupingEnabled&&this.addClass(b,"lp_grouped");d.runCallback(a.callback,a.context,{view:b})}}function b(){var a,b=this.appContext.conf.unifiedConf.displayShortlyMessage;if(b){a=this.appContext.translator.dictionary.getString("transcriptShortlyMessage");this.appContext.translator.extendDictionary({transcriptTtrMessage:a},{locale:this.appContext.conf.engConf.lang})}}var c,d=lpTag.lpUtils;lpTag.unifiedWindow.AutoMessageViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"AutoMessageViewController",applicationType:"AutoMessageViewController",templateFileName:"<div class='lp_chat_line_wrapper lp_chat_line_wrapper_auto lpc_message-area lpc_message-area_auto {{deviceClass}}'><div class='lp_time lp_chat_line_auto_message lpc_message-area__timestamp lpc_message-area__timestamp_auto {{deviceClass}}' title='{{text}}' data-lp-cust-id='transcript_time'>{{text}}</div>{{html}}</div>",LPViewMap:{autoMessage:".lp_chat_line_auto_message"},LPClassesMap:{underline:"lp_underline"},initialize:function(a){this.featureStateManager=this.appContext.featureStateManager;this.isLineGroupingEnabled=this.featureStateManager.isLineGroupingEnabled();b.call(this)}});c=lpTag.unifiedWindow.AutoMessageViewController.prototype;c.createAutoMessage=function(b){var c=b.line.time?this.timeStampManager.getTimeString(b.line.time):"";this.appContext.translator.extendDictionary({time:c},{locale:this.appContext.conf.engConf.lang});this.view=this.createView({template:this.templateFileName,wrapWithDiv:!1,callback:a(b),textInjection:{text:this.translate(b.line.textKey),html:b.line.html||"",_id:b.line.localId||""}});b.line.hasSeparator&&this.addClass(this.LPViewMap.autoMessage,this.LPClassesMap.underline)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){var b,c=a.by||this.appContext.translator.translate("agent");for(var d in a)a[d]&&"string"==typeof a[d]&&(a[d]=this.sanitizeText(a[d]).text);c=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(c).cleanText;this.translator.extendDictionary({agentName:c},{locale:this.appContext.conf.engConf.lang});b=this.createView({template:this.LINK_TEMPLATE,wrapWithDiv:!1,doNotAddChild:!0,textInjection:{uniqueId:a.uniqueId,className:this.LPClassesMap.link,formName:a.formName,title:this.translate(this.TITLE_KEY_PREFIX+a.textKey)}});this.translator.extendDictionary({secureFormName:b.outerHTML},{locale:this.appContext.conf.engConf.lang});a.text=this.translate(a.textKey);return a}function b(a){return function(b){b=b.view||b;e.call(this,b);h.runCallback(a.callback,a.context,{view:b});var d=a&&a.line;if(this.appContext.conf.unifiedConf.connectorsSfConfig&&d){var f=d.uniqueId,g=this.appContext.conf.unifiedConf.connectorsSfConfig.invitationId;if(f&&g&&f===g){var i=document.getElementById(f);if(i){i.setAttribute("data-sf-connector","true");i.click();c()}}}}}function c(){var a=document.getElementsByClassName("lp_header"),b=document.getElementsByClassName("lp_main");d(a);d(b);var c=document.getElementsByClassName("lp_slider");c[1]&&(c[1].style.width="100%")}function d(a){for(var b=0;b<a.length;b++)a[b]&&(a[b].hidden=!0)}function e(a){var b=this.getFirstElement(this.LPViewMap.link,a);this.bindViewEvent({view:b,DOMEvent:"click",callback:this.fireClickEvent,context:this})}function f(){var a;if(this.currentOpenSFLink)a=this.currentOpenSFLink;else{var b=this.getElements(this.LPViewMap.link);a=b[b.length-1]}a&&a.focus&&a.focus()}var g,h=lpTag.lpUtils;lpTag.unifiedWindow.SecureFormLineViewController=lpTag.unifiedWindow.ChatLineViewController.extend({ControllerName:"SecureFormLineViewController",applicationType:"SecureFormLineViewController",appName:"secureForm",sanitize:!0,LINK_TEMPLATE:"<a href='javascript:void(0);' id='{{uniqueId}}' data-lp-point='lp_secure_form_line' title='{{title}}' target='_self' style='text-decoration: underline; cursor: pointer' class='{{className}}'>{{formName}}</a>",TITLE_KEY_PREFIX:"secureForm_link_title_",LPViewMap:{link:".lp_secure_form_line"},LPClassesMap:{link:"lp_secure_form_line"},initialize:function(a){this.hide()},events:function(){this.appContext.events.bind({appName:"*",eventName:this.VCEvents.SLIDER_CLOSED,context:this,func:f});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.SECURE_FORM,eventName:lpTag.unifiedWindow.consts.SecureForm.HIDE_CONVO,context:this,func:c})}});g=lpTag.unifiedWindow.SecureFormLineViewController.prototype;g.dispose=function(){this.appContext.events.unbind({appName:"*",eventName:this.VCEvents.SLIDER_CLOSED,context:this,func:f});this.appContext.events.unbind({appName:lpTag.unifiedWindow.apps.SECURE_FORM,eventName:lpTag.unifiedWindow.consts.SecureForm.HIDE_CONVO,context:this,func:c});lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)};g.createSecureFormLine=function(c){var d=c&&c.line;d&&this.createLine({line:a.call(this,d),callback:b(c),context:this})};g.fireClickEvent=function(a){var b=a&&a.target&&a.target.getAttribute("data-sf-connector");this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.SECURE_FORM,eventName:lpTag.unifiedWindow.consts.SecureForm.LINK_CLICKED,data:{uniqueId:a.sourceElement.id,isFromConnector:b}});this.currentOpenSFLink=a.sourceElement}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(){this.SCMetadata={};this.SCActionData={}}function b(){this.appContext.events.bind({appName:Z,eventName:Y.DISABLE_RICH_CONTENT,context:this,func:e})}function c(){this.appContext.events.unbind({appName:Z,eventName:Y.DISABLE_RICH_CONTENT,context:this,func:e})}function d(a){if(a&&a.line&&a.line.state!==T.FAILED){var b=lpTag.HtmlSanitizerUtils.sanitizeHtml(a.line.text).cleanText||a.line.json,c=lpTag.unifiedWindow.applicationUtils.cloneObj(a.line);try{"string"==typeof b&&(c.text=JSON.parse(b));if(c&&h.call(this,c)){var d={view:this.view,line:c,updated:!1};this.SCToDisable.push(d)}}catch(e){this.logger.error("Error when trying to disable rich content: "+e.message,this.ControllerName);this.logger.error(e,this.ControllerName)}}}function e(){if(Array.isArray(this.SCToDisable)){var a=j.call(this);this.SCToDisable.forEach(function(b){try{if(g.call(this,b)&&!i.call(this,a,b.line)||!k.call(this)){var c=f.call(this,b.view);if(c){b.line.text=c;b.line.type="line";O.trigger({appName:Z,eventName:this.EventName.richContent.UPDATE_RICH_CONTENT_LINE,data:b});b.updated=!0}}}catch(d){this.logger.error("Error when trying to disable rich content: "+d.message,this.ControllerName);this.logger.error(d,this.ControllerName)}},this);this.SCToDisable=this.SCToDisable.filter(function(a){return!a.updated})||[]}}function f(a){var b=this.getFirstElement(this.LPViewMap.richContentRoot,a);if(b&&this.isDOMNode(b)){var c=b.querySelectorAll(".lp-json-pollock-element-text");return c.length>0&&c[0]&&c[0].textContent}return null}function g(a){return!a.updated&&h.call(this,a.line)}function h(a){var b=lpTag.taglets.lpUtil.getPropertyFromObject(a,"text.type");return b===X.LIST}function i(a,b){return a&&b&&R.isSameObject(a.text,b.text)&&a.localId===b.localId&&a.convId===b.convId}function j(){var a=this.models.chatModel.get(this.chatPath.LINES);a=lpTag.unifiedWindow.applicationUtils.sortByKeyValue(a,"time");return Array.isArray(a)&&a.length>0&&a[a.length-1]||{}}function k(){return lpTag.unifiedWindow.State.CHATTING===this.getModelParam(this.uiPath.STATE)}function l(b){if(o.call(this)&&u.call(this)){var c=b.actionData&&b.actionData.type,d=this.appContext.conf.unifiedConf.isMessaging?w.call(this,b.uiEvent.target):!0,e=[],f=[],g=z(b);if(d&&!g){e=n.call(this,this.SCMetadata);F.call(this,e,V.ACTION_EVENT)}if(c===W.SUBMIT_AS_TEXT){e=n.call(this,this.SCMetadata);f=n.call(this,this.SCActionData);F.call(this,e,V.SUBMIT_AS_TEXT,f)}a.call(this);b.formEl&&m.call(this,b.formEl,"checkbox")}}function m(a,b){var c;switch(b){case"checkbox":c=a.querySelectorAll("input[type=checkbox]");if(c.length>0)for(var d=0;d<c.length;d++){var e=c[d];(e.checked||e.getAttribute("checked"))&&(e.checked=!1)}break;default:this.logger.error("the element is currently not supported!!!")}}function n(a){var b=[];if(a){var c=lpTag.unifiedWindow.applicationUtils.objectKeysAsArray(a);c.forEach(function(c){b=b.concat(a[c])})}return b}function o(){var a=!1,b=!1;if(this.SCMetadata)for(var c in this.SCMetadata)if(Array.isArray(this.SCMetadata[c])&&this.SCMetadata[c].length>0){a=!0;break}if(this.SCActionData)for(var d in this.SCActionData)if(Array.isArray(this.SCActionData[d])&&this.SCActionData[d].length>0){b=!0;break}return a&&b}function p(a){var b,c=a.actionData&&a.actionData.type,d=this.appContext.conf.unifiedConf.isMessaging?w.call(this,a.uiEvent.target):!0;a.groupID&&(b=a.groupID);var e=z(a),f=D(a),g=E(a);if(d&&!e&&c===W.CHECKED&&b){this.SCActionData||(this.SCActionData={});this.SCMetadata||(this.SCMetadata={});var h=g.publishText;this.SCMetadata[b]||(this.SCMetadata[b]=[]);this.SCActionData[b]||(this.SCActionData[b]=[]);if(a.uiEvent.target.checked){this.SCActionData[b].push(h);this.SCMetadata[b]=this.SCMetadata[b].concat(f)}else{var i=lpTag.taglets.lpUtil.indexOf(this.SCActionData[b],h);i>-1?this.SCActionData[b].splice(i,1):this.logger.error("checked actionData item does not exist!!!",this.ControllerName);for(var j=-1,k=0;k<this.SCMetadata[b].length;k++){var l=this.SCMetadata[b][k];if(R.isSameObject(l,f)){j=k;break}}j>-1?this.SCMetadata[b].splice(j,1):this.logger.error("checked metadata item does not exist!!!",this.ControllerName)}}}function q(a,b){this.isLineGroupingEnabled&&s.call(this,a,b);r.call(this,a,b);return a}function r(a,b){switch(b.type){case U.TEMPLATE_TYPES.VERTICAL:a.classList.add(this.LPCustomizationClasses.card);a.classList.add(this.LPCustomizationClasses[b.type]);break;case U.TEMPLATE_TYPES.IMAGE:a.classList.add(this.LPCustomizationClasses[b.type]);break;case U.TEMPLATE_TYPES.BUTTON:a.classList.add(this.LPCustomizationClasses[b.type]);break;case U.TEMPLATE_TYPES.MAP:a.classList.add(this.LPCustomizationClasses[b.type]);break;case U.TEMPLATE_TYPES.TEXT:a.classList.add(this.LPCustomizationClasses[b.type]);break;case U.TEMPLATE_TYPES.HORIZONTAL:a.classList.add(this.LPCustomizationClasses.card);a.classList.add(this.LPCustomizationClasses[b.type]);break;case U.TEMPLATE_TYPES.CAROUSEL:}a.classList.add(lpTag.unifiedWindow.customization.deviceClass);return a}function s(a,b){switch(b.type){case U.TEMPLATE_TYPES.VERTICAL:a.classList.add(this.LPLineGroupingClasses[b.type]);break;case U.TEMPLATE_TYPES.IMAGE:break;case U.TEMPLATE_TYPES.BUTTON:break;case U.TEMPLATE_TYPES.MAP:break;case U.TEMPLATE_TYPES.TEXT:break;case U.TEMPLATE_TYPES.HORIZONTAL:a.classList.add(this.LPLineGroupingClasses[b.type]);break;case U.TEMPLATE_TYPES.CAROUSEL:}return a}function t(a){var b=lpTag.taglets.lpUtil.getPropertyFromObject(a,"uiEvent.target.parentElement.parentElement.parentElement.parentElement.parentElement");if(b&&b.classList.contains("lp_chat_line_wrapper")){var c=this.getFirstElement(this.LPViewMap.avatarImage,b),d=this.getFirstElement(this.LPViewMap.richContentRoot,b);if(0===a.offset&&0===a.prevOffset){this.removeClass(c,"shown");this.addClass(c,"hidden");this.addClass(d,"stretch")}else{this.removeClass(c,"hidden");this.addClass(c,"shown");this.removeClass(d,"stretch")}}else this.logger.error("Error while trying to set Carousel Offset",this.ControllerName)}function u(){var a=this.getModelParam(this.uiPath.STATE),b=a===lpTag.unifiedWindow.State.CHATTING,c=this.appContext.conf.engConf.async&&a!==lpTag.unifiedWindow.State.CONNECTION_ISSUE&&a!==lpTag.unifiedWindow.State.PENDING;return c||b}function v(a,b,c){var d,e=this.getFirstElement(this.LPViewMap.lineText,c),f=this.getFirstElement(this.LPViewMap.timeAndSender+"_side",c);H.call(this,a.line,e);"agent"!==a.line.source&&this.applyDirOnElement(e,a.line.text);if(b&&"string"==typeof b){d=this.getFirstElement(this.LPViewMap.avatarImage,c);d&&(d.src=b)}this.addWrapperBubbleClass.call(this,a,c);this.setLineAndTsGrouping.call(this,a,b,c);R.runCallback(a.callback,a.context,{view:c});this.isLineGroupingEnabled&&this.moveSideTimeStamp.call(this,e,f)}function w(a){var b=a.getAttribute($);return b?x.call(this,b):!1}function x(a){return this.appContext.conversationManager.isCurrentConversation(a)}function y(a){var b=a.actionData&&a.actionData.type,c=this.appContext.conf.unifiedConf.isMessaging?w.call(this,a.uiEvent.target):!0,d=E(a),e=z(a);c&&!e&&F.call(this,D(a),V.ACTION_EVENT);b===W.PUBLISH_TEXT&&F.call(this,D(a),V.PUBLISH_TEXT,d)}function z(a){var b=a.uiEvent.timeStamp;if(_[b])return!0;_[b]=!0;setInterval(function(a){delete _[a]},10);return!1}function A(a){var b=a.actionData.web&&a.actionData.web.uri||a.actionData.uri;if("self"===a.actionData.target)window.location.assign(b);else if("slideout"===a.actionData.target)O.trigger({appName:Z,eventName:lpTag.unifiedWindow.consts.RichContent.LINK_CLICKED,data:{url:b,actionData:a.actionData}});else{var c=window.open(b,"_blank");c.opener=null}y.call(this,a)}function B(a){var b=E(a),c={query:b.la+","+b.lo},d=lpTag.taglets.lpUtil.addQueryParams(S.googleMapsUrl,c),e=window.open(d,"_blank");e.opener=null;y.call(this,a)}function C(a){u.call(this)&&y.call(this,a)}function D(a){return a&&a.metadata||[]}function E(a){return a&&a.actionData||{}}function F(a,b,c){var d={metadata:a};isNaN(parseInt(Q,10))?isNaN(parseInt(a.sequenceId,10))?d.uniqueId=a.uniqueId:d.uniqueId=a.sequenceId:d.uniqueId=Q;c&&(d.actionData=c);O.trigger({appName:Z,eventName:b,data:d})}function G(a){return a&&a.line&&(a.line.text||a.line.textKey||a.line.json)}function H(a,b){var c,d=lpTag.HtmlSanitizerUtils.sanitizeHtml(a.text).cleanText||a.json;try{c=U.render(d);a.convId&&I(c,a.convId);b.appendChild(c);F.call(this,a,V.DISPLAYED)}catch(e){a.state=T.FAILED;this.logger.error("Error when trying to render rich content: "+e.message,this.ControllerName)}}function I(a,b){var c=a.querySelectorAll("*");if(c.length>0)for(var d=0;d<c.length;d++)"function"==typeof c[d].onclick&&c[d].setAttribute($,b)}function J(a,b){var c,d,e;if(a&&a.line){if(this.lineStateSupported){c=this.translate("messagingState_"+a.line.state);d=a.line.state?this.STATE_CLASS_PREFIX+a.line.state:void 0}var f=a.line.time?this.timeStampManager.getTimeString(a.line.time):"",g=a.line.time?this.timeStampManager.getSideTimeString(a.line.time,!this.timeStampGroupingEnabled):"";e={_id:a.line.localId,source:a.line.source,sender:N.call(this,a.line),time:f,sideTime:g,state:c||"",stateClass:d||"",grouped:a.line.grouped?this.LPClassesMap.grouped[a.line.grouped]:""};if(b&&"string"==typeof b){e.avatarVisibility=this.LPClassesMap.avatarDisplay;e.avatarCustomModifier=this.LPCustomizationClasses.avatarDisplay}else{e.avatarVisibility=this.LPClassesMap.avatarHidden;e.avatarCustomModifier=this.LPCustomizationClasses.avatarHidden}}return e}function K(a){var b,c=this.appContext.conf.windowConf.agentAvatar;if(c===!0||"true"===c){b=L.call(this,a.line.originatorId)||M.call(this,a.line);"string"!=typeof b&&(b=this.appContext.conf.windowConf.agentAvatarUrl)}return b}function L(a){var b=this.getModelParam(this.chatPath.PARTICIPANTS)||{};return b&&b[a]&&b[a].imgUrl}function M(a){var b=this.getModelParam(this.uiPath.AGENT_PICTURE_URL);return a.agentPictureUrl||b&&b[a.by]}function N(a){var b="";switch(a.source){case"agent":b=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(a.by).cleanText}return b}var O,P,Q,R=lpTag.lpUtils,S=lpTag.unifiedWindow.consts,T=lpTag.unifiedWindow.MessageState,U=lpTag.JsonPollock,V=lpTag.unifiedWindow.richContentStates,W=lpTag.unifiedWindow.consts.richContentActionTypes,X=lpTag.unifiedWindow.structuredContentTypes,Y=lpTag.unifiedWindow.events.richContent,Z=lpTag.unifiedWindow.apps.RICH_CONTENT,$="data-conv-id",_={};lpTag.unifiedWindow.RichContentViewController=lpTag.unifiedWindow.ChatLineViewController.extend({ControllerName:"RichContentViewController",applicationType:"RichContentViewController",templateFileName:"<div id='lp_line_{{_id}}' class='lp_chat_line_wrapper lp_{{source}} {{avatarVisibility}} lpc_message-area lpc_message-area_{{source}} lpc_message-area_{{avatarCustomModifier}} {{deviceClass}}'><div class='lp_time lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} lpc_message-area__timestamp_{{avatarCustomModifier}} {{deviceClass}}' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'><div class='lp_sender'>{{sender}}</div>{{time}}</div><img class='agent_avatar lpc_message-area__avatar lpc_message-area__avatar_{{source}} lpc_message-area__avatar_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='agentAvatarUrl' alt='{{sender}}'><div id='lp_line_bubble_{{_id}}' class='lp_rich_content_line lpc_message lpc_message_{{source}} lpc_message_card lpc_message_{{avatarCustomModifier}} {{deviceClass}} {{grouped}}' data-lp-point='lineBubble' data-lp-cust-id='transcript_bubble_rich_content'><div class='lp_title_text lpc_message__text lpc_message__text_{{source}} lpc_message__text_card lpc_message__text_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_rich_content_text'></div></div><div class='lp_time lp_time_side lpc_message-area__side-timestamp lpc_message-area__side-timestamp_{{source}} lpc_message-area__side-timestamp_{{avatarCustomModifier}} {{deviceClass}}' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'>{{sideTime}}</div><div class='lp_time lp_time_bottom lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} lpc_message-area__timestamp_{{avatarCustomModifier}} {{deviceClass}} lpHide' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'><div class='lp_sender'>{{sender}}</div>{{time}}</div></div>",LPViewMap:{avatarImage:".agent_avatar",lineText:".lp_title_text",richContentRoot:".lp_rich_content_line"},LPCustomizationClasses:{button:"lpc_card__button",horizontal:"lpc_card_horizontal",image:"lpc_card__image",map:"lpc_card__map",text:"lpc_card__text",vertical:"lpc_card_vertical",card:"lpc_card",avatarDisplay:"avatar-shown",avatarHidden:"avatar-hidden"},LPLineGroupingClasses:{horizontal:"lpc_rich_content_grouped",vertical:"lpc_rich_content_grouped"},initialize:function(b){O=b.appContext.events;this.lineStateSupported=b.appContext.conf.engConf.async;this.SCToDisable=[];a.call(this);U.init({onAfterElementRendered:q.bind(this)})},events:function(){U.registerAction(W.LINK,A.bind(this));U.registerAction(W.NAVIGATE,B.bind(this));U.registerAction(W.PUBLISH_TEXT,C.bind(this));U.registerAction(W.CAROUSEL_OFFSET_CHANGE,t.bind(this));U.registerAction(W.CHECKED,p.bind(this));U.registerAction(W.SUBMIT_AS_TEXT,l.bind(this));b.call(this)}});P=lpTag.unifiedWindow.RichContentViewController.prototype;P.createRichContentLine=function(b){if(b){var c=K.call(this,b);if(G(b)){Q=b.line.sequenceId;this.view=this.createView({template:this.templateFileName,wrapWithDiv:!1,callback:v.bind(this,b,c),textInjection:J.call(this,b,c)});a.call(this);d.call(this,b)}}};P.moveSideTimeStamp=function(a,b){var c=this.getFirstElement(".lp-json-pollock-layout-carousel",a),d=c;if(d){b.style.display="inline-block";d.style.width=d.offsetWidth+b.offsetWidth+"px";b.style.display="none";b.style.border="none";b.style.verticalAlign="bottom";d.appendChild(b)}};P.dispose=function(){U&&U.unregisterAllActions&&U.unregisterAllActions();c.call(this);lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a,c,d){this.view=d;var e,g=this.getFirstElement(this.LPViewMap.lineText,d),j=this.getFirstElement(this.LPViewMap.image,d),k=this.getFirstElement(this.LPViewMap.state,d);this.loader=this.getFirstElement(this.LPViewMap.loader+this.viewId);this.wrapper=this.getFirstElement(this.LPViewMap.wrapper,d);this.imageLink=this.getFirstElement(this.LPViewMap.imageLink+this.viewId,d);this.uploadErrorElement=this.getFirstElement(this.LPViewMap.uploadError,d);this.imageWrapper=this.getFirstElement(this.LPViewMap.imageWrapper,this.imageLink);this.retryUploadButton=this.getFirstElement(this.LPViewMap.retryUpload,d);this.failedUploadIcon=this.getFirstElement(this.LPViewMap.failedUpload,d);b.call(this,a.line,g,j);f.call(this);h.call(this,a.line);i.call(this,a.line);"agent"!==a.line.source?this.applyDirOnElement(g,a.line.text):this.addClass(k,"lp_hidden");if(c&&"string"==typeof c){e=this.getFirstElement(this.LPViewMap.avatarImage,d);e&&(e.src=c)}this.addWrapperBubbleClass.call(this,a,d);this.setLineAndTsGrouping.call(this,a,c,d);n.runCallback(a.callback,a.context,{view:d})}function b(a,b,c){var e=a.fileData;c.src=e.preview;var f=e.relativePath||"",h=f.split(".");f=h[h.length-1].toUpperCase();if(f&&!d.call(this,e))switch(f){case"PNG":case"JPG":case"JPEG":case"GIF":break;case"PDF":case"DOCX":case"XLSX":case"PPTX":c.src=k.conf.unifiedConf.imagesRepository+"/"+f.toLowerCase()+"_m.png";this.addClass(this.imageWrapper,"icon");this.addClass(this.uploadErrorElement,"icon");break;default:c.src=k.conf.unifiedConf.imagesRepository+"/generic_m.png";this.addClass(this.imageWrapper,"icon");this.addClass(this.uploadErrorElement,"icon")}if(e.caption.length>0){b.innerText=lpTag.HtmlSanitizerUtils.sanitizeHtml(e.caption).cleanText;this.addClass(this.wrapper,"lp_image_caption")}else{g.call(this,b);d.call(this,e)&&(c.style.top="unset")}}function c(a){return a&&a.line&&a.line.fileData}function d(a){return a&&a.preview===lpTag.unifiedWindow.consts.fileSharing.fallbackThumbnail.URI}function e(a){a.showLoader?this.removeClass(this.loader,"lpHide"):this.addClass(this.loader,"lpHide");this.removeClass(this.uploadErrorElement,"lpHide");this.removeClass(this.uploadErrorElement,"can_retry");this.uploadErrorElement.removeAttribute("aria-labelledby");this.uploadErrorElement.removeAttribute("role");if(a.error)if(a.canRetry){this.uploadErrorElement.onclick=m;this.addClass(this.uploadErrorElement,"can_retry");this.uploadErrorElement.setAttribute("aria-labelledby","error_message_"+this.viewId);this.uploadErrorElement.setAttribute("role","button")}else{this.addClass(this.retryUploadButton,"lpHide");this.removeClass(this.failedUploadIcon,"lpHide");this.uploadErrorElement.onclick=null;delete this.uploadErrorElement.onclick}else this.addClass(this.uploadErrorElement,"lpHide")}function f(){j.bind({appName:o,eventName:lpTag.unifiedWindow.events.imageShare.FILE_DONE_UPLOADED+":"+this.viewId,func:e,context:this})}function g(a){var b=this.getFirstElement(this.LPViewMap.arrow),c=this.getFirstElement(this.LPViewMap.arrowBorder);if(!this.featureStateManager.isLineGroupingEnabled()){this.addClass(b,"lpHide");this.addClass(c,"lpHide")}this.addClass(a,"lpHide")}function h(a){this.imageLink.onclick=function(b){b.preventDefault();j.trigger({appName:o,eventName:lpTag.unifiedWindow.events.imageShare.FILE_DOWNLOAD_REQUEST,data:a})}}function i(a){var b=this;m=function(c){c.preventDefault();e.call(b,{showLoader:!0});j.trigger({appName:o,eventName:lpTag.unifiedWindow.events.imageShare.FILE_UPLOAD_RETRY,data:a})}}var j,k,l,m,n=lpTag.lpUtils,o=lpTag.unifiedWindow.apps.FILE_SHARE;lpTag.unifiedWindow.FileSharingViewController=lpTag.unifiedWindow.ChatLineViewController.extend({ControllerName:"FileSharingViewController",applicationType:"FileSharingViewController",lineTemplateFile:{visitor:"<div id='lp_line_{{_id}}' class='lp_chat_line_wrapper lp_image_line_wrapper lp_{{source}} {{stateClass}} {{avatarVisibility}} lpc_message-area lpc_message-area_{{source}} lpc_message-area_{{source}}-fs lpc_message-area_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_{{source}}_parent'><div class='lp_time lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} lpc_message-area__timestamp_{{source}}-fs lpc_message-area__timestamp_{{avatarCustomModifier}} {{deviceClass}}' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'><div class='lp_sender'>{{sender}}</div>{{time}}</div><div id='lp_line_bubble_{{_id}}' class='lp_chat_line lp_image_sharing_line lpc_message lpc_message_{{source}} lpc_message_{{avatarCustomModifier}} lpc_message_{{source}}-fs {{deviceClass}} {{grouped}}' data-lp-point='lineBubble' data-lp-cust-id='transcript_bubble_{{source}}'><div class='lp_file_loader lpHide' id='lp_file_loader_{{_id}}'></div><div class='lp_chat_arrow_border lpc_message-tail__border lpc_message-tail__border_{{source}} lpc_message-arrow-border_{{source}}-fs lpc_message-tail__border_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_{{source}}ArrowBorder'></div><div class='lp_chat_arrow lpc_message-tail lpc_message-tail_{{source}} lpc_message-arrow_{{source}}-fs lpc_message-tail_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_{{source}}Arrow'></div><a class='lp_image_sharing_link' data-lp-point='image_link_{{_id}}' href='#'><div class='lp_image_sharing_line_content_wrapper'><img class='lp_image_sharing_line_content'></div></a><div class='lp_image_sharing_upload_error_overlay lpHide'><div class='lp_image_sharing_upload_error'><div class='lp_image lp_failed_photo_upload lpHide'><img src='{{imagesRepository}}/error-icon.svg' alt='' aria-hidden='true'></div><div class='lp_image lp_retry_photo_upload'><img src='{{imagesRepository}}/retry-icon.svg' alt='' aria-hidden='true'></div></div></div><div class='lp_line_state_wrapper'><span class='lp_title_text lpc_message__text lpc_message__text_{{source}} lpc_message__text lpc_message__text_{{source}}-fs lpc_message__text_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_{{source}}_text'>{{text}}</span> <span data-lp-point='lp_line_state' data-lp-cust-id='transcript_time' class='lpc_message-area__indicator lpc_message-area__indicator_{{source}} lpc_message-area__indicator_{{source}}-fs lpc_message-area__indicator_{{avatarCustomModifier}} {{deviceClass}} lp_line_state'>{{state}}</span></div><div class='lp_time_side_wrapper'><div class='lp_time lp_time_side lpc_message-area__side-timestamp lpc_message-area__side-timestamp_{{source}} lpc_message-area__timestamp_{{source}}-fs lpc_message-area__side-timestamp_{{avatarCustomModifier}} {{deviceClass}}' title='{{sender}} {{time}}' style='display:none' data-lp-cust-id='transcript_time'>{{sideTime}}</div></div></div><div class='lp_time lp_time_bottom lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} lpc_message-area__timestamp_{{source}}-fs lpc_message-area__timestamp_{{avatarCustomModifier}} {{deviceClass}} lpHide' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'><div class='lp_sender'>{{sender}}</div>{{time}}</div></div>",
agent:"<div id='lp_line_{{_id}}' class='lp_chat_line_wrapper lp_image_line_wrapper lp_{{source}} {{stateClass}} {{avatarVisibility}} lpc_message-area lpc_message-area_{{source}} lpc_message-area_{{source}}-fs lpc_message-area_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_{{source}}_parent'><div class='lp_time lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} lpc_message-area__timestamp_{{source}}-fs lpc_message-area__timestamp_{{avatarCustomModifier}} {{deviceClass}}' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'><div class='lp_sender'>{{sender}}</div>{{time}}</div><img class='agent_avatar lpc_message-area__avatar lpc_message-area__avatar_{{source}} lpc_message-area__avatar_{{source}}-fs lpc_message-area__avatar_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='agentAvatarUrl' alt='{{sender}}'><div id='lp_line_bubble_{{_id}}' class='lp_chat_line lp_image_sharing_line lpc_message lpc_message_{{source}} lpc_message_{{avatarCustomModifier}} lpc_message_{{source}}-fs {{deviceClass}} {{grouped}}' data-lp-point='lineBubble' data-lp-cust-id='transcript_bubble_{{source}}'><div class='lp_file_loader lpHide' id='lp_file_loader_{{_id}}'></div><div class='lp_chat_arrow_border lpc_message-tail__border lpc_message-tail__border_{{source}} lpc_message-arrow-border_{{source}}-fs lpc_message-tail__border_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_{{source}}ArrowBorder'></div><div class='lp_chat_arrow lpc_message-tail lpc_message-tail_{{source}} lpc_message-arrow_{{source}}-fs lpc_message-tail_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_{{source}}Arrow'></div><a class='lp_image_sharing_link' data-lp-point='image_link_{{_id}}' href='#'><div class='lp_image_sharing_line_content_wrapper'><img class='lp_image_sharing_line_content'></div></a><div class='lp_image_sharing_upload_error_overlay lpHide'><div class='lp_image_sharing_upload_error'><div class='lp_image lp_failed_photo_upload lpHide'><img src='{{imagesRepository}}/error-icon.svg' alt='' aria-hidden='true'></div><div class='lp_image lp_retry_photo_upload'><img src='{{imagesRepository}}/retry-icon.svg' alt='' aria-hidden='true'></div></div></div><span class='lp_title_text lpc_message__text lpc_message__text_{{source}} lpc_message__text lpc_message__text_{{source}}-fs lpc_message__text_{{avatarCustomModifier}} {{deviceClass}}' data-lp-cust-id='transcript_bubble_{{source}}_text'>{{text}}</span></div><div class='lp_time lp_time_side lpc_message-area__side-timestamp lpc_message-area__side-timestamp_{{source}} lpc_message-area__side-timestamp_{{avatarCustomModifier}} {{deviceClass}}' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'>{{sideTime}}</div><div class='lp_time lp_time_bottom lpc_message-area__timestamp lpc_message-area__timestamp_{{source}} lpc_message-area__timestamp_{{source}}-fs lpc_message-area__timestamp_{{avatarCustomModifier}} {{deviceClass}} lpHide' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'><div class='lp_sender'>{{sender}}</div>{{time}}</div></div>"},LPViewMap:{avatarImage:".agent_avatar",lineText:".lp_title_text",image:".lp_image_sharing_line_content",imageWrapper:".lp_image_sharing_line_content_wrapper",loader:"#lp_file_loader_",wrapper:".lp_line_state_wrapper",arrow:".lp_chat_arrow",arrowBorder:".lp_chat_arrow_border",imageLink:"^image_link_",uploadError:".lp_image_sharing_upload_error_overlay",retryUpload:".lp_retry_photo_upload",failedUpload:".lp_failed_photo_upload"},initialize:function(a){j=a.appContext.events;k=a.appContext},events:function(){}});l=lpTag.unifiedWindow.FileSharingViewController.prototype;l.createFileContentLine=function(b){if(b){var d=this.getAvatarUrl(b);if(c(b)){this.uniqueId=b.line.sequenceId;this.viewId=b.line.localId;var e=this.getTextInjection(b,d);this.view=this.createView({template:this.lineTemplateFile[b.line.source],wrapWithDiv:!1,callback:a.bind(this,b,d),textInjection:e})}}};l.dispose=function(){lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this);j.unbind({appName:o,eventName:lpTag.unifiedWindow.events.imageShare.FILE_DONE_UPLOADED+":"+this.viewId,func:e,context:this})}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){var a,b,c;lpTag.unifiedWindow.DateLineViewController=lpTag.unifiedWindow.AutoMessageViewController.extend({ControllerName:"DateLineViewController",applicationType:"DateLineViewController",templateFileName:"<div class='lp_chat_line_wrapper lpc_message-area lpc_message-area_date {{deviceClass}}'><div id='lp_date_line_{{_id}}' class='lp_time lp_chat_line_date_message lpc_message-area__timestamp lpc_message-area__timestamp_date {{deviceClass}}' title='{{text}}' data-lp-cust-id='transcript_message'>{{html}}</div></div>",initialize:function(c){a=c.appContext.events;b=c.appContext},events:function(){}});c=lpTag.unifiedWindow.DateLineViewController.prototype;c.createDateMessage=function(a){this.createAutoMessage.call(this,a)};c.dispose=function(){lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)}}();!function(){function a(a){this.closeButton=this.getFirstElement(l.closeButton,a);this.downloadButton=this.getFirstElement(l.downloadButton,a);this.downloadMessage=this.getFirstElement(l.downloadMessage,a);this.loader=this.getFirstElement(l.loader,a);this.image=this.getFirstElement(l.image,a);this.title=this.getFirstElement(l.title,a);this.caption=this.getFirstElement(l.caption,a);this.closeButton.onclick=d.bind(this);this.image.onload=b.bind(this);this.image.onerror=d.bind(this);if(this.type){this.addClass(this.image,"clickable");this.image.onclick=e.bind(this);this.removeClass(this.downloadMessage,"lpHide");this.removeClass(this.downloadButton,"lpHide");this.downloadMessage.onclick=e.bind(this);this.downloadButton.onclick=e.bind(this)}this._hideInformation=i.bind(this);this._showInformation=h.bind(this);if(this.appContext.deviceDetector.isDesktop()){this.bindViewEvent({selector:l.overlay,callback:h,DOMEvent:"mousemove",context:this});this.bindViewEvent({selector:l.overlay,callback:i,DOMEvent:"mouseleave",context:this});this._hideInformation()}else this.bindViewEvent({selector:l.image,callback:f,DOMEvent:"click",context:this});this.bindViewEvent({selector:l.overlay,callback:g,DOMEvent:"click",context:this});j.events.trigger({appName:lpTag.unifiedWindow.apps.FILE_SHARE,eventName:lpTag.unifiedWindow.events.imageShare.SHOW_PREVIEW,data:a})}function b(){this.addClass(this.loader,"lpHide");if(this.captionText.length>0){this.removeClass(this.caption,"lpHide");window.addEventListener("resize",c.bind(this));c.call(this)}else if(this.type){window.addEventListener("resize",c.bind(this));c.call(this)}}function c(){var a=this.type&&this.captionText.length?p:0,b=this.type&&this.captionText.length?a+o+this.caption.clientHeight:0,c=this.image.offsetHeight+this.image.offsetTop-this.caption.clientHeight+n+b;this.caption.style.top=c+"px";c+this.caption.clientHeight>window.innerHeight&&window.innerHeight-c>0&&(this.caption.style.height=window.innerHeight-c+"px");var d=this.image.offsetLeft-n-4*a;0>d&&(d=0);this.caption.style.left=d+"px";var e=this.image.width+2*n+8*a;e>window.innerWidth&&(e=window.innerWidth);this.caption.style.width=e+"px";this.downloadMessage.style.top=this.image.offsetHeight+this.image.offsetTop+o+"px";this.downloadMessage.style.left=this.image.offsetLeft+this.image.offsetWidth/2-this.downloadMessage.offsetWidth/2-p/2+"px";this.downloadButton.style.top=this.image.offsetHeight+this.image.offsetTop+o+"px";this.downloadButton.style.left=this.image.offsetLeft+this.image.offsetWidth/2+this.downloadMessage.offsetWidth/2+"px"}function d(){j.events.trigger({appName:lpTag.unifiedWindow.apps.FILE_SHARE,eventName:lpTag.unifiedWindow.events.imageShare.OVERLAY_CLOSED});window.removeEventListener("resize",c.bind(this));this.dispose()}function e(){j.events.trigger({appName:lpTag.unifiedWindow.apps.FILE_SHARE,eventName:lpTag.unifiedWindow.events.imageShare.FILE_DOWNLOAD_REQUEST,data:{fileData:this.line&&this.line.fileData,convId:this.line&&this.line.convId,download:!0}})}function f(){t?this._hideInformation():this._showInformation()}function g(a){var b=this.hasClass(a.target,q);b&&b.length>0&&b[0]&&d.call(this)}function h(){if(!t){t=!0;this.animate(this.closeButton,{duration:s,opacity:"1"});this.animate(this.title,{duration:s,opacity:"1"});this.captionText.length>=0&&this.animate(this.caption,{duration:s,opacity:"1"})}if(this.appContext.deviceDetector.isDesktop()){clearTimeout(k);k=setTimeout(this._hideInformation,3e3)}}function i(){t=!1;this.animate(this.closeButton,{duration:r,opacity:"0"});this.animate(this.title,{duration:r,opacity:"0"});this.captionText.length>=0&&this.animate(this.caption,{duration:r,opacity:"0"});this.appContext.deviceDetector.isDesktop()&&clearTimeout(k)}var j,k,l={closeButton:".lp_close",downloadButton:".lp_download_inline",downloadMessage:".lp_preview_download_message",loader:".lp_file_loader",image:".lp_preview_image",title:".lp_preview_title",caption:".lp_preview_caption",overlay:".lp_overlay"},m="{{dayOfMonth}} {{month}}, {{hour}}:{{minutes}} {{ampm}}",n=1,o=5,p=40,q="lp_overlay",r=300,s=300,t=!0;lpTag.unifiedWindow.PhotoOverlayViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"PhotoOverlayViewController",initialize:function(a){this.appContext=j=a.appContext;this.imageURL=a.imageURL;this.timestamp=this.getTimestampString(a.timestamp);this.captionText=a.caption||"";this.line=a.line;this.type=a.type},render:function(){this.view=this.createView({template:"<div class='lp_overlay'><div class='lp_overlay_header'></div><div class='lp_preview_title'>{{timeStamp}}</div><button title='{{tooltip_Close}}' aria-label='{{tooltip_Close}}' class='lp_close' data-lp-point='close' role='button'><img src='{{imagesRepository}}/close-icon.svg' alt='{{tooltip_Close}}'></button><div class='lp_file_loader'></div><img src='{{imageURL}}' class='lp_preview_image'><div class='lp_preview_caption lpHide' aria-label='{{caption}}'>{{caption}}</div><div class='lp_preview_download_message lpHide'>{{tooltip_Download}}</div><button title='{{tooltip_Download}}' aria-label='{{tooltip_Download}}' class='lp_download lp_download_inline lpHide' data-lp-point='download' role='button'><img src='{{imagesRepository}}/download-icon.png' alt='{{tooltip_Download}}'></button></div>",wrapWithDiv:!1,callback:a.bind(this),textInjection:{tooltip_Close:this.translate("close")||"close",imagesRepository:this.appContext.conf.unifiedConf.imagesRepository,imageURL:this.imageURL,timeStamp:this.timestamp,caption:this.captionText}})},getTimestampString:function(a){var b=new Date(a),c="";if(b.getTime()){var d=b.getMonth(),e=b.getDate(),f=b.getHours(),g=b.getMinutes(),h=this.getMonthNames(),i="",j="am";h&&(i=h[d]);var k=(10>g?"0":"")+g;if(f>=12){j="pm";f>=13&&(f-=12)}else 1>f&&(f+=12);c=this.templateString(m,{month:i,dayOfMonth:e,hour:f,minutes:k,ampm:j})}return c}})}();!function(){function a(a){g.call(this,this.sendIconType,a);this.closeButton=this.getFirstElement(i.closeButton,a);this.sendIconTypeToUse=this.sendIconType===this.BUTTON_TYPES.PAPER_PLANE?i.paperPlaneButton:i.arrowIconButton;this.submitButton=this.getFirstElement(this.sendIconTypeToUse,a);this.imageElement=this.getFirstElement(i.image,a);this.captionView=this.getFirstElement(i.caption,a);this.overlayElement=this.getFirstElement(i.overlay,a);this.closeButton.onclick=b.bind(this,!0);this.submitButton.onclick=b.bind(this,!1);this.textarea=new lpTag.unifiedWindow.ExpandableTextAreaViewController({appContext:this.appContext,targetView:this.getFirstElement(i.inputContainer,a),minRows:1,maxRows:10,resizeCallback:d,context:this});this.textareaDomEl=this.textarea.textarea;this.textareaDomEl.placeholder=this.translate("insertTextHere");this.addClass(this.textareaDomEl,j.TEXT_AREA_CLASS);c.call(this);this.bindViewEvent({selector:i.input,callback:f,DOMEvent:"keypress",context:this});h.events.trigger({appName:lpTag.unifiedWindow.apps.FILE_SHARE,eventName:lpTag.unifiedWindow.events.imageShare.IMAGE_PREVIEW_SHOW,data:a});this.appContext.deviceDetector.isDesktop()&&(this.appContext.deviceDetector.isIE()?setTimeout(function(){this.textareaDomEl.focus()}.bind(this),100):this.textareaDomEl.focus())}function b(a){this.removeClass(this.overlayElement,j.OPEN_PREVIEW_CLASS);a||h.uiStateManager.setActionsVisibility(!1);setTimeout(function(b){var c={caption:b.textarea.getValue(),image:b.image};h.events.trigger({appName:lpTag.unifiedWindow.apps.FILE_SHARE,eventName:lpTag.unifiedWindow.events.imageShare.IMAGE_PREVIEW_CLOSED,data:a?!1:c});b.dispose()},j.IMAGE_TRANSITION_TIME,this)}function c(){var a=this.imageElement,b=this.overlayElement,c=this;if(this.type){a.style["background-image"]="url('"+this.appContext.conf.unifiedConf.imagesRepository+"/"+this.type.toLowerCase()+".png')";this.addClass(a,"icon");setTimeout(function(){c.addClass(b,j.OPEN_PREVIEW_CLASS)},10)}else{var d=new FileReader,e=new Image;d.onloadend=function(){e.src=d.result;e.onload=function(){a.style["background-image"]="url('"+d.result+"')";setTimeout(function(){c.addClass(b,j.OPEN_PREVIEW_CLASS)},10)}};d.readAsDataURL(this.image)}}function d(a){this.captionView.style.height=a+j.INPUT_MARGIN_HEIGHT+"px"}function e(a){return"which"in a?a.which:a.keyCode}function f(a){var c=e(a);if(13===c){a.stopPropagation();a.preventDefault();b.call(this,!1)}}function g(a,b){var c=this.getFirstElement(i.arrowIconButton,b),d=this.getFirstElement(i.paperPlaneButton,b);if(a===this.BUTTON_TYPES.PAPER_PLANE){this.hide(c);this.show(d)}else{this.hide(d);this.show(c)}}var h,i={closeButton:".lp_close",image:".lp_image_preview",overlay:".lp_image_preview_background",contentWrapper:".lp_image_preview_content",inputContainer:".lp_input_area",caption:".lp_preview_caption",arrowIconButton:".lp_send_button",paperPlaneButton:"^paper_plane_button",input:".photoPreviewCaption"},j={OPEN_PREVIEW_CLASS:"open",INPUT_MARGIN_HEIGHT:20,IMAGE_TRANSITION_TIME:500,TEXT_AREA_CLASS:"photoPreviewCaption"};lpTag.unifiedWindow.PhotoPreviewViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"PhotoPreviewViewController",BUTTON_TYPES:{ARROW:"arrow",PAPER_PLANE:"paper_plane"},initialize:function(a){this.appContext=h=a.appContext;this.image=a.image;this.type=a.type;this.featureStateManager=this.appContext.featureStateManager;this.sendIconType=this.featureStateManager.getSendIconType()},render:function(){this.view=this.createView({template:"<div class='lp_image_preview_background'><div class='lp_image_preview_content'><div class='lp_preview_close_wrapper'><button title='{{tooltip_Close}}' aria-label='{{tooltip_Close}}' class='lp_close' data-lp-point='close' role='button'><div class='lp_close-icon' data-lp-type='icon'><img src='{{iconsRepository}}/sprites_v1.png' alt='{{tooltip_Close}}'></div></button></div><div class='lp_image_preview_wrapper'><div class='lp_image_preview'></div><div class='lp_preview_caption lp_bottom_area'><div class='lp_input_area'></div><button class='lp_paper_plane_button lpc_composer__send-button {{deviceClass}}' data-lp-point='paper_plane_button' title='{{tooltip_SendIcon}}'><div class='lp_paper_plane-icon' data-lp-type='icon' data-lp-point='paper_plane_button_image'><svg class='lpc_composer__send-button-asset {{deviceClass}}' width='22px' height='22px' viewBox='0 0 22 22' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><g id='ic/light/send' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'><polygon id='Fill-7' points='0 22 22 22 22 0 0 0'></polygon><path d='M19.5,2.23218009 L19.5,17.619667 C19.5,18.1533381 18.9468217,18.5072492 18.4622874,18.2835724 L13.0202349,15.7713436 L8.67092037,20.2745151 C8.21407533,20.747521 7.41372181,20.4241223 7.41372181,19.7665191 L7.41372181,12.9910246 L2.00514597,11.2319965 C1.38375428,11.0299017 1.31921893,10.1763787 1.90315878,9.88314805 L18.4406226,1.57871144 C18.9268923,1.33452671 19.5,1.68804369 19.5,2.23218009 Z M18.5250237,2.62732828 L2.87073871,10.4882687 L8.38869809,12.2828715 L8.38869809,19.1632964 L12.8000787,14.5958634 L18.5250237,17.2386846 L18.5250237,2.62732828 Z M10.3411214,11.5458808 L9.95124199,11.1235575 C9.87631682,11.0423975 9.88137122,10.9158654 9.96253129,10.8409402 C9.96409632,10.8394954 9.96568434,10.8380757 9.96729473,10.8366816 L14.5930363,6.83228649 C14.6746678,6.76161998 14.7976521,6.76850182 14.8708901,6.84783439 L15.2607695,7.27015767 C15.3356947,7.35131775 15.3306403,7.47784983 15.2494802,7.55277499 C15.2479152,7.5542198 15.2463272,7.55563951 15.2447168,7.55703359 L10.6189753,11.5614287 C10.5373437,11.6320952 10.4143594,11.6252134 10.3411214,11.5458808 Z' id='Combined-Shape' fill='#000000'></path></g></svg></div></button> <button class='lp_send_button' title='{{tooltip_SendIcon}}' aria-label='{{tooltip_SendIcon}}' role='button'><div class='lp_send-icon' data-lp-type='icon'><img src='{{iconsRepository}}/sprites_v1.png' alt=''></div></button></div></div></div></div>",wrapWithDiv:!1,callback:a.bind(this),textInjection:{tooltip_Close:this.translate("close")||"close",imagesRepository:this.appContext.conf.unifiedConf.imagesRepository,iconsRepository:this.appContext.conf.unifiedConf.iconsRepository,image:this.image}})}})}();!function(){function a(a,c){b(a,c);d(c)}function b(a,b){try{r=new t({el:a,items:b.quickReplies.replies,rowSize:b.quickReplies.itemsPerRow,renderer:t.Renderer.StructuredContentButton})}catch(c){v.error("error when trying to render quick replies: "+c.message,s)}}function c(){if(r){r.dispose();r=null}else v.debug("no chips instance to dispose, skipping",s)}function d(a){if(r){r.on("action:publishText",j(g.bind(null,a)));r.on("action:link",j(h.bind(null,a)));r.on("action:navigate",j(i.bind(null,a)))}else v.debug("no chips instance to bind, skipping",s)}function e(){if(r){r.off("action:publishText");r.off("action:link");r.off("action:navigate")}else v.debug("no chips instance to unbind, skipping",s)}function f(a,b,c){q.trigger({appName:x,eventName:c,data:{payload:b,sequenceId:a.sequenceId}})}function g(a,b){f(a,k(b),y.ACTION_EVENT);f(a,b,y.PUBLISH_TEXT)}function h(a,b){var c=m(b);c&&window.open(c,"_blank");f(a,k(b),y.ACTION_EVENT)}function i(a,b){var c=n(b);c&&window.open(c,"_blank");f(a,k(b),y.ACTION_EVENT)}function j(a){return function(){e();c();return a.apply(null,arguments)}}function k(a){return a&&a.metadata||[]}function l(a){return a&&a.action||{}}function m(a){var b=l(a);return b.web&&b.web.uri||b.uri}function n(a){var b=l(a),c={query:b.la+","+b.lo};return u.addQueryParams(w.googleMapsUrl,c)}window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};var o,p,q,r,s="QuickRepliesDecorator",t=lpTag.chips["default"],u=lpTag.taglets.lpUtil,v=lpTag.unifiedWindow.log,w=lpTag.unifiedWindow.consts,x=lpTag.unifiedWindow.apps.QUICK_REPLIES,y=lpTag.unifiedWindow.quickRepliesStates;lpTag.unifiedWindow.QuickRepliesDecorator=lpTag.unifiedWindow.QuickRepliesDecorator||function(a){v.info("construct",s);p=a.appContext;q=a.appContext.events};o=lpTag.unifiedWindow.QuickRepliesDecorator.prototype;o.decorate=a;o.dispose=c}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a,b){var c=this.translate("surveyRequireField");switch(a){case this.QUESTION_TYPE.CHECKBOX:c=b&&b.length>1?this.translate("surveyRequireCheckbox"):this.translate("surveyRequireOption");break;case this.QUESTION_TYPE.RADIO:case this.QUESTION_TYPE.RADIO_HORIZONTAL:case this.QUESTION_TYPE.SELECT:c=this.translate("surveyRequireOption")}return c}function b(){for(var a,b=this.surveyLogic.getAllQuestions(!0),d=0;d<b.length;++d){a=this.createQuestion(b[d]);this.questionViews.push(a);this.appContext.deviceDetector.isIOS()&&this.bindViewEvent({view:this.questionViews[d],DOMEvent:"touchstart",callback:this.viewTapped})}f.call(this)&&(this.isSubmitSurveyDisabled=!0);this.pagingVC=new lpTag.unifiedWindow.PagingViewController({onInitialize:c(this),submitCallback:g,cancelCallback:h,validatorCallback:this.validateQuestionOnNext,activeIndexCallback:this.onActiveIndexChange,context:this,template:"<div class='lp_survey_view_container lpc_survey-area {{deviceClass}}' data-lp-cust-id='surveyArea' role='region'><div class='lp_pages_area' data-lp-point='pages_area'></div><div class='lp_pagination-area'><div class='lp_buttons_area'><button class='lp_prev_button lpc_survey-area__previous-button {{deviceClass}}' data-lp-point='prev_button' data-lp-cust-id='cancel_button'>{{back}}</button> <button class='lp_cancel_button lpc_survey-area__cancel-button {{deviceClass}}' data-lp-point='cancel_button' data-lp-cust-id='cancel_button'>{{cancel}}</button> <button class='lp_next_button lpc_survey-area__next-button {{deviceClass}}' data-lp-point='next_button' data-lp-cust-id='button'>{{next}}</button> <button class='lp_submit_button lpc_survey-area__submit-button {{deviceClass}}' data-lp-point='submit_button' data-lp-cust-id='button'>{{submit}}</button> <button class='lp_close_survey_button lpc_survey-area__close-button {{deviceClass}}' data-lp-point='close_survey_button' data-lp-cust-id='close_survey_button'>{{close}}</button></div><div class='lp_pager' data-lp-point='pager'></div></div></div>",appContext:this.appContext,pages:this.questionViews,target:this.LPViewMap.container,parent:this,headerText:this.headerText,footerText:this.footerText,textInjection:l.call(this,b.length),isLogicalSurvey:this.isLogicalSurvey,activeQuestions:this.surveyLogic.getActiveQuestionsIds()})}function c(a){return function(){d.call(a);this.onInitialize&&this.onInitialize()}}function d(){var a=!this.appContext.deviceDetector.isDesktop();a&&this.questionViews&&this.questionViews[0]&&this.questionViews[0].question.type===this.QUESTION_TYPE.CSAT?e():this.isFocusInsideApp()&&this.questionViews&&this.questionViews[0]&&"function"==typeof this.questionViews[0].setFocus&&this.questionViews[0].setFocus()}function e(){document.activeElement.blur()}function f(){return this.questionViews&&this.questionViews[0]&&this.questionViews[0].question.type===this.QUESTION_TYPE.CSAT?!0:!1}function g(){var a;if(this.validateSurvey()){a=this.surveyLogic.getJSONSurvey();a&&i.call(this,{survey:a.survey,status:a.survey&&a.survey.question.length>0?this.consts.csatStatus.FILLED:this.consts.csatStatus.SKIPPED,onError:this.onSubmitError,context:this})}}function h(){var a,b=this.surveyType,c=this.appContext;a=this.sendDataOnCancel?{status:this.consts.csatStatus.SKIPPED}:null;i.call(this,a);lpTag.hooks&&lpTag.hooks.exec&&lpTag.hooks.exec({name:lpTag.unifiedWindow.hooks.AFTER_ABANDONED_SURVEY,data:{context:c,surveyType:b,surveyData:a}})}function i(a){var b,c;switch(this.surveyType){case lpTag.unifiedWindow.SurveyType.PRE_CHAT:b=lpTag.unifiedWindow.events.application.PRE_CHAT_SURVEY;break;case lpTag.unifiedWindow.SurveyType.EXIT_CHAT:a&&a.survey&&(a.survey.emailTranscriptSubject="Your chat transcript");b=lpTag.unifiedWindow.events.application.POST_CHAT_SURVEY;break;case lpTag.unifiedWindow.SurveyType.OFFLINE:b=lpTag.unifiedWindow.events.application.OFFLINE_SURVEY;break;case lpTag.unifiedWindow.SurveyType.PRE_SMS:b=a&&a.survey?lpTag.unifiedWindow.events.application.PRE_SMS_FORM:lpTag.unifiedWindow.events.application.PRE_SMS_FORM_EXIT;break;default:b=lpTag.unifiedWindow.events.application.OFFLINE_SURVEY}if(lpTag.hooks&&lpTag.hooks.exec){c=lpTag.hooks.exec({name:lpTag.unifiedWindow.hooks.BEFORE_SUBMIT_SURVEY,data:{surveyType:b,questionsInfo:this.surveyLogic.getAllQuestions(),surveyData:a}});a=c&&c.data&&c.data.surveyData||a}this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:b,data:a})}function j(a){var b=a.newValue;this.pagingVC&&(b===lpTag.unifiedWindow.State.CONNECTION_ISSUE?this.pagingVC.enableSubmit(!1):this.pagingVC.enableSubmit(!0))}function k(a,b){if(a)for(var c=0;c<a.length;c++)if(a[c].id===b)return c;return-1}function l(a){if(a>0)return{};switch(this.surveyType){case lpTag.unifiedWindow.SurveyType.PRE_CHAT:return{submit:this.appContext.translator.translate("startChat")};case lpTag.unifiedWindow.SurveyType.EXIT_CHAT:case lpTag.unifiedWindow.SurveyType.OFFLINE:this.isCloseSurveyVisible=!0;return{};default:return{}}}function m(a,b,c,d){if(!t){var e=b&&b.header?b.header+" "+c:c;a.setAttribute("aria-label",e)}if(d){a.setAttribute("tabindex","0");a.setAttribute("role","region")}else{a.setAttribute("aria-live","assertive");a.setAttribute("role","presentation")}}function n(){if(!t){var a=this.appContext.deviceDetector.isDesktop();if(0!==this.questionViews.length&&!u&&!s){var b=this.view.getElementsByClassName("lp_survey_container");if(b&&b.length>0){var c=b[0];s=c.getAttribute("aria-label");var d=this.translate("surveyLabel");if(s!==d){c.removeAttribute("aria-label");var e=this.questionViews&&this.questionViews[0];e.addToLabel(s,a);u=!0}}}}}function o(a){if(!t){var b=this.appContext.deviceDetector.isDesktop();if(0!==this.questionViews.length&&u&&s){var c=this.questionViews&&this.questionViews[0];if(a===c){var d=this.view.getElementsByClassName("lp_survey_container");if(d&&d.length>0){var e=d[0];e.setAttribute("aria-label",s);c.revertLabel(b);s=null}}}}}function p(a){if(!a.questions||!a.questions.question)return!1;for(var b=!1,c=a.questions.question,d=0;d<c.length;d++)if(c[d]&&c[d].entry&&c[d].entry[0]&&c[d].entry[0].logic){b=!0;break}return b}var q,r=lpTag.taglets.lpUtil,s=null,t=!1,u=!1,v=150;lpTag.unifiedWindow.SurveyViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"SurveyViewController",applicationType:"SurveyViewController",className:"lp_survey_area",errorTemplateFileName:"<div class='{{wrapperClass}}wrapper' role='alert'><img class='lp_error_img' src='{{url}}' alt='{{errorAltText}}'><div id='{{id}}' class='lp_error_text lp_text' data-lp-point='errorText' aria-live='polite'>{{text}}</div></div>",QUESTION_TYPE:{TEXT_FIELD:"Text Field",TEXT_AREA:"Text Area",SELECT:"Dropdown Box",RADIO:"Radio Button",RADIO_HORIZONTAL:"Radio Button (side by side)",CHECKBOX:"Checkbox",CSAT:"CSAT"},LPViewMap:{lpSurveyArea:".lp_survey_area",question:".lp_question",label:".lp_question_label",container:".lp_survey_container",headerError:".lp_survey_header_error"},LPClassMap:{content:"lp_lpview_content",headerError:"lp_survey_header_error",SurveyError:"lp_surveyError_",logo_top_margin:"lp_logo_top_margin"},LPCustomizationClass:{logo_top_margin:"lpc_survey-area_logo"},questionTemplates:["<input id='{{id}}' class='lp_input-field' aria-labelledby='{{ariaLabel}}' type='{{type}}' placeholder='{{defaultTextArea}}' aria-required='{{isMandatory}}'>","<span class='lp_radio_button' aria-labelledby='{{ariaLabel}}'><input id='{{inputId}}' type='radio' value='{{value}}' name='{{name}}'><label for='{{inputId}}'>{{label}}</label></span>","<select id='{{id}}' class='lp_select_field' role='listbox' aria-labelledby='{{ariaLabel}}' aria-required='{{isMandatory}}'></select>","<div class='lp_checkbox_button'><input id='{{inputId}}' type='checkbox' value='{{value}}' name='{{name}}'><label for='{{inputId}}'>{{label}}</label></div>","<div class='lp_question'><div id='{{id}}' class='lp_question_label lpc_survey-area__question-label {{deviceClass}}'>{{label}}</div><div class='lp_lpview_content lp_content lpc_survey-area__question-content {{deviceClass}}'></div></div>","<textarea id='{{id}}' class='lp_textarea_field' aria-labelledby='{{ariaLabel}}' type='{{type}}' aria-required='{{isMandatory}}'></textarea>","<div id='{{id}}' class='lp_csat_rater lpc_survey-area__question-content {{deviceClass}}' role='region'><form><fieldset class='lp_csat_rater_stars'><legend>{{label}}</legend><a href='javascript:void(0)' class='lp_csat_rater_star' role='button' title='{{labelStar5}}' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='5' aria-pressed='false' aria-label='{{label}} 5 {{of}} {{numberOfStars}}'></a> <a href='javascript:void(0)' class='lp_csat_rater_star' role='button' title='{{labelStar4}}' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='4' aria-pressed='false' aria-label='{{label}} 4 {{of}} {{numberOfStars}}'></a> <a href='javascript:void(0)' class='lp_csat_rater_star' role='button' title='{{labelStar3}}' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='3' aria-pressed='false' aria-label='{{label}} 3 {{of}} {{numberOfStars}}'></a> <a href='javascript:void(0)' class='lp_csat_rater_star' role='button' title='{{labelStar2}}' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='2' aria-pressed='false' aria-label='{{label}} 2 {{of}} {{numberOfStars}}'></a> <a href='javascript:void(0)' class='lp_csat_rater_star' role='button' title='{{labelStar1}}' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='1' aria-pressed='false' aria-label='{{label}} 1 {{of}} {{numberOfStars}}'></a></fieldset></form><div class='lp_csat_rater_current_rating lpc_survey-area__current-rating {{deviceClass}}' data-lp-point='current_rating' tabindex='0'>{{rating}}</div><div class='lp_survey_disclaimer lpc_survey-area__disclaimer {{deviceClass}}'>{{csatDisclaimer}}</div></div>","<div class='{{wrapperClass}}wrapper' role='alert'><img class='lp_error_img' src='{{url}}' alt='{{errorAltText}}'><div id='{{id}}' class='lp_error_text lp_text' data-lp-point='errorText' aria-live='polite'>{{text}}</div></div>"],initialize:function(a){s=null;u=!1;var c,d=a.survey&&a.survey.newValue;this.hasHeaderError=!1;this.isCloseSurveyVisible=!1;this.isSubmitSurveyDisabled=!1;this.activeIndex=0;this.questionViews=[];this.models=a.models;this.iconsRepository=a.iconsRepository;this.imagesRepository=a.imagesRepository;this.errorIconURL=this.imagesRepository+"/error-15x15.png";this.appContext=a.appContext;this.surveyType=a.surveyType;this.defaultSelect=a.defaultSelect;this.sendDataOnCancel=this.appContext.conf.engConf.async;this.consts=lpTag.unifiedWindow.consts;this.addLogo=r.getPropertyFromObject(this.appContext,"conf.windowConf.logoPinToTop");this.deviceClass=lpTag.unifiedWindow.customization.deviceClass;this.view.setAttribute("data-lp-cust-id","surveyArea");this.createView({elementType:"div",className:"lp_survey_bottom_spacer"});c=this.createView({elementType:"div",className:"lp_survey_container"});c.classList.add("lpc_survey-area-wrapper");c.classList.add(this.deviceClass);c.setAttribute("data-lp-cust-id","surveyArea");t=!this.appContext.deviceDetector.isDesktop()&&this.appContext.deviceDetector.isIOS();m(c,d,this.translate("surveyLabel"),this.appContext.deviceDetector.isDesktop());if(d){this.headerText=d.header;this.headerText=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(this.headerText).cleanText;this.footerText=d.footer;this.footerText=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(this.footerText).cleanText;this.isLogicalSurvey=p(d);this.surveyLogic=new lpTag.taglets.SurveyLogic({survey:d});this.loadResource(this.questionTemplates,b)}if(this.addLogo){r.addClass(this.getFirstElement(this.LPViewMap.lpSurveyArea),this.LPClassMap.logo_top_margin);r.addClass(this.getFirstElement(this.LPViewMap.lpSurveyArea),this.LPCustomizationClasses.logo_top_margin)}},render:function(){this.customize(this.view)},events:function(){if(0!==this.questionViews.length){this.appContext.events.bind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:d});t||n.call(this)}this.appContext.deviceDetector.isDesktop()?this.preventScroll({selector:this.LPViewMap.container,inView:this.view}):this.appContext.deviceDetector.isIOS()&&this.limitScroll({view:this.view.parentNode});this.appContext.browserStateManager.on(this.appContext.browserStateManager.EVENT_NAME.ORIENTATION_CHANGE,this.onActiveIndexChange,this);this.bindModel({path:this.uiPath.STATE,callback:j,context:this});this.appContext.events.bind({appName:"*",eventName:this.EventName.chat.SURVEY_ERROR,context:this,func:this.onSubmitError});this.appContext.events.bind({appName:"survey",eventName:"blur",func:this.validateQuestionOnBlur,context:this});this.appContext.events.bind({appName:"survey",eventName:"submitAnswer",
func:this.submitAnswer,context:this});this.appContext.deviceDetector.isIOS()&&this.bindViewEvent({selector:this.LPViewMap.container,DOMEvent:"touchstart",callback:this.viewTapped});0!==this.questionViews.length&&this.appContext.events.bind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:d});this.appContext.deviceDetector.isDesktop()?this.preventScroll({selector:this.LPViewMap.container,inView:this.view}):this.appContext.deviceDetector.isIOS()&&this.limitScroll({view:this.view.parentNode})}});q=lpTag.unifiedWindow.SurveyViewController.prototype;q.viewTapped=function(a){"INPUT"===document.activeElement.tagName&&"INPUT"!==a.target.tagName&&e()};q.submitAnswer=function(a){var b=a.isAnswerArray?a.answer:a.answer[0];this.surveyLogic.submitAnswer(a.questionId,b);this.isSubmitSurveyDisabled=!1;if(this.pagingVC){this.pagingVC.updateActivePages(this.surveyLogic.getActiveQuestionsIds());this.getModelParam(this.uiPath.STATE)!==lpTag.unifiedWindow.State.CONNECTION_ISSUE&&this.pagingVC.enableSubmit(!0)}};q.getErrorText=function(b){var c="";switch(b.error){case this.surveyLogic.errorTypes.EMAIL:c=this.translate("surveyRequireValidEmail");break;case this.surveyLogic.errorTypes.NUMBER:c=this.translate("surveyRequireNumericField");break;case this.surveyLogic.errorTypes.ILLEGAL_CHARS:c=this.translate("surveyIllilgalCharacters");break;case this.surveyLogic.errorTypes.REQUIRED:c=a.call(this,b.type,b.entry);break;case this.surveyLogic.errorTypes.LENGTH:this.translator.extendDictionary({specify_number:this.surveyLogic.questionsText.MAX_LENGTH});c=this.translate("surveyMaximumChars");break;case this.surveyLogic.errorTypes.PHONE:c=this.translate("surveyRequireValidPhone");break;default:c=a.call(this,b.type,b.entry)}return c};q.addHeaderError=function(a){if(!this.hasHeaderError){this.hasHeaderError=!0;var b=this.createView({template:this.errorTemplateFileName,wrapWithDiv:!0,doNotAddChild:!0,textInjection:{wrapperClass:this.LPClassMap.SurveyError,text:a,url:this.errorIconURL,errorAltText:this.translate("errorIconAltText")}});b.className+=" "+this.LPClassMap.headerError;var c=this.questionViews[0];if(c)if(this.appContext.deviceDetector.isDesktop()){c.view.parentNode.insertBefore(b,c.view);c.setFocus()}else{c.view.insertBefore(b,c.view.firstChild);this.pagingVC.setActiveIndex(0)}}};q.removeHeaderError=function(){if(this.hasHeaderError){this.hasHeaderError=!1;var a=this.getFirstElement(this.LPViewMap.headerError);a&&a.parentNode.removeChild(a)}};q.onActiveIndexChange=function(a){"number"!=typeof a&&(a=this.activeIndex);this.activeIndex>=0&&lpTag.uiframework.scrollManager.unregisterView(this.questionViews[this.activeIndex]);this.activeIndex=a;var b=lpTag.lpUtils.getElementsByClass(this.questionViews[this.activeIndex].view,this.LPClassMap.content,[])[0],c=this.getComputedStyle(b.parentNode,"height",10),d=c<b.clientHeight;d&&lpTag.uiframework.scrollManager.registerView(b,this.appContext.deviceDetector.isIOS())};q.validateQuestion=function(a){var b=this.getQuestionViewById(a.id);if(b){t||o.call(this,b);if(this.surveyLogic.validateQuestion(a)){b.cleanError();return!0}b.setError(this.getErrorText(a));return!1}};q.validateQuestionOnNext=function(a){this.removeHeaderError();return this.validateQuestion(this.surveyLogic.getQuestionByIndex(a))};q.validateQuestionOnBlur=function(a){var b=this;this.validationTimeout=setTimeout(function(){b.validateQuestion(a.question)},v)};q.validateSurvey=function(){for(var a,b=!0,c=this.surveyLogic.validateSurvey(!0),d=this.surveyLogic.getAllQuestions(!0),e=0;e<d.length;e++){a=this.getQuestionViewById(d[e].id);if(k(c.questionsNeeded,d[e].id)>=0){a.setError(this.getErrorText(d[e]));if(b){a.setFocus();a.view.scrollIntoView(!1);b=!1}}else a.cleanError()}this.removeHeaderError();return c.surveyValid};q.getQuestionViewById=function(a){for(var b,c=0;c<this.questionViews.length;c++)if(this.questionViews[c].question.id===a){b=this.questionViews[c];break}return b};q.dispose=function(){clearTimeout(this.validationTimeout);lpTag.uiframework.scrollManager.unregisterView(this.view);if(this.questionViews){for(var a=0;a<this.questionViews.length;a++){this.questionViews[a].dispose();this.questionViews[a]=null;this.appContext.deviceDetector.isIOS()&&this.unbindViewEvent({view:this.questionViews[a],DOMEvent:"touchstart",callback:this.viewTapped})}this.questionViews.length=0}this.surveyLogic.dispose();this.appContext&&this.appContext.browserStateManager&&this.appContext.browserStateManager.off(this.appContext.browserStateManager.EVENT_NAME.ORIENTATION_CHANGE,this.onActiveIndexChange);this.appContext.events.unbind({appName:"survey",eventName:"blur",func:this.validateQuestionOnBlur,context:this});this.appContext.events.unbind({appName:"survey",eventName:"submitAnswer",func:this.submitAnswer,context:this});lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)};q.createQuestion=function(a){var b,c={appContext:this.appContext,question:a,defaultSelect:this.defaultSelect,iconsRepository:this.iconsRepository,imagesRepository:this.imagesRepository,deviceClass:this.deviceClass};if(a){switch(a.type){case this.QUESTION_TYPE.TEXT_FIELD:b=new lpTag.unifiedWindow.Survey.TextFieldQuestion(c);break;case this.QUESTION_TYPE.TEXT_AREA:b=new lpTag.unifiedWindow.Survey.TextAreaQuestion(c);break;case this.QUESTION_TYPE.SELECT:b=new lpTag.unifiedWindow.Survey.DropDownQuestion(c);break;case this.QUESTION_TYPE.RADIO:case this.QUESTION_TYPE.RADIO_HORIZONTAL:b=new lpTag.unifiedWindow.Survey.RadioButtonQuestion(c);break;case this.QUESTION_TYPE.CHECKBOX:b=new lpTag.unifiedWindow.Survey.CheckBoxQuestion(c);break;case this.QUESTION_TYPE.CSAT:b=new lpTag.unifiedWindow.Survey.CSATQuestion(c)}return b}};q.onSubmitError=function(){if(this.appContext.deviceDetector.isDesktop()){var a=this.getFirstElement(this.LPViewMap.container);a&&(a.scrollTop=0)}this.addHeaderError(this.translate("surveyGeneralError"))}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(){var a=this.getValue();this.textarea.title=""===a?"":this.translate("defaultTextArea")}var b;lpTag.unifiedWindow.ExpandableTextAreaViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"ExpandableTextAreaViewController",applicationType:"ExpandableTextAreaViewController",templateName:"<textarea class='lpview_form_textarea lpc_composer__text-area {{deviceClass}} {{cssClass}}' data-lp-cust-id='input_text' data-lp-point='chat_input' rows='{{rows}}' maxlength='{{maxLength}}' aria-label='{{defaultTextArea}}' title='{{defaultTextArea}}'></textarea>",LPViewMap:{textarea:"lp_expandable_textarea"},initialize:function(a){this.appContext=a.appContext;this.targetView=a.targetView;this.beforeView=a.beforeView;this.textareaClass=this.LPViewMap.textarea;this.minRows=a.minRows||3;this.maxRows=a.maxRows||10;this.maxLength=2e3;this.resizeCallback=a.resizeCallback;this.scrollCallback=a.scrollCallback;this.context=a.context||this;this.createTextAreaView()},events:function(){this.bindViewEvent({view:this.textarea,DOMEvent:"keyup",callback:this.handleKeyUp});this.bindViewEvent({view:this.textarea,DOMEvent:"paste",callback:this.resizeTextarea});this.bindViewEvent({view:this.textarea,DOMEvent:"cut",callback:this.resizeTextarea});this.bindViewEvent({view:this.textarea,DOMEvent:"dragend",callback:this.resizeTextarea});this.bindViewEvent({view:this.textarea,DOMEvent:"drop",callback:this.resizeTextarea});this.bindViewEvent({view:this.textarea,DOMEvent:"input",callback:this.resizeTextarea});this.bindViewEvent({view:this.textarea,DOMEvent:"focus",callback:this.focusChanged});this.bindViewEvent({view:this.textarea,DOMEvent:"blur",callback:this.focusChanged})},render:function(){}});b=lpTag.unifiedWindow.ExpandableTextAreaViewController.prototype;b.setDefaultValues=function(){this.textareaLineHeight=this.getComputedStyle(this.textarea,"lineHeight",10);this.textareaMinHeight=this.textareaLineHeight*this.minRows;this.textareaMaxHeight=this.textareaLineHeight*this.maxRows;this.textareaHeight=this.getComputedStyle(this.textarea,"height",10);this.textareaMinHeight=this.textareaHeight>=this.textareaLineHeight?this.textareaHeight:this.textareaMinHeight;this.defaultValues=!0};b.createTextAreaView=function(){var a={cssClass:this.textareaClass,rows:this.minRows,maxLength:this.maxLength,defaultTextArea:this.translate("defaultTextArea")};this.textarea=this.createView({template:this.templateName,textInjection:a,wrapWithDiv:!1,target:this.targetView,beforeView:this.beforeView});this.setScroll(!1)};b.setScroll=function(a){if(this.scrollEnabled!==a){var b;b=a?"auto":"hidden";this.textarea.style.overflowY=b;this.scrollEnabled=a;this.applyScrollCallback(a)}};b.applyResizeCallback=function(a,b){this.resizeCallback&&this.context&&this.resizeCallback.call(this.context,a,b)};b.applyScrollCallback=function(a){this.scrollCallback&&this.context&&this.scrollCallback.call(this.context,a)};b.resizeTextarea=function(){if(!this.resizeTextareaTimeout){var a=this;this.resizeTextareaTimeout=setTimeout(function(){a.resizeTextareaTimeout=null;a.delayedResizeTextarea()},0)}};b.delayedResizeTextarea=function(){var a,b,c=!window.addEventListener;this.defaultValues||this.setDefaultValues();if(c){a=this.getSelection();b=this.textarea.scrollHeight}this.textarea.style.height="auto";c||(b=this.textarea.scrollHeight);var d;if(b!==this.textareaHeight){if(b>this.textareaMaxHeight){d=this.textareaMaxHeight;this.setScroll(!0)}else if(b<this.textareaMinHeight){d=this.textareaMinHeight;this.setScroll(!1)}else{d=b;this.setScroll(!1)}var e=d-this.textareaHeight;e&&this.applyResizeCallback(d,e);this.textareaHeight=d}this.textarea.style.height=this.textareaHeight+"px";a&&this.setSelection(a.start,a.end)};b.getValue=function(){return this.textarea.value};b.setValue=function(a){if(this.textarea.value!==a){this.textarea.value=a;this.resizeTextarea()}else this.lpFocus()};b.lpFocus=function(){if(this.textarea&&!this.textarea.disabled){var a=this.getComputedStyle(this.textarea,"height",10);a&&this.textarea.focus()}};b.handleKeyUp=function(b){b=b||event;var c=b.keyCode||b.which;switch(c){case 13:break;case 33:break;case 34:break;case 35:break;case 36:break;case 37:break;case 38:break;case 39:break;case 40:break;default:this.resizeTextarea()}a.call(this)};b.focusChanged=function(a){a=a||event;var b=a&&a.type||"";this.appContext.events.trigger({appName:"*",eventName:this.EventName.uiState.FOCUS_CHANGE_EVENT,data:{type:b}})}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){var a,b=!1,c=null;lpTag.unifiedWindow.CoBrowseInvitationViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"CoBrowseInvitationViewController",template:"<div class='lp_cobrowse_invitation_widget'><div class='lp_image'><img src='{{imagesRepository}}/{{icon}}' alt=''></div><p role='alert' class='lp_cb_invitation_text'>{{invitationText}}</p><p class='lp_cb_invitation_text_sub' style='text-align: center; font-weight: bold'>{{connectingPermissionText}}</p><div class='lp_cb_offer'><button data-lp-cust-id='button' class='lp_cb_button lp_cb_button_accept'>{{acceptBtn}}</button> <button data-lp-cust-id='button' class='lp_cb_button lp_cb_button_reject'>{{rejectBtn}}</button></div></div>",coBrowseEvents:lpTag.unifiedWindow.events.coBrowseEvents,focusElement:void 0,LPViewMap:{inviteText:".lp_cb_invitation_text",acceptButton:".lp_cb_button_accept",rejectButton:".lp_cb_button_reject",subText:".lp_cb_invitation_text_sub",invitation_container:".lp_cobrowse_invitation_widget",callScreenContainer:".lp_cobrowse_callscreen_container"},LPClassesMap:{invitation_container:"lp_cobrowse_invitation_widget",hidden:"lp_hidden"},preInitView:function(d){this.appContext=d.appContext;a=d.appContext.coBrowseManager;c=d.mode;var e="";switch(d.mode){case"VIDEO_CALL":b=!0;e="cobrowse_video_call.png";break;case"VOICE_CALL":b=!0;e="cobrowse_voice_call.png";break;default:e="cobrowse_icon.png";b=!1}"ERROR"!==d.mode&&(this.templateFile="undefined"!=typeof d.templateFile?d.templateFile:this.templateFile);var f=a.customizeTranslation("cobrowseInvitation",d.mode),g=a.customizeTranslation("cobrowseAcceptBtn",d.mode),h=a.customizeTranslation("cobrowseRejectBtn",d.mode),i=a.customizeTranslation("cobrowseConnecting",d.mode),j=a.customizeTranslation("cobrowseConnectingPermission",d.mode);this.textInjection={invitationText:this.sanitizeText(f).text,connectingText:this.sanitizeText(i).text,connectingPermissionText:this.sanitizeText(j).text,acceptBtn:this.sanitizeText(g).text,rejectBtn:this.sanitizeText(h).text,imagesRepository:d.appContext.conf.unifiedConf.imagesRepository,errorHeadline:this.appContext.translator.translate("error"),errorText:d.errorText,icon:e}},events:function(){this.bindViewEvent({selector:this.LPViewMap.acceptButton,callback:this.onAccept,DOMEvent:"click",context:this});this.bindViewEvent({selector:this.LPViewMap.rejectButton,callback:this.onReject,DOMEvent:"click",context:this});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.coBrowseEvents.RENDER_CALL_SCREEN,context:this,func:this.onRenderCallScreen})},initialize:function(a){this.serviceId=a.serviceId;this.appContext=a.appContext;this.focusElement=this.getFirstElement(this.LPViewMap.acceptButton)},onAccept:function(){this.appContext.coBrowseManager.publishCoBrowseEvent(this.coBrowseEvents.ACCEPTED,this.serviceId,c);if(b){var d=a.customizeTranslation("cobrowseConnecting",c);this.getFirstElement(this.LPViewMap.inviteText).textContent=this.sanitizeText(d).text;this.getFirstElement(this.LPViewMap.subText).style.display="block"}else{var e=a.customizeTranslation("cobrowseSessionStarting");this.getFirstElement(this.LPViewMap.inviteText).textContent=this.sanitizeText(e).text}this.getFirstElement(this.LPViewMap.acceptButton).style.display="none";this.getFirstElement(this.LPViewMap.rejectButton).style.display="none"},onReject:function(){this.appContext.coBrowseManager.publishCoBrowseEvent(this.coBrowseEvents.DECLINE,this.serviceId,c);var b=a.customizeTranslation("cobrowseInvitationRejected",c);this.getFirstElement(this.LPViewMap.inviteText).textContent=this.sanitizeText(b).text;this.getFirstElement(this.LPViewMap.subText).style.display="none";this.getFirstElement(this.LPViewMap.acceptButton).style.display="none";this.getFirstElement(this.LPViewMap.rejectButton).style.display="none"},onRenderCallScreen:function(){var a=document.createElement("div");a.className="lp_cobrowse_callscreen_container";this.getFirstElement(this.LPViewMap.invitation_container).innerHTML="";this.getFirstElement(this.LPViewMap.invitation_container).style.padding="0px";this.getFirstElement(this.LPViewMap.invitation_container).appendChild(a)},onInitialize:function(){var a=this;setTimeout(function(){"undefined"!=typeof a.focusElement&&a.focusElement.focus()},100)}})}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(){this.appContext.events.unbind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.coBrowseEvents.INVITED,context:this,func:d});this.appContext.events.unbind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.coBrowseEvents.CANCELED,context:this,func:f});this.appContext.events.unbind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.coBrowseEvents.DECLINE,context:this,func:c});lpTag.events.unbind({appName:lpTag.unifiedWindow.apps.COBROWSE,eventName:this.coBrowseEvents.STARTED,context:this,func:g});this.appContext.events.unbind({appName:"slider",eventName:this.VCEvents.SLIDER_CLOSED,context:this,func:k});lpTag.events.unbind({appName:lpTag.unifiedWindow.apps.COBROWSE,eventName:this.coBrowseEvents.RESUME,context:this,func:i});this.appContext.events.unbind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.coBrowseEvents.MAXIMIZE,context:this,func:h});lpTag.events.unbind({appName:lpTag.unifiedWindow.apps.COBROWSE,eventName:this.coBrowseEvents.ERROR,context:this,func:j})}function b(){this.appContext&&this.appContext.coBrowseManager&&this.appContext.coBrowseManager.publishCoBrowseEvent(this.coBrowseEvents.DECLINE,this.serviceId)}function c(){this.invitationActive=!1;window.setTimeout(m.bind(this),q)}function d(a){this.currentMode=a.mode;if(this.isEmbedded){this.invitationActive=!0;this.serviceId=a.serviceId;this.appContext.coBrowseManager.publishCoBrowseEvent(this.coBrowseEvents.OFFERED,this.serviceId,a.mode,a.agentId);n.call(this,a,this.serviceId);o.call(this,this.serviceId);this.offerTimeoutRef=setTimeout(e.bind(this),this.appContext.coBrowseManager.COBROWSE_OFFER_TIMEOUT)}}function e(){this.invitationActive=!1;m.call(this);this.appContext.coBrowseManager.publishCoBrowseEvent(this.coBrowseEvents.TIMEOUT,this.serviceId,this.currentMode)}function f(){this.invitationActive=!1;m.call(this)}function g(){this.invitationActive=!1;if(this.appContext.coBrowseManager.isCall(this.currentMode)){this.appContext.coBrowseManager.publishCoBrowseEvent(this.coBrowseEvents.RENDER_CALL_SCREEN);clearTimeout(this.offerTimeoutRef);this.appContext.coBrowseManager.setActiveCall(!0)}else{window.setTimeout(m.bind(this),q);this.appContext.deviceDetector.isDesktop()||this.appContext.uiStateManager.setWindowState(!1)}}function h(){this.appContext.coBrowseManager.isInActiveCall()&&this.sliderAPI.showSlider()}function i(a){this.invitationActive=!1;this.currentMode=a.mode;var b=new lpTag.unifiedWindow.CoBrowseInvitationViewController({models:this.models,appContext:this.appContext,serviceId:"",mode:a.mode,wrapWithDiv:!1,template:"<div class='lp_cobrowse_invitation_widget'><div class='lp_image'><img src='{{imagesRepository}}/cobrowse_icon.png' alt=''></div><p role='alert' class='lp_cb_invitation_text'>{{connectingText}}</p><p class='lp_cb_invitation_text_sub' style='text-align: center; font-weight: bold'>{{connectingPermissionText}}</p></div>"}),c=this.appContext.coBrowseManager.customizeTranslation("cobrowseInvitationHeading",a.mode);this.sliderAPI.addView(b.view,c,"",lpTag.unifiedWindow.consts.slider.viewType.CoBrowseInvite);o.call(this,"");var d=this;setTimeout(function(){d.appContext.coBrowseManager.publishCoBrowseEvent(d.coBrowseEvents.RENDER_CALL_SCREEN);d.appContext.coBrowseManager.publishCoBrowseEvent(d.coBrowseEvents.SLIDER_OPENED)},120);this.appContext.coBrowseManager.setActiveCall(!0)}function j(a){var b=new lpTag.unifiedWindow.CoBrowseInvitationViewController({models:this.models,appContext:this.appContext,serviceId:"",mode:"ERROR",wrapWithDiv:!1,template:"<div class='lp_cobrowse_error_widget'><p class='lp_cb_error_headline'>{{errorHeadline}}</p><div class='lp_image'><img src='{{imagesRepository}}/connect-error-dark.png' alt=''></div><p role='alert' class='lp_cb_error_text'>{{errorText}}</p></div>",errorText:a.msg});this.sliderAPI.removeView(this.sliderAPI.getSelectedViewId());this.sliderAPI.addView(b.view,this.appContext.translator.translate("error"),"cobrowseErrorView",lpTag.unifiedWindow.consts.slider.viewType.CoBrowseInvite);var c=this.sliderAPI;setTimeout(function(){c.hideSlider();c.removeAllViews()},r)}function k(a){a.type===lpTag.unifiedWindow.consts.slider.viewType.CoBrowseInvite&&(this.invitationActive?this.appContext.coBrowseManager.publishCoBrowseEvent(this.coBrowseEvents.DECLINE,this.serviceId,this.currentMode):this.appContext.coBrowseManager.isInActiveCall()&&this.appContext.events.trigger({appName:"tooltip",eventName:"show",data:{text:this.appContext.coBrowseManager.customizeTranslation("cobrowseActiveCallTooltip",this.currentMode),type:"call"},global:!0}))}function l(a){if(a===this.chatState.WAITING){this.invitationActive=!1;m.call(this)}}function m(){clearTimeout(this.offerTimeoutRef);this.sliderAPI.hideSlider();this.sliderAPI.removeView(this.sliderAPI.getSelectedViewId())}function n(a){var b=new lpTag.unifiedWindow.CoBrowseInvitationViewController({models:this.models,appContext:this.appContext,serviceId:a.serviceId,mode:a.mode,wrapWithDiv:!1}),c=this.appContext.coBrowseManager.customizeTranslation("cobrowseInvitationHeading",a.mode);this.sliderAPI.addView(b.view,this.sanitizeText(c).text,a.serviceId,lpTag.unifiedWindow.consts.slider.viewType.CoBrowseInvite)}function o(a){if("undefined"!=typeof a){this.sliderAPI.setSelectedView(a);this.sliderAPI.showSlider()}}var p,q=3e3,r=8e3;lpTag.unifiedWindow.CoBrowseInvitationManagerViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"CoBrowseInvitationManagerViewController",coBrowseEvents:lpTag.unifiedWindow.events.coBrowseEvents,chatEvents:lpTag.unifiedWindow.events.chat,chatState:lpTag.unifiedWindow.State,rendered:!1,currentMode:"",initialize:function(a){this.sliderAPI=a.sliderAPI;this.isEmbedded=!this.appContext.conf.unifiedConf.poppedOut&&!this.appContext.conf.unifiedConf.external;this.bindEvents();this.invitationActive=!0;this.isEmbedded&&this.bindModel({path:this.uiPath.STATE,callback:this.stateChanged,context:this});this.checkResume();this.isDisposed=!1},checkResume:function(){var a=window.lpTag.events.hasFired(lpTag.unifiedWindow.apps.COBROWSE,this.coBrowseEvents.RESUME);a&&a[0]&&a[0].data?i.call(this,a[0].data):lpTag.events.bind({appName:lpTag.unifiedWindow.apps.COBROWSE,eventName:this.coBrowseEvents.RESUME,context:this,func:i})},bindEvents:function(){this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.coBrowseEvents.INVITED,context:this,func:d});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.coBrowseEvents.CANCELED,context:this,func:f});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.coBrowseEvents.DECLINE,context:this,func:c});lpTag.events.bind({appName:lpTag.unifiedWindow.apps.COBROWSE,eventName:this.coBrowseEvents.STARTED,context:this,func:g});this.appContext.events.bind({appName:"slider",eventName:this.VCEvents.SLIDER_CLOSED,context:this,func:k});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.CHAT,eventName:this.chatEvents.STATE,context:this,func:l});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.coBrowseEvents.MAXIMIZE,context:this,func:h});lpTag.events.bind({appName:lpTag.unifiedWindow.apps.COBROWSE,eventName:this.coBrowseEvents.ERROR,context:this,func:j})},render:function(){this.hide();this.rendered=!0}});p=lpTag.unifiedWindow.CoBrowseInvitationManagerViewController.prototype;p.dispose=function(){if(!this.isDisposed){m.call(this);a.call(this);lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this);this.isDisposed=!0}};p.stateChanged=function(a){var c=a.newValue;c===lpTag.unifiedWindow.State.ENDED||c===lpTag.unifiedWindow.State.NOT_FOUND?b.call(this):(c===lpTag.unifiedWindow.State.APP_ENDED||c===lpTag.unifiedWindow.State.NOT_FOUND)&&m.call(this)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){var b=a&&a.newValue;if(b&&this.pendingLoading)for(var c=0;c<this.pendingLoading.length;c++)if(this.pendingLoading[c]){var d=b[this.pendingLoading[c].uniqueId];d&&d.info&&e.call(this,this.pendingLoading.splice(c,1)[0].data)}}function b(a){if(!c.call(this,a&&a.info&&a.info.uniqueId)){a.info.secureFormName=this.sanitizeText(a.info.secureFormName).text;var b=new lpTag.unifiedWindow.SecureFormViewController({models:this.models,appContext:this.appContext,secureForm:a,wrapWithDiv:!1,textInjection:{formName:a.info.secureFormName,imagesRepository:this.appContext.conf.unifiedConf.imagesRepository}});this.secureForms.push({uniqueId:a.info.uniqueId,view:b});this.sliderAPI.addView(b.view,a.info.secureFormName,a.info.uniqueId,lpTag.unifiedWindow.consts.slider.viewType.PCIFormView)}}function c(a){for(var b=0;b<this.secureForms.length;b++)if(this.secureForms[b].uniqueId===a)return this.secureForms[b]}function d(a){var b=this.chatPath.SECURE_FORMS;return this.getModelParam({name:b.name,path:b.path+"."+a})}function e(a){var c=a&&a.uniqueId,e=a&&a.isFromConnector;if("undefined"!=typeof c){var f=d.call(this,c);if(f&&f.info){b.call(this,f);this.sliderAPI.setSelectedView(c);this.sliderAPI.showSlider();this.sliderAPI.focusOnMinimize();e&&this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.SECURE_FORM,eventName:lpTag.unifiedWindow.consts.SecureForm.HIDE_CONVO,data:{}})}else this.pendingLoading&&Array.isArray(this.pendingLoading)&&this.pendingLoading.push({uniqueId:c,data:a})}}var f,g=lpTag.unifiedWindow.apps.SECURE_FORM;lpTag.unifiedWindow.SecureFormsManagerViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"SecureFormsManagerViewController",rendered:!1,initialize:function(a){this.sliderAPI=a.sliderAPI;this.secureForms=[];this.pendingLoading=[]},events:function(){this.appContext.events.bind({appName:g,eventName:lpTag.unifiedWindow.consts.SecureForm.LINK_CLICKED,context:this,func:e});this.bindModel({path:this.chatPath.SECURE_FORMS,callback:a,context:this})},render:function(){this.hide();this.rendered=!0}});f=lpTag.unifiedWindow.SecureFormsManagerViewController.prototype;f.dispose=function(){if(this.secureForms)for(var a=0;a<this.secureForms.length;a++)if(this.secureForms[a].dispose){this.secureForms[a].dispose();this.sliderAPI.removeView(this.secureForms[a].uniqueId)}lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){!a||a.newValue!==lpTag.unifiedWindow.State.WAITING||this.secureFormData.formState!==m.SEND&&this.secureFormData.formState!==m.RECEIVED&&this.secureFormData.formState!==m.VIEWED||this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.SECURE_FORM,eventName:m.ABORTED,data:{uniqueId:this.secureFormData.info.uniqueId}})}function b(a){var b=this.getFirstElement(this.LPViewMap.messageContainer);b.style.visibility="visible";var c="";switch(a){case m.SUBMIT:c=this.translate("secureFormSubmittedMessage");break;case m.ABORTED:case m.ERROR:c=this.translate("secureFormErrorMessage");break;case m.VIEWED_ON_ANOTHER_TAB:c=this.appContext.conf.engConf.async?this.translate("secureFormErrorMessage"):this.translate("secureFormOpenedInAnotherTabMessage")}var d=this.getFirstElement(this.LPViewMap.message);if(d&&""!==c){d.innerHTML=lpTag.HtmlSanitizerUtils&&lpTag.HtmlSanitizerUtils.sanitizeHtml(c).cleanText;this.getFirstElement(this.LPViewMap.messageContainer).focus()}}function c(){if(this.view){var a=this.createView({template:"<table class='lp_centralizer'><tbody><td><div class='lp_rotator-container'><div class='lp_rotator-container-bg'></div><div class='lp_rotator'><img src='{{imagesRepository}}/{{imageUrl}}' alt='{{imageAltText}}' role='alert'></div></div></td></tbody></table>",target:this.waitArea,wrapWithDiv:!1,textInjection:{imagesRepository:this.appContext.conf.unifiedConf.imagesRepository,imageUrl:"loader_on_warmGray5_75.gif"}});this.view.appendChild(a);this.hide(this.getFirstElement(this.LPViewMap.iFrame))}}function d(){if(this.view){var a=this.getFirstElement(this.LPViewMap.loader);if(a){this.view.removeChild(a);this.show(this.getFirstElement(this.LPViewMap.iFrame))}}}function e(){this.timeoutRef=setTimeout(function(){(this.secureFormData.formState===m.SEND||this.secureFormData.formState===m.RECEIVED)&&this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.SECURE_FORM,eventName:m.ERROR,data:{uniqueId:this.secureFormData.info.uniqueId,message:{errorReason:"Secure form load failed (Waited for "+n/1e3+" seconds)"}}})}.bind(this),n)}function f(){this.timeoutRef&&clearTimeout(this.timeoutRef)}function g(){return"https://"+lpTag.csds.getDomain("tokenizer")}function h(a){var b=this.getFirstElement(this.LPViewMap.iFrame);if(a.source===b.contentWindow){var c=k(a.data);this.translator.extendDictionary({secureFormName:this.secureFormData.info.secureFormName},{locale:this.appContext.conf.engConf.lang});this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.SECURE_FORM,eventName:c.state,data:{uniqueId:this.secureFormData.info.uniqueId,message:c,text:this.translate("secureForm_line_"+c.state)}})}}function i(a,b,c){this.receiveMessageCallback=j(a,b,c);this.bindViewEvent({view:window,DOMEvent:"message",callback:this.receiveMessageCallback})}function j(a,b,c){return function(d){if("string"==typeof a&&d.origin!==a||"[object Function]"===Object.prototype.toString.call(a))return!1;lpTag.lpUtils.runCallback(b,c,d);return void 0}}function k(a){try{var b=JSON.parse(a);b.state=b.state||m.SUBMIT;return b}catch(c){return{state:a}}}var l,m=lpTag.unifiedWindow.secureFormStates,n=6e4,o="about:blank";lpTag.unifiedWindow.SecureFormViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"SecureFormViewController",template:"<div class='secure_form_container'><iframe class='lp_secure_form_iframe' src='about:blank' aria-label='{{formName}}' style='width: 100%; height: 100%'></iframe><div class='secure_form_message' role='alert' tabindex='-1'><div class='lp_image'><img src='{{imagesRepository}}/secure_form_icon.png' alt=''></div><div class='lp_lpview_title lp_title'>{{secureFormMessage}}</div></div></div>",CLASS_STATE_PREFIX:"_secure_form_state",LPViewMap:{iFrame:"iframe",loader:".lp_centralizer",message:".lp_title",messageContainer:".secure_form_message"},LPClassesMap:{secure_form_container:"secure_form_container"},timeoutRef:null,currentFormState:null,fetchingForm:!1,formLoaded:!1,events:function(){this.bindModel({path:this.uiPath.STATE,callback:a,context:this})},initialize:function(a){this.secureFormData=a.secureForm;this.appContext=a.appContext;this.bindModel({path:this.getModelPath(a.secureForm),callback:this.handleStateChanged});if(this.appContext.conf.unifiedConf.connectorsSfConfig){var b=this.getFirstElement(this.LPViewMap.messageContainer);b.style.visibility="hidden"}}});l=lpTag.unifiedWindow.SecureFormViewController.prototype;l.loadIFrame=function(){var a=this.getFirstElement(this.LPViewMap.iFrame);c.call(this);e.call(this);if(!this.formLoaded&&!this.fetchingForm&&a.src===o){this.fetchingForm=!0;this.appContext.SecureFormManager.getFormUrl(this.secureFormData.info.uniqueId,function(b){this.fetchingForm=!1;this.formLoaded=!0;if(b){a.src=b;i.call(this,g(),h,this)}else this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.SECURE_FORM,eventName:m.ERROR,data:{uniqueId:this.secureFormData.info.uniqueId,message:{errorReason:"There is a problem with the form url"}}})}.bind(this))}};l.unloadIFrame=function(){var a=this.getFirstElement(this.LPViewMap.iFrame);a.src=o;this.unbindViewEvent({view:window,DOMEvent:"message",callback:this.receiveMessageCallback});this.receiveMessageCallback=null};l.handleStateChanged=function(){var a;this.secureFormData=this.getModelParam(this.getModelPath(this.secureFormData));a=this.secureFormData.formState;if(a&&this.currentFormState!==a){this.currentFormState=a;this.view.className="";this.addClass(this.view,a+this.CLASS_STATE_PREFIX);this.addClass(this.view,this.LPClassesMap.secure_form_container);switch(this.currentFormState){case m.SEND:case m.RECEIVED:this.loadIFrame();break;case m.VIEWED:d.call(this);f.call(this);break;default:d.call(this);f.call(this);b.call(this,this.secureFormData.formState);this.unloadIFrame()}}};l.getModelPath=function(a){var b=this.chatPath.SECURE_FORMS;return{name:b.name,path:b.path+"."+a.info.uniqueId}}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(){var a=this.sliderAPI.models.uiModel.get(this.uiPath.WIDGET_SLIDER_VISIBLE);a?this._showWidget(this._getWidgetToShow(this._getInitiatedWidgets())):this.util.runCallback(this.sliderAPI.hideSlider,this.sliderAPI)}var b;lpTag.unifiedWindow.WidgetManagerViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"WidgetManagerViewController",windowSDKEvents:null,widgetSDKEventNames:null,wsdkModel:null,widgetModelPath:null,util:null,currentWidgetVC:null,sliderAPI:null,widgetsVC:[],widgetLifeCyleBindingMap:{},widgetNotifications:{},isParentWindow:null,disableWidgetAutoShow:!1,windowIsPaused:!1,
isWidgetVisible:!1,isSliderVisible:!1,lastShownWidgetId:null,OPEN_SLIDER_DELAY:400,MAX_WIDGETS:5,initialize:function(a){var b;this.log=lpTag.unifiedWindow.log;this.sliderAPI=a.sliderAPI;this.windowSDKEvents=a.windowSDKEvents;this.wsdkModel=a.wsdkModel;this.widgetSDKEventNames=lpTag.unifiedWindow.events.widgetSDK;this.widgetModelPath=lpTag.unifiedWindow.widgetModelPath;this.widgetSDKAPI=lpTag.LPWidgetSDK.API;this.util=lpTag.taglets.lpUtil;this.appContext=a.appContext;this.widgetLifeCyleBindingMap={};this.widgetNotifications={};this.widgetsVC=[];this.isParentWindow=!this.appContext.conf.unifiedConf.poppedOut;b=this._validateWidgetsConfig(Array.isArray(this.appContext.conf.widgetSDK)&&this.appContext.conf.widgetSDK[0]&&this.appContext.conf.widgetSDK[0].widgets);b=b.slice(0,this.MAX_WIDGETS);if(Array.isArray(b)&&b.length>0){this._createLifecycleBindingEntries();this._createWidgetViewControllers(b);this._restoreNotificationsCount();this._bindEvents();this._onEngagementInfoEvent();this.appContext.deviceDetector.isDesktop()&&(this.disableWidgetAutoShow=this.appContext.WidgetManager.getLastSliderState()===!1)}},events:function(){this.sliderAPI.models.uiModel.bind(this.uiPath.WIDGET_SLIDER_VISIBLE,a,this)},_onEngagementInfoEvent:function(){this._triggerEventToAllWidgets(this.widgetSDKAPI.events.ENGAGEMENT_INFO,this.util.getPropertyFromObject(this.appContext,"conf.engConf"))},_createLifecycleBindingEntries:function(){var a;for(var b in this.widgetSDKAPI.states){a=this.widgetSDKAPI.states[b];Array.isArray(this.widgetLifeCyleBindingMap[a])||(this.widgetLifeCyleBindingMap[a]=[])}},_restoreNotificationsCount:function(){this.widgetNotifications=this.appContext.WidgetManager.getWidgetsNotifications();this._publishNotifications()},_createWidgetViewControllers:function(a){var b,c=this.appContext.WidgetManager.getWidgetsStatus();a.forEach(function(a){if(a&&c[a.id]!==!1){b=new lpTag.unifiedWindow.WidgetViewController({widgetsConfig:a,sliderAPI:this.sliderAPI,windowSDKEvents:this.windowSDKEvents,wsdkModel:this.wsdkModel,appContext:this.appContext});this.widgetsVC.push(b);this._addWidgetStateHandling(b);if(c[a.id]===!0){this._removeWidgetStateHandling(a.id);b.init()}}}.bind(this))},_addWidgetStateHandling:function(a){Array.isArray(this.widgetLifeCyleBindingMap[a.getWidgetStartState()])&&this.widgetLifeCyleBindingMap[a.getWidgetStartState()].push(a)},_removeWidgetStateHandling:function(a){var b,c;if("string"==typeof a)for(var d in this.widgetLifeCyleBindingMap){c=this.widgetLifeCyleBindingMap[d];b=c.map(function(a){return a.getId()}).indexOf(a);b>=0&&c.splice(b,1)}},_bindEvents:function(){this.bindedEvents=this.bindedEvents||[];this.bindedEvents.push(this.windowSDKEvents.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:this.widgetSDKEventNames.INIT,context:this,func:this._onSDKButtonClicked}));this.bindedEvents.push(this.windowSDKEvents.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:this.widgetSDKEventNames.WIDGET_AREA_STATE,context:this,func:this._onSliderStateChanged}));this.wsdkModel.bind(this.widgetModelPath.WINDOW_UI,this._onWindowStateChanged,this);this.bindedEvents.push(this.windowSDKEvents.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:this.widgetSDKEventNames.CONVERSATION_STATE,context:this,func:this._onChatStateChanged}));this.bindedEvents.push(this.windowSDKEvents.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:this.widgetSDKEventNames.PARTICIPANTS,context:this,func:this._onParticipantsEvent}));this.bindedEvents.push(this.windowSDKEvents.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:this.widgetSDKEventNames.CONVERSATION_INFO,context:this,func:this._onConversationInfoEvent}));this.bindedEvents.push(this.windowSDKEvents.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:this.widgetSDKEventNames.MESSAGES,context:this,func:this._onLineEvent}));this.bindedEvents.push(this.windowSDKEvents.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:lpTag.unifiedWindow.events.widgetSDK.WIDGET_NOTIFICATION,context:this,func:this._onWidgetNotification}));this.bindedEvents.push(this.windowSDKEvents.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:lpTag.unifiedWindow.events.widgetSDK.DISPOSED_WIDGET_ID,context:this,func:this._disposeWidgetVC}));this.bindedEvents.push(this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UISTATE,eventName:lpTag.unifiedWindow.events.uiState.EMBEDDED_CHANGED,context:this,func:this._handleEmbeddedStateChanged}))},_onSDKButtonClicked:function(){var a=this.sliderAPI.models.uiModel.get(this.uiPath.WIDGET_SLIDER_VISIBLE);this.appContext.WidgetManager.onWidgetStateChanged(!a);this.disableWidgetAutoShow=!1},_handleEmbeddedStateChanged:function(){this.isWidgetVisible=this.appContext.WidgetManager.getLastSliderState()},_onSliderStateChanged:function(a){this.log.info("_onSliderStateChanged: "+a.isOpened+" "+a.type,this.ControllerName);var b=this.currentWidgetVC&&this.currentWidgetVC.getId(),c=this.lastShownWidgetId&&this.lastShownWidgetId!==b,d=a.type===lpTag.unifiedWindow.consts.slider.viewType.widgetSDKView;this.isSliderVisible=a.isOpened;this.isWidgetVisible=this.isSliderVisible&&d;if(this.isWidgetVisible)if(c)this._handleSwappedWidgets(this.lastShownWidgetId,b);else{this._triggerEventToWidget(this.widgetSDKAPI.events.UI_WIDGET,{isShown:!0},b);this.lastShownWidgetId=b}else{this._triggerEventToWidget(this.widgetSDKAPI.events.UI_WIDGET,{isShown:!1},b);this.lastShownWidgetId=null;this.currentWidgetVC=null}},_handleSwappedWidgets:function(a,b){this._triggerEventToWidget(this.widgetSDKAPI.events.UI_WIDGET,{isShown:!0},b);this.lastShownWidgetId=b;a&&a!==b&&this._triggerEventToWidget(this.widgetSDKAPI.events.UI_WIDGET,{isShown:!1},a)},_onWindowStateChanged:function(a){this.isMaximized=a&&a.newValue&&a.newValue.isMaximized;this._triggerEventToAllWidgets(this.widgetSDKAPI.events.UI_WINDOW,{isMaximized:this.isMaximized});this.isMaximized&&(this.isWidgetVisible?this._clearWidgetNotification(this.currentWidgetVC.getId()):this.pendingWidgetToShow&&this._showPendingWidget())},_showPendingWidget:function(){setTimeout(function(){this._showWidget(this.pendingWidgetToShow);this.pendingWidgetToShow=null}.bind(this),this.OPEN_SLIDER_DELAY)},_onChatStateChanged:function(a){var b=this.widgetLifeCyleBindingMap[a];if(lpTag.unifiedWindow.State.PAUSED===a)this.windowIsPaused=!0;else if(lpTag.unifiedWindow.State.RESUME_PAUSED===a){this.windowIsPaused=!1;this._onReturnFromPopout()}else this._handleWidgetsStates(b)},_onReturnFromPopout:function(){var a,b=this.appContext.WidgetManager.getLastShownWidgetId(),c=this.appContext.WidgetManager.getWidgetsStatus();this._restoreNotificationsCount();if(c)for(var d in c){a=this._getWidgetDataById(d).widget;if(c[d]===!1)this._disposeWidgetVC(d);else if(c[d]===!0&&a){a.init();this._removeWidgetStateHandling(d)}}if(b){a=this._getWidgetDataById(b).widget;a&&setTimeout(function(){this._showWidget(a)}.bind(this),this.OPEN_SLIDER_DELAY)}else this.appContext.WidgetManager.getLastSliderState()===!1&&this.util.runCallback(this.sliderAPI.hideSlider,this.sliderAPI)},_handleWidgetsStates:function(a){var b,c=[];if(Array.isArray(a)){a.forEach(function(a){if(a&&!a.isDisposed()){a.init();this.appContext.deviceDetector.isDesktop()&&a.showAfterInitiation()&&c.push(a)}}.bind(this));b=this._getWidgetToShow(c);this.disableWidgetAutoShow||!b||this.isSliderVisible||this.appContext.WidgetManager.onWidgetStateChanged(!0)}},_onParticipantsEvent:function(a){a&&this._triggerEventToAllWidgets(this.widgetSDKAPI.events.PARTICIPANTS,a)},_onConversationInfoEvent:function(a){a&&this._triggerEventToAllWidgets(this.widgetSDKAPI.events.CONVERSATION_INFO,a)},_onLineEvent:function(a){a&&this._triggerEventToAllWidgets(this.widgetSDKAPI.events.MESSAGES,a)},_onWidgetNotification:function(a){var b=a.widgetId;this.isMaximized?this.isWidgetVisible&&b===this.currentWidgetVC.getId()||this._handleWidgetNotification(b):this._handleWidgetNotification(b)},_triggerEventToAllWidgets:function(a,b,c){var d,e,f,g=this.util.getUID();c=c||[];for(var h=0;h<this.widgetsVC.length;h++){e=this.widgetsVC[h];d=e.getId();f=!1;for(var i=0;i<c.length;i++)if(c[i]===d){f=!0;break}f||this._triggerEventToWidget(a,b,d,g)}},_triggerEventToWidget:function(a,b,c,d){var e;if(!this.windowIsPaused){e=this._getWidgetDataById(c).widget;d=d||this.util.getUID();e&&e.trigger&&e.trigger(a,{id:d,type:a,data:b})}},_showWidget:function(a){var b;if(a){b=this.appContext.WidgetManager.isWindowMaximized();this.sliderAPI.isSliderOpen=!0;if(b){this.currentWidgetVC=a;this.currentWidgetVC.showWidget();this._clearWidgetNotification(this.currentWidgetVC.getId());this._removeWidgetStateHandling(this.currentWidgetVC.getId())}else this.pendingWidgetToShow=a}},_getWidgetToShow:function(a){var b=Array.isArray(a)&&a.length>0&&a||[],c=b[0];b.forEach(function(a){a.getPriority()>c.getPriority()&&(c=a)}.bind(this));return c},_getWidgetDataById:function(a){var b={widget:null,index:-1};if(a)for(var c=0;c<this.widgetsVC.length;c++)if(this.widgetsVC[c].getId()===a){b.widget=this.widgetsVC[c];b.index=c;break}return b},_getInitiatedWidgets:function(){return this.widgetsVC.filter(function(a){return a.isInitiated()===!0||a.isError()})||[]},_validateWidgetsConfig:function(a){var b,c,d,e,f,g=[];if(Array.isArray(a))for(var h=0;h<a.length;h++){d=!1;e=!1;c=!1;b=a[h];d="object"==typeof b&&"string"==typeof b.url&&b.url.length>0&&"string"==typeof b.name&&b.name.length>0;if(d){if("string"==typeof b.startState){f=Object.keys(this.widgetSDKAPI.states);for(var i=0;i<f.length;i++)this.widgetSDKAPI.states[f[i]]===b.startState&&(e=!0)}e||(b.startState=this.isAsync?this.widgetSDKAPI.states.IN_QUEUE:this.widgetSDKAPI.states.ACCEPTED);"boolean"!=typeof b.showOnInit&&(b.showOnInit=!1);b.id=encodeURIComponent(b.name.trim().replace(" ","_"));b.url=decodeURIComponent(b.url.trim());b.priority=a.length-h;for(var j=0;j<g.length;j++)if(g[j].id===b.id){c=!0;break}c||g.push(b)}}return g},_disposeWidgetVC:function(a){var b=this._getWidgetDataById(a),c=b.widget,d=b.index;if(c){c.dispose();this.widgetsVC.splice(d,1);this._removeWidgetStateHandling(a);this.currentWidgetVC=this.currentWidgetVC&&this.currentWidgetVC.getId()===a?null:this.currentWidgetVC;this.appContext.WidgetManager.handleWidgetDisposal(a)}},_handleWidgetNotification:function(a){if(!this.windowIsPaused){this.widgetNotifications[a]=this.widgetNotifications[a]||0;this.widgetNotifications[a]+=1;this.appContext.WidgetManager.setWIdgetsNotifications(this.widgetNotifications);this._publishNotifications()}},_clearWidgetNotification:function(a){if(!this.windowIsPaused){this.widgetNotifications[a]=0;this.appContext.WidgetManager.setWIdgetsNotifications(this.widgetNotifications);this._publishNotifications()}},_publishNotifications:function(){var a=0;if(this.widgetNotifications){for(var b in this.widgetNotifications)a+=this.widgetNotifications[b];this.windowSDKEvents.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:lpTag.unifiedWindow.events.widgetSDK.NOTIFICATION,data:a})}},_unbindEvents:function(){this.bindedEvents.forEach(function(a){this.windowSDKEvents.unbind(a)}.bind(this));this.wsdkModel.unbind(this.widgetModelPath.WINDOW_UI,this._onWindowStateChanged,this)}});b=lpTag.unifiedWindow.WidgetManagerViewController.prototype;b.dispose=function(){this._unbindEvents();this.widgetsVC.forEach(function(a){a&&this._disposeWidgetVC(a.getId())}.bind(this));this.widgetsVC=[];this.widgetLifeCyleBindingMap={};this.sliderAPI.dispose()}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a,b){if(c[a]){this.initialEvents=this.initialEvents||{};this.initialEvents[a]=this.initialEvents[a]||[];this.initialEvents[a].push({eventName:a,data:b})}}var b,c;lpTag.unifiedWindow.WidgetViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"WidgetViewController",sliderAPI:null,widgetsConfig:null,imageRepository:null,windowSDKEvents:null,initialEvents:null,util:null,showOnInit:!1,priority:-1,courier:null,state:null,WAIT_FOR_SLIDER_AVAILABILITY_TIME:400,MAX_OPEN_SLIDER_TRIES:5,STATE_TYPE:{inititating:"initiating",initiated:"initiated",errorOnInitiation:"errorOnInitiation",disposed:"disposed"},MAX_LOADING_TIME:3e3,initialize:function(a){this.sliderAPI=a.sliderAPI;this.widgetsConfig=a.widgetsConfig;this.windowSDKEvents=a.windowSDKEvents;this.appContext=a.appContext;this.util=lpTag.taglets.lpUtil;this.widgetSDKAPI=lpTag.LPWidgetSDK.API;c={};c[this.widgetSDKAPI.events.PARTICIPANTS]=!0;c[this.widgetSDKAPI.events.CONVERSATION_INFO]=!0;c[this.widgetSDKAPI.events.MESSAGES]=!0;c[this.widgetSDKAPI.events.ENGAGEMENT_INFO]=!0},_initWidget:function(){var a=this.widgetsConfig;this.state=this.STATE_TYPE.inititating;this.showOnInit=a.showOnInit;this.priority=a.priority;if(a&&a.url&&"string"==typeof a.name){this._createWidgetCourier();this.state=this.STATE_TYPE.initiated;this.windowSDKEvents.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:lpTag.unifiedWindow.events.widgetSDK.INITIATED_WIDGET_ID,data:this.getId()})}},_createWidgetCourier:function(){var a,b=this._getParametesForWidgetCreation()||this.widgetsConfig.url,c={context:this,reload:this.reloadWidget},d={width:"100%",height:"100%"};d["border-color"]="transparent";try{a=new lpTag.Chronos.PostMessageCourier({target:{url:b,callback:this._onCourierInitiatedCallback,context:this,useObjects:this.appContext.deviceDetector.isIE()?!1:!0,style:d,container:this.getFirstElement(this.view)},removeDispose:!0});this.sliderAPI.addView(this.getFirstElement(this.view),"",this.getId(),lpTag.unifiedWindow.consts.slider.viewType.widgetSDKView,c)}catch(e){this.logger.error("Error on courier initiation for: "+this.getId(),this.ControllerName);this._handleError()}this.courierErrorTimeout=setTimeout(function(){this.state!==this.STATE_TYPE.initiated&&this._handleError()}.bind(this),this.MAX_LOADING_TIME);this.courier=a},_getParametesForWidgetCreation:function(){var a=[];this.getId()&&a.push({key:lpTag.unifiedWindow.consts.widgetSDK.WIDGET_NAME,value:this.getId()});this.appContext.conf.unifiedConf.accountId&&a.push({key:lpTag.unifiedWindow.consts.widgetSDK.ACCOUNT_ID,value:this.appContext.conf.unifiedConf.accountId});return this.util.addQueryParams(this.widgetsConfig.url,a)},_onCourierInitiatedCallback:function(a,b){if(a)this._handleError();else{this.iframe=this._setIframeAccessibilityAttrs(b);this._runPendingEventsData();this.setWidgetCommandEvents()}},_runPendingEventsData:function(){for(var a in this.initialEvents)if(this.initialEvents.hasOwnProperty(a))for(var b=0;b<this.initialEvents[a].length;b++)this.trigger(this.initialEvents[a][b].eventName,this.initialEvents[a][b].data)},_handleError:function(){if(this.STATE_TYPE.errorOnInitiation!==this.state||this.STATE_TYPE.disposed!==this.state){this.logger.error("_handleError: Failed to init widget communication",this.ControllerName);this.state=this.STATE_TYPE.errorOnInitiation}},_setIframeAccessibilityAttrs:function(a){if(a.constructor===HTMLIFrameElement){a.setAttribute("tabindex","0");a.setAttribute("role","region");a.setAttribute("aria-label","widget area");a.setAttribute("title","widget area");return a}},setWidgetCommandEvents:function(){if(this.courier){this.courier.comply({appName:this.widgetSDKAPI.appName,cmdName:this.widgetSDKAPI.commands.NOTIFICATION,func:this._onWidgetNotification,context:this});this.courier.comply({appName:this.widgetSDKAPI.appName,cmdName:this.widgetSDKAPI.commands.DISPOSE,func:this._onDisposeCommand,context:this})}},_onWidgetNotification:function(a){this.logger.info("_onNotification: on notification",this.ControllerName);a=a||{};a.widgetId=a.id||this.getId();this.windowSDKEvents.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:lpTag.unifiedWindow.events.widgetSDK.WIDGET_NOTIFICATION,data:a})},_onDisposeCommand:function(a){a===this.getId()&&this.windowSDKEvents.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:lpTag.unifiedWindow.events.widgetSDK.DISPOSED_WIDGET_ID,data:a})},_addToSlider:function(){this.sliderAPI.setSelectedView(this.getId());this.sliderAPI.showSlider();this.sliderAPI.focusOnMinimize()}});b=lpTag.unifiedWindow.WidgetViewController.prototype;b.getId=function(){return this.widgetsConfig&&this.widgetsConfig.id};b.showAfterInitiation=function(){return this.showOnInit};b.getPriority=function(){return this.priority};b.getWidgetStartState=function(){return this.widgetsConfig.startState};b.getEvents=function(){return this.widgetsConfig.events};b.trigger=function(b,c){this.courier?this.courier.trigger({appName:this.widgetSDKAPI.appName,eventName:b,data:c}):a.call(this,b,c)};b.reloadWidget=function(){if(this.state!==this.STATE_TYPE.inititating){if(this.courier){this.courier.dispose();this.courier=null}this.iframe=null;this._initWidget()}};b.init=function(){null===this.state&&this._initWidget()};b.showWidget=function(){var a,b=0;if(this.sliderAPI.isInProgress())a=setInterval(function(){b++;if(this.sliderAPI.isInProgress())this.MAX_OPEN_SLIDER_TRIES===b&&clearInterval(a);else{this.init();this._addToSlider();clearInterval(a)}}.bind(this),this.WAIT_FOR_SLIDER_AVAILABILITY_TIME);else{this.init();this._addToSlider()}};b.isInitiated=function(){return this.state===this.STATE_TYPE.initiated};b.isDisposed=function(){return this.state===this.STATE_TYPE.disposed};b.isError=function(){return this.state===this.STATE_TYPE.errorOnInitiation};b.dispose=function(){if(this.state!==this.STATE_TYPE.disposed){this.state=this.STATE_TYPE.disposed;this.sliderAPI.getSelectedViewId()===this.getId()&&this.util.runCallback(this.sliderAPI.hideSlider,this.sliderAPI);this.sliderAPI.removeView(this.getId());if(this.courierErrorTimeout){clearTimeout(this.courierErrorTimeout);this.courierErrorTimeout=null}this.courier.dispose()}}}();!function(){lpTag.unifiedWindow.LogoViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"LogoViewController",initialize:function(a){this.appContext=a.appContext;this.windowConf=this.appContext.conf.windowConf},render:function(){this.windowConf.logoImage&&this.windowConf.logoUrl&&this.createView({template:"<div class='lp_logo_area_wrapper' title='{{altText}}' data-lp-cust-id='logoAltText'><a class='lp_logo_link lpc_banner-image-area__link lpc_banner-image-area__link_maximized {{deviceClass}} {{disableLinkClass}}' href='{{targetUrl}}' target='_blank' rel='noopener noreferrer' title='{{altText}}' data-lp-cust-id='logoTarget' {{tabindex}}><div class='lp_logo_image_wrapper lpc_banner-image-area__image-wrapper lpc_banner-image-area__image-wrapper_maximized {{deviceClass}}' data-lp-cust-id='logo'><img src='{{url}}' alt='{{altText}}' class='lp_image lpc_banner-image-area__image lpc_banner-image-area__image_maximized {{deviceClass}}' data-lp-cust-id='logoImage'></div></a></div>",wrapWithDiv:!1,textInjection:{url:this.windowConf.logoUrl,targetUrl:this.windowConf.logoRedirectUrl||"javascript:void(0);",disableLinkClass:this.windowConf.logoRedirectUrl?"":"disableLinkClass",tabIndex:this.windowConf.logoRedirectUrl?"":"tabindex='0'",altText:this.windowConf.logoAltText||this.translate("defaultAltLogoText")}})}})}();!function(){function a(){var a=this.getFirstElement(this.LPViewMap.link);a.onclick=c.bind(this);this.failedToLoadHistory&&d.call(this)}function b(a){var b=!1,c=a&&a.newValue;if(c&&c.length>0)for(var d=0;d<c.length&&!b;){c[d]&&c[d].history&&(b=!0);d++}b&&this.hideRotator()}function c(){this.appContext.events.trigger({appName:"*",eventName:this.VCEvents.RETRY_GET_HISTORY,data:{retry:!0}});d.call(this)}function d(a){var b=a&&a.changedScroll||!1;if(!b){var c=this.getFirstElement(this.LPViewMap.wrapper);this.removeClass(c,"lpHide");f.call(this);e.call(this)}}function e(){for(var a,b=[{message:this.translate("transcriptRotatorFirstMessage"),hideImage:!1,hideLink:!0},{message:this.translate("transcriptRotatorSecondMessage"),hideImage:!0,hideLink:!1}],c=0;c<b.length;c++){a=setTimeout(g.bind(this,b[c]),this.updateRotatorTimeouts[c]);this.updateRotatorTimeoutIDs.push(a)}}function f(){for(var a=0;a<this.updateRotatorTimeoutIDs.length;a++)clearTimeout(this.updateRotatorTimeoutIDs[a]);this.updateRotatorTimeoutIDs=[];g.call(this,{message:this.translate("transcriptRotatorDefaultMessage"),hideImage:!1,hideLink:!0})}function g(a){var b=this.getFirstElement(this.LPViewMap.wrapper),c=this.getFirstElement(this.LPViewMap.text,b),d=this.getFirstElement(this.LPViewMap.link,b),e=this.getFirstElement(this.LPViewMap.image,b);c&&(c.innerText=a&&a.message);e&&this.toggle(a&&!a.hideImage,{view:e,useClasses:!0});d&&this.toggle(a&&!a.hideLink,{view:d,useClasses:!0})}var h;lpTag.unifiedWindow.RotatorViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"RotatorViewController",updateRotatorTimeouts:[1e4,3e4],LPViewMap:{wrapper:".lp_transcript_rotator_wrapper",text:"^lp_transcript_rotator_text",link:"^lp_transcript_rotator_link",image:".lp_transcript_rotator_image"},initialize:function(a){this.appContext=a.appContext;this.updateRotatorTimeoutIDs=[];this.failedToLoadHistory=this.appContext.conf.unifiedConf.failedToLoadHistory},events:function(){this.bindModel({path:this.chatPath.LINES,callback:b});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.CONVERSATIONS_VIEWED,context:this,func:d})},render:function(){this.createView({template:"<div class='lp_transcript_rotator_wrapper lpHide'><div class='lp_transcript_rotator_image'><img src='{{imagesRepository}}/{{imageUrl}}' alt='' class='lp_image'></div><div class='lp_transcript_rotator_text'><span class='text' data-lp-point='lp_transcript_rotator_text'>{{text}}</span>&nbsp;<a href='#' data-lp-point='lp_transcript_rotator_link'>{{linkText}}</a></div></div>",wrapWithDiv:!1,textInjection:{imagesRepository:this.appContext.conf.unifiedConf.imagesRepository,imageUrl:"loader_anim_bgwhite_16.gif",text:this.translate("transcriptRotatorDefaultMessage"),linkText:this.translate("transcriptRotatorLinkText")},callback:a.bind(this)})}});h=lpTag.unifiedWindow.RotatorViewController.prototype;h.hideRotator=function(){var a=this.getFirstElement(this.LPViewMap.wrapper);if(a){f.call(this);this.addClass(a,"lpHide")}}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};var STORAGE={KEY:"-richContentWidgetKey",DOMAIN:"leCdnDomain"};!function(){function a(){var a=window.lpTag.taglets.lpSecureStorage.v;return"https://"+lpTag.csds.getDomain(STORAGE.DOMAIN)+"/le_secure_storage/"+(a?a:"")}var b=lpTag.unifiedWindow.apps.RICH_CONTENT;lpTag.unifiedWindow.RichContentWidgetManagerViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"RichContentWidgetViewController",initialize:function(a){this.appContext=a.appContext||{};this.sliderAPI=a.sliderAPI;this.sliders={};this.slidersPersistedData={};this.accountId=this.appContext.conf&&this.appContext.conf.unifiedConf&&this.appContext.conf.unifiedConf.accountId||lpTag.site;this._loadState()},events:function(){this.appContext.events.bind({appName:b,eventName:lpTag.unifiedWindow.consts.RichContent.LINK_CLICKED,context:this,func:this._onLinkClicked});this.appContext.events.bind({appName:"slider",eventName:this.VCEvents.SLIDER_CLOSED,context:this,func:this._onSliderClosed})},dispose:function(){this._disposeSliders();this._unbindEvents();lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)},_unbindEvents:function(){this.appContext.events.unbind({appName:b,eventName:lpTag.unifiedWindow.consts.RichContent.LINK_CLICKED,context:this,func:this._onLinkClicked});this.appContext.events.unbind({appName:"slider",eventName:this.VCEvents.SLIDER_CLOSED,context:this,func:this._onSliderClosed})},_onLinkClicked:function(a){if(a.url){this.sliders[a.url]||this._initWidgetInstance(a);this.sliders[a.url].addToSlider();this._saveState(this.sliders[a.url].getId(),{url:a.url,actionData:a.actionData})}else this.logger.error("Cannot open RichContentWidget: url is missing",this.ControllerName)},_initWidgetInstance:function(a,b){this.sliders[a.url]=new lpTag.unifiedWindow.RichContentWidgetViewController({sliderAPI:this.sliderAPI,url:a.url,sliderId:b,actionData:a.actionData,appContext:this.appContext})},_onSliderClosed:function(a){a.type===lpTag.unifiedWindow.consts.slider.viewType.RichContentLinkAction&&this._disposeSliders()},_disposeSliders:function(){for(var a in this.sliders)this.sliders[a]&&this.sliders[a].dispose();this.sliders={};this._saveState()},_getStorageKey:function(){return STORAGE.KEY+"_"+(this.appContext.conf&&this.appContext.conf.engConf&&this.appContext.conf.engConf.ssid)},_saveState:function(c,d){if(c){this.slidersPersistedData[c]=d;this.slidersPersistedData.activeId=c}else this.slidersPersistedData={};lpTag.taglets.lpSecureStorage.setValue({key:this._getStorageKey(),site:this.accountId,app:b,value:this.slidersPersistedData,success:this._onSaveSuccess.bind(this),error:this._onSaveError.bind(this),appName:b,domain:a()})},_onSaveSuccess:function(){this.logger.info("successfully saved RC content",this.ControllerName)},_onSaveError:function(a){this.logger.error("fail to saved RC content "+a,this.ControllerName)},_loadState:function(){lpTag.taglets.lpSecureStorage.getValue({key:this._getStorageKey(),site:this.accountId,app:b,success:this._onLoadSuccess.bind(this),error:this._onLoadError.bind(this),appName:b,domain:a()})},_onLoadSuccess:function(a){this.logger.info("successfully loaded RC content",this.ControllerName);if(a){this.slidersPersistedData=a;for(var b in a)if(b&&"activeId"!==b){this._initWidgetInstance(a[b],b);a.activeId===b&&this.sliders[a[b].url].addToSlider()}}},_onLoadError:function(a){this.logger.error("fail to load RC content "+a,this.ControllerName)}})}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){lpTag.unifiedWindow.RichContentWidgetViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"RichContentWidgetViewController",sliderAPI:null,initialize:function(a){this.url=a.url;this.sliderAPI=a.sliderAPI;this.actionData=a.actionData||{};this.sliderId=a.sliderId||"richContent_"+Date.now();this.appContext=a.appContext;this._createIFrame()},dispose:function(){this.sliderAPI.removeView(this.sliderId);lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)},addToSlider:function(){this.sliderAPI.setSelectedView(this.sliderId);this.sliderAPI.showSlider();this.sliderAPI.focusOnMinimize()},getId:function(){return this.sliderId},_createIFrame:function(){var a=document.createElement("IFRAME");a.style.width="100%";a.style.height="100%";a.style.borderColor="transparent";a.setAttribute("src",this.url);a.setAttribute("tabindex","0");a.setAttribute("role","region");a.setAttribute("aria-label","widget area");a.setAttribute("title","widget area");this.view.appendChild(a);this.sliderAPI.addView(this.getFirstElement(this.view),this.actionData.name||"",this.sliderId,lpTag.unifiedWindow.consts.slider.viewType.RichContentLinkAction)}})}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){this.appContext.events.trigger({appName:this.ControllerName,eventName:this.VCEvents.DIALOG_CLOSED,data:{origin:a,dialogOpenedFrom:this.dialogOpenedFrom}});this.appContext.events.trigger({appName:"*",eventName:lpTag.unifiedWindow.events.viewController.MAXIMIZE_VISIBLE})}var b;lpTag.unifiedWindow.DialogViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"DialogViewController",template:"<div class='lp_lpview_mp lp_dialog_container lpc_confirmation-dialog {{deviceClass}}' data-lp-cust-id='dialogArea' role='alertdialog'><div class='lp_center_div_wrapper'><div class='lp_center_div_inner'><div class='lp_center_div_inner_content'><div class='lp_lpview_title lp_title lpc_confirmation-dialog__title {{deviceClass}}' id='dialog_title'>{{title}}</div><div class='lp_lpview_title lp_subtitle lp_hidden' id='dialog_subtitle' data-lp-point='subtitle_text'>{{subtitle}}</div><div class='lp_buttons_area' aria-labelledby='dialog_title'><button class='lp_cancel_button lpc_confirmation-dialog__cancel-button {{deviceClass}}' data-lp-point='cancel_button' data-lp-cust-id='cancel_button'>{{cancel}}</button> <button class='lp_confirm_button lpc_confirmation-dialog__confirm-button {{deviceClass}}' data-lp-point='confirm_button' data-lp-cust-id='button'>{{confirm}}</button></div></div></div></div></div>",focusElement:void 0,errorId:void 0,LPViewMap:{confirmButton:"^confirm_button",cancelButton:"^cancel_button",innerContainer:"^center_div_inner",error:"^dialog_input_error"},LPClassesMap:{error:"lp_error"},initialize:function(a){a.successCallback&&(this.successCallback=a.successCallback);a.cancelCallback&&(this.cancelCallback=a.cancelCallback);this.appContext=a.appContext;this.dialogOpenedFrom=a.dialogOpenedFrom;var b=this.appContext.deviceDetector.isDesktop()?"1":"0.92";this.animate(this.view,{duration:300,opacity:b})},onInitialize:function(){this.focusOnElement()},events:function(){this.bindViewEvent({selector:this.LPViewMap.confirmButton,DOMEvent:"click",callback:this.confirmClicked});this.bindViewEvent({selector:this.LPViewMap.cancelButton,DOMEvent:"click",callback:this.cancelClicked});(this.appContext.deviceDetector.isMobile()||this.appContext.deviceDetector.isTablet())&&this.bindViewEvent({view:this.view,DOMEvent:"touchstart",callback:this.viewTapped});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:this.focusOnElement})}});b=lpTag.unifiedWindow.DialogViewController.prototype;b.viewTapped=function(){"INPUT"===document.activeElement.tagName&&this.hasInputFocused&&document.activeElement.blur()};b.successCallback=function(){};b.cancelCallback=function(){};b.confirmClicked=function(){if(this.validate()){this.successCallback();this.closeDialog(this.appConsts.dialog.actions.CONFIRM)}};b.cancelClicked=function(){this.closeDialog(this.appConsts.dialog.actions.CANCEL,this.cancelCallback)};b.focusOnElement=function(){this.focusElement&&this.focusElement.focus()};b.validate=function(){return!0};b.showError=function(a,b){var c=this;this.errorView||this.createView({template:"<img class='lp_email_error_img' data-lp-point='email_error_img' src='{{url}}' alt='' aria-hidden='true'><div id='{{id}}' class='lp_email_error_text' class='lp_text' data-lp-point='email_error_text' aria-live='polite'>{{text}}</div>",wrapWithDiv:!0,target:this.LPViewMap.error,textInjection:{text:a,url:this.appContext.conf.unifiedConf.imagesRepository+"/error-15x15.png",id:this.errorId},callback:function(a){c.errorView=a;c.errorView.setAttribute("role","alert");c.errorView.setAttribute("class","lp_dialog_alert")}});this.setErrorAttrs(b);this.shakeX(this.getFirstElement(this.LPViewMap.innerContainer))};b.hideError=function(){this.removeView(this.errorView);this.errorView=null;this.removeErrorAttrs()};b.setErrorAttrs=function(){this.addClass(this.LPViewMap.innerContainer,this.LPClassesMap.error);this.setErrorAccessibilityAttrs()};b.removeErrorAttrs=function(){this.removeClass(this.LPViewMap.innerContainer,this.LPClassesMap.error);this.removeErrorAccessibilityAttrs()};b.setErrorAccessibilityAttrs=function(){var a=this.focusElement;a.setAttribute("aria-describedby",this.errorId);a.setAttribute("aria-invalid","true");a.focus()};b.removeErrorAccessibilityAttrs=function(){var a=this.focusElement;a.removeAttribute("aria-describedby");a.removeAttribute("aria-invalid")};b.closeDialog=function(b,c){a.call(this,b);this.view.removeAttribute("role");var d=this;this.animate(this.view,{duration:500,opacity:"0"},function(){c&&"function"==typeof c&&c.call(d);d.dispose()})}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){var b=new RegExp(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);return b.test(a)}var b;lpTag.unifiedWindow.EmailTranscriptDialogViewController=lpTag.unifiedWindow.DialogViewController.extend({ControllerName:"EmailTranscriptDialogViewController",
template:"<div class='lp_lpview_mp lp_dialog_container lpc_confirmation-dialog {{deviceClass}}' data-lp-cust-id='dialogArea'><div class='lp_center_div_wrapper'><div class='lp_center_div_inner' data-lp-point='center_div_inner'><div class='lp_center_div_inner_content'><div id='lp_transcript_title' class='lp_lpview_title lp_title lp_email_transcript lpc_confirmation-dialog__title {{deviceClass}}'>{{title}}</div><input class='lp_dialog_input' data-lp-point='dialog_input' type='email' aria-labelledby='lp_transcript_title'><div class='lp_dialog_input_error' data-lp-point='dialog_input_error'></div><div class='lp_buttons_area'><button class='lp_cancel_button lp_email_transcript lpc_confirmation-dialog__cancel-button {{deviceClass}}' data-lp-point='cancel_button' data-lp-cust-id='cancel_button'>{{cancel}}</button> <button class='lp_confirm_button lp_email_transcript lpc_confirmation-dialog__confirm-button {{deviceClass}}' data-lp-point='confirm_button' data-lp-cust-id='button'>{{confirm}}</button></div></div></div></div></div>",TOOLTIP_TIMEOUT:3e3,emailAddress:void 0,errorId:"lp_transcript_error",LPViewMap:{confirmButton:"^confirm_button",cancelButton:"^cancel_button",input:"^dialog_input",error:"^dialog_input_error",innerContainer:"^center_div_inner"},LPClassesMap:{error:"lp_error"},preInitView:function(){this.textInjection={title:this.translate("dialog_email_transcript"),confirm:this.translate("submit"),cancel:this.translate("cancel")}},initialize:function(){this.focusElement=this.getFirstElement(this.LPViewMap.input)}});b=lpTag.unifiedWindow.EmailTranscriptDialogViewController.prototype;b.cancelCallback=function(){this.hideError()};b.validate=function(){var b=this.focusElement.value;if(a(b)){this.emailAddress=b;this.appContext.events.trigger({appName:"tooltip",eventName:"show",data:{text:this.translate("tooltip_EmailTranscriptSentConfirmation"),tooltipTimeout:this.TOOLTIP_TIMEOUT}});this.hideError();return!0}this.showError(this.translate("inputEmailError"));return!1};b.successCallback=function(){this.appContext.chatStateManager.emailTranscript(this.emailAddress,"Your chat transcript");this.view.focus()}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){var b=this.getFirstElement(this.LPViewMap.confirmButton),c=a.newValue;c===lpTag.unifiedWindow.State.CONNECTION_ISSUE?b.setAttribute("disabled","disabled"):b.removeAttribute("disabled")}var b;lpTag.unifiedWindow.EndChatDialogViewController=lpTag.unifiedWindow.DialogViewController.extend({ControllerName:"EndChatDialogViewController",LPViewMap:{confirmButton:"^confirm_button",cancelButton:"^cancel_button"},preInitView:function(){this.textInjection={title:this.translate("end_chat_alert"),confirm:this.translate("yes"),cancel:this.translate("no")}},events:function(){this.bindModel({path:this.uiPath.STATE,callback:a,context:this})},initialize:function(){this.focusElement=this.getFirstElement(this.LPViewMap.cancelButton)}});b=lpTag.unifiedWindow.EndChatDialogViewController.prototype;b.successCallback=function(){this.appContext.uiStateManager.setActionsVisibility(!1);this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.application.END_CHAT})}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};var proto;lpTag.unifiedWindow.ForgetMeDialogViewController=lpTag.unifiedWindow.DialogViewController.extend({ControllerName:"ForgetMeDialogViewController",LPViewMap:{confirmButton:"^confirm_button",cancelButton:"^cancel_button",subtitleElement:"^subtitle_text"},ConversationOwnerAccountId:lpTag.site,preInitView:function(a){var b=this.models.uiModel.get(lpTag.unifiedWindow.uiModelPath.STATE.path),c=[lpTag.unifiedWindow.State.ENDED,lpTag.unifiedWindow.State.PENDING,lpTag.unifiedWindow.State.APP_ENDED,lpTag.unifiedWindow.State.WAITING],d=this.translate("forget_me_dialog_subtitle_on_active_chat_close_window");-1!==c.indexOf(b)&&(d=this.translate("forget_me_dialog_subtitle_close_window"));this.textInjection={title:this.translate("forget_me_dialog_close_window"),confirm:this.translate("yes"),cancel:this.translate("no"),subtitle:d};a.appContext.conf.engConf.subscription&&(this.ConversationOwnerAccountId=a.appContext.conf.engConf.subscription.conversationowneraccountid)},render:function(){lpTag.taglets.lpUtil.removeClass(this.subtitleElement,"lp_hidden")},events:function(){this.bindModel({path:this.uiPath.STATE,callback:_stateChanged,context:this})},initialize:function(){this.focusElement=this.getFirstElement(this.LPViewMap.cancelButton);this.subtitleElement=this.getFirstElement(this.LPViewMap.subtitleElement)}});proto=lpTag.unifiedWindow.ForgetMeDialogViewController.prototype;proto.successCallback=function(){this.appContext.uiStateManager.setActionsVisibility(!1);this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.application.END_CHAT});this.appContext.events.trigger({appName:"*",eventName:lpTag.unifiedWindow.events.chat.FORGET_ME,global:!0,data:{conversationOwnerAccountId:this.ConversationOwnerAccountId}});this.appContext.events.trigger({appName:"*",eventName:lpTag.unifiedWindow.events.chat.CLOSE_WINDOW_FORGET_ME})};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(){for(var a,b=[],c=1;2>=c;c++){a=this.getFirstElement(this.LPViewMap["input"+c]);b.push(a)}return b}function b(){for(var a=[],b=0;b<this.inputs.length;b++)this.inputs[b].value||a.push(this.inputs[b]);return a}function c(){for(var a=0;a<this.inputs.length;a++)this.removeClass(this.inputs[a],this.LPClassesMap.error)}var d;lpTag.unifiedWindow.IdnvDialogViewController=lpTag.unifiedWindow.DialogViewController.extend({ControllerName:"IdnvDialogViewController",template:"<div class='lp_lpview_mp lp_dialog_container lpc_confirmation-dialog {{deviceClass}}' data-lp-cust-id='dialogArea' role='dialog'><div class='lp_center_div_wrapper'><div class='lp_center_div_inner' data-lp-point='center_div_inner'><fieldset class='lp_center_div_inner_content'><legend class='lp_lpview_title lp_title lpc_confirmation-dialog__title {{deviceClass}}' id='idnv_dialog_title'>{{title}}</legend><div class='lp_idnv_container'><div class='lp_idnv_wrapper'><label for='idnv_input_1'>{{idnvChar1}}</label><input id='idnv_input_1' class='lp_dialog_input lp_idnv_input' data-lp-point='dialog_input_1' aria-describedby='idnv_dialog_title' type='password' maxlength='1' aria-required='true'></div><div class='lp_idnv_wrapper'><label for='idnv_input_2'>{{idnvChar2}}</label><input id='idnv_input_2' class='lp_dialog_input lp_idnv_input' data-lp-point='dialog_input_2' aria-describedby='idnv_dialog_title' type='password' maxlength='1' aria-required='true'></div><div class='lp_dialog_input_error' data-lp-point='dialog_input_error' role='alert' aria-atomic='true'></div></div><div class='lp_buttons_area'><button class='lp_cancel_button lpc_confirmation-dialog__cancel-button {{deviceClass}}' data-lp-point='cancel_button' data-lp-cust-id='cancel_button'>{{cancel}}</button> <button class='lp_confirm_button lpc_confirmation-dialog__confirm-button {{deviceClass}}' data-lp-point='confirm_button' data-lp-cust-id='button'>{{confirm}}</button></div></fieldset></div></div></div>",errorId:"lp_idnv_error",LPViewMap:{confirmButton:"^confirm_button",cancelButton:"^cancel_button",input1:"^dialog_input_1",input2:"^dialog_input_2",error:"^dialog_input_error",innerContainer:"^center_div_inner"},preInitView:function(a){var b;this.idnvData=a.idnvData;b=this.idnvData.fields;this.textInjection={title:this.injectTextDefaults(this.translate("idnvDialogTitle",!0),{idnvChar1:b.firstChar,idnvChar2:b.secondChar,idnvType:b.typeField}),confirm:this.translate("submit"),cancel:this.translate("cancel"),idnvChar1:b.firstChar,idnvChar2:b.secondChar}},initialize:function(){this.inputs=a.call(this);this.focusElement=this.inputs[0]},events:function(){this.appContext.events.bind({appName:"*",eventName:this.EventName.chatState.ENDED,context:this,func:this.closeDialog});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.DIALOG_STATE_CHANGED,context:this,func:this.closeDialog})}});d=lpTag.unifiedWindow.IdnvDialogViewController.prototype;d.cancelCallback=function(){this.hideError();this.appContext.idnvManager.sendIdnvCancelLine(this.idnvData.encodedFields)};d.successCallback=function(){var a={firstChar:this.inputs[0].value,secondChar:this.inputs[1].value,idnvData:this.idnvData};this.appContext.idnvManager.sendIdnvSubmitLine(a)};d.validate=function(){var a=b.call(this);if(0===a.length){this.hideError();return!0}this.hideError();this.showError(this.translate("idnvInputError"),a);return!1};d.setErrorAttrs=function(a){c.call(this);for(var b=0;b<a.length;b++)this.addClass(a[b],this.LPClassesMap.error);this.addClass(this.LPViewMap.error,this.LPClassesMap.error);this.focusElement=a[0];this.setErrorAccessibilityAttrs()};d.removeErrorAttrs=function(){c.call(this);this.removeClass(this.LPViewMap.error,this.LPClassesMap.error);this.removeErrorAccessibilityAttrs()}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){var a;lpTag.unifiedWindow.ReauthenticationDialogViewController=lpTag.unifiedWindow.DialogViewController.extend({ControllerName:"ReauthenticationDialogViewController",template:"<div class='lp_lpview_mp lp_dialog_container lpc_confirmation-dialog {{deviceClass}}' data-lp-cust-id='dialogArea' role='alertdialog' aria-labelledby='dialog_title'><div class='lp_center_div_wrapper'><div class='lp_center_div_inner'><div class='lp_center_div_inner_content'><div class='lp_icons_area'><div class='icon'><img src='{{imagesRepository}}/embedded-error.png' alt='' aria-hidden='true'></div></div><div class='lp_lpview_title lp_title lp_title_large_padding lpc_confirmation-dialog__title {{deviceClass}}' id='dialog_title'>{{title}}</div><div class='lp_buttons_area'><button class='lp_confirm_button lp_single_button lpc_confirmation-dialog__confirm-button {{deviceClass}}' data-lp-point='confirm_button' data-lp-cust-id='button'>{{confirm}}</button></div></div></div></div></div>",LPViewMap:{confirmButton:"^confirm_button"},preInitView:function(a){this.data=a;var b=this.translate("authExpired"),c=this.translate("redirect");if(a.appContext.conf.engConf.allowUnauthMsg){b=this.translate("unauthExpired");c=this.translate("reload")}this.textInjection={title:b,confirm:c,imagesRepository:a.appContext.conf.unifiedConf.imagesRepository};isNaN(a.callbackTimeout)||(this.timeout=setTimeout(function(){lpTag.lpUtils.runCallback(a.callback,a.context)},a.callbackTimeout))},initialize:function(){this.focusElement=this.getFirstElement(this.LPViewMap.confirmButton);this.data.header_key&&this.appContext.wrapperWindow.setTitle(this.translate(this.data.header_key))}});a=lpTag.unifiedWindow.ReauthenticationDialogViewController.prototype;a.successCallback=function(){this.timeout&&clearTimeout(this.timeout);lpTag.lpUtils.runCallback(this.data.callback,this.data.context)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a,b){if(a.getAttribute("aria-labelledby")){a.removeAttribute("aria-labelledby");a.setAttribute("aria-label",b);return!0}return!1}function b(a,b){if(a.getAttribute("aria-label")){a.removeAttribute("aria-label");a.setAttribute("aria-labelledby",b);return!0}return!1}function c(a){for(var b=this.getElements(this.tagName),c=0;c<b.length;c++)b[c].setAttribute("aria-describedby",a)}function d(){for(var a=this.getElements(this.tagName),b=0;b<a.length;b++)a[b].removeAttribute("aria-describedby")}var e;lpTag.unifiedWindow.BaseSurveyQuestion=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"BaseSurveyQuestion",applicationType:"BaseSurveyQuestion",errorTemplateFileName:"<div class='{{wrapperClass}}wrapper' role='alert'><img class='lp_error_img' src='{{url}}' alt='{{errorAltText}}'><div id='{{id}}' class='lp_error_text lp_text' data-lp-point='errorText' aria-live='polite'>{{text}}</div></div>",wrapperTemplateFileName:"<div class='lp_question'><div id='{{id}}' class='lp_question_label lpc_survey-area__question-label {{deviceClass}}'>{{label}}</div><div class='lp_lpview_content lp_content lpc_survey-area__question-content {{deviceClass}}'></div></div>",wrapperTemplateFileNameCsat:"<div class='lp_question'><h3 id='{{id}}' class='lp_question_label lpc_survey-area__question-label {{deviceClass}}'>{{label}}</h3><div class='lp_lpview_content lp_content'></div></div>",customizationClassName:"lpc_survey-area__question-wrapper",prefixMap:{label:"lbl_",error:"err_"},LPViewMap:{errorWrapper:".surveyError_wrapper",errorText:"^errorText"},LPClassMap:{label:"lp_question_label",content:"lp_lpview_content",error:"lp_error",surveyError:"lp_surveyError_"},initialize:function(a){this.hasError=!1;if(a.question){this.question=a.question;this.errorIconURL=a.imagesRepository+"/error-15x15.png";this.appContext=a.appContext;this.deviceClass=lpTag.unifiedWindow.customization.deviceClass;this.container=this.createDivWrapper(a.question);this.defaultSelect=a.defaultSelect;this.containerId=this.container.getAttribute("id");this.answerArea=lpTag.lpUtils.getElementsByClass(this.container,this.LPClassMap.content,[])[0];this.errorId=this.prefixMap.error+this.question.id}}});e=lpTag.unifiedWindow.BaseSurveyQuestion.prototype;e.getQuestionType=function(a){if(!this.appContext.deviceDetector.isDesktop()){if("email"===a)return"email";if("numeric"===a)return"number"}return"text"};e.bindFocusAndBlurEvents=function(a){this.appContext.deviceDetector.isDesktop()||this.bindViewEvent({view:a,DOMEvent:"blur",appName:"input",eventData:{focusOnField:!0},callback:this.fireBlurEvent})};e.bindTextFieldEvents=function(a){this.bindViewEvent({view:a,DOMEvent:"keyup",callback:this.submitInputAnswer});this.bindViewEvent({view:a,DOMEvent:"input",callback:this.submitInputAnswer});this.bindViewEvent({view:a,DOMEvent:"paste",callback:this.submitInputAnswer});this.bindViewEvent({view:a,DOMEvent:"cut",callback:this.submitInputAnswer});this.bindViewEvent({view:a,DOMEvent:"dragend",callback:this.delaySubmitInputAnswer});this.bindViewEvent({view:a,DOMEvent:"drop",callback:this.delaySubmitInputAnswer});if(this.appContext.deviceDetector.isDesktop()){this.bindViewEvent({view:a,DOMEvent:"keypress",callback:this.stopBubblingUp});this.bindViewEvent({view:a,DOMEvent:"blur",callback:this.fireBlurEvent})}this.bindFocusAndBlurEvents(a)};e.submitInputAnswer=function(a){"number"===a.target.type&&a.target.validity&&a.target.validity.badInput?a.target.value="":a.sourceElement.id&&this.submitAnswer(this.question.id,this.extractAnswerByValue(a.sourceElement.value))};e.delaySubmitInputAnswer=function(a){var b=this;setTimeout(function(){b.submitInputAnswer(a)},0)};e.setError=function(a){if(this.hasError)a!==this.errorText&&(this.getFirstElement(this.LPViewMap.errorText,this.errorView).innerHTML=a);else{this.hasError=!0;this.addClass(this.container,this.LPClassMap.error);this.errorView=this.createView({template:this.errorTemplateFileName,wrapWithDiv:!1,doNotAddChild:!0,textInjection:{wrapperClass:this.LPClassMap.surveyError,text:a,url:this.errorIconURL,id:this.errorId}});this.appContext.deviceDetector.isMobile()&&this.errorView.setAttribute("role","alert");this.container.appendChild(this.errorView);c.call(this,this.errorId)}this.errorText=a};e.cleanError=function(){this.removeClass(this.container,this.LPClassMap.error);this.errorView&&this.container.removeChild(this.errorView);this.errorView=null;this.errorText="";this.errorText="";this.hasError=!1;d.call(this,this.errorId)};e.setFocus=function(){this.focusOnElement(this.tagName)};e.dispose=function(){lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)};e.createDivWrapper=function(a){var b=a.type==lpTag.unifiedWindow.SurveyType.CSAT?this.wrapperTemplateFileNameCsat:this.wrapperTemplateFileName,c=this.createView({template:b,wrapWithDiv:!1,textInjection:{label:a.label,id:this.prefixMap.label+a.id}}),d=lpTag.lpUtils.getElementsByClass(c,this.LPClassMap.label,[])[0],e=lpTag.lpUtils.getElementsByClass(c,this.LPClassMap.content,[])[0];if(a.mandatory){var f=document.createElement("SPAN");f.innerHTML="*";f.className="lp_mandatory";d.appendChild(f)}c.appendChild(e);return c};e.stopBubblingUp=function(a){var b="which"in a?a.which:a.keyCode;if(13===b){this.stopPropagation(a);"TEXTAREA"!==document.activeElement.tagName&&this.preventDefault(a)}};e.fireBlurEvent=function(){this.appContext.events.trigger({appName:"survey",eventName:"blur",data:{question:this.question}})};e.extractAnswerByValue=function(a){return this.question.entry&&this.question.entry[a]?this.question.entry[a].value:a};e.submitAnswer=function(a,b){var c=b.constructor===Array;b=c?b:[b];this.appContext.events.trigger({appName:"survey",eventName:"submitAnswer",data:{questionId:a,answer:b,isAnswerArray:c}})};e.addToLabel=function(a,b){return this.addToLabelOverride?this.addToLabelOverride.call(this,a,b):this.addToLabelBase.call(this,a,b)};e.revertLabel=function(a){return this.revertLabelOverride?this.revertLabelOverride.call(this,a):this.revertLabelBase.call(this,a)};e.addToLabelBase=function(b,c){var d=lpTag.lpUtils.getElementsByClass(this.container,this.LPClassMap.label,[]);if(d&&d.length>0)for(var e=b+". "+d[0].textContent,f=this.getElements(this.tagName),g=0;g<f.length;g++)a(f[g],e)||a(f[g].parentElement,e)};e.revertLabelBase=function(a){var c=lpTag.lpUtils.getElementsByClass(this.container,this.LPClassMap.label,[]);if(c&&c.length>0)for(var d=c[0].getAttribute("id"),e=this.getElements(this.tagName),f=0;f<e.length;f++)b(e[f],d)||b(e[f].parentElement,d)}}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.Survey=lpTag.unifiedWindow.Survey||{};!function(){var a;lpTag.unifiedWindow.Survey.CheckBoxQuestion=lpTag.unifiedWindow.BaseSurveyQuestion.extend({ControllerName:"CheckBoxQuestion",className:"lp_question_wrapper",checkboxWrapperClass:"lp_checkbox_wrapper",templateFileName:"<div class='lp_checkbox_button'><input id='{{inputId}}' type='checkbox' value='{{value}}' name='{{name}}'><label for='{{inputId}}'>{{label}}</label></div>",wrapperTemplateFileName:"<fieldset class='lp_question' title='{{label}}'><legend id='{{id}}' class='lp_question_label'>{{label}}</legend><div class='lp_lpview_content lp_content'></div></fieldset>",prefix:"inp_",tagName:"input",initialize:function(){this.answers=[]},render:function(){this.view.classList.add(this.customizationClassName);this.view.classList.add(this.deviceClass);var a,b,c=document.createElement("div");c.className=this.checkboxWrapperClass;for(var d=0;d<this.question.entry.length;++d){a=this.question.entry[d];b=this.createView({template:this.templateFileName,wrapWithDiv:!1,textInjection:{inputId:d+"_"+this.question.id,value:d,name:this.prefix+this.question.id,type:this.getQuestionType(this.question.validationType),label:a.displayValue||a.value,isMandatory:this.question.mandatory.toString()}});if(a.checked===!0||"true"==a.checked){b.setAttribute("checked","checked");this.answers.push(a.value)}c.appendChild(b);this.answerArea.appendChild(c);this.bindViewEvent({view:b,DOMEvent:"click",callback:this.submitCheckboxAnswer})}}});a=lpTag.unifiedWindow.Survey.CheckBoxQuestion.prototype;a.submitCheckboxAnswer=function(a){if(a.sourceElement&&"undefined"!=typeof a.sourceElement.checked){var b=this.extractAnswerByValue(a.sourceElement.value);if(a.sourceElement.checked)this.answers.push(b);else{var c=this.answers.indexOf(b);-1!==c&&this.answers.splice(c,1)}this.submitAnswer(this.question.id,this.answers)}};a.addToLabelOverride=function(a,b){this.oldTitle=this.container.getAttribute("title");for(var c=this.getElements("label"),d=this.getElements(this.tagName),e=0;e<d.length&&e<c.length;e++)d[e].setAttribute("aria-label",a+". "+this.oldTitle+" "+c[e].textContent)};a.revertLabelOverride=function(a){for(var b=this.getElements(this.tagName),c=0;c<b.length;c++)b[c].removeAttribute("aria-label");this.oldTitle=null}}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.Survey=lpTag.unifiedWindow.Survey||{};!function(){var a;lpTag.unifiedWindow.Survey.DropDownQuestion=lpTag.unifiedWindow.BaseSurveyQuestion.extend({ControllerName:"DropDownQuestion",className:"lp_question_wrapper",templateFileName:"<select id='{{id}}' class='lp_select_field' role='listbox' aria-labelledby='{{ariaLabel}}' aria-required='{{isMandatory}}'></select>",prefix:"sel_",tagName:"select",render:function(){this.view.classList.add(this.customizationClassName);this.view.classList.add(this.deviceClass);var a,b,c=this.createView({template:this.templateFileName,wrapWithDiv:!1,textInjection:{id:this.prefix+this.question.id,ariaLabel:this.prefixMap.label+this.question.id,isMandatory:this.question.mandatory.toString()}}),d=[{value:this.defaultSelect||"pick one..."}];d=d.concat(this.question.entry);for(var e=0;e<d.length;++e){a=d[e];b=document.createElement("OPTION");b.setAttribute("value",e-1);b.innerHTML=lpTag.HtmlSanitizerUtils.sanitizeHtml(a.value).cleanText;(a.checked===!0||"true"==a.checked)&&b.setAttribute("selected","selected");c.appendChild(b)}this.answerArea.appendChild(c);this.bindDropdownEvents(c)}});a=lpTag.unifiedWindow.Survey.DropDownQuestion.prototype;a.bindDropdownEvents=function(a){this.bindViewEvent({view:a,DOMEvent:"change",callback:this.submitInputAnswer});this.bindFocusAndBlurEvents(a)}}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.Survey=lpTag.unifiedWindow.Survey||{};!function(){lpTag.unifiedWindow.Survey.TextAreaQuestion=lpTag.unifiedWindow.BaseSurveyQuestion.extend({ControllerName:"TextAreaQuestion",className:"lp_question_wrapper",templateFileName:"<textarea id='{{id}}' class='lp_textarea_field' aria-labelledby='{{ariaLabel}}' type='{{type}}' aria-required='{{isMandatory}}'></textarea>",prefix:"txt_",tagName:"textarea",render:function(){this.view.classList.add(this.customizationClassName);this.view.classList.add(this.deviceClass);var a=this.createView({template:this.templateFileName,wrapWithDiv:!1,textInjection:{id:this.prefix+this.question.id,ariaLabel:this.prefixMap.label+this.question.id,type:this.getQuestionType(this.question.validationType),isMandatory:this.question.mandatory.toString()}});a.placeholder=this.translate("defaultTextArea");this.question.lastKnownValue&&(a.value=this.question.lastKnownValue);this.answerArea.appendChild(a);this.bindTextFieldEvents(a)}})}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.Survey=lpTag.unifiedWindow.Survey||{};!function(){lpTag.unifiedWindow.Survey.TextFieldQuestion=lpTag.unifiedWindow.BaseSurveyQuestion.extend({ControllerName:"TextFieldQuestion",className:"lp_question_wrapper",templateFileName:"<input id='{{id}}' class='lp_input-field' aria-labelledby='{{ariaLabel}}' type='{{type}}' placeholder='{{defaultTextArea}}' aria-required='{{isMandatory}}'>",prefix:"txt_",tagName:"input",render:function(){this.view.classList.add(this.customizationClassName);this.view.classList.add(this.deviceClass);var a=this.createView({template:this.templateFileName,wrapWithDiv:!1,textInjection:{id:this.prefix+this.question.id,ariaLabel:this.prefixMap.label+this.question.id,type:this.getQuestionType(this.question.validationType),isMandatory:this.question.mandatory.toString()}});this.question.lastKnownValue&&(a.value=this.question.lastKnownValue);this.appContext.deviceDetector.isIOS()&&"number"===a.attributes.type.value&&a.setAttribute("pattern","[0-9]*");this.answerArea.appendChild(a);this.bindTextFieldEvents(a)}})}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.Survey=lpTag.unifiedWindow.Survey||{};!function(){lpTag.unifiedWindow.Survey.RadioButtonQuestion=lpTag.unifiedWindow.BaseSurveyQuestion.extend({ControllerName:"RadioButtonQuestion",className:"lp_question_wrapper",radioWrapperClass:"lp_radiobutton_wrapper",templateFileName:"<span class='lp_radio_button' aria-labelledby='{{ariaLabel}}'><input id='{{inputId}}' type='radio' value='{{value}}' name='{{name}}'><label for='{{inputId}}'>{{label}}</label></span>",wrapperTemplateFileName:"<fieldset class='lp_question' title='{{label}}'><legend id='{{id}}' class='lp_question_label'>{{label}}</legend><div class='lp_lpview_content lp_content'></div></fieldset>",prefix:"inp_",tagName:"input",render:function(){this.view.classList.add(this.customizationClassName);this.view.classList.add(this.deviceClass);var a,b,c=document.createElement("div");c.className=this.radioWrapperClass;for(var d=0;d<this.question.entry.length;++d){a=this.question.entry[d];b=this.createView({template:this.templateFileName,wrapWithDiv:!1,textInjection:{inputId:d+"_"+this.question.id,value:d,name:this.prefix+this.question.id,type:this.getQuestionType(this.question.validationType),label:a.displayValue||a.value,isMandatory:this.question.mandatory.toString(),ariaLabel:this.prefixMap.label+this.question.id}});(a.checked===!0||"true"==a.checked)&&b.setAttribute("checked","checked");c.appendChild(b);this.answerArea.appendChild(c);this.bindViewEvent({view:b,DOMEvent:"click",callback:this.submitInputAnswer})}}});var a=lpTag.unifiedWindow.Survey.RadioButtonQuestion.prototype;a.addToLabelOverride=function(a,b){this.oldTitle=this.container.getAttribute("title");if(b)this.container.setAttribute("title",a+". "+this.oldTitle);else for(var c=this.getElements("label"),d=this.getElements(this.tagName),e=0;e<d.length;e++)d[e].setAttribute("aria-label",a+". "+this.oldTitle+" "+c[e].textContent)};a.revertLabelOverride=function(a){if(a)this.container.setAttribute("title",this.oldTitle);else for(var b=this.getElements(this.tagName),c=0;c<b.length;c++)b[c].removeAttribute("aria-label");this.oldTitle=null}}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.Survey=lpTag.unifiedWindow.Survey||{};!function(){var a=lpTag.unifiedWindow.applicationUtils;lpTag.unifiedWindow.Survey.CSATQuestion=lpTag.unifiedWindow.BaseSurveyQuestion.extend({ControllerName:"CSATQuestion",className:"lp_question_wrapper",templateFileName:"<div id='{{id}}' class='lp_csat_rater lpc_survey-area__question-content {{deviceClass}}' role='region'><form><fieldset class='lp_csat_rater_stars'><legend>{{label}}</legend><a href='javascript:void(0)' class='lp_csat_rater_star' role='button' title='{{labelStar5}}' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='5' aria-pressed='false' aria-label='{{label}} 5 {{of}} {{numberOfStars}}'></a> <a href='javascript:void(0)' class='lp_csat_rater_star' role='button' title='{{labelStar4}}' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='4' aria-pressed='false' aria-label='{{label}} 4 {{of}} {{numberOfStars}}'></a> <a href='javascript:void(0)' class='lp_csat_rater_star' role='button' title='{{labelStar3}}' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='3' aria-pressed='false' aria-label='{{label}} 3 {{of}} {{numberOfStars}}'></a> <a href='javascript:void(0)' class='lp_csat_rater_star' role='button' title='{{labelStar2}}' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='2' aria-pressed='false' aria-label='{{label}} 2 {{of}} {{numberOfStars}}'></a> <a href='javascript:void(0)' class='lp_csat_rater_star' role='button' title='{{labelStar1}}' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='1' aria-pressed='false' aria-label='{{label}} 1 {{of}} {{numberOfStars}}'></a></fieldset></form><div class='lp_csat_rater_current_rating lpc_survey-area__current-rating {{deviceClass}}' data-lp-point='current_rating' tabindex='0'>{{rating}}</div><div class='lp_survey_disclaimer lpc_survey-area__disclaimer {{deviceClass}}'>{{csatDisclaimer}}</div></div>",prefix:"csat_",csatLevelPrefix:"csatLevel_",tagName:"div",defaultCSATLevel:0,numberOfStars:5,cssClasses:{defaultStarClass:"lp_csat_rater_star",chosenStarClass:"lp_csat_rater_star chosen"},previousChosenRating:void 0,LPViewMap:{star:"^star",current:"^current_rating"},submitCSATAnswer:function(a){if(a.sourceElement.getAttribute("data-lp-rating")){this.submitAnswer(this.question.id,a.sourceElement.getAttribute("data-lp-rating"));this.toggleChosen(a.sourceElement);a.sourceElement.setAttribute("aria-pressed",!0)}},toggleChosen:function(b){a.isDomNode(b)||(b=this.getElementsByClass(this.view,this.cssClasses.defaultStarClass,[])[this.numberOfStars-b]);var c=b.getAttribute("data-lp-rating");if(this.cachedPrevious){this.cachedPrevious.className=this.cssClasses.defaultStarClass;this.cachedPrevious.setAttribute("aria-pressed",!1)}b.className=this.cssClasses.chosenStarClass;this.getElements(this.LPViewMap.current,this.view)[0].innerHTML=this.translate(this.csatLevelPrefix+c);this.cachedPrevious=b},render:function(){this.view.classList.add(this.customizationClassName);this.view.classList.add(this.deviceClass);this.createView({template:this.templateFileName,wrapWithDiv:!1,textInjection:{id:this.prefix+this.question.id,defaultCSATLevel:this.defaultCSATLevel,rating:this.translate(this.csatLevelPrefix+this.defaultCSATLevel),csatDisclaimer:this.translate("csatDisclaimer"),label:this.translate("csatRatingQuestion"),of:this.translate("outOf"),numberOfStars:this.numberOfStars,labelStar1:this.translate("csatLevel_1"),labelStar2:this.translate("csatLevel_2"),labelStar3:this.translate("csatLevel_3"),labelStar4:this.translate("csatLevel_4"),labelStar5:this.translate("csatLevel_5")}});this.bindViewEvent({selector:this.LPViewMap.star,DOMEvent:"click",callback:this.submitCSATAnswer})}})}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow.Application=function(a,b){function c(a,b){if("object"==typeof a&&"object"==typeof b){va=a.uiState&&a.uiState.engConf.ssoKey;wa=a.uiState&&a.uiState.engConf.redirect_uri;Ga=a.uiState&&a.uiState.engConf.async;Ha=a.uiState&&a.uiState.engConf.externalTargets&&!!a.uiState.engConf.externalTargets[lpTag.unifiedWindow.consts.externalTargets.SMS];D();h(a);E();g(b);q();r(a);Ga&&!Ha?u(a)?t(d,function(){s(d,v)}):s(d,v):d()}else La.error("init: Could not init - did not required configuration",Ia)}function d(a){k();l();o();w(a);x()}function e(){m();if(V){V.dispose();V=null}ca&&ca.clear();if(X){X.dispose();X=null}if(R){R.dispose();R=null}if(S){S.dispose();S=null}if(T){T.dispose();T=null}if(U){U.dispose();U=null}if(Y){Y.dispose();Y=null}if(Z){Z.dispose();Z=null}if($){$.dispose();$=null}xa&&xa.dispose();if(ya){ya.disposeChatViews();ya.dispose()}za&&za.dispose();if(P){P.dispose();P=null}if(ea){ea.dispose();ea=null}if(ja){ja.dispose();ja=null}if(ka){ka.dispose();ka=null}if(ba){ba.dispose();ba=null}if(na){na.dispose();na=null}L.dispose()}function f(){return Na}function g(a){W=a.sessionManager;Da.appConfigurationManager=M=a.appConfigurationManager;Da.browserStateManager=J=a.browserStateManager;Da.deviceDetector=K=a.deviceDetector;Da.wrapperWindow=L=a.wrapperWindow;Da.events=N=a.events}function h(a){Da.conf.windowConf=oa=a.window;Da.conf.accountSettings=pa=a.accountSettings;Da.conf.unifiedConf=qa=a.unified;qa&&(qa.authToken=qa.authToken||(qa.unified&&qa.unified.connectorsSfConfig?"connectors":void 0));Da.conf.unifiedConf.authToken=Da.conf.unifiedConf.authToken||(a.unified.connectorsSfConfig?"connectors":void 0);Da.conf.uiState=ra=a.uiState;Da.conf.engConf=ra.engConf;Da.conf.authConf=y(ra.engConf);Da.conf.widgetSDK=a.unified?a.unified.widgetSDK:void 0;Da.conf.widgetSDK&&Da.conf.widgetSDK.length>0&&"object"==typeof Da.conf.widgetSDK[0]&&(Ga||!Ga&&a.unified.widgetSDK[0].widgets&&a.unified.widgetSDK[0].widgets[0]&&a.unified.widgetSDK[0].widgets[0].chat)&&(Da.conf.widgetSDK[0].widgets=i())}function i(){var b,c,d=[];a.unified.widgetSDK[0].widgets.forEach(function(a){b=a.chat&&!Ga&&j(a.chat);c=a.messaging&&Ga&&j(a.messaging);(b||c)&&d.push(a)});return d}function j(a){var b=Ka.getPropertyFromObject(Da,"conf.engConf.allowUnauthMsg");return a.enable&&(Da.conf.authConf&&a.authenticated||(!Da.conf.authConf||b)&&a.unauthenticated)}function k(){
Ja.UIModelPath();Ja.ChatModelPath();Da.conf.widgetSDK&&Ja.WidgetModelPath()}function l(){if(N&&N.bind&&N.once){N.bind({appName:"ChatStateManager",eventName:"ended",func:n});N.once({appName:"API",eventName:"initialized",func:I})}}function m(){if(N&&N.unbind){N.unbind({appName:"ChatStateManager",eventName:"ended",func:n});N.unbind({appName:"API",eventName:"initialized",func:I})}}function n(){Na=!0}function o(){sa=new window.liveperson.uiframework.latest.LPModel;Da.conf.widgetSDK&&(ua=new window.liveperson.uiframework.latest.LPModel);B(ra);ta=new lpTag.uiframework.LPPersistentModel({accountId:qa.accountId,storageKey:qa.sessionId,secureStorageLocation:qa.secureStorageLocation,modelName:"UIState"},ra);Ea={uiModel:ta,chatModel:sa};Da.conf.engConf&&Da.conf.engConf.allowUnauthMsg&&ta.bind(lpTag.unifiedWindow.uiModelPath.STATE,p)}function p(a){if(Da.conf.engConf.allowUnauthMsg){var b=a&&a.newValue;switch(b){case lpTag.unifiedWindow.State.APP_ENDED:case lpTag.unifiedWindow.State.POST_CHAT:W.dispose()}}}function q(){Da.authenticationManager=ha=new Ja.AuthenticationManager({appContext:Da})}function r(a){Da.stepUpManager=ia=new Ja.StepUpManager({appContext:Da,configs:a})}function s(a,b){La.info("_authenticate for messaging",Ia);var c=function(c){if(c)Ka.runCallback(a,null,{authenticationData:c});else{La.error("There is no authentication data",Ia);Ka.runCallback(b)}};ha.authenticate(c,b)}function t(a,b){var c=lpTag.unifiedWindow.consts.authConnectorTypes.STEP_UP,d=function(d){d?Ka.runCallback(a,null,{authenticationData:{ssoKey:d,type:c}}):Ka.runCallback(b)};ia.stepUpAuthentication(d,b)}function u(a){var b=a.engConf&&a.engConf.isPopOut,c=a.unified.external,d=a.unified.isStepUpEnabled,e=!b&&!c&&d&&ia.shouldStepUp(),f=e?"Stepping up conversation":"Not stepping up";La.info(f);return e}function v(){ra.engConf.allowUnauthMsg?N.trigger({appName:lpTag.unifiedWindow.apps.CHAT,eventName:lpTag.unifiedWindow.events.chat.ERROR,data:{errorType:lpTag.unifiedWindow.consts.errorTypes.FAILED_START_CONVERSATION_ERROR,keepError:!0}}):N.trigger({appName:lpTag.unifiedWindow.apps.CHAT,eventName:lpTag.unifiedWindow.events.chat.ERROR,data:{errorType:lpTag.unifiedWindow.consts.errorTypes.AUTH_ERROR,keepError:!0}})}function w(a){a=a||{};Da.translator=fa=new Ja.Translator(ra.engConf.lang);qa.external||(Da.heartBeatManager=V=new Ja.HeartBeatManager({accountId:qa.accountId,storageKey:qa.sessionId,secureStorageLocation:qa.secureStorageLocation,poppedOut:qa.poppedOut},{browserStateManager:J,events:N}));Da.coBrowseManager=ba=new Ja.CoBrowseManager({events:N,lpModel:sa,appContext:Da});Da.idnvManager=aa=new Ja.IdnvManager({lppModel:ta,appContext:Da});Da.uiStateManager=ca=new Ja.UIStateManager({lppModel:ta,lpModel:sa,events:N,browserStateManager:J,appContext:Da,NativeSDK:Da.conf.unifiedConf.NativeSDK});Da.featureStateManager=la=new Ja.FeatureStateManager(oa,{appContext:Da});Da.timeStampManager=na=new Ja.TimeStampManager({appContext:Da,chatModel:sa});Da.hyperlinksHelper=ma=new Ja.helpers.HyperLinksHelper;K.isDesktop()||(Da.viewPortManager=Q=new Ja.ViewPortManager(K));if(Ga)if(Ha){P=new Ja.SMSDelegate(F(),N);Da.conversationManager=_=new Ja.SMSDeflectionManager(oa,Ea,ra,{appContext:Da,apiDelegate:P,events:N})}else{P=new Ja.MessagingDelegate(F(),N);ia.configure({apiDelegate:P,lppModel:ta});Da.lineStatesManager=T=new Ja.LineStatesManager({lppModel:ta,lpModel:sa,apiDelegate:P,events:N,browserStateManager:J});Da.conversationManager=S=new Ja.ConversationManager(oa,Ea,ra,{appContext:Da,apiDelegate:P,events:N,authenticationData:a.authenticationData,stepUpManager:ia});Da.ttrManager=U=new Ja.TtrManager({lppModel:ta,lpModel:sa,events:N,features:Ma,conversationManager:S});Da.fileSharingManager=ja=new Ja.FileSharingManager({apiManager:S,appContext:Da,utils:Ka,log:La,imageParsingHelper:new lpTag.unifiedWindow.helpers.ImageParsingHelper({appContext:Da})});oa.browserNotifications&&(Da.browserNotificationsManager=ka=new Ja.BrowserNotificationsManager(oa.browserNotifications,{events:N,chatModel:sa,uiModel:ta,appContext:Da,browserStateManager:J,secureStorageLocation:qa.secureStorageLocation}))}else{P=new Ja.ChatDelegate(F(),N);Da.chatStateManager=R=new Ja.ChatStateManager(oa,Ea,ra,{appContext:Da,apiDelegate:P,events:N});qa.external&&qa.NativeSDK&&(ea=Ja.webViewPlugin({events:N,log:La,IOS:qa.IOS}))}if(Da.conf.widgetSDK){O=new lpTag.Events;Da.WidgetManager=da=new Ja.WidgetManager({events:N,lpModel:sa,lppModel:ta,wsdkModel:ua,appContext:Da,windowSDKEvents:O})}Da.transcriptManager=X=new Ja.TranscriptManager({events:N,lpModel:sa,lppModel:ta,apiDelegate:P,coBrowseManager:ba,idnvManager:aa,browserStateManager:J,lineStatesManager:T,appContext:Da});Da.SecureFormManager=Y=new Ja.SecureFormManager({events:N,lpModel:sa,lppModel:ta,browserStateManager:J,apiManager:Ga?S:R,appContext:Da});Da.richContentManager=Z=new Ja.RichContentManager({lpModel:sa,lppModel:ta,apiManager:Ga?S:R,appContext:Da});Ga&&(Da.quickRepliesManager=$=new Ja.QuickRepliesManager({apiManager:S,appContext:Da}))}function x(){var a={agentImage:!0,logoImage:!0};Da.themer=ga=new lpTag.unifiedWindow.Themer(C(oa),qa,a);Ja.soundManager(Ea,K,qa,ka)}function y(a){var b=lpTag.unifiedWindow.consts.authConnectorTypes,c=a.connector&&a.connector.type,d=Ka.getURLParams(window.location.search),e=c===b.OAUTH_CODE||c===b.OAUTH_IMPLICIT||!a.async&&c===b.S2S;return e?{connector:a.connector,ssoKey:z(d),redirect_uri:A()}:a.authConnId?{connector:{id:a.authConnId},ssoKey:z(d),redirect_uri:A()}:null}function z(a){return va||a&&a.ssoKey||qa.authToken}function A(a){return wa||a&&a.redirect_uri||(!qa.useOAuth2Standard||!qa.external)&&lpTag.unifiedWindow.consts.defaultRedirectUri||lpTag.lpUtils.getCurrentUrlWithoutParams()}function B(a){a.engConf&&a.engConf.ssoKey&&delete a.engConf.ssoKey}function C(a){return Ka.isEmpty(a.customStyle)?lpTag.unifiedWindow.defaultStyle:a.customStyle}function D(){Da={conf:{},keys:{}}}function E(){Da.keys.appKey=Ca=qa.debug?Qa.chat.qa:Qa.chat.production}function F(){var a={isStepUpEnabled:qa.isStepUpEnabled,connectorsSfConfig:qa.connectorsSfConfig,accountId:qa.accountId,availabilityPolicy:ra.engConf.availabilityPolicy,appKey:Ca,domain:qa.domain,asyncMessagingDomain:qa.asyncMessagingDomain,idpDomain:qa.idpDomain,messagingHistoryDomain:qa.messagingHistoryDomain,secureStorageLocation:qa.secureStorageLocation,sessionId:qa.sessionId,useSecureStorage:!ra.engConf.isPopOut,failureTolerance:19,reconnectTimeout:H(qa.chatReconnectTimeout),ssoKey:z(Da.conf.authConf),redirect_uri:A(Da.conf.authConf),survey:ra.engConf.survey,customVariables:ra.engConf.customVariables,svid:ra.engConf.svid,ssid:ra.engConf.ssid,scid:ra.engConf.scid,eid:ra.engConf.eid,ename:ra.engConf.ename,cid:ra.engConf.cid,connectorId:G(ra.engConf),lang:ra.engConf.lang,runWithRules:ra.engConf.runWithRules,visitorId:ra.engConf.visitorId,interactionTimeout:W.getSessionTimeout(),skill:ra.engConf.skill,skillId:ra.engConf.skillId,agent:ra.engConf.agent,maxWaitTime:ra.engConf.maxWaitTime,visitorProfile:ra.engConf.visitorProfile,surveyName:ra.engConf.surveyName,visitorIp:ra.engConf.visitorIp,serviceQueue:ra.engConf.serviceQueue,queuePriority:ra.engConf.queuePriority,subscription:ra.engConf.subscription,preSurveyId:oa.surveyPreChatId,preChatLines:ra.engConf.preChatLines,surveyOfflineId:ra.engConf.isOffline&&ra.engConf.surveyOfflineId||oa.surveyOfflineId,exitSurveyId:oa.surveyPostChatId,smsPreFormId:oa.smsPreFormId,offsiteEngContext:ra.engConf.isOffline&&ra.engConf.offsiteEngContext};return a}function G(a){return a&&a.allowUnauthMsg&&a.connector&&a.connector.id}function H(a){var b=K.getDeviceFamilyName().toLowerCase();return a&&"number"==typeof a[b]?1e3*a[b]:null}function I(){Fa&&clearTimeout(Fa);if(Da){xa=new lpTag.unifiedWindow.WrapperWindowExtender({models:Ea,appContext:Da,wrapWithDiv:!1});Ba=new lpTag.unifiedWindow.SliderViewController({models:Ea,appContext:Da,target:Da.wrapperWindow.getMaximizedElement(),textInjection:Da.conf.unifiedConf});ya=new lpTag.unifiedWindow.MaximizedViewController({models:Ea,appContext:Da,textInjection:Da.conf.unifiedConf,target:document.querySelector('[data-lp-point="maximized"] [data-lp-point="main"]'),slider:Ba});za=new lpTag.unifiedWindow.MinimizedViewController({models:Ea,appContext:Da,textInjection:Da.conf.unifiedConf,view:document.querySelector('[data-lp-point="minimized"] [data-lp-point="main"]')});Da.conf.widgetSDK&&(Aa=new lpTag.unifiedWindow.WidgetManagerViewController({appContext:Da,sliderAPI:Ba,windowSDKEvents:O,wsdkModel:ua}))}else if(Oa>=Pa){La.info("_createViewControllers: retrying numberOfRetries="+Pa,Ia);Pa++;Fa=setTimeout(I,0)}else La.error("_createViewControllers: number of retries exceeded.",Ia)}var J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia="Application",Ja=lpTag.unifiedWindow,Ka=lpTag.taglets.lpUtil,La=Ja.log,Ma=lpTag&&lpTag.features,Na=!1,Oa=10,Pa=0,Qa={chat:{dev:"e54d98e4810e4c93a8a7738bb3e9a321",qa:"50aae09500274faa9aea8ccf6c78ce28",production:"721c180b09eb463d9f3191c41762bb68"},collaboration:{dev:"a213e4a5450848cbbf12f63747d38376",qa:"c533acb2dd7e439995325014f84b3484",production:"42c22b57e5144838a72d891fbbf160ea"}};c(a,b);return{methods:{isDisposed:f,end:e}}};lpTag.unifiedWindow.Application.v="10.0.0.2-release_5020";